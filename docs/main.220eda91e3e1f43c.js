"use strict";(self.webpackChunkOrder=self.webpackChunkOrder||[]).push([[179],{2011:(ft,Ce,F)=>{F.d(Ce,{Dh:()=>Fe,GT:()=>pe,cc:()=>De,hO:()=>Ue,on:()=>j,pX:()=>oe,xv:()=>me});var d=F(2223),J=F(9260),L=F(4976);ft=F.hmd(ft);const ne=["ngOnDestroy"],oe=(Le,Tt,pt,ie={})=>new Proxy(Le,{get:(ve,X)=>pt.runOutsideAngular(()=>{var _e;if(Le[X])return!(null===(_e=ie?.spy)||void 0===_e)&&_e.get&&ie.spy.get(X,Le[X]),Le[X];if(ne.indexOf(X)>-1)return()=>{};const Ne=Tt.toPromise().then(He=>{const ae=He&&He[X];return"function"==typeof ae?ae.bind(He):ae&&ae.then?ae.then(ze=>pt.run(()=>ze)):pt.run(()=>ae)});return new Proxy(()=>{},{get:(He,ae)=>Ne[ae],apply:(He,ae,ze)=>Ne.then(Qt=>{var Mr;const pi=Qt&&Qt(...ze);return!(null===(Mr=ie?.spy)||void 0===Mr)&&Mr.apply&&ie.spy.apply(X,ze,pi),pi})})})}),pe=(Le,Tt)=>{Tt.forEach(pt=>{Object.getOwnPropertyNames(pt.prototype||pt).forEach(ie=>{Object.defineProperty(Le.prototype,ie,Object.getOwnPropertyDescriptor(pt.prototype||pt,ie))})})};class ye{constructor(Tt){return Tt}}const Fe=new d.OlP("angularfire2.app.options"),me=new d.OlP("angularfire2.app.name");function j(Le,Tt,pt){const ve="object"==typeof pt&&pt||{};ve.name=ve.name||"string"==typeof pt&&pt||"[DEFAULT]";const _e=J.Z.apps.filter(Ne=>Ne&&Ne.name===ve.name)[0]||Tt.runOutsideAngular(()=>J.Z.initializeApp(Le,ve));try{JSON.stringify(Le)!==JSON.stringify(_e.options)&&z("error",`${_e.name} Firebase App already initialized with different options${ft.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ye(_e)}const z=(Le,...Tt)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Le](...Tt)},te={provide:ye,useFactory:j,deps:[Fe,d.R0b,[new d.FiY,me]]};let Ue=(()=>{class Le{constructor(pt){J.Z.registerVersion("angularfire",L.q4.full,"core"),J.Z.registerVersion("angularfire",L.q4.full,"app-compat"),J.Z.registerVersion("angular",d.q4F.full,pt.toString())}static initializeApp(pt,ie){return{ngModule:Le,providers:[{provide:Fe,useValue:pt},{provide:me,useValue:ie}]}}}return Le.\u0275fac=function(pt){return new(pt||Le)(d.LFG(d.Lbi))},Le.\u0275mod=d.oAB({type:Le}),Le.\u0275inj=d.cJS({providers:[te]}),Le})();function De(Le,Tt,pt,ie,ve){const[,X,_e]=globalThis.\u0275AngularfireInstanceCache.find(Ne=>Ne[0]===Le)||[];if(X)return function nt(Le,Tt){try{return Le.toString()===Tt.toString()}catch{return Le===Tt}}(ve,_e)||(Qe("error",`${Tt} was already initialized on the ${pt} Firebase App with different settings.${Pe?" You may need to reload as Firebase is not HMR aware.":""}`),Qe("warn",{is:ve,was:_e})),X;{const Ne=ie();return globalThis.\u0275AngularfireInstanceCache.push([Le,Ne,ve]),Ne}}const Pe=!!ft.hot,Qe=(Le,...Tt)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Le](...Tt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(ft,Ce,F)=>{F.d(Ce,{q4:()=>gr,iC:()=>_d,fc:()=>el,HU:()=>md,vb:()=>__,JM:()=>Xu});var d=F(2223),J=F(259),L=F(5861),ne=F(6881),oe=F(2090),pe=F(4859),ye=F(1877);const Fe=(C,D)=>D.some(M=>C instanceof M);let me,j;const Ue=new WeakMap,De=new WeakMap,nt=new WeakMap,Pe=new WeakMap,Qe=new WeakMap;let pt={get(C,D,M){if(C instanceof IDBTransaction){if("done"===D)return De.get(C);if("objectStoreNames"===D)return C.objectStoreNames||nt.get(C);if("store"===D)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return _e(C[D])},set:(C,D,M)=>(C[D]=M,!0),has:(C,D)=>C instanceof IDBTransaction&&("done"===D||"store"===D)||D in C};function X(C){return"function"==typeof C?function ve(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function te(){return j||(j=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...D){return C.apply(Ne(this),D),_e(Ue.get(this))}:function(...D){return _e(C.apply(Ne(this),D))}:function(D,...M){const V=C.call(Ne(this),D,...M);return nt.set(V,D.sort?D.sort():[D]),_e(V)}}(C):(C instanceof IDBTransaction&&function Tt(C){if(De.has(C))return;const D=new Promise((M,V)=>{const q=()=>{C.removeEventListener("complete",Y),C.removeEventListener("error",fe),C.removeEventListener("abort",fe)},Y=()=>{M(),q()},fe=()=>{V(C.error||new DOMException("AbortError","AbortError")),q()};C.addEventListener("complete",Y),C.addEventListener("error",fe),C.addEventListener("abort",fe)});De.set(C,D)}(C),Fe(C,function z(){return me||(me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,pt):C)}function _e(C){if(C instanceof IDBRequest)return function Le(C){const D=new Promise((M,V)=>{const q=()=>{C.removeEventListener("success",Y),C.removeEventListener("error",fe)},Y=()=>{M(_e(C.result)),q()},fe=()=>{V(C.error),q()};C.addEventListener("success",Y),C.addEventListener("error",fe)});return D.then(M=>{M instanceof IDBCursor&&Ue.set(M,C)}).catch(()=>{}),Qe.set(D,C),D}(C);if(Pe.has(C))return Pe.get(C);const D=X(C);return D!==C&&(Pe.set(C,D),Qe.set(D,C)),D}const Ne=C=>Qe.get(C),ze=["get","getKey","getAll","getAllKeys","count"],Qt=["put","add","delete","clear"],Mr=new Map;function pi(C,D){if(!(C instanceof IDBDatabase)||D in C||"string"!=typeof D)return;if(Mr.get(D))return Mr.get(D);const M=D.replace(/FromIndex$/,""),V=D!==M,q=Qt.includes(M);if(!(M in(V?IDBIndex:IDBObjectStore).prototype)||!q&&!ze.includes(M))return;const Y=function(){var fe=(0,L.Z)(function*(Ke,...Ge){const dt=this.transaction(Ke,q?"readwrite":"readonly");let xt=dt.store;return V&&(xt=xt.index(Ge.shift())),(yield Promise.all([xt[M](...Ge),q&&dt.done]))[0]});return function(Ge){return fe.apply(this,arguments)}}();return Mr.set(D,Y),Y}!function ie(C){pt=C(pt)}(C=>({...C,get:(D,M,V)=>pi(D,M)||C.get(D,M,V),has:(D,M)=>!!pi(D,M)||C.has(D,M)}));const bo="@firebase/installations",de="0.6.4",we=1e4,be=`w:${de}`,Re="FIS_v2",Ze="https://firebaseinstallations.googleapis.com/v1",je=36e5,ut=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function mt(C){return C instanceof oe.ZR&&C.code.includes("request-failed")}function Dn({projectId:C}){return`${Ze}/projects/${C}/installations`}function an(C){return{token:C.token,requestStatus:2,expiresIn:To(C.expiresIn),creationTime:Date.now()}}function $n(C,D){return rn.apply(this,arguments)}function rn(){return(rn=(0,L.Z)(function*(C,D){const V=(yield D.json()).error;return ut.create("request-failed",{requestName:C,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function Ti({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function si(C){return rr.apply(this,arguments)}function rr(){return(rr=(0,L.Z)(function*(C){const D=yield C();return D.status>=500&&D.status<600?C():D})).apply(this,arguments)}function To(C){return Number(C.replace("s","000"))}function Di(){return(Di=(0,L.Z)(function*({appConfig:C,heartbeatServiceProvider:D},{fid:M}){const V=Dn(C),q=Ti(C),Y=D.getImmediate({optional:!0});if(Y){const dt=yield Y.getHeartbeatsHeader();dt&&q.append("x-firebase-client",dt)}const Ke={method:"POST",headers:q,body:JSON.stringify({fid:M,authVersion:Re,appId:C.appId,sdkVersion:be})},Ge=yield si(()=>fetch(V,Ke));if(Ge.ok){const dt=yield Ge.json();return{fid:dt.fid||M,registrationStatus:2,refreshToken:dt.refreshToken,authToken:an(dt.authToken)}}throw yield $n("Create Installation",Ge)})).apply(this,arguments)}function Si(C){return new Promise(D=>{setTimeout(D,C)})}const Cu=/^[cdef][\w-]{21}$/,Xe="";function _t(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const M=function yt(C){return function Do(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Cu.test(M)?M:Xe}catch{return Xe}}function In(C){return`${C.appName}!${C.appId}`}const Bn=new Map;function gi(C,D){const M=In(C);Aa(M,D),function pn(C,D){const M=function Wt(){return!$r&&"BroadcastChannel"in self&&($r=new BroadcastChannel("[Firebase] FID Change"),$r.onmessage=C=>{Aa(C.data.key,C.data.fid)}),$r}();M&&M.postMessage({key:C,fid:D}),function ls(){0===Bn.size&&$r&&($r.close(),$r=null)}()}(M,D)}function Aa(C,D){const M=Bn.get(C);if(M)for(const V of M)V(D)}let $r=null;const So="firebase-installations-database",Na=1,Ai="firebase-installations-store";let Ms=null;function xr(){return Ms||(Ms=function He(C,D,{blocked:M,upgrade:V,blocking:q,terminated:Y}={}){const fe=indexedDB.open(C,D),Ke=_e(fe);return V&&fe.addEventListener("upgradeneeded",Ge=>{V(_e(fe.result),Ge.oldVersion,Ge.newVersion,_e(fe.transaction))}),M&&fe.addEventListener("blocked",()=>M()),Ke.then(Ge=>{Y&&Ge.addEventListener("close",()=>Y()),q&&Ge.addEventListener("versionchange",()=>q())}).catch(()=>{}),Ke}(So,Na,{upgrade:(C,D)=>{0===D&&C.createObjectStore(Ai)}})),Ms}function hr(C,D){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,L.Z)(function*(C,D){const M=In(C),q=(yield xr()).transaction(Ai,"readwrite"),Y=q.objectStore(Ai),fe=yield Y.get(M);return yield Y.put(D,M),yield q.done,(!fe||fe.fid!==D.fid)&&gi(C,D.fid),D})).apply(this,arguments)}function Rs(C){return un.apply(this,arguments)}function un(){return(un=(0,L.Z)(function*(C){const D=In(C),V=(yield xr()).transaction(Ai,"readwrite");yield V.objectStore(Ai).delete(D),yield V.done})).apply(this,arguments)}function xs(C,D){return en.apply(this,arguments)}function en(){return(en=(0,L.Z)(function*(C,D){const M=In(C),q=(yield xr()).transaction(Ai,"readwrite"),Y=q.objectStore(Ai),fe=yield Y.get(M),Ke=D(fe);return void 0===Ke?yield Y.delete(M):yield Y.put(Ke,M),yield q.done,Ke&&(!fe||fe.fid!==Ke.fid)&&gi(C,Ke.fid),Ke})).apply(this,arguments)}function $(C){return H.apply(this,arguments)}function H(){return H=(0,L.Z)(function*(C){let D;const M=yield xs(C.appConfig,V=>{const q=function Z(C){return Cn(C||{fid:_t(),registrationStatus:0})}(V),Y=function Ie(C,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(ut.create("app-offline"))};const M={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},V=function ue(C,D){return lt.apply(this,arguments)}(C,M);return{installationEntry:M,registrationPromise:V}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:vt(C)}:{installationEntry:D}}(C,q);return D=Y.registrationPromise,Y.installationEntry});return M.fid===Xe?{installationEntry:yield D}:{installationEntry:M,registrationPromise:D}}),H.apply(this,arguments)}function lt(){return lt=(0,L.Z)(function*(C,D){try{const M=yield function Sa(C,D){return Di.apply(this,arguments)}(C,D);return hr(C.appConfig,M)}catch(M){throw mt(M)&&409===M.customData.serverCode?yield Rs(C.appConfig):yield hr(C.appConfig,{fid:D.fid,registrationStatus:0}),M}}),lt.apply(this,arguments)}function vt(C){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,L.Z)(function*(C){let D=yield An(C.appConfig);for(;1===D.registrationStatus;)yield Si(100),D=yield An(C.appConfig);if(0===D.registrationStatus){const{installationEntry:M,registrationPromise:V}=yield $(C);return V||M}return D})).apply(this,arguments)}function An(C){return xs(C,D=>{if(!D)throw ut.create("installation-not-found");return Cn(D)})}function Cn(C){return function Nt(C){return 1===C.registrationStatus&&C.registrationTime+we<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function Pr(){return(Pr=(0,L.Z)(function*({appConfig:C,heartbeatServiceProvider:D},M){const V=function Gi(C,{fid:D}){return`${Dn(C)}/${D}/authTokens:generate`}(C,M),q=function Zn(C,{refreshToken:D}){const M=Ti(C);return M.append("Authorization",function Jo(C){return`${Re} ${C}`}(D)),M}(C,M),Y=D.getImmediate({optional:!0});if(Y){const dt=yield Y.getHeartbeatsHeader();dt&&q.append("x-firebase-client",dt)}const Ke={method:"POST",headers:q,body:JSON.stringify({installation:{sdkVersion:be,appId:C.appId}})},Ge=yield si(()=>fetch(V,Ke));if(Ge.ok)return an(yield Ge.json());throw yield $n("Generate Auth Token",Ge)})).apply(this,arguments)}function Ps(C){return Ni.apply(this,arguments)}function Ni(){return Ni=(0,L.Z)(function*(C,D=!1){let M;const V=yield xs(C.appConfig,Y=>{if(!$t(Y))throw ut.create("not-registered");const fe=Y.authToken;if(!D&&function sn(C){return 2===C.requestStatus&&!function fr(C){const D=Date.now();return D<C.creationTime||C.creationTime+C.expiresIn<D+je}(C)}(fe))return Y;if(1===fe.requestStatus)return M=function he(C,D){return re.apply(this,arguments)}(C,D),Y;{if(!navigator.onLine)throw ut.create("app-offline");const Ke=function ir(C){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:D})}(Y);return M=function ht(C,D){return Rt.apply(this,arguments)}(C,Ke),Ke}});return M?yield M:V.authToken}),Ni.apply(this,arguments)}function re(){return(re=(0,L.Z)(function*(C,D){let M=yield Oe(C.appConfig);for(;1===M.authToken.requestStatus;)yield Si(100),M=yield Oe(C.appConfig);const V=M.authToken;return 0===V.requestStatus?Ps(C,D):V})).apply(this,arguments)}function Oe(C){return xs(C,D=>{if(!$t(D))throw ut.create("not-registered");return function Js(C){return 1===C.requestStatus&&C.requestTime+we<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Rt(){return Rt=(0,L.Z)(function*(C,D){try{const M=yield function Jt(C,D){return Pr.apply(this,arguments)}(C,D),V=Object.assign(Object.assign({},D),{authToken:M});return yield hr(C.appConfig,V),M}catch(M){if(!mt(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const V=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield hr(C.appConfig,V)}else yield Rs(C.appConfig);throw M}}),Rt.apply(this,arguments)}function $t(C){return void 0!==C&&2===C.registrationStatus}function bu(){return(bu=(0,L.Z)(function*(C){const D=C,{installationEntry:M,registrationPromise:V}=yield $(D);return V?V.catch(console.error):Ps(D).catch(console.error),M.fid})).apply(this,arguments)}function Mi(){return Mi=(0,L.Z)(function*(C,D=!1){const M=C;return yield function ph(C){return zi.apply(this,arguments)}(M),(yield Ps(M,D)).token}),Mi.apply(this,arguments)}function zi(){return(zi=(0,L.Z)(function*(C){const{registrationPromise:D}=yield $(C);D&&(yield D)})).apply(this,arguments)}function ea(C){return ut.create("missing-app-config-values",{valueName:C})}const mh="installations",o_=C=>{const D=C.getProvider("app").getImmediate(),M=function Il(C){if(!C||!C.options)throw ea("App Configuration");if(!C.name)throw ea("App Name");const D=["projectId","apiKey","appId"];for(const M of D)if(!C.options[M])throw ea(M);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(D);return{app:D,appConfig:M,heartbeatServiceProvider:(0,ne._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Xs=C=>{const D=C.getProvider("app").getImmediate(),M=(0,ne._getProvider)(D,mh).getImmediate();return{getId:()=>function Xo(C){return bu.apply(this,arguments)}(M),getToken:q=>function fh(C){return Mi.apply(this,arguments)}(M,q)}};(function Cp(){(0,ne._registerComponent)(new pe.wA(mh,o_,"PUBLIC")),(0,ne._registerComponent)(new pe.wA("installations-internal",Xs,"PRIVATE"))})(),(0,ne.registerVersion)(bo,de),(0,ne.registerVersion)(bo,de,"esm2017");const Du="@firebase/remote-config",yn=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class mi{constructor(D,M,V,q){this.client=D,this.storage=M,this.storageCache=V,this.logger=q}isCachedDataFresh(D,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-M,q=V<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${q}.`),q}fetch(D){var M=this;return(0,L.Z)(function*(){const[V,q]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(q&&M.isCachedDataFresh(D.cacheMaxAgeMillis,V))return q;D.eTag=q&&q.eTag;const Y=yield M.client.fetch(D),fe=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Y.status&&fe.push(M.storage.setLastSuccessfulFetchResponse(Y)),yield Promise.all(fe),Y})()}}function vh(C=navigator){return C.languages&&C.languages[0]||C.language}class Os{constructor(D,M,V,q,Y,fe){this.firebaseInstallations=D,this.sdkVersion=M,this.namespace=V,this.projectId=q,this.apiKey=Y,this.appId=fe}fetch(D){var M=this;return(0,L.Z)(function*(){const[V,q]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),fe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ke={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},Ge={sdk_version:M.sdkVersion,app_instance_id:V,app_instance_id_token:q,app_id:M.appId,language_code:vh()},dt={method:"POST",headers:Ke,body:JSON.stringify(Ge)},xt=fetch(fe,dt),St=new Promise((Yi,_s)=>{D.signal.addEventListener(()=>{const ec=new Error("The operation was aborted.");ec.name="AbortError",_s(ec)})});let Xr;try{yield Promise.race([xt,St]),Xr=yield xt}catch(Yi){let _s="fetch-client-network";throw"AbortError"===Yi?.name&&(_s="fetch-timeout"),yn.create(_s,{originalErrorMessage:Yi?.message})}let qn=Xr.status;const fo=Xr.headers.get("ETag")||void 0;let tl,Li;if(200===Xr.status){let Yi;try{Yi=yield Xr.json()}catch(_s){throw yn.create("fetch-client-parse",{originalErrorMessage:_s?.message})}tl=Yi.entries,Li=Yi.state}if("INSTANCE_STATE_UNSPECIFIED"===Li?qn=500:"NO_CHANGE"===Li?qn=304:("NO_TEMPLATE"===Li||"EMPTY_CONFIG"===Li)&&(tl={}),304!==qn&&200!==qn)throw yn.create("fetch-status",{httpStatus:qn});return{status:qn,eTag:fo,config:tl}})()}}class Au{constructor(D,M){this.client=D,this.storage=M}fetch(D){var M=this;return(0,L.Z)(function*(){const V=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(D,V)})()}attemptFetch(D,{throttleEndTimeMillis:M,backoffCount:V}){var q=this;return(0,L.Z)(function*(){yield function Gn(C,D){return new Promise((M,V)=>{const q=Math.max(D-Date.now(),0),Y=setTimeout(M,q);C.addEventListener(()=>{clearTimeout(Y),V(yn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,M);try{const Y=yield q.client.fetch(D);return yield q.storage.deleteThrottleMetadata(),Y}catch(Y){if(!function Ra(C){if(!(C instanceof oe.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}(Y))throw Y;const fe={throttleEndTimeMillis:Date.now()+(0,oe.$s)(V),backoffCount:V+1};return yield q.storage.setThrottleMetadata(fe),q.attemptFetch(D,fe)}})()}}class wh{constructor(D,M,V,q,Y){this.app=D,this._client=M,this._storageCache=V,this._storage=q,this._logger=Y,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function xi(C,D){const M=C.target.error||void 0;return yn.create(D,{originalErrorMessage:M&&M?.message})}const Yn="app_namespace_store";class JC{constructor(D,M,V,q=function Yt(){return new Promise((C,D)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=V=>{D(xi(V,"storage-open"))},M.onsuccess=V=>{C(V.target.result)},M.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(Yn,{keyPath:"compositeKey"})}}catch(M){D(yn.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=D,this.appName=M,this.namespace=V,this.openDbPromise=q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var M=this;return(0,L.Z)(function*(){const V=yield M.openDbPromise;return new Promise((q,Y)=>{const Ke=V.transaction([Yn],"readonly").objectStore(Yn),Ge=M.createCompositeKey(D);try{const dt=Ke.get(Ge);dt.onerror=xt=>{Y(xi(xt,"storage-get"))},dt.onsuccess=xt=>{const St=xt.target.result;q(St?St.value:void 0)}}catch(dt){Y(yn.create("storage-get",{originalErrorMessage:dt?.message}))}})})()}set(D,M){var V=this;return(0,L.Z)(function*(){const q=yield V.openDbPromise;return new Promise((Y,fe)=>{const Ge=q.transaction([Yn],"readwrite").objectStore(Yn),dt=V.createCompositeKey(D);try{const xt=Ge.put({compositeKey:dt,value:M});xt.onerror=St=>{fe(xi(St,"storage-set"))},xt.onsuccess=()=>{Y()}}catch(xt){fe(yn.create("storage-set",{originalErrorMessage:xt?.message}))}})})()}delete(D){var M=this;return(0,L.Z)(function*(){const V=yield M.openDbPromise;return new Promise((q,Y)=>{const Ke=V.transaction([Yn],"readwrite").objectStore(Yn),Ge=M.createCompositeKey(D);try{const dt=Ke.delete(Ge);dt.onerror=xt=>{Y(xi(xt,"storage-delete"))},dt.onsuccess=()=>{q()}}catch(dt){Y(yn.create("storage-delete",{originalErrorMessage:dt?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class bl{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,L.Z)(function*(){const M=D.storage.getLastFetchStatus(),V=D.storage.getLastSuccessfulFetchTimestampMillis(),q=D.storage.getActiveConfig(),Y=yield M;Y&&(D.lastFetchStatus=Y);const fe=yield V;fe&&(D.lastSuccessfulFetchTimestampMillis=fe);const Ke=yield q;Ke&&(D.activeConfig=Ke)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function ra(){return ia.apply(this,arguments)}function ia(){return(ia=(0,L.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}!function ks(){(0,ne._registerComponent)(new pe.wA("remote-config",function C(D,{instanceIdentifier:M}){const V=D.getProvider("app").getImmediate(),q=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw yn.create("registration-window");if(!(0,oe.hl)())throw yn.create("indexed-db-unavailable");const{projectId:Y,apiKey:fe,appId:Ke}=V.options;if(!Y)throw yn.create("registration-project-id");if(!fe)throw yn.create("registration-api-key");if(!Ke)throw yn.create("registration-app-id");const Ge=new JC(Ke,V.name,M=M||"firebase"),dt=new bl(Ge),xt=new ye.Yd(Du);xt.logLevel=ye.in.ERROR;const St=new Os(q,ne.SDK_VERSION,M,Y,fe,Ke),Xr=new Au(St,Ge),qn=new mi(Xr,Ge,dt,xt),fo=new wh(V,qn,dt,Ge,xt);return function Bt(C){const D=(0,oe.m9)(C);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(fo),fo},"PUBLIC").setMultipleInstances(!0)),(0,ne.registerVersion)(Du,"0.4.4"),(0,ne.registerVersion)(Du,"0.4.4","esm2017")}();const Ir=(C,D)=>D.some(M=>C instanceof M);let a_,Qn;const to=new WeakMap,no=new WeakMap,kr=new WeakMap,zr=new WeakMap,sa=new WeakMap;let Nu={get(C,D,M){if(C instanceof IDBTransaction){if("done"===D)return no.get(C);if("objectStoreNames"===D)return C.objectStoreNames||kr.get(C);if("store"===D)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return Fs(C[D])},set:(C,D,M)=>(C[D]=M,!0),has:(C,D)=>C instanceof IDBTransaction&&("done"===D||"store"===D)||D in C};function l_(C){return"function"==typeof C?function Tp(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Pa(){return Qn||(Qn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...D){return C.apply($c(this),D),Fs(to.get(this))}:function(...D){return Fs(C.apply($c(this),D))}:function(D,...M){const V=C.call($c(this),D,...M);return kr.set(V,D.sort?D.sort():[D]),Fs(V)}}(C):(C instanceof IDBTransaction&&function jc(C){if(no.has(C))return;const D=new Promise((M,V)=>{const q=()=>{C.removeEventListener("complete",Y),C.removeEventListener("error",fe),C.removeEventListener("abort",fe)},Y=()=>{M(),q()},fe=()=>{V(C.error||new DOMException("AbortError","AbortError")),q()};C.addEventListener("complete",Y),C.addEventListener("error",fe),C.addEventListener("abort",fe)});no.set(C,D)}(C),Ir(C,function Pi(){return a_||(a_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,Nu):C)}function Fs(C){if(C instanceof IDBRequest)return function u_(C){const D=new Promise((M,V)=>{const q=()=>{C.removeEventListener("success",Y),C.removeEventListener("error",fe)},Y=()=>{M(Fs(C.result)),q()},fe=()=>{V(C.error),q()};C.addEventListener("success",Y),C.addEventListener("error",fe)});return D.then(M=>{M instanceof IDBCursor&&to.set(M,C)}).catch(()=>{}),sa.set(D,C),D}(C);if(zr.has(C))return zr.get(C);const D=l_(C);return D!==C&&(zr.set(C,D),sa.set(D,C)),D}const $c=C=>sa.get(C);function Gc(C,D,{blocked:M,upgrade:V,blocking:q,terminated:Y}={}){const fe=indexedDB.open(C,D),Ke=Fs(fe);return V&&fe.addEventListener("upgradeneeded",Ge=>{V(Fs(fe.result),Ge.oldVersion,Ge.newVersion,Fs(fe.transaction))}),M&&fe.addEventListener("blocked",()=>M()),Ke.then(Ge=>{Y&&Ge.addEventListener("close",()=>Y()),q&&Ge.addEventListener("versionchange",()=>q())}).catch(()=>{}),Ke}function Mu(C,{blocked:D}={}){const M=indexedDB.deleteDatabase(C);return D&&M.addEventListener("blocked",()=>D()),Fs(M).then(()=>{})}const Eh=["get","getKey","getAll","getAllKeys","count"],Dp=["put","add","delete","clear"],zc=new Map;function Ih(C,D){if(!(C instanceof IDBDatabase)||D in C||"string"!=typeof D)return;if(zc.get(D))return zc.get(D);const M=D.replace(/FromIndex$/,""),V=D!==M,q=Dp.includes(M);if(!(M in(V?IDBIndex:IDBObjectStore).prototype)||!q&&!Eh.includes(M))return;const Y=function(){var fe=(0,L.Z)(function*(Ke,...Ge){const dt=this.transaction(Ke,q?"readwrite":"readonly");let xt=dt.store;return V&&(xt=xt.index(Ge.shift())),(yield Promise.all([xt[M](...Ge),q&&dt.done]))[0]});return function(Ge){return fe.apply(this,arguments)}}();return zc.set(D,Y),Y}!function bp(C){Nu=C(Nu)}(C=>({...C,get:(D,M,V)=>Ih(D,M)||C.get(D,M,V),has:(D,M)=>!!Ih(D,M)||C.has(D,M)}));const Ch="/firebase-messaging-sw.js",Ru="/firebase-cloud-messaging-push-scope",xu="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",c_="https://fcmregistrations.googleapis.com/v1",qc="google.c.a.c_id",Jn="google.c.a.c_l",Mo="google.c.a.ts";var ro=(()=>((ro=ro||{}).PUSH_RECEIVED="push-received",ro.NOTIFICATION_CLICKED="notification-clicked",ro))();function ds(C){const D=new Uint8Array(C);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Tl(C){const M=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(M),q=new Uint8Array(V.length);for(let Y=0;Y<V.length;++Y)q[Y]=V.charCodeAt(Y);return q}const Pu="fcm_token_details_db",bh=5,Ou="fcm_token_object_Store";function ai(){return ai=(0,L.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Y=>Y.name).includes(Pu))return null;let D=null;return(yield Gc(Pu,bh,{upgrade:(V=(0,L.Z)(function*(q,Y,fe,Ke){var Ge;if(Y<2||!q.objectStoreNames.contains(Ou))return;const dt=Ke.objectStore(Ou),xt=yield dt.index("fcmSenderId").get(C);if(yield dt.clear(),xt)if(2===Y){const St=xt;if(!St.auth||!St.p256dh||!St.endpoint)return;D={token:St.fcmToken,createTime:null!==(Ge=St.createTime)&&void 0!==Ge?Ge:Date.now(),subscriptionOptions:{auth:St.auth,p256dh:St.p256dh,endpoint:St.endpoint,swScope:St.swScope,vapidKey:"string"==typeof St.vapidKey?St.vapidKey:ds(St.vapidKey)}}}else if(3===Y){const St=xt;D={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:ds(St.auth),p256dh:ds(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:ds(St.vapidKey)}}}else if(4===Y){const St=xt;D={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:ds(St.auth),p256dh:ds(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:ds(St.vapidKey)}}}}),function(Y,fe,Ke,Ge){return V.apply(this,arguments)})})).close(),yield Mu(Pu),yield Mu("fcm_vapid_details_db"),yield Mu("undefined"),function Dl(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:D}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}(D)?D:null;var V}),ai.apply(this,arguments)}const or="firebase-messaging-database",Sl=1,Wi="firebase-messaging-store";let ku=null;function Oa(){return ku||(ku=Gc(or,Sl,{upgrade:(C,D)=>{0===D&&C.createObjectStore(Wi)}})),ku}function ka(C){return Fa.apply(this,arguments)}function Fa(){return Fa=(0,L.Z)(function*(C){const D=oa(C),V=yield(yield Oa()).transaction(Wi).objectStore(Wi).get(D);if(V)return V;{const q=yield function h_(C){return ai.apply(this,arguments)}(C.appConfig.senderId);if(q)return yield Ap(C,q),q}}),Fa.apply(this,arguments)}function Ap(C,D){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,L.Z)(function*(C,D){const M=oa(C),q=(yield Oa()).transaction(Wi,"readwrite");return yield q.objectStore(Wi).put(D,M),yield q.done,D})).apply(this,arguments)}function Al(){return(Al=(0,L.Z)(function*(C){const D=oa(C),V=(yield Oa()).transaction(Wi,"readwrite");yield V.objectStore(Wi).delete(D),yield V.done})).apply(this,arguments)}function oa({appConfig:C}){return C.appId}const ui=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Np(C,D){return Th.apply(this,arguments)}function Th(){return(Th=(0,L.Z)(function*(C,D){const M=yield Yc(C),V=Qc(D),q={method:"POST",headers:M,body:JSON.stringify(V)};let Y;try{Y=yield(yield fetch(Lu(C.appConfig),q)).json()}catch(fe){throw ui.create("token-subscribe-failed",{errorInfo:fe?.toString()})}if(Y.error)throw ui.create("token-subscribe-failed",{errorInfo:Y.error.message});if(!Y.token)throw ui.create("token-subscribe-no-token");return Y.token})).apply(this,arguments)}function Dh(){return(Dh=(0,L.Z)(function*(C,D){const M=yield Yc(C),V=Qc(D.subscriptionOptions),q={method:"PATCH",headers:M,body:JSON.stringify(V)};let Y;try{Y=yield(yield fetch(`${Lu(C.appConfig)}/${D.token}`,q)).json()}catch(fe){throw ui.create("token-update-failed",{errorInfo:fe?.toString()})}if(Y.error)throw ui.create("token-update-failed",{errorInfo:Y.error.message});if(!Y.token)throw ui.create("token-update-no-token");return Y.token})).apply(this,arguments)}function Kc(C,D){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,L.Z)(function*(C,D){const V={method:"DELETE",headers:yield Yc(C)};try{const Y=yield(yield fetch(`${Lu(C.appConfig)}/${D}`,V)).json();if(Y.error)throw ui.create("token-unsubscribe-failed",{errorInfo:Y.error.message})}catch(q){throw ui.create("token-unsubscribe-failed",{errorInfo:q?.toString()})}})).apply(this,arguments)}function Lu({projectId:C}){return`${c_}/projects/${C}/registrations`}function Yc(C){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,L.Z)(function*({appConfig:C,installations:D}){const M=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Qc({p256dh:C,auth:D,endpoint:M,vapidKey:V}){const q={web:{endpoint:M,auth:D,p256dh:C}};return V!==xu&&(q.web.applicationPubKey=V),q}const Rl=6048e5;function La(){return La=(0,L.Z)(function*(C){const D=yield function xl(C,D){return li.apply(this,arguments)}(C.swRegistration,C.vapidKey),M={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:D.endpoint,auth:ds(D.getKey("auth")),p256dh:ds(D.getKey("p256dh"))},V=yield ka(C.firebaseDependencies);if(V){if(function Pl(C,D){return D.vapidKey===C.vapidKey&&D.endpoint===C.endpoint&&D.auth===C.auth&&D.p256dh===C.p256dh}(V.subscriptionOptions,M))return Date.now()>=V.createTime+Rl?function Sh(C,D){return Vu.apply(this,arguments)}(C,{token:V.token,createTime:Date.now(),subscriptionOptions:M}):V.token;try{yield Kc(C.firebaseDependencies,V.token)}catch(q){console.warn(q)}return kn(C.firebaseDependencies,M)}return kn(C.firebaseDependencies,M)}),La.apply(this,arguments)}function hs(){return hs=(0,L.Z)(function*(C){const D=yield ka(C.firebaseDependencies);D&&(yield Kc(C.firebaseDependencies,D.token),yield function Wc(C){return Al.apply(this,arguments)}(C.firebaseDependencies));const M=yield C.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()}),hs.apply(this,arguments)}function Vu(){return Vu=(0,L.Z)(function*(C,D){try{const M=yield function Zc(C,D){return Dh.apply(this,arguments)}(C.firebaseDependencies,D),V=Object.assign(Object.assign({},D),{token:M,createTime:Date.now()});return yield Ap(C.firebaseDependencies,V),M}catch(M){throw yield function Mp(C){return hs.apply(this,arguments)}(C),M}}),Vu.apply(this,arguments)}function kn(C,D){return aa.apply(this,arguments)}function aa(){return(aa=(0,L.Z)(function*(C,D){const V={token:yield Np(C,D),createTime:Date.now(),subscriptionOptions:D};return yield Ap(C,V),V.token})).apply(this,arguments)}function li(){return(li=(0,L.Z)(function*(C,D){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Tl(D)})})).apply(this,arguments)}function Jc(C){const D={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function Ro(C,D){if(!D.notification)return;C.notification={};const M=D.notification.title;M&&(C.notification.title=M);const V=D.notification.body;V&&(C.notification.body=V);const q=D.notification.image;q&&(C.notification.image=q);const Y=D.notification.icon;Y&&(C.notification.icon=Y)}(D,C),function Cr(C,D){D.data&&(C.data=D.data)}(D,C),function g_(C,D){var M,V,q,Y,fe;if(!(D.fcmOptions||null!==(M=D.notification)&&void 0!==M&&M.click_action))return;C.fcmOptions={};const Ke=null!==(q=null===(V=D.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==q?q:null===(Y=D.notification)||void 0===Y?void 0:Y.click_action;Ke&&(C.fcmOptions.link=Ke);const Ge=null===(fe=D.fcmOptions)||void 0===fe?void 0:fe.analytics_label;Ge&&(C.fcmOptions.analyticsLabel=Ge)}(D,C),D}function Ah(C,D){const M=[];for(let V=0;V<C.length;V++)M.push(C.charAt(V)),V<D.length&&M.push(D.charAt(V));return M.join("")}function Xc(C){return ui.create("missing-app-config-values",{valueName:C})}Ah("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ah("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Nh{constructor(D,M,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const q=function xo(C){if(!C||!C.options)throw Xc("App Configuration Object");if(!C.name)throw Xc("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:M}=C;for(const V of D)if(!M[V])throw Xc(V);return{appName:C.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:q,installations:M,analyticsProvider:V}}_delete(){return Promise.resolve()}}function Ol(){return(Ol=(0,L.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(Ch,{scope:Ru}),C.swRegistration.update().catch(()=>{})}catch(D){throw ui.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function Ua(){return(Ua=(0,L.Z)(function*(C,D){if(!D&&!C.swRegistration&&(yield function ed(C){return Ol.apply(this,arguments)}(C)),D||!C.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw ui.create("invalid-sw-registration");C.swRegistration=D}})).apply(this,arguments)}function Po(){return(Po=(0,L.Z)(function*(C,D){D?C.vapidKey=D:C.vapidKey||(C.vapidKey=xu)})).apply(this,arguments)}function nd(){return nd=(0,L.Z)(function*(C,D){if(!navigator)throw ui.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ui.create("permission-blocked");return yield function wt(C,D){return Po.apply(this,arguments)}(C,D?.vapidKey),yield function td(C,D){return Ua.apply(this,arguments)}(C,D?.serviceWorkerRegistration),function p_(C){return La.apply(this,arguments)}(C)}),nd.apply(this,arguments)}function Rh(){return(Rh=(0,L.Z)(function*(C,D,M){const V=function xh(C){switch(C){case ro.NOTIFICATION_CLICKED:return"notification_open";case ro.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(D);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:M[qc],message_name:M[Jn],message_time:M[Mo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Uu(){return Uu=(0,L.Z)(function*(C,D){const M=D.data;if(!M.isFirebaseMessaging)return;C.onMessageHandler&&M.messageType===ro.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(Jc(M)):C.onMessageHandler.next(Jc(M)));const V=M.data;(function Va(C){return"object"==typeof C&&!!C&&qc in C})(V)&&"1"===V["google.c.a.e"]&&(yield function Rp(C,D,M){return Rh.apply(this,arguments)}(C,M.messageType,V))}),Uu.apply(this,arguments)}const Bu="@firebase/messaging",Ha=C=>{const D=new Nh(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Ba(C,D){return Uu.apply(this,arguments)}(D,M)),D},Ph=C=>{const D=C.getProvider("messaging").getImmediate();return{getToken:V=>function Mh(C,D){return nd.apply(this,arguments)}(D,V)}};function tn(){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,L.Z)(function*(){try{yield(0,oe.eu)()}catch{return!1}return typeof window<"u"&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Se(){(0,ne._registerComponent)(new pe.wA("messaging",Ha,"PUBLIC")),(0,ne._registerComponent)(new pe.wA("messaging-internal",Ph,"PRIVATE")),(0,ne.registerVersion)(Bu,"0.12.4"),(0,ne.registerVersion)(Bu,"0.12.4","esm2017")}();const Xn="analytics",id="firebase_id",qr="origin",so=6e4,Ll="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Oo="https://www.googletagmanager.com/gtag/js",bn=new ye.Yd("@firebase/analytics"),Wr=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function ju(C){if(!C.startsWith(Oo)){const D=Wr.create("invalid-gtag-resource",{gtagURL:C});return bn.warn(D.message),""}return C}function Vl(C){return Promise.all(C.map(D=>D.catch(M=>M)))}function Bl(){return(Bl=(0,L.Z)(function*(C,D,M,V,q,Y){const fe=V[q];try{if(fe)yield D[fe];else{const Ge=(yield Vl(M)).find(dt=>dt.measurementId===q);Ge&&(yield D[Ge.appId])}}catch(Ke){bn.error(Ke)}C("config",q,Y)})).apply(this,arguments)}function $a(){return($a=(0,L.Z)(function*(C,D,M,V,q){try{let Y=[];if(q&&q.send_to){let fe=q.send_to;Array.isArray(fe)||(fe=[fe]);const Ke=yield Vl(M);for(const Ge of fe){const dt=Ke.find(St=>St.measurementId===Ge),xt=dt&&D[dt.appId];if(!xt){Y=[];break}Y.push(xt)}}0===Y.length&&(Y=Object.values(D)),yield Promise.all(Y),C("event",V,q||{})}catch(Y){bn.error(Y)}})).apply(this,arguments)}const Hl=30,Pp=new class zu{constructor(D={},M=1e3){this.throttleMetadata=D,this.intervalMillis=M}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,M){this.throttleMetadata[D]=M}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function vi(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Ln(){return(Ln=(0,L.Z)(function*(C){var D;const{appId:M,apiKey:V}=C,q={method:"GET",headers:vi(V)},Y=Ll.replace("{app-id}",M),fe=yield fetch(Y,q);if(200!==fe.status&&304!==fe.status){let Ke="";try{const Ge=yield fe.json();null!==(D=Ge.error)&&void 0!==D&&D.message&&(Ke=Ge.error.message)}catch{}throw Wr.create("config-fetch-failed",{httpStatus:fe.status,responseMessage:Ke})}return fe.json()})).apply(this,arguments)}function qu(){return(qu=(0,L.Z)(function*(C,D=Pp,M){const{appId:V,apiKey:q,measurementId:Y}=C.options;if(!V)throw Wr.create("no-app-id");if(!q){if(Y)return{measurementId:Y,appId:V};throw Wr.create("no-api-key")}const fe=D.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ke=new jl;return setTimeout((0,L.Z)(function*(){Ke.abort()}),void 0!==M?M:so),Op({appId:V,apiKey:q,measurementId:Y},fe,Ke,D)})).apply(this,arguments)}function Op(C,D,M){return Lh.apply(this,arguments)}function Lh(){return Lh=(0,L.Z)(function*(C,{throttleEndTimeMillis:D,backoffCount:M},V,q=Pp){var Y;const{appId:fe,measurementId:Ke}=C;try{yield function kp(C,D){return new Promise((M,V)=>{const q=Math.max(D-Date.now(),0),Y=setTimeout(M,q);C.addEventListener(()=>{clearTimeout(Y),V(Wr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(V,D)}catch(Ge){if(Ke)return bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ke} provided in the "measurementId" field in the local Firebase config. [${Ge?.message}]`),{appId:fe,measurementId:Ke};throw Ge}try{const Ge=yield function ua(C){return Ln.apply(this,arguments)}(C);return q.deleteThrottleMetadata(fe),Ge}catch(Ge){const dt=Ge;if(!function Wu(C){if(!(C instanceof oe.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}(dt)){if(q.deleteThrottleMetadata(fe),Ke)return bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ke} provided in the "measurementId" field in the local Firebase config. [${dt?.message}]`),{appId:fe,measurementId:Ke};throw Ge}const xt=503===Number(null===(Y=dt?.customData)||void 0===Y?void 0:Y.httpStatus)?(0,oe.$s)(M,q.intervalMillis,Hl):(0,oe.$s)(M,q.intervalMillis),St={throttleEndTimeMillis:Date.now()+xt,backoffCount:M+1};return q.setThrottleMetadata(fe,St),bn.debug(`Calling attemptFetch again in ${xt} millis`),Op(C,St,V,q)}}),Lh.apply(this,arguments)}class jl{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let ps,gt;function Zu(){return(Zu=(0,L.Z)(function*(C,D,M,V,q){if(q&&q.global)C("event",M,V);else{const Y=yield D;C("event",M,Object.assign(Object.assign({},V),{send_to:Y}))}})).apply(this,arguments)}function Bh(){return(Bh=(0,L.Z)(function*(){if(!(0,oe.hl)())return bn.warn(Wr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(C){return bn.warn(Wr.create("indexeddb-unavailable",{errorInfo:C?.toString()}).message),!1}return!0})).apply(this,arguments)}function oo(){return oo=(0,L.Z)(function*(C,D,M,V,q,Y,fe){var Ke;const Ge=function m_(C){return qu.apply(this,arguments)}(C);Ge.then(qn=>{M[qn.measurementId]=qn.appId,C.options.measurementId&&qn.measurementId!==C.options.measurementId&&bn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${qn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(qn=>bn.error(qn)),D.push(Ge);const dt=function ld(){return Bh.apply(this,arguments)}().then(qn=>{if(qn)return V.getId()}),[xt,St]=yield Promise.all([Ge,dt]);(function Fh(C){const D=window.document.getElementsByTagName("script");for(const M of Object.values(D))if(M.src&&M.src.includes(Oo)&&M.src.includes(C))return M;return null})(Y)||function $u(C,D){const M=function ko(C,D){let M;return window.trustedTypes&&(M=window.trustedTypes.createPolicy(C,D)),M}("firebase-js-sdk-policy",{createScriptURL:ju}),V=document.createElement("script"),q=`${Oo}?l=${C}&id=${D}`;V.src=M?M?.createScriptURL(q):q,V.async=!0,document.head.appendChild(V)}(Y,xt.measurementId),gt&&(q("consent","default",gt),function ki(C){gt=C}(void 0)),q("js",new Date);const Xr=null!==(Ke=fe?.config)&&void 0!==Ke?Ke:{};return Xr[qr]="firebase",Xr.update=!0,null!=St&&(Xr[id]=St),q("config",xt.measurementId,Xr),ps&&(q("set",ps),function Ku(C){ps=C}(void 0)),xt.measurementId}),oo.apply(this,arguments)}class Ls{constructor(D){this.app=D}_delete(){return delete Kr[this.app.options.appId],Promise.resolve()}}let Kr={},Mt=[];const Gl={};let ao,Ki,la="dataLayer",ar=!1;function za(C,D,M){!function cd(){const C=[];if((0,oe.ru)()&&C.push("This is a browser extension environment."),(0,oe.zI)()||C.push("Cookies are not available."),C.length>0){const D=C.map((V,q)=>`(${q+1}) ${V}`).join(" "),M=Wr.create("invalid-analytics-context",{errorInfo:D});bn.warn(M.message)}}();const V=C.options.appId;if(!V)throw Wr.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw Wr.create("no-api-key");bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Kr[V])throw Wr.create("already-exists",{id:V});if(!ar){!function kh(C){let D=[];Array.isArray(window[C])?D=window[C]:window[C]=D}(la);const{wrappedGtag:Y,gtagCore:fe}=function sd(C,D,M,V,q){let Y=function(...fe){window[V].push(arguments)};return window[q]&&"function"==typeof window[q]&&(Y=window[q]),window[q]=function fs(C,D,M,V){function Y(){return Y=(0,L.Z)(function*(fe,...Ke){try{if("event"===fe){const[Ge,dt]=Ke;yield function Gu(C,D,M,V,q){return $a.apply(this,arguments)}(C,D,M,Ge,dt)}else if("config"===fe){const[Ge,dt]=Ke;yield function Ul(C,D,M,V,q,Y){return Bl.apply(this,arguments)}(C,D,M,V,Ge,dt)}else if("consent"===fe){const[Ge]=Ke;C("consent","update",Ge)}else if("get"===fe){const[Ge,dt,xt]=Ke;C("get",Ge,dt,xt)}else if("set"===fe){const[Ge]=Ke;C("set",Ge)}else C(fe,...Ke)}catch(Ge){bn.error(Ge)}}),Y.apply(this,arguments)}return function q(fe){return Y.apply(this,arguments)}}(Y,C,D,M),{gtagCore:Y,wrappedGtag:window[q]}}(Kr,Mt,Gl,la,"gtag");Ki=Y,ao=fe,ar=!0}return Kr[V]=function Hh(C,D,M,V,q,Y,fe){return oo.apply(this,arguments)}(C,Mt,Gl,D,ao,la,M),new Ls(C)}function Fo(){return uo.apply(this,arguments)}function uo(){return(uo=(0,L.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}const Wa="@firebase/analytics";!function pr(){(0,ne._registerComponent)(new pe.wA(Xn,(D,{options:M})=>za(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ne._registerComponent)(new pe.wA("analytics-internal",function C(D){try{const M=D.getProvider(Xn).getImmediate();return{logEvent:(V,q,Y)=>function Us(C,D,M,V){C=(0,oe.m9)(C),function Vh(C,D,M,V,q){return Zu.apply(this,arguments)}(Ki,Kr[C.app.options.appId],D,M,V).catch(q=>bn.error(q))}(M,V,q,Y)}}catch(M){throw Wr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ne.registerVersion)(Wa,"0.10.0"),(0,ne.registerVersion)(Wa,"0.10.0","esm2017")}();var zn=F(4408),Za=F(7565);const Qr=new class Fi extends Za.v{}(class ca extends zn.o{constructor(D,M){super(D,M),this.scheduler=D,this.work=M}schedule(D,M=0){return M>0?super.schedule(D,M):(this.delay=M,this.state=D,this.scheduler.flush(this),this)}execute(D,M){return M>0||this.closed?super.execute(D,M):this._execute(D,M)}requestAsyncId(D,M,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(D,M,V):(D.flush(this),0)}});var lo=F(4986),Ka=F(8505),Jr=F(5363),co=F(9468);const gr=new d.GfV("7.6.1"),ci="__angularfire_symbol__analyticsIsSupportedValue",Yl="__angularfire_symbol__analyticsIsSupported",Vo="__angularfire_symbol__remoteConfigIsSupportedValue",Qu="__angularfire_symbol__remoteConfigIsSupported",pd="__angularfire_symbol__messagingIsSupportedValue",gd="__angularfire_symbol__messagingIsSupported";function Xu(C,D,M){if(D){if(1===D.length)return D[0];const Y=D.filter(fe=>fe.app===M);if(1===Y.length)return Y[0]}return M.container.getProvider(C).getImmediate({optional:!0})}globalThis[Yl]||(globalThis[Yl]=Fo().then(C=>globalThis[ci]=C).catch(()=>globalThis[ci]=!1)),globalThis[gd]||(globalThis[gd]=tn().then(C=>globalThis[pd]=C).catch(()=>globalThis[pd]=!1)),globalThis[Qu]||(globalThis[Qu]=ra().then(C=>globalThis[Vo]=C).catch(()=>globalThis[Vo]=!1));const __=(C,D)=>{const M=D?[D]:(0,J.C6)(),V=[];return M.forEach(q=>{q.container.getProvider(C).instances.forEach(fe=>{V.includes(fe)||V.push(fe)})}),V};function Nn(){}class ms{constructor(D,M=Qr){this.zone=D,this.delegate=M}now(){return this.delegate.now()}schedule(D,M,V){const q=this.zone;return this.delegate.schedule(function(fe){q.runGuarded(()=>{D.apply(this,[fe])})},M,V)}}class Ya{constructor(D){this.zone=D,this.task=null}call(D,M){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Nn,{},Nn,Nn)),M.pipe((0,Ka.b)({next:V,complete:V,error:V})).subscribe(D).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let md=(()=>{class C{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new ms(Zone.current)),this.insideAngular=M.run(()=>new ms(Zone.current,lo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(M){return new(M||C)(d.LFG(d.R0b))},C.\u0275prov=d.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Fn(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function el(C){return C.pipe((0,Jr.Q)(Fn().outsideAngular))}function _d(C){return Fn(),function y_(C){return function(M){return(M=M.lift(new Ya(C.ngZone))).pipe((0,co.R)(C.outsideAngular),(0,Jr.Q)(C.insideAngular))}}(Fn())(C)}},2090:(ft,Ce,F)=>{F.d(Ce,{$s:()=>Rs,BH:()=>X,DV:()=>To,Dv:()=>Aa,G6:()=>be,GJ:()=>si,L:()=>me,LL:()=>qt,Pz:()=>ve,Sg:()=>_e,UG:()=>ae,UI:()=>Sa,US:()=>pe,Wj:()=>Wt,Wl:()=>an,Yr:()=>we,ZB:()=>te,ZR:()=>ot,aH:()=>ie,b$:()=>Mr,cI:()=>Dn,dS:()=>So,eu:()=>Ze,g5:()=>L,gK:()=>pn,gQ:()=>yt,h$:()=>Fe,hl:()=>Re,hu:()=>J,jU:()=>ze,lb:()=>ls,m9:()=>en,ne:()=>In,p$:()=>z,pd:()=>_t,r3:()=>rr,ru:()=>Qt,tV:()=>j,uI:()=>He,ug:()=>Na,vZ:()=>Di,w1:()=>bo,w9:()=>Zn,xO:()=>Cu,xb:()=>Jo,z$:()=>Ne,zI:()=>je,zd:()=>Xe});const d={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},J=function($,H){if(!$)throw L(H)},L=function($){return new Error("Firebase Database ("+d.SDK_VERSION+") INTERNAL ASSERT FAILED: "+$)},ne=function($){const H=[];let Z=0;for(let Ie=0;Ie<$.length;Ie++){let ue=$.charCodeAt(Ie);ue<128?H[Z++]=ue:ue<2048?(H[Z++]=ue>>6|192,H[Z++]=63&ue|128):55296==(64512&ue)&&Ie+1<$.length&&56320==(64512&$.charCodeAt(Ie+1))?(ue=65536+((1023&ue)<<10)+(1023&$.charCodeAt(++Ie)),H[Z++]=ue>>18|240,H[Z++]=ue>>12&63|128,H[Z++]=ue>>6&63|128,H[Z++]=63&ue|128):(H[Z++]=ue>>12|224,H[Z++]=ue>>6&63|128,H[Z++]=63&ue|128)}return H},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,H){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let ue=0;ue<$.length;ue+=3){const lt=$[ue],vt=ue+1<$.length,Vt=vt?$[ue+1]:0,An=ue+2<$.length,Cn=An?$[ue+2]:0;let Pr=(15&Vt)<<2|Cn>>6,Gi=63&Cn;An||(Gi=64,vt||(Pr=64)),Ie.push(Z[lt>>2],Z[(3&lt)<<4|Vt>>4],Z[Pr],Z[Gi])}return Ie.join("")},encodeString($,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa($):this.encodeByteArray(ne($),H)},decodeString($,H){return this.HAS_NATIVE_SUPPORT&&!H?atob($):function($){const H=[];let Z=0,Ie=0;for(;Z<$.length;){const ue=$[Z++];if(ue<128)H[Ie++]=String.fromCharCode(ue);else if(ue>191&&ue<224){const lt=$[Z++];H[Ie++]=String.fromCharCode((31&ue)<<6|63&lt)}else if(ue>239&&ue<365){const An=((7&ue)<<18|(63&$[Z++])<<12|(63&$[Z++])<<6|63&$[Z++])-65536;H[Ie++]=String.fromCharCode(55296+(An>>10)),H[Ie++]=String.fromCharCode(56320+(1023&An))}else{const lt=$[Z++],vt=$[Z++];H[Ie++]=String.fromCharCode((15&ue)<<12|(63&lt)<<6|63&vt)}}return H.join("")}(this.decodeStringToByteArray($,H))},decodeStringToByteArray($,H){this.init_();const Z=H?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let ue=0;ue<$.length;){const lt=Z[$.charAt(ue++)],Vt=ue<$.length?Z[$.charAt(ue)]:0;++ue;const Cn=ue<$.length?Z[$.charAt(ue)]:64;++ue;const Jt=ue<$.length?Z[$.charAt(ue)]:64;if(++ue,null==lt||null==Vt||null==Cn||null==Jt)throw new ye;Ie.push(lt<<2|Vt>>4),64!==Cn&&(Ie.push(Vt<<4&240|Cn>>2),64!==Jt&&Ie.push(Cn<<6&192|Jt))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}};class ye extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fe=function($){const H=ne($);return pe.encodeByteArray(H,!0)},me=function($){return Fe($).replace(/\./g,"")},j=function($){try{return pe.decodeString($,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function z($){return te(void 0,$)}function te($,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return H}for(const Z in H)!H.hasOwnProperty(Z)||!Ue(Z)||($[Z]=te($[Z],H[Z]));return $}function Ue($){return"__proto__"!==$}const Le=()=>{try{return function De(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const H=$&&j($[1]);return H&&JSON.parse(H)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},ie=()=>{var $;return null===($=Le())||void 0===$?void 0:$.config},ve=$=>{var H;return null===(H=Le())||void 0===H?void 0:H[`_${$}`]};class X{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,Z)=>{this.resolve=H,this.reject=Z})}wrapCallback(H){return(Z,Ie)=>{Z?this.reject(Z):this.resolve(Ie),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(Z):H(Z,Ie))}}}function _e($,H){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=H||"demo-project",ue=$.iat||0,lt=$.sub||$.user_id;if(!lt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const vt=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:ue,exp:ue+3600,auth_time:ue,sub:lt,user_id:lt,firebase:{sign_in_provider:"custom",identities:{}}},$);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(vt)),""].join(".")}function Ne(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function He(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function ae(){var $;const H=null===($=Le())||void 0===$?void 0:$.forceEnvironment;if("node"===H)return!0;if("browser"===H)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ze(){return"object"==typeof self&&self.self===self}function Qt(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function Mr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function bo(){const $=Ne();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function we(){return!0===d.NODE_CLIENT||!0===d.NODE_ADMIN}function be(){return!ae()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Re(){try{return"object"==typeof indexedDB}catch{return!1}}function Ze(){return new Promise(($,H)=>{try{let Z=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",ue=self.indexedDB.open(Ie);ue.onsuccess=()=>{ue.result.close(),Z||self.indexedDB.deleteDatabase(Ie),$(!0)},ue.onupgradeneeded=()=>{Z=!1},ue.onerror=()=>{var lt;H((null===(lt=ue.error)||void 0===lt?void 0:lt.message)||"")}}catch(Z){H(Z)}})}function je(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ot extends Error{constructor(H,Z,Ie){super(Z),this.code=H,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,ot.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qt.prototype.create)}}class qt{constructor(H,Z,Ie){this.service=H,this.serviceName=Z,this.errors=Ie}create(H,...Z){const Ie=Z[0]||{},ue=`${this.service}/${H}`,lt=this.errors[H],vt=lt?function ut($,H){return $.replace(mt,(Z,Ie)=>{const ue=H[Ie];return null!=ue?String(ue):`<${Ie}?>`})}(lt,Ie):"Error";return new ot(ue,`${this.serviceName}: ${vt} (${ue}).`,Ie)}}const mt=/\{\$([^}]+)}/g;function Dn($){return JSON.parse($)}function an($){return JSON.stringify($)}const $n=function($){let H={},Z={},Ie={},ue="";try{const lt=$.split(".");H=Dn(j(lt[0])||""),Z=Dn(j(lt[1])||""),ue=lt[2],Ie=Z.d||{},delete Z.d}catch{}return{header:H,claims:Z,data:Ie,signature:ue}},Zn=function($){const Z=$n($).claims;return!!Z&&"object"==typeof Z&&Z.hasOwnProperty("iat")},si=function($){const H=$n($).claims;return"object"==typeof H&&!0===H.admin};function rr($,H){return Object.prototype.hasOwnProperty.call($,H)}function To($,H){if(Object.prototype.hasOwnProperty.call($,H))return $[H]}function Jo($){for(const H in $)if(Object.prototype.hasOwnProperty.call($,H))return!1;return!0}function Sa($,H,Z){const Ie={};for(const ue in $)Object.prototype.hasOwnProperty.call($,ue)&&(Ie[ue]=H.call(Z,$[ue],ue,$));return Ie}function Di($,H){if($===H)return!0;const Z=Object.keys($),Ie=Object.keys(H);for(const ue of Z){if(!Ie.includes(ue))return!1;const lt=$[ue],vt=H[ue];if(Si(lt)&&Si(vt)){if(!Di(lt,vt))return!1}else if(lt!==vt)return!1}for(const ue of Ie)if(!Z.includes(ue))return!1;return!0}function Si($){return null!==$&&"object"==typeof $}function Cu($){const H=[];for(const[Z,Ie]of Object.entries($))Array.isArray(Ie)?Ie.forEach(ue=>{H.push(encodeURIComponent(Z)+"="+encodeURIComponent(ue))}):H.push(encodeURIComponent(Z)+"="+encodeURIComponent(Ie));return H.length?"&"+H.join("&"):""}function Xe($){const H={};return $.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[ue,lt]=Ie.split("=");H[decodeURIComponent(ue)]=decodeURIComponent(lt)}}),H}function _t($){const H=$.indexOf("?");if(!H)return"";const Z=$.indexOf("#",H);return $.substring(H,Z>0?Z:void 0)}class yt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,Z){Z||(Z=0);const Ie=this.W_;if("string"==typeof H)for(let Jt=0;Jt<16;Jt++)Ie[Jt]=H.charCodeAt(Z)<<24|H.charCodeAt(Z+1)<<16|H.charCodeAt(Z+2)<<8|H.charCodeAt(Z+3),Z+=4;else for(let Jt=0;Jt<16;Jt++)Ie[Jt]=H[Z]<<24|H[Z+1]<<16|H[Z+2]<<8|H[Z+3],Z+=4;for(let Jt=16;Jt<80;Jt++){const Pr=Ie[Jt-3]^Ie[Jt-8]^Ie[Jt-14]^Ie[Jt-16];Ie[Jt]=4294967295&(Pr<<1|Pr>>>31)}let Cn,Nt,ue=this.chain_[0],lt=this.chain_[1],vt=this.chain_[2],Vt=this.chain_[3],An=this.chain_[4];for(let Jt=0;Jt<80;Jt++){Jt<40?Jt<20?(Cn=Vt^lt&(vt^Vt),Nt=1518500249):(Cn=lt^vt^Vt,Nt=1859775393):Jt<60?(Cn=lt&vt|Vt&(lt|vt),Nt=2400959708):(Cn=lt^vt^Vt,Nt=3395469782);const Pr=(ue<<5|ue>>>27)+Cn+An+Nt+Ie[Jt]&4294967295;An=Vt,Vt=vt,vt=4294967295&(lt<<30|lt>>>2),lt=ue,ue=Pr}this.chain_[0]=this.chain_[0]+ue&4294967295,this.chain_[1]=this.chain_[1]+lt&4294967295,this.chain_[2]=this.chain_[2]+vt&4294967295,this.chain_[3]=this.chain_[3]+Vt&4294967295,this.chain_[4]=this.chain_[4]+An&4294967295}update(H,Z){if(null==H)return;void 0===Z&&(Z=H.length);const Ie=Z-this.blockSize;let ue=0;const lt=this.buf_;let vt=this.inbuf_;for(;ue<Z;){if(0===vt)for(;ue<=Ie;)this.compress_(H,ue),ue+=this.blockSize;if("string"==typeof H){for(;ue<Z;)if(lt[vt]=H.charCodeAt(ue),++vt,++ue,vt===this.blockSize){this.compress_(lt),vt=0;break}}else for(;ue<Z;)if(lt[vt]=H[ue],++vt,++ue,vt===this.blockSize){this.compress_(lt),vt=0;break}}this.inbuf_=vt,this.total_+=Z}digest(){const H=[];let Z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ue=this.blockSize-1;ue>=56;ue--)this.buf_[ue]=255&Z,Z/=256;this.compress_(this.buf_);let Ie=0;for(let ue=0;ue<5;ue++)for(let lt=24;lt>=0;lt-=8)H[Ie]=this.chain_[ue]>>lt&255,++Ie;return H}}function In($,H){const Z=new Bn($,H);return Z.subscribe.bind(Z)}class Bn{constructor(H,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{H(this)}).catch(Ie=>{this.error(Ie)})}next(H){this.forEachObserver(Z=>{Z.next(H)})}error(H){this.forEachObserver(Z=>{Z.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,Z,Ie){let ue;if(void 0===H&&void 0===Z&&void 0===Ie)throw new Error("Missing Observer.");ue=function fn($,H){if("object"!=typeof $||null===$)return!1;for(const Z of H)if(Z in $&&"function"==typeof $[Z])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:Z,complete:Ie},void 0===ue.next&&(ue.next=Rr),void 0===ue.error&&(ue.error=Rr),void 0===ue.complete&&(ue.complete=Rr);const lt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ue.error(this.finalError):ue.complete()}catch{}}),this.observers.push(ue),lt}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,H)}sendOne(H,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{Z(this.observers[H])}catch(Ie){typeof console<"u"&&console.error&&console.error(Ie)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rr(){}const Aa=function($,H,Z,Ie){let ue;if(Ie<H?ue="at least "+H:Ie>Z&&(ue=0===Z?"none":"no more than "+Z),ue)throw new Error($+" failed: Was called with "+Ie+(1===Ie?" argument.":" arguments.")+" Expects "+ue+".")};function pn($,H){return`${$} failed: ${H} argument `}function Wt($,H,Z,Ie){if((!Ie||Z)&&"function"!=typeof Z)throw new Error(pn($,H)+"must be a valid function.")}function ls($,H,Z,Ie){if((!Ie||Z)&&("object"!=typeof Z||null===Z))throw new Error(pn($,H)+"must be a valid context object.")}const So=function($){const H=[];let Z=0;for(let Ie=0;Ie<$.length;Ie++){let ue=$.charCodeAt(Ie);if(ue>=55296&&ue<=56319){const lt=ue-55296;Ie++,J(Ie<$.length,"Surrogate pair missing trail surrogate."),ue=65536+(lt<<10)+($.charCodeAt(Ie)-56320)}ue<128?H[Z++]=ue:ue<2048?(H[Z++]=ue>>6|192,H[Z++]=63&ue|128):ue<65536?(H[Z++]=ue>>12|224,H[Z++]=ue>>6&63|128,H[Z++]=63&ue|128):(H[Z++]=ue>>18|240,H[Z++]=ue>>12&63|128,H[Z++]=ue>>6&63|128,H[Z++]=63&ue|128)}return H},Na=function($){let H=0;for(let Z=0;Z<$.length;Z++){const Ie=$.charCodeAt(Z);Ie<128?H++:Ie<2048?H+=2:Ie>=55296&&Ie<=56319?(H+=4,Z++):H+=3}return H},Ms=1e3,xr=2,hr=144e5,Sn=.5;function Rs($,H=Ms,Z=xr){const Ie=H*Math.pow(Z,$),ue=Math.round(Sn*Ie*(Math.random()-.5)*2);return Math.min(hr,Ie+ue)}function en($){return $&&$._delegate?$._delegate:$}},8420:(ft,Ce,F)=>{var d=F(2223);let J=null;function L(){return J}class oe{}const pe=new d.OlP("DocumentToken");let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(me)},providedIn:"platform"}),n})();const Fe=new d.OlP("Location Initialized");let me=(()=>{class n extends ye{constructor(){super(),this._doc=(0,d.f3M)(pe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function j(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function z(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function te(n){return n&&"?"!==n[0]?"?"+n:n}let Ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(nt)},providedIn:"root"}),n})();const De=new d.OlP("appBaseHref");let nt=(()=>{class n extends Ue{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return j(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+te(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const l=this.prepareExternalUrl(i+te(o));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,o){const l=this.prepareExternalUrl(i+te(o));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ye),d.LFG(De,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Pe=(()=>{class n extends Ue{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=j(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let l=this.prepareExternalUrl(i+te(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,o){let l=this.prepareExternalUrl(i+te(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ye),d.LFG(De,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Qe=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function ie(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(z(pt(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+te(r))}normalize(t){return n.stripTrailingSlash(function Tt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,pt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+te(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+te(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=te,n.joinWithSlash=j,n.stripTrailingSlash=z,n.\u0275fac=function(t){return new(t||n)(d.LFG(Ue))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Le(){return new Qe((0,d.LFG)(Ue))}()},providedIn:"root"}),n})();function pt(n){return n.replace(/\/index.html$/,"")}var X=(()=>((X=X||{})[X.Decimal=0]="Decimal",X[X.Percent=1]="Percent",X[X.Currency=2]="Currency",X[X.Scientific=3]="Scientific",X))(),ze=(()=>((ze=ze||{})[ze.Decimal=0]="Decimal",ze[ze.Group=1]="Group",ze[ze.List=2]="List",ze[ze.PercentSign=3]="PercentSign",ze[ze.PlusSign=4]="PlusSign",ze[ze.MinusSign=5]="MinusSign",ze[ze.Exponential=6]="Exponential",ze[ze.SuperscriptingExponent=7]="SuperscriptingExponent",ze[ze.PerMille=8]="PerMille",ze[ze.Infinity=9]="Infinity",ze[ze.NaN=10]="NaN",ze[ze.TimeSeparator=11]="TimeSeparator",ze[ze.CurrencyDecimal=12]="CurrencyDecimal",ze[ze.CurrencyGroup=13]="CurrencyGroup",ze))();function ot(n,e){const t=(0,d.cg1)(n),r=t[d.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===ze.CurrencyDecimal)return t[d.wAp.NumberSymbols][ze.Decimal];if(e===ze.CurrencyGroup)return t[d.wAp.NumberSymbols][ze.Group]}return r}const ue=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function $t(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class Lc{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Tu=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Lc(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===o?void 0:o);else if(null!==o){const h=r.get(o);r.move(h,l),gh(h,i)}});for(let i=0,o=r.length;i<o;i++){const h=r.get(i).context;h.index=i,h.count=o,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{gh(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function gh(n,e){n.context.$implicit=e.item}let cs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new s_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ip("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ip("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class s_{constructor(){this.$implicit=null,this.ngIf=null}}function Ip(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Ut=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function Os(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function he(n,e,t){return function Gi(n,e,t,r,i,o,l=!1){let h="",m=!1;if(isFinite(n)){let y=function ht(n){let r,i,o,l,h,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;"0"===e.charAt(o);o++);if(o===(h=e.length))r=[0],i=1;else{for(h--;"0"===e.charAt(h);)h--;for(i-=o,r=[],l=0;o<=h;o++,l++)r[l]=Number(e.charAt(o))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);l&&(y=function Oe(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(y));let b=e.minInt,S=e.minFrac,R=e.maxFrac;if(o){const We=o.match(ue);if(null===We)throw new Error(`${o} is not a valid digit info`);const Be=We[1],Ye=We[3],At=We[5];null!=Be&&(b=$t(Be)),null!=Ye&&(S=$t(Ye)),null!=At?R=$t(At):null!=Ye&&S>R&&(R=S)}!function Rt(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const o=Math.min(Math.max(e,i),t);let l=o+n.integerLen,h=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let S=l;S<r.length;S++)r[S]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,l=o+1),r[0]=0;for(let S=1;S<l;S++)r[S]=0}if(h>=5)if(l-1<0){for(let S=0;S>l;S--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;i<Math.max(0,o);i++)r.push(0);let m=0!==o;const y=e+n.integerLen,b=r.reduceRight(function(S,R,k,B){return B[k]=(R+=S)<10?R:R-10,m&&(0===B[k]&&k>=y?B.pop():m=!1),R>=10?1:0},0);b&&(r.unshift(b),n.integerLen++)}(y,S,R);let k=y.digits,B=y.integerLen;const K=y.exponent;let se=[];for(m=k.every(We=>!We);B<b;B++)k.unshift(0);for(;B<0;B++)k.unshift(0);B>0?se=k.splice(B,k.length):(se=k,k=[0]);const ke=[];for(k.length>=e.lgSize&&ke.unshift(k.splice(-e.lgSize,k.length).join(""));k.length>e.gSize;)ke.unshift(k.splice(-e.gSize,k.length).join(""));k.length&&ke.unshift(k.join("")),h=ke.join(ot(t,r)),se.length&&(h+=ot(t,i)+se.join("")),K&&(h+=ot(t,ze.Exponential)+"+"+K)}else h=ot(t,ze.Infinity);return h=n<0&&!m?e.negPre+h+e.negSuf:e.posPre+h+e.posSuf,h}(n,function re(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],o=r[1],l=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],h=l[0],m=l[1]||"";t.posPre=h.substring(0,h.indexOf("#"));for(let b=0;b<m.length;b++){const S=m.charAt(b);"0"===S?t.minFrac=t.maxFrac=b+1:"#"===S?t.maxFrac=b+1:t.posSuf+=S}const y=h.split(",");if(t.gSize=y[1]?y[1].length:0,t.lgSize=y[2]||y[1]?(y[2]||y[1]).length:0,o){const b=i.length-t.posPre.length-t.posSuf.length,S=o.indexOf("#");t.negPre=o.substring(0,S).replace(/'/g,""),t.negSuf=o.slice(S+b).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function qt(n,e){return(0,d.cg1)(n)[d.wAp.NumberFormats][e]}(e,X.Decimal),ot(e,ze.MinusSign)),e,ze.Group,ze.Decimal,t)}(function Gn(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(o){throw function Gt(n,e){return new d.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.soG,16))},n.\u0275pipe=d.Yjl({name:"number",type:n,pure:!0,standalone:!0}),n})();let _i=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function na(n){return"server"===n}let ks=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new yi((0,d.LFG)(pe),window)}),n})();class yi{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ra(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const l=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=qi(this.window.history)||qi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function qi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Jc extends oe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ro extends Jc{static makeCurrent(){!function ne(n){J||(J=n)}(new Ro)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function g_(){return Cr=Cr||document.querySelector("base"),Cr?Cr.getAttribute("href"):null}();return null==t?null:function Ah(n){Va=Va||document.createElement("a"),Va.setAttribute("href",n);const e=Va.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Cr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Xo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Va,Cr=null,Xc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Nh=new d.OlP("EventManagerPlugins");let ed=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new d.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Nh),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Ol{constructor(e){this._doc=e}}const td="ng-app-id";let Ua=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=na(o),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${td}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(td),o;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(td,this.appId),l}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const o=this.styleRef,l=o.get(r)?.elements;l?l.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe),d.LFG(d.AFp),d.LFG(d.Ojb,8),d.LFG(d.Lbi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const wt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Po=/%COMP%/g,xh=new d.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Bu(n,e){return e.map(t=>t.replace(Po,n))}let kl=(()=>{class n{constructor(t,r,i,o,l,h,m,y=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=o,this.doc=l,this.platformId=h,this.ngZone=m,this.nonce=y,this.rendererByCompId=new Map,this.platformIsServer=na(h),this.defaultRenderer=new Ha(t,l,m,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===d.ifc.ShadowDom&&(r={...r,encapsulation:d.ifc.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Hn?i.applyToHost(t):i instanceof rd&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const l=this.doc,h=this.ngZone,m=this.eventManager,y=this.sharedStylesHost,b=this.removeStylesOnCompDestory,S=this.platformIsServer;switch(r.encapsulation){case d.ifc.Emulated:o=new Hn(m,y,r,this.appId,b,l,h,S);break;case d.ifc.ShadowDom:return new Fl(m,y,t,r,l,h,this.nonce,S);default:o=new rd(m,y,r,b,l,h,S)}o.onDestroy=()=>i.delete(r.id),i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ed),d.LFG(Ua),d.LFG(d.AFp),d.LFG(xh),d.LFG(pe),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(d.Ojb))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Ha{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(wt[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(tn(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(tn(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new d.vHH(5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=wt[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=wt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=L().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function tn(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Fl extends Ha{constructor(e,t,r,i,o,l,h,m){super(e,o,l,m),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const y=Bu(i.id,i.styles);for(const b of y){const S=document.createElement("style");h&&S.setAttribute("nonce",h),S.textContent=b,this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class rd extends Ha{constructor(e,t,r,i,o,l,h,m){super(e,o,l,h),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=m?Bu(m,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Hn extends rd{constructor(e,t,r,i,o,l,h,m){const y=i+"-"+r.id;super(e,t,r,o,l,h,m,y),this.contentAttr=function Ba(n){return"_ngcontent-%COMP%".replace(Po,n)}(y),this.hostAttr=function Uu(n){return"_nghost-%COMP%".replace(Po,n)}(y)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let xp=(()=>{class n extends Ol{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Zi=["alt","control","meta","shift"],io={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Hu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ja=(()=>{class n extends Ol{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),l=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,o.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let l="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),l="code."),Zi.forEach(y=>{const b=r.indexOf(y);b>-1&&(r.splice(b,1),l+=y+".")}),l+=o,0!=r.length||0===o.length)return null;const m={};return m.domEventName=i,m.fullKey=l,m}static matchEventFullKeyCode(t,r){let i=io[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Zi.forEach(l=>{l!==i&&(0,Hu[l])(t)&&(o+=l+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Oh=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function so(){Ro.makeCurrent()},multi:!0},{provide:pe,useFactory:function Oo(){return(0,d.RDi)(document),document},deps:[]}]),Wr=new d.OlP(""),ju=[{provide:d.rWj,useClass:class xo{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new d.vHH(5103,!1);return o},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let o=i.length,l=!1;const h=function(m){l=l||m,o--,0==o&&r(l)};i.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Vl=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Ll(){return new d.qLn},deps:[]},{provide:Nh,useClass:xp,multi:!0,deps:[pe,d.R0b,d.Lbi]},{provide:Nh,useClass:ja,multi:!0,deps:[pe]},kl,Ua,ed,{provide:d.FYo,useExisting:kl},{provide:class Ir{},useClass:Xc,deps:[]},[]];let ko=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Wr,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...Vl,...ju],imports:[_i,d.hGG]}),n})(),Gu=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Bl(){return new Gu((0,d.LFG)(pe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let Wu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):d.LFG(ps),r},providedIn:"root"}),n})(),ps=(()=>{class n extends Wu{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case d.q3G.NONE:return r;case d.q3G.HTML:return(0,d.qzn)(r,"HTML")?(0,d.z3N)(r):(0,d.EiD)(this._doc,String(r)).toString();case d.q3G.STYLE:return(0,d.qzn)(r,"Style")?(0,d.z3N)(r):r;case d.q3G.SCRIPT:if((0,d.qzn)(r,"Script"))return(0,d.z3N)(r);throw new d.vHH(5200,!1);case d.q3G.URL:return(0,d.qzn)(r,"URL")?(0,d.z3N)(r):(0,d.mCW)(String(r));case d.q3G.RESOURCE_URL:if((0,d.qzn)(r,"ResourceURL"))return(0,d.z3N)(r);throw new d.vHH(5201,!1);default:throw new d.vHH(5202,!1)}}bypassSecurityTrustHtml(t){return(0,d.JVY)(t)}bypassSecurityTrustStyle(t){return(0,d.L6k)(t)}bypassSecurityTrustScript(t){return(0,d.eBb)(t)}bypassSecurityTrustUrl(t){return(0,d.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,d.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function jl(n){return new ps(n.get(pe))}(d.LFG(d.zs3)),r},providedIn:"root"}),n})();var Zr=F(9751),Oi=F(576),vn=F(8996),gt=F(9646),ki=F(1135);const{isArray:Ku}=Array,{getPrototypeOf:ld,prototype:Bh,keys:Hh}=Object;function oo(n){if(1===n.length){const e=n[0];if(Ku(e))return{args:e,keys:null};if(function Ls(n){return n&&"object"==typeof n&&ld(n)===Bh}(e)){const t=Hh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Kr=F(4671),Mt=F(4004);const{isArray:Gl}=Array;function zl(n){return(0,Mt.U)(e=>function la(n,e){return Gl(e)?n(...e):n(e)}(n,e))}var ao=F(7669);function Ki(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var ar=F(5403),gs=F(9672);function cd(...n){const e=(0,ao.yG)(n),t=(0,ao.jO)(n),{args:r,keys:i}=oo(n);if(0===r.length)return(0,vn.D)([],e);const o=new Zr.y(function za(n,e,t=Kr.y){return r=>{dd(e,()=>{const{length:i}=n,o=new Array(i);let l=i,h=i;for(let m=0;m<i;m++)dd(e,()=>{const y=(0,vn.D)(n[m],e);let b=!1;y.subscribe((0,ar.x)(r,S=>{o[m]=S,b||(b=!0,h--),h||r.next(t(o.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>Ki(i,l):Kr.y));return t?o.pipe(zl(t)):o}function dd(n,e,t){n?(0,gs.f)(t,n,e):e()}const Fo=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var uo=F(8189);function hd(...n){return function Wl(){return(0,uo.J)(1)}()((0,vn.D)(n,(0,ao.yG)(n)))}var Lo=F(8421);function Zl(n){return new Zr.y(e=>{(0,Lo.Xf)(n()).subscribe(e)})}var fd=F(9635);function qa(n,e){const t=(0,Oi.m)(n)?n:()=>n,r=i=>i.error(t());return new Zr.y(e?i=>e.schedule(r,0,i):r)}var Vs=F(515),Us=F(727),Yr=F(4482);function Wa(){return(0,Yr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,ar.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Kl extends Zr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Yr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Us.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ar.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Us.w0.EMPTY)}return e}refCount(){return Wa()(this)}}var pr=F(7579);function zn(n,e){return(0,Yr.e)((t,r)=>{let i=null,o=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,ar.x)(r,m=>{i?.unsubscribe();let y=0;const b=o++;(0,Lo.Xf)(n(m,b)).subscribe(i=(0,ar.x)(r,S=>r.next(e?e(m,S,b,y++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}function ca(n){return n<=0?()=>Vs.E:(0,Yr.e)((e,t)=>{let r=0;e.subscribe((0,ar.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Za(...n){const e=(0,ao.yG)(n);return(0,Yr.e)((t,r)=>{(e?hd(n,t,e):hd(n,t)).subscribe(r)})}function Fi(n,e){return(0,Yr.e)((t,r)=>{let i=0;t.subscribe((0,ar.x)(r,o=>n.call(e,o,i++)&&r.next(o)))})}var Qr=F(5577);function Yu(n){return(0,Yr.e)((e,t)=>{let r=!1;e.subscribe((0,ar.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function lo(n=Ka){return(0,Yr.e)((e,t)=>{let r=!1;e.subscribe((0,ar.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Ka(){return new Fo}function Jr(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Fi((i,o)=>n(i,o,r)):Kr.y,ca(1),t?Yu(e):lo(()=>new Fo))}function co(n,e){return(0,Oi.m)(e)?(0,Qr.z)(n,e,1):(0,Qr.z)(n,1)}var gr=F(8505);function ci(n){return(0,Yr.e)((e,t)=>{let o,r=null,i=!1;r=e.subscribe((0,ar.x)(t,void 0,void 0,l=>{o=(0,Lo.Xf)(n(l,ci(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Vo(n,e){return(0,Yr.e)(function Yl(n,e,t,r,i){return(o,l)=>{let h=t,m=e,y=0;o.subscribe((0,ar.x)(l,b=>{const S=y++;m=h?n(m,b,S):(h=!0,b),r&&l.next(m)},i&&(()=>{h&&l.next(m),l.complete()})))}}(n,e,arguments.length>=2,!0))}function Qu(n){return n<=0?()=>Vs.E:(0,Yr.e)((e,t)=>{let r=[];e.subscribe((0,ar.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ql(n){return(0,Yr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Zt="primary",Ju=Symbol("RouteTitle");class Jl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Xu(n){return new Jl(n)}function __(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const l=r[o],h=n[o];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ms(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Ya(n[i],e[i]))return!1;return!0}function Ya(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function md(n){return n.length>0?n[n.length-1]:null}function Fn(n){return function Lp(n){return!!n&&(n instanceof Zr.y||(0,Oi.m)(n.lift)&&(0,Oi.m)(n.subscribe))}(n)?n:(0,d.QGY)(n)?(0,vn.D)(Promise.resolve(n)):(0,gt.of)(n)}const Uo={exact:function _d(n,e,t){if(!Y(n.segments,e.segments)||!C(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!_d(n.children[r],e.children[r],t))return!1;return!0},subset:jh},ho={exact:function Xl(n,e){return ms(n,e)},subset:function y_(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ya(n[t],e[t]))},ignored:()=>!0};function el(n,e,t){return Uo[t.paths](n.root,e.root,t.matrixParams)&&ho[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function jh(n,e,t){return v_(n,e,e.segments,t)}function v_(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Y(i,t)||e.hasChildren()||!C(i,t,r))}if(n.segments.length===t.length){if(!Y(n.segments,t)||!C(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!jh(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Y(n.segments,i)&&C(n.segments,i,r)&&n.children[Zt])&&v_(n.children[Zt],e,o,r)}}function C(n,e,t){return e.every((r,i)=>ho[t](n[i].parameters,r.parameters))}class D{constructor(e=new M([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xu(this.queryParams)),this._queryParamMap}toString(){return dt.serialize(this)}}class M{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xt(this)}}class V{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Xu(this.parameters)),this._parameterMap}toString(){return _s(this)}}function Y(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Ke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new Ge},providedIn:"root"}),n})();class Ge{parse(e){const t=new Lw(e);return new D(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${St(e.root,!0)}`,r=function tc(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${qn(t)}=${qn(i)}`).join("&"):`${qn(t)}=${qn(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function fo(n){return encodeURI(n)}(e.fragment)}`:""}`}}const dt=new Ge;function xt(n){return n.segments.map(e=>_s(e)).join("/")}function St(n,e){if(!n.hasChildren())return xt(n);if(e){const t=n.children[Zt]?St(n.children[Zt],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Zt&&r.push(`${i}:${St(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function fe(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Zt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Zt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Zt?[St(n.children[Zt],!1)]:[`${i}:${St(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Zt]?`${xt(n)}/${t[0]}`:`${xt(n)}/(${t.join("//")})`}}function Xr(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qn(n){return Xr(n).replace(/%3B/gi,";")}function tl(n){return Xr(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Li(n){return decodeURIComponent(n)}function Yi(n){return Li(n.replace(/\+/g,"%20"))}function _s(n){return`${tl(n.path)}${function ec(n){return Object.keys(n).map(e=>`;${tl(e)}=${tl(n[e])}`).join("")}(n.parameters)}`}const w_=/^[^\/()?;#]+/;function E_(n){const e=n.match(w_);return e?e[0]:""}const Vp=/^[^\/()?;=#]+/,Qa=/^[^=?&#]+/,Fw=/^[^&#]+/;class Lw{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new M([],{}):new M([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Zt]=new M(e,t)),r}parseSegment(){const e=E_(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new V(Li(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function nl(n){const e=n.match(Vp);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=E_(this.remaining);i&&(r=i,this.capture(r))}e[Li(t)]=Li(r)}parseQueryParam(e){const t=function I_(n){const e=n.match(Qa);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function C_(n){const e=n.match(Fw);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Yi(t),o=Yi(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=E_(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Zt);const l=this.parseChildren();t[o]=1===Object.keys(l).length?l[Zt]:new M([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function Vw(n){return n.segments.length>0?new M([],{[Zt]:n}):n}function b_(n){const e={};for(const r of Object.keys(n.children)){const o=b_(n.children[r]);if(r===Zt&&0===o.segments.length&&o.hasChildren())for(const[l,h]of Object.entries(o.children))e[l]=h;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function Uw(n){if(1===n.numberOfChildren&&n.children[Zt]){const e=n.children[Zt];return new M(n.segments.concat(e.segments),e.children)}return n}(new M(n.segments,e))}function Ja(n){return n instanceof D}function T_(n){let e;const i=Vw(function t(o){const l={};for(const m of o.children){const y=t(m);l[m.outlet]=y}const h=new M(o.url,l);return o===n&&(e=h),h}(n.root));return e??i}function Xa(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return nc(i,i,i,t,r);const o=function Hw(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new zh(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,l)=>{if("object"==typeof o&&null!=o){if(o.outlets){const h={};return Object.entries(o.outlets).forEach(([m,y])=>{h[m]="string"==typeof y?y.split("/"):y}),[...i,{outlets:h}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===l?(o.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,o]},[]);return new zh(t,e,r)}(e);if(o.toRoot())return nc(i,i,new M([],{}),t,r);const l=function D_(n,e,t){if(n.isAbsolute)return new rc(e,!0,0);if(!t)return new rc(e,!1,NaN);if(null===t.parent)return new rc(t,!0,0);const r=yd(n.commands[0])?0:1;return function XC(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new rc(r,!1,i-o)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(o,i,n),h=l.processChildren?qh(l.segmentGroup,l.index,o.commands):Bp(l.segmentGroup,l.index,o.commands);return nc(i,l.segmentGroup,h,t,r)}function yd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Gh(n){return"object"==typeof n&&null!=n&&n.outlets}function nc(n,e,t,r,i){let l,o={};r&&Object.entries(r).forEach(([m,y])=>{o[m]=Array.isArray(y)?y.map(b=>`${b}`):`${y}`}),l=n===e?t:Bw(n,e,t);const h=Vw(b_(l));return new D(h,o,i)}function Bw(n,e,t){const r={};return Object.entries(n.children).forEach(([i,o])=>{r[i]=o===e?t:Bw(o,e,t)}),new M(n.segments,r)}class zh{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&yd(r[0]))throw new d.vHH(4003,!1);const i=r.find(Gh);if(i&&i!==md(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class rc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Bp(n,e,t){if(n||(n=new M([],{})),0===n.segments.length&&n.hasChildren())return qh(n,e,t);const r=function eb(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const l=n.segments[i],h=t[r];if(Gh(h))break;const m=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&y&&"object"==typeof y&&void 0===y.outlets){if(!ic(m,y,l))return o;r+=2}else{if(!ic(m,{},l))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new M(n.segments.slice(0,r.pathIndex),{});return o.children[Zt]=new M(n.segments.slice(r.pathIndex),n.children),qh(o,0,i)}return r.match&&0===i.length?new M(n.segments,{}):r.match&&!n.hasChildren()?S_(n,e,t):r.match?qh(n,0,i):S_(n,e,t)}function qh(n,e,t){if(0===t.length)return new M(n.segments,{});{const r=function Up(n){return Gh(n[0])?n[0].outlets:{[Zt]:n}}(t),i={};if(!r[Zt]&&n.children[Zt]&&1===n.numberOfChildren&&0===n.children[Zt].segments.length){const o=qh(n.children[Zt],e,t);return new M(n.segments,o.children)}return Object.entries(r).forEach(([o,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(i[o]=Bp(n.children[o],e,l))}),Object.entries(n.children).forEach(([o,l])=>{void 0===r[o]&&(i[o]=l)}),new M(n.segments,i)}}function S_(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(Gh(o)){const m=tb(o.outlets);return new M(r,m)}if(0===i&&yd(t[0])){r.push(new V(n.segments[e].path,A_(t[0]))),i++;continue}const l=Gh(o)?o.outlets[Zt]:`${o}`,h=i<t.length-1?t[i+1]:null;l&&h&&yd(h)?(r.push(new V(l,A_(h))),i+=2):(r.push(new V(l,{})),i++)}return new M(r,{})}function tb(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=S_(new M([],{}),0,r))}),e}function A_(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function ic(n,e,t){return n==t.path&&ms(e,t.parameters)}const da="imperative";class po{constructor(e,t){this.id=e,this.url=t}}class Wh extends po{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Bo extends po{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class go extends po{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class sc extends po{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class oc extends po{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class rl extends po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ho extends po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jw extends po{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $w extends po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class N_ extends po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class M_{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Hp{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Gw{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zw{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vd{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class R_{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jp{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Qi{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new il,this.attachRef=null}}let il=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Qi,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class $p{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ac(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ac(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=br(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return br(e,this._root).map(t=>t.value)}}function ac(n,e){if(n===e.value)return e;for(const t of e.children){const r=ac(n,t);if(r)return r}return null}function br(n,e){if(n===e.value)return[e];for(const t of e.children){const r=br(n,t);if(r.length)return r.unshift(e),r}return[]}class Vi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function eu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Gp extends $p{constructor(e,t){super(e),this.snapshot=t,Ed(this,e)}toString(){return this.snapshot.toString()}}function Zh(n,e){const t=function x_(n,e){const l=new wd([],{},{},"",{},Zt,e,null,{});return new Kh("",new Vi(l,[]))}(0,e),r=new ki.X([new V("",{})]),i=new ki.X({}),o=new ki.X({}),l=new ki.X({}),h=new ki.X(""),m=new Fr(r,i,l,h,o,Zt,e,t.root);return m.snapshot=t.root,new Gp(new Vi(m,[]),t)}class Fr{constructor(e,t,r,i,o,l,h,m){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=l,this.component=h,this._futureSnapshot=m,this.title=this.dataSubject?.pipe((0,Mt.U)(y=>y[Ju]))??(0,gt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Mt.U)(e=>Xu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Mt.U)(e=>Xu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sl(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function P_(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class wd{get title(){return this.data?.[Ju]}constructor(e,t,r,i,o,l,h,m,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=l,this.component=h,this.routeConfig=m,this._resolve=y}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Xu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Kh extends $p{constructor(e,t){super(t),this.url=e,Ed(this,t)}toString(){return Yh(this._root)}}function Ed(n,e){e.value._routerState=n,e.children.forEach(t=>Ed(n,t))}function Yh(n){const e=n.children.length>0?` { ${n.children.map(Yh).join(", ")} } `:"";return`${n.value}${e}`}function uc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ms(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ms(e.params,t.params)||n.paramsSubject.next(t.params),function Nn(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ms(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),ms(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function zp(n,e){const t=ms(n.params,e.params)&&function q(n,e){return Y(n,e)&&n.every((t,r)=>ms(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||zp(n.parent,e.parent))}let Ji=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Zt,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(il),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb),this.inputBinder=(0,d.f3M)(Qh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,!1);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,m=new O_(t,h,i.injector);this.activated=i.createComponent(l,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]}),n})();class O_{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Fr?this.route:e===il?this.childContexts:this.parent.get(e,t)}}const Qh=new d.OlP("");let Jh=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=cd([r.queryParams,r.params,r.data]).pipe(zn(([o,l,h],m)=>(h={...o,...l,...h},0===m?(0,gt.of)(h):Promise.resolve(h)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,d.qFp)(r.component);if(l)for(const{templateName:h}of l.inputs)t.activatedComponentRef.setInput(h,o[h]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function ol(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Lr(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ol(n,r,i);return ol(n,r)})}(n,e,t);return new Vi(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const l=o.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>ol(n,h)),l}}const r=function lc(n){return new Fr(new ki.X(n.url),new ki.X(n.params),new ki.X(n.queryParams),new ki.X(n.fragment),new ki.X(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>ol(n,o));return new Vi(r,i)}}const cc="ngNavigationCancelingError";function Xh(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ja(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ys(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function ys(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[cc]=!0,r.cancellationCode=e,t&&(r.url=t),r}function dc(n){return Wp(n)&&Ja(n.url)}function Wp(n){return n&&n[cc]}let Zp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[Ji],encapsulation:2}),n})();function E(n){const e=n.children&&n.children.map(E),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Zt&&(t.component=Zp),t}function A(n){return n.outlet||Zt}function G(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class qe{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),uc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=eu(t);e.children.forEach(o=>{const l=o.value.outlet;this.deactivateRoutes(o,i[l],r),delete i[l]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=eu(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=eu(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=eu(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new R_(o.value.snapshot))}),e.children.length&&this.forwardEvent(new zw(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(uc(i),i===o)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),uc(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=G(i.snapshot);l.attachRef=null,l.route=i,l.injector=h,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class it{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class at{constructor(e,t){this.component=e,this.route=t}}function Wn(n,e,t){const r=n._root;return tu(r,e?e._root:null,t,[r.value])}function jo(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function tu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=eu(e);return n.children.forEach(l=>{(function ef(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&o.routeConfig===l.routeConfig){const m=function Id(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Y(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Y(n.url,e.url)||!ms(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zp(n,e)||!ms(n.queryParams,e.queryParams);default:return!zp(n,e)}}(l,o,o.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new it(r)):(o.data=l.data,o._resolvedData=l._resolvedData),tu(n,e,o.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new at(h.outlet.component,l))}else l&&$o(e,h,i),i.canActivateChecks.push(new it(r)),tu(n,null,o.component?h?h.children:null:t,r,i)})(l,o[l.value.outlet],t,r.concat([l.value]),i),delete o[l.value.outlet]}),Object.entries(o).forEach(([l,h])=>$o(h,t.getContext(l),i)),i}function $o(n,e,t){const r=eu(n),i=n.value;Object.entries(r).forEach(([o,l])=>{$o(l,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new at(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function nu(n){return"function"==typeof n}function ib(n){return n instanceof Fo||"EmptyError"===n?.name}const V_=Symbol("INITIAL_VALUE");function Td(){return zn(n=>cd(n.map(e=>e.pipe(ca(1),Za(V_)))).pipe((0,Mt.U)(e=>{for(const t of e)if(!0!==t){if(t===V_)return V_;if(!1===t||t instanceof D)return t}return!0}),Fi(e=>e!==V_),ca(1)))}function ob(n){return(0,fd.z)((0,gr.b)(e=>{if(Ja(e))throw Xh(0,e)}),(0,Mt.U)(e=>!0===e))}class Dd{constructor(e){this.segmentGroup=e||null}}class B_{constructor(e){this.urlTree=e}}function Sd(n){return qa(new Dd(n))}function Qw(n){return qa(new B_(n))}class oM{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new d.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,gt.of)(r);if(i.numberOfChildren>1||!i.children[Zt])return qa(new d.vHH(4e3,!1));i=i.children[Zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new D(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const h=o.substring(1);r[i]=t[h]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let l={};return Object.entries(t.children).forEach(([h,m])=>{l[h]=this.createSegmentGroup(e,m,r,i)}),new M(o,l)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const Jw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function aM(n,e,t,r,i){const o=Xw(n,e,t);return o.matched?(r=function qw(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function Yp(n,e,t,r){const i=e.canMatch;if(!i||0===i.length)return(0,gt.of)(!0);const o=i.map(l=>{const h=jo(l,n);return Fn(function Kp(n){return n&&nu(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))});return(0,gt.of)(o).pipe(Td(),ob())}(r,e,t).pipe((0,Mt.U)(l=>!0===l?o:{...Jw}))):(0,gt.of)(o)}function Xw(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Jw}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||__)(t,n,e);if(!i)return{...Jw};const o={};Object.entries(i.posParams??{}).forEach(([h,m])=>{o[h]=m.path});const l=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function ub(n,e,t,r){return t.length>0&&function uM(n,e,t){return t.some(r=>H_(n,e,r)&&A(r)!==Zt)}(n,t,r)?{segmentGroup:new M(e,af(r,new M(t,n.children))),slicedSegments:[]}:0===t.length&&function lM(n,e,t){return t.some(r=>H_(n,e,r))}(n,t,r)?{segmentGroup:new M(n.segments,al(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new M(n.segments,n.children),slicedSegments:t}}function al(n,e,t,r,i){const o={};for(const l of r)if(H_(n,t,l)&&!i[A(l)]){const h=new M([],{});o[A(l)]=h}return{...i,...o}}function af(n,e){const t={};t[Zt]=e;for(const r of n)if(""===r.path&&A(r)!==Zt){const i=new M([],{});t[A(r)]=i}return t}function H_(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class lb{constructor(e,t,r,i,o,l,h){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=l,this.urlSerializer=h,this.allowRedirects=!0,this.applyRedirects=new oM(this.urlSerializer,this.urlTree)}noMatchError(e){return new d.vHH(4002,!1)}recognize(){const e=ub(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Zt).pipe(ci(t=>{if(t instanceof B_)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Dd?this.noMatchError(t):t}),(0,Mt.U)(t=>{const r=new wd([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Zt,this.rootComponentType,null,{}),i=new Vi(r,t),o=new Kh("",i),l=function $h(n,e,t=null,r=null){return Xa(T_(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(o._root),{state:o,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Zt).pipe(ci(r=>{throw r instanceof Dd?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=sl(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,vn.D)(i).pipe(co(o=>{const l=r.children[o],h=function x(n,e){const t=n.filter(r=>A(r)===e);return t.push(...n.filter(r=>A(r)!==e)),t}(t,o);return this.processSegmentGroup(e,h,l,o)}),Vo((o,l)=>(o.push(...l),o)),Yu(null),function pd(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Fi((i,o)=>n(i,o,r)):Kr.y,Qu(1),t?Yu(e):lo(()=>new Fo))}(),(0,Qr.z)(o=>{if(null===o)return Sd(r);const l=cb(o);return function fM(n){n.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,gt.of)(l)}))}processSegment(e,t,r,i,o,l){return(0,vn.D)(t).pipe(co(h=>this.processSegmentAgainstRoute(h._injector??e,t,h,r,i,o,l).pipe(ci(m=>{if(m instanceof Dd)return(0,gt.of)(null);throw m}))),Jr(h=>!!h),ci(h=>{if(ib(h))return function dM(n,e,t){return 0===e.length&&!n.children[t]}(r,i,o)?(0,gt.of)([]):Sd(r);throw h}))}processSegmentAgainstRoute(e,t,r,i,o,l,h){return function cM(n,e,t,r){return!!(A(n)===r||r!==Zt&&H_(e,t,n))&&("**"===n.path||Xw(e,n,t).matched)}(r,i,o,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,l,h):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,l):Sd(i):Sd(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Qw(o):this.applyRedirects.lineralizeSegments(r,o).pipe((0,Qr.z)(l=>{const h=new M(l,{});return this.processSegment(e,t,h,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l){const{matched:h,consumedSegments:m,remainingSegments:y,positionalParamSegments:b}=Xw(t,i,o);if(!h)return Sd(t);const S=this.applyRedirects.applyRedirectCommands(m,i.redirectTo,b);return i.redirectTo.startsWith("/")?Qw(S):this.applyRedirects.lineralizeSegments(i,S).pipe((0,Qr.z)(R=>this.processSegment(e,r,t,R.concat(y),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,o,l){let h;if("**"===r.path){const m=i.length>0?md(i).parameters:{},y=new wd(i,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Qp(r),A(r),r.component??r._loadedComponent??null,r,ru(r));h=(0,gt.of)({snapshot:y,consumedSegments:[],remainingSegments:[]}),t.children={}}else h=aM(t,r,i,e).pipe((0,Mt.U)(({matched:m,consumedSegments:y,remainingSegments:b,parameters:S})=>m?{snapshot:new wd(y,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Qp(r),A(r),r.component??r._loadedComponent??null,r,ru(r)),consumedSegments:y,remainingSegments:b}:null));return h.pipe(zn(m=>null===m?Sd(t):this.getChildConfig(e=r._injector??e,r,i).pipe(zn(({routes:y})=>{const b=r._loadedInjector??e,{snapshot:S,consumedSegments:R,remainingSegments:k}=m,{segmentGroup:B,slicedSegments:K}=ub(t,R,k,y);if(0===K.length&&B.hasChildren())return this.processChildren(b,y,B).pipe((0,Mt.U)(ke=>null===ke?null:[new Vi(S,ke)]));if(0===y.length&&0===K.length)return(0,gt.of)([new Vi(S,[])]);const se=A(r)===o;return this.processSegment(b,y,B,K,se?Zt:o,!0).pipe((0,Mt.U)(ke=>[new Vi(S,ke)]))}))))}getChildConfig(e,t,r){return t.children?(0,gt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,gt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function Yw(n,e,t,r){const i=e.canLoad;if(void 0===i||0===i.length)return(0,gt.of)(!0);const o=i.map(l=>{const h=jo(l,n);return Fn(function Cd(n){return n&&nu(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))});return(0,gt.of)(o).pipe(Td(),ob())}(e,t,r).pipe((0,Qr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,gr.b)(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function Ad(n){return qa(ys(!1,3))}())):(0,gt.of)({routes:[],injector:e})}}function pM(n){const e=n.value.routeConfig;return e&&""===e.path}function cb(n){const e=[],t=new Set;for(const r of n){if(!pM(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=cb(r.children);e.push(new Vi(r.value,i))}return e.filter(r=>!t.has(r))}function Qp(n){return n.data||{}}function ru(n){return n.resolve||{}}function gM(n){return"string"==typeof n.title||null===n.title}function Xp(n){return zn(e=>{const t=n(e);return t?(0,vn.D)(t).pipe((0,Mt.U)(()=>e)):(0,gt.of)(e)})}const hc=new d.OlP("ROUTES");let pb=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,d.f3M)(d.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,gt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Fn(t.loadComponent()).pipe((0,Mt.U)(eE),(0,gr.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Ql(()=>{this.componentLoaders.delete(t)})),i=new Kl(r,()=>new pr.x).pipe(Wa());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,gt.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Mt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,y;return Array.isArray(h)?y=h:(m=h.create(t).injector,y=m.get(hc,[],d.XFs.Self|d.XFs.Optional).flat()),{routes:y.map(E),injector:m}}),Ql(()=>{this.childrenLoaders.delete(r)})),l=new Kl(o,()=>new pr.x).pipe(Wa());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Fn(t()).pipe((0,Mt.U)(eE),(0,Qr.z)(r=>r instanceof d.YKP||Array.isArray(r)?(0,gt.of)(r):(0,vn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function eE(n){return function tF(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let j_=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new pr.x,this.configLoader=(0,d.f3M)(pb),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(Ke),this.rootContexts=(0,d.f3M)(il),this.inputBindingEnabled=null!==(0,d.f3M)(Qh,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,gt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Hp(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new M_(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new ki.X({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:da,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Fi(r=>0!==r.id),(0,Mt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),zn(r=>{let i=!1,o=!1;return(0,gt.of)(r).pipe((0,gr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),zn(l=>{const h=t.browserUrlTree.toString(),m=!t.navigated||l.extractedUrl.toString()!==h||h!==t.currentUrlTree.toString();if(!m&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const b="";return this.events.next(new sc(l.id,t.serializeUrl(r.rawUrl),b,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Vs.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return gb(l.source)&&(t.browserUrlTree=l.extractedUrl),(0,gt.of)(l).pipe(zn(b=>{const S=this.transitions?.getValue();return this.events.next(new Wh(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),S!==this.transitions?.getValue()?Vs.E:Promise.resolve(b)}),function Jp(n,e,t,r,i,o){return(0,Qr.z)(l=>function hM(n,e,t,r,i,o,l="emptyOnly"){return new lb(n,e,t,r,i,l,o).recognize()}(n,e,t,r,l.extractedUrl,i,o).pipe((0,Mt.U)(({state:h,tree:m})=>({...l,targetSnapshot:h,urlAfterRedirects:m}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,gr.b)(b=>{if(r.targetSnapshot=b.targetSnapshot,r.urlAfterRedirects=b.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!b.extras.skipLocationChange){const R=t.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);t.setBrowserUrl(R,b)}t.browserUrlTree=b.urlAfterRedirects}const S=new rl(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(S)}));if(m&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:b,extractedUrl:S,source:R,restoredState:k,extras:B}=l,K=new Wh(b,this.urlSerializer.serialize(S),R,k);this.events.next(K);const se=Zh(0,this.rootComponentType).snapshot;return r={...l,targetSnapshot:se,urlAfterRedirects:S,extras:{...B,skipLocationChange:!1,replaceUrl:!1}},(0,gt.of)(r)}{const b="";return this.events.next(new sc(l.id,t.serializeUrl(r.extractedUrl),b,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Vs.E}}),(0,gr.b)(l=>{const h=new Ho(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),(0,Mt.U)(l=>r={...l,guards:Wn(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function sb(n,e){return(0,Qr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:l}}=t;return 0===l.length&&0===o.length?(0,gt.of)({...t,guardsResult:!0}):function U_(n,e,t,r){return(0,vn.D)(n).pipe((0,Qr.z)(i=>function sM(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,gt.of)(!0);const l=o.map(h=>{const m=G(e)??i,y=jo(h,m);return Fn(function bd(n){return n&&nu(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):m.runInContext(()=>y(n,e,t,r))).pipe(Jr())});return(0,gt.of)(l).pipe(Td())}(i.component,i.route,t,e,r)),Jr(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Qr.z)(h=>h&&function tf(n){return"boolean"==typeof n}(h)?function Kw(n,e,t,r){return(0,vn.D)(e).pipe(co(i=>hd(function rM(n,e){return null!==n&&e&&e(new Gw(n)),(0,gt.of)(!0)}(i.route.parent,r),function sf(n,e){return null!==n&&e&&e(new vd(n)),(0,gt.of)(!0)}(i.route,r),function Q1(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(l=>function Bs(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Zl(()=>{const h=l.guards.map(m=>{const y=G(l.node)??t,b=jo(m,y);return Fn(function rf(n){return n&&nu(n.canActivateChild)}(b)?b.canActivateChild(r,n):y.runInContext(()=>b(r,n))).pipe(Jr())});return(0,gt.of)(h).pipe(Td())}));return(0,gt.of)(o).pipe(Td())}(n,i.path,t),function iM(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,gt.of)(!0);const i=r.map(o=>Zl(()=>{const l=G(e)??t,h=jo(o,l);return Fn(function nf(n){return n&&nu(n.canActivate)}(h)?h.canActivate(e,n):l.runInContext(()=>h(e,n))).pipe(Jr())}));return(0,gt.of)(i).pipe(Td())}(n,i.route,t))),Jr(i=>!0!==i,!0))}(r,o,n,e):(0,gt.of)(h)),(0,Mt.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,l=>this.events.next(l)),(0,gr.b)(l=>{if(r.guardsResult=l.guardsResult,Ja(l.guardsResult))throw Xh(0,l.guardsResult);const h=new jw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),Fi(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),Xp(l=>{if(l.guards.canActivateChecks.length)return(0,gt.of)(l).pipe((0,gr.b)(h=>{const m=new $w(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}),zn(h=>{let m=!1;return(0,gt.of)(h).pipe(function db(n,e){return(0,Qr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,gt.of)(t);let o=0;return(0,vn.D)(i).pipe(co(l=>function hb(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!gM(i)&&(o[Ju]=i.title),function fb(n,e,t,r){const i=function X1(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return(0,gt.of)({});const o={};return(0,vn.D)(i).pipe((0,Qr.z)(l=>function eF(n,e,t,r){const i=G(e)??r,o=jo(n,i);return Fn(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[l],e,t,r).pipe(Jr(),(0,gr.b)(h=>{o[l]=h}))),Qu(1),function gd(n){return(0,Mt.U)(()=>n)}(o),ci(l=>ib(l)?Vs.E:qa(l)))}(o,n,e,r).pipe((0,Mt.U)(l=>(n._resolvedData=l,n.data=sl(n,t).resolve,i&&gM(i)&&(n.data[Ju]=i.title),null)))}(l.route,r,n,e)),(0,gr.b)(()=>o++),Qu(1),(0,Qr.z)(l=>o===i.length?(0,gt.of)(t):Vs.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,gr.b)({next:()=>m=!0,complete:()=>{m||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,gr.b)(h=>{const m=new N_(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}))}),Xp(l=>{const h=m=>{const y=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(m.routeConfig).pipe((0,gr.b)(b=>{m.component=b}),(0,Mt.U)(()=>{})));for(const b of m.children)y.push(...h(b));return y};return cd(h(l.targetSnapshot.root)).pipe(Yu(),ca(1))}),Xp(()=>this.afterPreactivation()),(0,Mt.U)(l=>{const h=function qp(n,e,t){const r=ol(n,e._root,t?t._root:void 0);return new Gp(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:h}}),(0,gr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t,r)=>(0,Mt.U)(i=>(new qe(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ca(1),(0,gr.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Bo(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),Ql(()=>{i||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),ci(l=>{if(o=!0,Wp(l)){dc(l)||(t.navigated=!0,t.restoreHistory(r,!0));const h=new go(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(h),dc(l)){const m=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),y={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||gb(r.source)};t.scheduleNavigation(m,da,null,y,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const h=new oc(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(h);try{r.resolve(t.errorHandler(l))}catch(m){r.reject(m)}}return Vs.E}))}))}cancelNavigationTransition(t,r,i){const o=new go(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function gb(n){return n!==da}let mb=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Zt);return r}getResolvedTitleForRoute(t){return t.data[Ju]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(mM)},providedIn:"root"}),n})(),mM=(()=>{class n extends mb{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Gu))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_b=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(yb)},providedIn:"root"}),n})();class $_{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let yb=(()=>{class n extends $_{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uf=new d.OlP("",{providedIn:"root",factory:()=>({})});let _M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Vr)},providedIn:"root"}),n})(),Vr=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Hs=(()=>((Hs=Hs||{})[Hs.COMPLETE=0]="COMPLETE",Hs[Hs.FAILED=1]="FAILED",Hs[Hs.REDIRECTING=2]="REDIRECTING",Hs))();function vb(n,e){n.events.pipe(Fi(t=>t instanceof Bo||t instanceof go||t instanceof oc||t instanceof sc),(0,Mt.U)(t=>t instanceof Bo||t instanceof sc?Hs.COMPLETE:t instanceof go&&(0===t.code||1===t.code)?Hs.REDIRECTING:Hs.FAILED),Fi(t=>t!==Hs.REDIRECTING),ca(1)).subscribe(()=>{e()})}function wb(n){throw n}function Eb(n,e,t){return e.parse("/")}const yM={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let mo=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this.options=(0,d.f3M)(uf,{optional:!0})||{},this.pendingTasks=(0,d.f3M)(d.HDt),this.errorHandler=this.options.errorHandler||wb,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Eb,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(_M),this.routeReuseStrategy=(0,d.f3M)(_b),this.titleStrategy=(0,d.f3M)(mb),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,d.f3M)(hc,{optional:!0})?.flat()??[],this.navigationTransitions=(0,d.f3M)(j_),this.urlSerializer=(0,d.f3M)(Ke),this.location=(0,d.f3M)(Qe),this.componentInputBindingEnabled=!!(0,d.f3M)(Qh,{optional:!0}),this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new D,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Zh(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),da,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const m={...i};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(o.state=m)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,l,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(E),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:l,queryParamsHandling:h,preserveFragment:m}=r,y=m?this.currentUrlTree.fragment:l;let S,b=null;switch(h){case"merge":b={...this.currentUrlTree.queryParams,...o};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=o||null}null!==b&&(b=this.removeEmptyProps(b));try{S=T_(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),S=this.currentUrlTree.root}return Xa(S,t,b,y??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ja(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,da,null,r)}navigate(t,r={skipLocationChange:!1}){return function wM(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new d.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...yM}:!1===r?{...vM}:r,Ja(t))return el(this.currentUrlTree,t,i);const o=this.parseUrl(t);return el(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,l){if(this.disposed)return Promise.resolve(!1);let h,m,y;l?(h=l.resolve,m=l.reject,y=l.promise):y=new Promise((S,R)=>{h=S,m=R});const b=this.pendingTasks.add();return vb(this,()=>{Promise.resolve().then(()=>this.pendingTasks.remove(b))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:h,reject:m,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(i,"",o)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-(this.browserPageId??this.currentPageId);0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lf=(()=>{class n{constructor(t,r,i,o,l,h){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=l,this.locationStrategy=h,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new pr.x;const m=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===m||"area"===m,this.isAnchorElement?this.subscription=t.events.subscribe(y=>{y instanceof Bo&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||o||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(mo),d.Y36(Fr),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(Ue))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&d.NdJ("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&d.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})(),EM=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,o,l){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new d.vpe,this.routerEventsSubscription=t.events.subscribe(h=>{h instanceof Bo&&this.update()})}ngAfterContentInit(){(0,gt.of)(this.links.changes,(0,gt.of)(null)).pipe((0,uo.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,vn.D)(t).pipe((0,uo.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function nF(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(mo),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36(lf,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&d.Suo(i,lf,5),2&t){let o;d.iGM(o=d.CRH())&&(r.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[d.TTD]}),n})();class cf{}let Ib=(()=>{class n{constructor(t,r,i,o,l){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Fi(t=>t instanceof Bo),co(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=(0,d.MMx)(o.providers,t,`Route: ${o.path}`));const l=o._injector??t,h=o._loadedInjector??l;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(l,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(h,o.children??o._loadedRoutes))}return(0,vn.D)(i).pipe((0,uo.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,gt.of)(null);const o=i.pipe((0,Qr.z)(l=>null===l?(0,gt.of)(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,vn.D)([o,l]).pipe((0,uo.J)())}return o})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(mo),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(cf),d.LFG(pb))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const z_=new d.OlP("");let tE=(()=>{class n{constructor(t,r,i,o,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Wh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Bo?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof sc&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof jp&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new jp(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function iu(n,e){return{\u0275kind:n,\u0275providers:e}}function Ab(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(mo),i=n.get(q_);1===n.get(W_)&&r.initialNavigation(),n.get(Z_,null,d.XFs.Optional)?.setUpPreloading(),n.get(z_,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const q_=new d.OlP("",{factory:()=>new pr.x}),W_=new d.OlP("",{providedIn:"root",factory:()=>1}),Z_=new d.OlP("");function K_(n){return iu(0,[{provide:Z_,useExisting:Ib},{provide:cf,useExisting:n}])}const Y_=new d.OlP("ROUTER_FORROOT_GUARD"),IM=[Qe,{provide:Ke,useClass:Ge},mo,il,{provide:Fr,useFactory:function bb(n){return n.routerState.root},deps:[mo]},pb,[]];function CM(){return new d.PXZ("Router",mo)}let Q_=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[IM,[],{provide:hc,multi:!0,useValue:t},{provide:Y_,useFactory:DM,deps:[[mo,new d.FiY,new d.tp0]]},{provide:uf,useValue:r||{}},r?.useHash?{provide:Ue,useClass:Pe}:{provide:Ue,useClass:nt},{provide:z_,useFactory:()=>{const n=(0,d.f3M)(ks),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)(uf),r=(0,d.f3M)(j_),i=(0,d.f3M)(Ke);return t.scrollOffset&&n.setOffset(t.scrollOffset),new tE(i,r,n,e,t)}},r?.preloadingStrategy?K_(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:CM},r?.initialNavigation?rE(r):[],r?.bindToComponentInputs?iu(8,[Jh,{provide:Qh,useExisting:Jh}]).\u0275providers:[],[{provide:iE,useFactory:Ab},{provide:d.tb,multi:!0,useExisting:iE}]]}}static forChild(t){return{ngModule:n,providers:[{provide:hc,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Y_,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function DM(n){return"guarded"}function rE(n){return["disabled"===n.initialNavigation?iu(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(mo);return()=>{e.setUpLocationChangeListener()}}},{provide:W_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?iu(2,[{provide:W_,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(Fe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(mo),o=e.get(q_);vb(i,()=>{r(!0)}),e.get(j_).afterPreactivation=()=>(r(!0),o.closed?(0,gt.of)(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const iE=new d.OlP(""),uF=[];let lF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Q_.forRoot(uF),Q_]}),n})(),J_=(()=>{class n{constructor(){this.title="Order"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:26,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],["href","#",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item","active"],["routerLink","/view-students","routerLinkActive","active",1,"nav-link"],[1,"nav-item"],["href","#",1,"nav-link"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],["href","#",1,"dropdown-item"],[1,"dropdown-divider"],[2,"padding","20px"]],template:function(t,r){1&t&&(d.TgZ(0,"nav",0)(1,"a",1),d._uU(2,"Navbar"),d.qZA(),d.TgZ(3,"button",2),d._UZ(4,"span",3),d.qZA(),d.TgZ(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),d._uU(9,"List Student"),d.qZA()(),d.TgZ(10,"li",8)(11,"a",9),d._uU(12,"Link"),d.qZA()(),d.TgZ(13,"li",10)(14,"a",11),d._uU(15," Dropdown "),d.qZA(),d.TgZ(16,"div",12)(17,"a",13),d._uU(18,"Action"),d.qZA(),d.TgZ(19,"a",13),d._uU(20,"Another action"),d.qZA(),d._UZ(21,"div",14),d.TgZ(22,"a",13),d._uU(23,"Something else here"),d.qZA()()()()()(),d.TgZ(24,"main",15),d._UZ(25,"router-outlet"),d.qZA())},dependencies:[Ji,lf,EM]}),n})(),X_=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),ul=(()=>{class n extends X_{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const js=new d.OlP("NgValueAccessor"),eg={provide:js,useExisting:(0,d.Gpc)(()=>hf),multi:!0},tg=new d.OlP("CompositionEventMode");let hf=(()=>{class n extends X_{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ty(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(tg,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[d._Bn([eg]),d.qOj]}),n})();function su(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function ng(n){return null!=n&&"number"==typeof n.length}const vs=new d.OlP("NgValidators"),ou=new d.OlP("NgAsyncValidators"),oE=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class _o{static min(e){return function Pb(n){return e=>{if(su(e.value)||su(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Ob(n){return e=>{if(su(e.value)||su(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return aE(e)}static requiredTrue(e){return function uE(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function kb(n){return su(n.value)||oE.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Fb(n){return e=>su(e.value)||!ng(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function MM(n){return e=>ng(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Lb(n){if(!n)return ff;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(su(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return cE(e)}static composeAsync(e){return hE(e)}}function aE(n){return su(n.value)?{required:!0}:null}function ff(n){return null}function ny(n){return null!=n}function Vb(n){return(0,d.QGY)(n)?(0,vn.D)(n):n}function lE(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function ry(n,e){return e.map(t=>t(n))}function Ub(n){return n.map(e=>function iy(n){return!n.validate}(e)?e:t=>e.validate(t))}function cE(n){if(!n)return null;const e=n.filter(ny);return 0==e.length?null:function(t){return lE(ry(t,e))}}function dE(n){return null!=n?cE(Ub(n)):null}function hE(n){if(!n)return null;const e=n.filter(ny);return 0==e.length?null:function(t){return function NM(...n){const e=(0,ao.jO)(n),{args:t,keys:r}=oo(n),i=new Zr.y(o=>{const{length:l}=t;if(!l)return void o.complete();const h=new Array(l);let m=l,y=l;for(let b=0;b<l;b++){let S=!1;(0,Lo.Xf)(t[b]).subscribe((0,ar.x)(o,R=>{S||(S=!0,y--),h[b]=R},()=>m--,void 0,()=>{(!m||!S)&&(y||o.next(r?Ki(r,h):h),o.complete())}))}});return e?i.pipe(zl(e)):i}(ry(t,e).map(Vb)).pipe((0,Mt.U)(lE))}}function Bb(n){return null!=n?hE(Ub(n)):null}function Hb(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function pf(n){return n._rawValidators}function jb(n){return n._rawAsyncValidators}function fc(n){return n?Array.isArray(n)?n:[n]:[]}function pc(n,e){return Array.isArray(n)?n.includes(e):n===e}function $b(n,e){const t=fc(e);return fc(n).forEach(i=>{pc(t,i)||t.push(i)}),t}function fE(n,e){return fc(e).filter(t=>!pc(n,t))}class Gb{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=dE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Bb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ws extends Gb{get formDirective(){return null}get path(){return null}}class gc extends Gb{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class pE{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Rd=(()=>{class n extends pE{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(gc,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),sy=(()=>{class n extends pE{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ws,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();const rg="VALID",gE="INVALID",ig="PENDING",yf="DISABLED";function oy(n){return(sg(n)?n.validators:n)||null}function ay(n,e){return(sg(e)?e.asyncValidators:n)||null}function sg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function mE(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")}function _E(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})}class Ht{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===rg}get invalid(){return this.status===gE}get pending(){return this.status==ig}get disabled(){return this.status===yf}get enabled(){return this.status!==yf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators($b(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators($b(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(fE(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(fE(e,this._rawAsyncValidators))}hasValidator(e){return pc(this._rawValidators,e)}hasAsyncValidator(e){return pc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ig,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=yf,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=rg,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===rg||this.status===ig)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yf:rg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ig,this._hasOwnPendingAsyncValidator=!0;const t=Vb(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?yf:this.errors?gE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ig)?ig:this._anyControlsHaveStatus(gE)?gE:rg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){sg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function mF(n){return Array.isArray(n)?dE(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function uy(n){return Array.isArray(n)?Bb(n):n||null}(this._rawAsyncValidators)}}class vf extends Ht{constructor(e,t,r){super(oy(t),ay(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){_E(this,0,e),Object.keys(e).forEach(r=>{mE(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Kb extends vf{}const Pd=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>og}),og="always";function ug(n,e,t=og){Yb(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Qb(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Od(n,e)})}(n,e),function Jb(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function _c(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Od(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function FM(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function lg(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),cg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ly(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Yb(n,e){const t=pf(n);null!==e.validator?n.setValidators(Hb(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=jb(n);null!==e.asyncValidator?n.setAsyncValidators(Hb(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();ly(e._rawValidators,i),ly(e._rawAsyncValidators,i)}function cg(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=pf(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(l=>l!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=jb(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(l=>l!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return ly(e._rawValidators,r),ly(e._rawAsyncValidators,r),t}function Od(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function tT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function nT(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const pg=class extends Ht{constructor(e=null,t,r){super(oy(t),ay(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),sg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=nT(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){tT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){tT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){nT(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let IE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),dT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const zo=new d.OlP("NgModelWithFormControlWarning"),gT={provide:ws,useExisting:(0,d.Gpc)(()=>gg)};let gg=(()=>{class n extends ws{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(cg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return ug(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){lg(t.control||null,t,!1),function VM(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function wE(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(lg(r||null,t),(n=>n instanceof pg)(i)&&(ug(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Xb(n,e){Yb(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function cy(n,e){return cg(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Yb(this.form,this),this._oldForm&&cg(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(vs,10),d.Y36(ou,10),d.Y36(Pd,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([gT]),d.qOj,d.TTD]}),n})();const _T={provide:gc,useExisting:(0,d.Gpc)(()=>_g)};let _g=(()=>{class n extends gc{set isDisabled(t){}constructor(t,r,i,o,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.name=null,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function fg(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===hf?t=o:function vE(n){return Object.getPrototypeOf(n.constructor)===ul}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){this._added||this._setUpControl(),function hg(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function ag(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(ws,13),d.Y36(vs,10),d.Y36(ou,10),d.Y36(js,10),d.Y36(zo,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([_T]),d.qOj,d.TTD]}),n})(),au=(()=>{class n{constructor(){this._validator=ff}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ff,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const gy={provide:vs,useExisting:(0,d.Gpc)(()=>wg),multi:!0};let wg=(()=>{class n extends au{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=d.D6c,this.createValidator=t=>aE}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([gy]),d.qOj]}),n})(),DT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[dT]}),n})();class ST extends Ht{constructor(e,t,r){super(oy(t),ay(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){_E(this,0,e),e.forEach((r,i)=>{mE(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function AT(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let NT=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let o={};return AT(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new vf(i,o)}record(t,r=null){const i=this._reduceControls(t);return new Kb(i,r)}control(t,r,i){let o={};return this.useNonNullable?(AT(r)?o=r:(o.validators=r,o.asyncValidators=i),new pg(t,{...o,nonNullable:!0})):new pg(t,r,i)}array(t,r,i){const o=t.map(l=>this._createControl(l));return new ST(o,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof pg||t instanceof Ht?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),QM=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Pd,useValue:t.callSetDisabledState??og}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[DT]}),n})(),ME=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:zo,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Pd,useValue:t.callSetDisabledState??og}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[DT]}),n})();var di=F(2011),RE=F(6451),_y=F(5363),JM=F(6063);class XM extends pr.x{constructor(e=1/0,t=1/0,r=JM.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:l}=this;t||(r.push(e),!i&&r.push(o.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let l=0;l<o.length&&!e.closed;l+=r?1:2)e.next(o[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const l=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=l;m+=2)h=m;h&&r.splice(0,h+1)}}}var RT=F(3099);function xT(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,RT.B)({connector:()=>new XM(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function xE(n,e){return(0,Oi.m)(e)?zn(()=>n,e):zn(()=>n)}var yy=F(9468),wn=F(4976);F(259);var ge=F(5861),ei=F(6881),Xi=F(4859),O=F(2090),es=F(1877);const yc=new Map,FE={activated:!1,tokenObservers:[]},kT={initialized:!1,enabled:!1};function mr(n){return yc.get(n)||Object.assign({},FE)}function Sg(){return kT}const vy="https://content-firebaseappcheck.googleapis.com/v1",UT="exchangeDebugToken",wy={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class RF{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new O.BH,yield function xF(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new O.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ui=new O.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function VE(n){if(!mr(n).activated)throw Ui.create("use-before-activation",{appName:n.name})}function Iy(n,e){return UE.apply(this,arguments)}function UE(){return(UE=(0,ge.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const o={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(n,o)}catch(S){throw Ui.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==l.status)throw Ui.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(S){throw Ui.create("fetch-parse-error",{originalErrorMessage:S?.message})}const m=h.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Ui.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(m[1]),b=Date.now();return{token:h.token,expireTimeMillis:b+y,issuedAtTimeMillis:b}})).apply(this,arguments)}function Cy(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${vy}/projects/${t}/apps/${r}:${UT}?key=${i}`,body:{debug_token:e}}}const by="firebase-app-check-database",HT=1,ll="firebase-app-check-store";let Ty=null;function Cf(){return(Cf=(0,ge.Z)(function*(n,e){const r=(yield function If(){return Ty||(Ty=new Promise((n,e)=>{try{const t=indexedDB.open(by,HT);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ui.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ll,{keyPath:"compositeKey"})}}catch(t){e(Ui.create("storage-open",{originalErrorMessage:t?.message}))}}),Ty)}()).transaction(ll,"readwrite"),o=r.objectStore(ll).put({compositeKey:n,value:e});return new Promise((l,h)=>{o.onsuccess=m=>{l()},r.onerror=m=>{var y;h(Ui.create("storage-set",{originalErrorMessage:null===(y=m.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const Mg=new es.Yd("@firebase/app-check");function Sy(n,e){return(0,O.hl)()?function sR(n,e){return function Dy(n,e){return Cf.apply(this,arguments)}(function $T(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Mg.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Ay(){return Sg().enabled}function Ny(){return My.apply(this,arguments)}function My(){return(My=(0,ge.Z)(function*(){const n=Sg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const cR={error:"UNKNOWN_ERROR"};function dR(n){return O.US.encodeString(JSON.stringify(n),!1)}function Rg(n){return xg.apply(this,arguments)}function xg(){return(xg=(0,ge.Z)(function*(n,e=!1){const t=n.app;VE(t);const r=mr(t);let o,i=r.token;if(i&&!Df(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(Df(m)?i=m:yield Sy(t,void 0))}if(!e&&i&&Df(i))return{token:i.token};let h,l=!1;if(Ay()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Iy(Cy(t,yield Ny()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const m=yield r.exchangeTokenPromise;return yield Sy(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield mr(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Mg.warn(m.message):Mg.error(m),o=m}return i?o?h=Df(i)?{token:i.token,internalError:o}:qT(o):(h={token:i.token},r.token=i,yield Sy(t,i)):h=qT(o),l&&function zT(n,e){const t=mr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h})).apply(this,arguments)}function Ry(n){return zE.apply(this,arguments)}function zE(){return(zE=(0,ge.Z)(function*(n){const e=n.app;VE(e);const{provider:t}=mr(e);if(Ay()){const r=yield Ny(),{token:i}=yield Iy(Cy(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function Tf(n,e){const t=mr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function xy(n){const{app:e}=n,t=mr(e);let r=t.tokenRefresher;r||(r=function GT(n){const{app:e}=n;return new RF((0,ge.Z)(function*(){let r;if(r=mr(e).token?yield Rg(n,!0):yield Rg(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=mr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},wy.RETRIAL_MIN_WAIT,wy.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Df(n){return n.expireTimeMillis-Date.now()>0}function qT(n){return{token:dR(cR),error:n}}class Py{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=mr(this.app);for(const t of e)Tf(this.app,t.next);return Promise.resolve()}}const Og="app-check-internal";!function vc(){(0,ei._registerComponent)(new Xi.wA("app-check",n=>function Oy(n,e){return new Py(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Og).initialize()})),(0,ei._registerComponent)(new Xi.wA(Og,n=>function WT(n){return{getToken:e=>Rg(n,e),getLimitedUseToken:()=>Ry(n),addTokenListener:e=>function bf(n,e,t,r){const{app:i}=n,o=mr(i);if(o.tokenObservers=[...o.tokenObservers,{next:t,error:r,type:e}],o.token&&Df(o.token)){const h=o.token;Promise.resolve().then(()=>{t({token:h.token}),xy(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>xy(n))}(n,"INTERNAL",e),removeTokenListener:e=>Tf(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ei.registerVersion)("@firebase/app-check","0.8.0")}();class Fd{constructor(){return(0,wn.vb)("app-check")}}typeof window<"u"&&window;var Ly=F(9260);const Vy=new d.OlP("angularfire2.auth.use-emulator"),wc=new d.OlP("angularfire2.auth.settings"),QE=new d.OlP("angularfire2.auth.tenant-id"),JE=new d.OlP("angularfire2.auth.langugage-code"),Uy=new d.OlP("angularfire2.auth.use-device-language"),XE=new d.OlP("angularfire.auth.persistence"),By=(n,e,t,r,i,o,l,h)=>(0,di.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,o&&m.useDeviceLanguage(),l)for(const[y,b]of Object.entries(l))m.settings[y]=b;return h&&m.setPersistence(h),m},[t,r,i,o,l,h]);let e0=(()=>{class n{constructor(t,r,i,o,l,h,m,y,b,S,R,k){const B=new pr.x,K=(0,gt.of)(void 0).pipe((0,_y.Q)(l.outsideAngular),zn(()=>o.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,2644)))),(0,Mt.U)(()=>(0,di.on)(t,o,r)),(0,Mt.U)(se=>By(se,o,h,y,b,S,m,R)),xT({bufferSize:1,refCount:!1}));if(na(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,gt.of)(null);else{K.pipe(Jr()).subscribe();const ke=K.pipe(zn(Ye=>Ye.getRedirectResult().then(At=>At,()=>null)),wn.iC,xT({bufferSize:1,refCount:!1})),We=K.pipe(zn(Ye=>new Zr.y(At=>({unsubscribe:o.runOutsideAngular(()=>Ye.onAuthStateChanged(Ft=>At.next(Ft),Ft=>At.error(Ft),()=>At.complete()))})))),Be=K.pipe(zn(Ye=>new Zr.y(At=>({unsubscribe:o.runOutsideAngular(()=>Ye.onIdTokenChanged(Ft=>At.next(Ft),Ft=>At.error(Ft),()=>At.complete()))}))));this.authState=ke.pipe(xE(We),(0,yy.R)(l.outsideAngular),(0,_y.Q)(l.insideAngular)),this.user=ke.pipe(xE(Be),(0,yy.R)(l.outsideAngular),(0,_y.Q)(l.insideAngular)),this.idToken=this.user.pipe(zn(Ye=>Ye?(0,vn.D)(Ye.getIdToken()):(0,gt.of)(null))),this.idTokenResult=this.user.pipe(zn(Ye=>Ye?(0,vn.D)(Ye.getIdTokenResult()):(0,gt.of)(null))),this.credential=(0,RE.T)(ke,B,this.authState.pipe(Fi(Ye=>!Ye))).pipe((0,Mt.U)(Ye=>Ye?.user?Ye:null),(0,yy.R)(l.outsideAngular),(0,_y.Q)(l.insideAngular))}return(0,di.pX)(this,K,o,{spy:{apply:(se,ke,We)=>{(se.startsWith("signIn")||se.startsWith("createUser"))&&We.then(Be=>B.next(Be))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(di.Dh),d.LFG(di.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(wn.HU),d.LFG(Vy,8),d.LFG(wc,8),d.LFG(QE,8),d.LFG(JE,8),d.LFG(Uy,8),d.LFG(XE,8),d.LFG(Fd,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),t0=(()=>{class n{constructor(){Ly.Z.registerVersion("angularfire",wn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[e0]}),n})();var Fg=F(4986),n0=F(3942);const r0="firebasestorage.googleapis.com",pa="storageBucket";class ur extends O.ZR{constructor(e,t,r=0){super(s0(e),`Firebase Storage: ${t} (${s0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ur.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return s0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var kt=(()=>((kt=kt||{}).UNKNOWN="unknown",kt.OBJECT_NOT_FOUND="object-not-found",kt.BUCKET_NOT_FOUND="bucket-not-found",kt.PROJECT_NOT_FOUND="project-not-found",kt.QUOTA_EXCEEDED="quota-exceeded",kt.UNAUTHENTICATED="unauthenticated",kt.UNAUTHORIZED="unauthorized",kt.UNAUTHORIZED_APP="unauthorized-app",kt.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",kt.INVALID_CHECKSUM="invalid-checksum",kt.CANCELED="canceled",kt.INVALID_EVENT_NAME="invalid-event-name",kt.INVALID_URL="invalid-url",kt.INVALID_DEFAULT_BUCKET="invalid-default-bucket",kt.NO_DEFAULT_BUCKET="no-default-bucket",kt.CANNOT_SLICE_BLOB="cannot-slice-blob",kt.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",kt.NO_DOWNLOAD_URL="no-download-url",kt.INVALID_ARGUMENT="invalid-argument",kt.INVALID_ARGUMENT_COUNT="invalid-argument-count",kt.APP_DELETED="app-deleted",kt.INVALID_ROOT_OPERATION="invalid-root-operation",kt.INVALID_FORMAT="invalid-format",kt.INTERNAL_ERROR="internal-error",kt.UNSUPPORTED_ENVIRONMENT="unsupported-environment",kt))();function s0(n){return"storage/"+n}function o0(){return new ur(kt.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function cD(){return new ur(kt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dD(){return new ur(kt.CANCELED,"User canceled the upload/download.")}function pD(){return new ur(kt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Nf(n){return new ur(kt.INVALID_ARGUMENT,n)}function yD(){return new ur(kt.APP_DELETED,"The Firebase app was deleted.")}function jy(n){return new ur(kt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ec(n,e){return new ur(kt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ld(n){throw new ur(kt.INTERNAL_ERROR,"Internal error: "+n)}class Bi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Bi.makeFromUrl(e,t)}catch{return new Bi(e,"")}if(""===r.path)return r;throw function fD(n){return new ur(kt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(Ye){Ye.path_=decodeURIComponent(Ye.path)}const S=t.replace(/[.]/g,"\\."),Be=[{regex:h,indices:{bucket:1,path:3},postModify:function o(Ye){"/"===Ye.path.charAt(Ye.path.length-1)&&(Ye.path_=Ye.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===r0?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Ye=0;Ye<Be.length;Ye++){const At=Be[Ye],Ft=At.regex.exec(e);if(Ft){let Hr=Ft[At.indices.path];Hr||(Hr=""),r=new Bi(Ft[At.indices.bucket],Hr),At.postModify(r);break}}if(null==r)throw function hD(n){return new ur(kt.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class vD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function $y(n){return"string"==typeof n||n instanceof String}function TD(n){return u0()&&n instanceof Blob}function u0(){return typeof Blob<"u"&&!(0,O.UG)()}function l0(n,e,t,r){if(r<e)throw Nf(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Nf(`Invalid value for '${n}'. Expected ${t} or less.`)}function cl(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function DD(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var $s=(()=>(($s=$s||{})[$s.NO_ERROR=0]="NO_ERROR",$s[$s.NETWORK_ERROR=1]="NETWORK_ERROR",$s[$s.ABORT=2]="ABORT",$s))();function SD(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),o=-1!==e.indexOf(n);return t||i||o}class DR{constructor(e,t,r,i,o,l,h,m,y,b,S,R=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=m,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=S,this.retry=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,B)=>{this.resolve_=k,this.reject_=B,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());!function ID(n){return void 0!==n}(m)?o():o(m)}catch(m){l(m)}else if(null!==h){const m=o0();m.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,m):m)}else l(i.canceled?this.appDelete_?yD():dD():cD())};this.canceled_?t(0,new Gy(!1,null,!0)):this.backoffId_=function wD(n,e,t){let r=1,i=null,o=null,l=!1,h=0;function m(){return 2===h}let y=!1;function b(...se){y||(y=!0,e.apply(null,se))}function S(se){i=setTimeout(()=>{i=null,n(k,m())},se)}function R(){o&&clearTimeout(o)}function k(se,...ke){if(y)return void R();if(se)return R(),void b.call(null,se,...ke);if(m()||l)return R(),void b.call(null,se,...ke);let Be;r<64&&(r*=2),1===h?(h=2,Be=0):Be=1e3*(r+Math.random()),S(Be)}let B=!1;function K(se){B||(B=!0,R(),!y&&(null!==i?(se||(h=2),clearTimeout(i),S(0)):se||(h=1)))}return S(0),o=setTimeout(()=>{l=!0,K(!0)},t),K}((r,i)=>{if(i)return void r(!1,new Gy(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const h=o.getErrorCode()===$s.NO_ERROR,m=o.getStatus();if(!h||SD(m,this.additionalRetryCodes_)&&this.retry){const b=o.getErrorCode()===$s.ABORT;return void r(!1,new Gy(!1,null,b))}const y=-1!==this.successCodes_.indexOf(m);r(!0,new Gy(y,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function ED(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Gy{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function PR(...n){const e=function xR(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(u0())return new Blob(n);throw new ur(kt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Gs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class zy{constructor(e,t){this.data=e,this.contentType=t||null}}function qy(n,e){switch(n){case Gs.RAW:return new zy(c0(e));case Gs.BASE64:case Gs.BASE64URL:return new zy(d0(n,e));case Gs.DATA_URL:return new zy(function MD(n){const e=new h0(n);return e.base64?d0(Gs.BASE64,e.rest):function ND(n){let e;try{e=decodeURIComponent(n)}catch{throw Ec(Gs.DATA_URL,"Malformed data URL.")}return c0(e)}(e.rest)}(e),function RD(n){return new h0(n).contentType}(e))}throw o0()}function c0(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function d0(n,e){switch(n){case Gs.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw Ec(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Gs.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Ec(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function AD(n){if(typeof atob>"u")throw function _D(n){return new ur(kt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Ec(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class h0{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Ec(Gs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function f0(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ts{constructor(e,t){let r=0,i="";TD(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(TD(this.data_)){const i=function OR(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new ts(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ts(r,!0)}}static getBlob(...e){if(u0()){const t=e.map(r=>r instanceof ts?r.data_:r);return new ts(PR.apply(null,t))}{const t=e.map(l=>$y(l)?qy(Gs.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[o++]=l[h]}),new ts(i,!0)}}uploadData(){return this.data_}}function p0(n){let e;try{e=JSON.parse(n)}catch{return null}return function bD(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function FR(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function g0(n,e){return e}class zs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||g0}}let Vg=null;function Wy(){if(Vg)return Vg;const n=[];n.push(new zs("bucket")),n.push(new zs("generation")),n.push(new zs("metageneration")),n.push(new zs("name","fullPath",!0));const t=new zs("name");t.xform=function e(o,l){return function xD(n){return!$y(n)||n.length<2?n:FR(n)}(l)},n.push(t);const i=new zs("size");return i.xform=function r(o,l){return void 0!==l?Number(l):l},n.push(i),n.push(new zs("timeCreated")),n.push(new zs("updated")),n.push(new zs("md5Hash",null,!0)),n.push(new zs("cacheControl",null,!0)),n.push(new zs("contentDisposition",null,!0)),n.push(new zs("contentEncoding",null,!0)),n.push(new zs("contentLanguage",null,!0)),n.push(new zs("contentType",null,!0)),n.push(new zs("metadata","customMetadata",!0)),Vg=n,Vg}function PD(n,e,t){const r=p0(e);return null===r?null:function LR(n,e,t){const r={type:"file"},i=t.length;for(let o=0;o<i;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return function Pt(n,e){Object.defineProperty(n,"ref",{get:function t(){const o=new Bi(n.bucket,n.fullPath);return e._makeStorageReference(o)}})}(r,n),r}(n,r,t)}function Ic(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}const OD="prefixes",Ug="items";class dl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function _a(n){if(!n)throw o0()}function Bg(n,e){return function t(r,i){const o=PD(n,i,e);return _a(null!==o),o}}function Vd(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function TR(){return new ur(kt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Lg(){return new ur(kt.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function a0(n){return new ur(kt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function lD(n){return new ur(kt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Rf(n){const e=Vd(n);return function t(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function bR(n){return new ur(kt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=i.serverResponse,o}}function m0(n,e,t){const i=cl(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new dl(i,"GET",Bg(n,t),l);return h.errorHandler=Rf(e),h}function BR(n,e,t,r,i){const o={};o.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);const h=cl(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,b=new dl(h,"GET",function UR(n,e){return function t(r,i){const o=function Tr(n,e,t){const r=p0(t);return null===r?null:function Zy(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[OD])for(const i of t[OD]){const o=i.replace(/\/$/,""),l=n._makeStorageReference(new Bi(e,o));r.prefixes.push(l)}if(t[Ug])for(const i of t[Ug]){const o=n._makeStorageReference(new Bi(e,i.name));r.items.push(o)}return r}(n,e,r)}(n,e,i);return _a(null!==o),o}}(n,e.bucket),y);return b.urlParams=o,b.errorHandler=Vd(e),b}function LD(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function $R(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class $g{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Ky(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{_a(!1)}return _a(!!t&&-1!==(e||["active"]).indexOf(t)),t}const zR={STATE_CHANGED:"state_changed"},Is={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function _0(n){switch(n){case"running":case"pausing":case"canceling":return Is.RUNNING;case"paused":return Is.PAUSED;case"success":return Is.SUCCESS;case"canceled":return Is.CANCELED;default:return Is.ERROR}}class UD{constructor(e,t,r){if(function CD(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function Ud(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let y0=null;class qR{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$s.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$s.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$s.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Ld("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ld("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ld("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ld("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ld("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class BD extends qR{initXhr(){this.xhr_.responseType="text"}}function ya(){return y0?y0():new BD}class ZR{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Wy(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(kt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(SD(i.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=cD()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(kt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function VD(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),l=LD(e,r,i),h={name:l.fullPath},m=cl(o,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=Ic(l,t),B=new dl(m,"POST",function k(K){let se;Ky(K);try{se=K.getResponseHeader("X-Goog-Upload-URL")}catch{_a(!1)}return _a($y(se)),se},n.maxUploadRetryTime);return B.urlParams=h,B.headers=b,B.body=S,B.errorHandler=Vd(e),B}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ya,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function GR(n,e,t,r){const m=new dl(t,"POST",function o(y){const b=Ky(y,["active","final"]);let S=null;try{S=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{_a(!1)}S||_a(!1);const R=Number(S);return _a(!isNaN(R)),new $g(R,r.size(),"final"===b)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=Vd(e),m}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,ya,t,r);this._request=o,o.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new $g(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let l;try{l=function Gg(n,e,t,r,i,o,l,h){const m=new $g(0,0);if(l?(m.current=l.current,m.total=l.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function gD(){return new ur(kt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const y=m.total-m.current;let b=y;i>0&&(b=Math.min(b,i));const S=m.current;let k="";k=0===b?"finalize":y===b?"upload, finalize":"upload";const B={"X-Goog-Upload-Command":k,"X-Goog-Upload-Offset":`${m.current}`},K=r.slice(S,S+b);if(null===K)throw pD();const Be=new dl(t,"POST",function se(Ye,At){const Ft=Ky(Ye,["active","final"]),_n=m.current+b,Hr=r.size();let Ys;return Ys="final"===Ft?Bg(e,o)(Ye,At):null,new $g(_n,Hr,"final"===Ft,Ys)},e.maxUploadRetryTime);return Be.headers=B,Be.body=K.uploadData(),Be.progressCallback=h||null,Be.errorHandler=Vd(n),Be}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const h=this._ref.storage._makeRequest(l,ya,i,o,!1);this._request=h,h.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=m0(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ya,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function jg(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},m=function h(){let Be="";for(let Ye=0;Ye<2;Ye++)Be+=Math.random().toString().slice(2);return Be}();l["Content-Type"]="multipart/related; boundary="+m;const y=LD(e,r,i),b=Ic(y,t),k=ts.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+m+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===k)throw pD();const B={name:y.fullPath},K=cl(o,n.host,n._protocol),ke=n.maxUploadRetryTime,We=new dl(K,"POST",Bg(n,t),ke);return We.urlParams=B,We.headers=l,We.body=k.uploadData(),We.errorHandler=Vd(e),We}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ya,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=dD(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=_0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const o=new UD(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(_0(this._state)){case Is.SUCCESS:Ud(this._resolve.bind(null,this.snapshot))();break;case Is.CANCELED:case Is.ERROR:Ud(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(_0(this._state)){case Is.RUNNING:case Is.PAUSED:e.next&&Ud(e.next.bind(e,this.snapshot))();break;case Is.SUCCESS:e.complete&&Ud(e.complete.bind(e))();break;default:e.error&&Ud(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Cc{constructor(e,t){this._service=e,this._location=t instanceof Bi?t:Bi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Cc(e,t)}get root(){const e=new Bi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return FR(this._location.path)}get storage(){return this._service}get parent(){const e=function kR(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Bi(this._location.bucket,e);return new Cc(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw jy(e)}}function $D(n,e,t){return v0.apply(this,arguments)}function v0(){return(v0=(0,ge.Z)(function*(n,e,t){const i=yield GD(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield $D(n,e,i.nextPageToken))})).apply(this,arguments)}function GD(n,e){null!=e&&"number"==typeof e.maxResults&&l0("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=BR(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,ya)}function zD(n){n._throwIfRoot("getDownloadURL");const e=function HR(n,e,t){const i=cl(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new dl(i,"GET",function kD(n,e){return function t(r,i){const o=PD(n,i,e);return _a(null!==o),function VR(n,e,t,r){const i=p0(e);if(null===i||!$y(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const l=encodeURIComponent;return o.split(",").map(y=>{const S=n.fullPath;return cl("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+DD({alt:"media",token:y})})[0]}(o,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=Rf(e),h}(n.storage,n._location,Wy());return n.storage.makeRequestWithTokens(e,ya).then(t=>{if(null===t)throw function mD(){return new ur(kt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function qD(n,e){const t=function Mf(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Bi(n._location.bucket,t);return new Cc(n.storage,r)}function w0(n,e){if(n instanceof Qy){const t=n;if(null==t._bucket)throw function Hy(){return new ur(kt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+pa+"' property when initializing the app?")}();const r=new Cc(t,t._bucket);return null!=e?w0(r,e):r}return void 0!==e?qD(n,e):n}function ex(n,e){if(e&&function qg(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Qy)return function XR(n,e){return new Cc(n,e)}(n,e);throw Nf("To use ref(service, url), the first argument must be a Storage instance.")}return w0(n,e)}function E0(n,e){const t=e?.[pa];return null==t?null:Bi.makeFromBucketSpec(t,n)}class Qy{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=r0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Bi.makeFromBucketSpec(i,this._host):E0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Bi.makeFromBucketSpec(this._url,e):E0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){l0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){l0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ge.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ge.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Cc(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new vD(yD());{const l=function RR(n,e,t,r,i,o,l=!0){const h=DD(n.urlParams),m=n.url+h,y=Object.assign({},n.headers);return function NR(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function SR(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function AR(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(y,o),function MR(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new DR(m,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,ge.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,o).getPromise()})()}}const WD="@firebase/storage";function YD(n,e){return ex(n=(0,O.m9)(n),e)}function JD(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Qy(t,r,i,e,ei.SDK_VERSION)}!function XD(){(0,ei._registerComponent)(new Xi.wA("storage",JD,"PUBLIC").setMultipleInstances(!0)),(0,ei.registerVersion)(WD,"0.11.2",""),(0,ei.registerVersion)(WD,"0.11.2","esm2017")}();class Xy{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class eS{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Xy(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Xy(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(o="function"==typeof t?l=>t(new Xy(l,this,this._ref)):{next:t.next?l=>t.next(new Xy(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class C0{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new hl(e,this._service))}get items(){return this._delegate.items.map(e=>new hl(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class hl{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function lx(n,e){return qD(n,e)}(this._delegate,e);return new hl(t,this.storage)}get root(){return new hl(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new hl(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new eS(function ix(n,e,t){return function jD(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new ZR(n,new ts(e),t)}(n=(0,O.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Gs.RAW,r){this._throwIfRoot("putString");const i=qy(t,e),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new eS(new ZR(this._delegate,new ts(i.data,!0),o),this)}listAll(){return function KD(n){return function YR(n){const e={prefixes:[],items:[]};return $D(n,e).then(()=>e)}(n=(0,O.m9)(n))}(this._delegate).then(e=>new C0(e,this.storage))}list(e){return function ox(n,e){return GD(n=(0,O.m9)(n),e)}(this._delegate,e||void 0).then(t=>new C0(t,this.storage))}getMetadata(){return function sx(n){return function HF(n){n._throwIfRoot("getMetadata");const e=m0(n.storage,n._location,Wy());return n.storage.makeRequestWithTokens(e,ya)}(n=(0,O.m9)(n))}(this._delegate)}updateMetadata(e){return function I0(n,e){return function QR(n,e){n._throwIfRoot("updateMetadata");const t=function Hg(n,e,t,r){const o=cl(e.fullServerUrl(),n.host,n._protocol),h=Ic(t,r),y=n.maxOperationRetryTime,b=new dl(o,"PATCH",Bg(n,r),y);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=h,b.errorHandler=Rf(e),b}(n.storage,n._location,e,Wy());return n.storage.makeRequestWithTokens(t,ya)}(n=(0,O.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function ax(n){return zD(n=(0,O.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function ux(n){return function JR(n){n._throwIfRoot("deleteObject");const e=function jR(n,e){const r=cl(e.fullServerUrl(),n.host,n._protocol),h=new dl(r,"DELETE",function l(m,y){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=Rf(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ya)}(n=(0,O.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw jy(e)}}class tS{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(nS(e))throw Nf("ref() expected a child path but got a URL, use refFromURL instead.");return new hl(YD(this._delegate,e),this)}refFromURL(e){if(!nS(e))throw Nf("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Bi.makeFromUrl(e,this._delegate.host)}catch{throw Nf("refFromUrl() expected a valid full URL but got an invalid one.")}return new hl(YD(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function QD(n,e,t,r={}){!function tx(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,O.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function nS(n){return/^[A-Za-z]+:\/\//.test(n)}function D0(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new tS(t,r)}function ev(n){const e=function dx(n){return new Zr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const o=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){o()}}).pipe(function lu(n,e=Fg.z){return(0,Yr.e)((t,r)=>{let i=null,o=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const y=o;o=null,r.next(y)}};function m(){const y=l+n,b=e.now();if(b<y)return i=this.schedule(void 0,y-b),void r.add(i);h()}t.subscribe((0,ar.x)(r,y=>{o=y,l=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{o=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Mt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function tv(n){return{getDownloadURL:()=>(0,gt.of)(void 0).pipe(wn.fc,zn(()=>n.getDownloadURL()),wn.iC),getMetadata:()=>(0,gt.of)(void 0).pipe(wn.fc,zn(()=>n.getMetadata()),wn.iC),delete:()=>(0,vn.D)(n.delete()),child:e=>tv(n.child(e)),updateMetadata:e=>(0,vn.D)(n.updateMetadata(e)),put:(e,t)=>ev(n.put(e,t)),putString:(e,t,r)=>ev(n.putString(e,t,r)),list:e=>(0,vn.D)(n.list(e)),listAll:()=>(0,vn.D)(n.listAll())}}!function cx(n){const e={TaskState:Is,TaskEvent:zR,StringFormat:Gs,Storage:tS,Reference:hl};n.INTERNAL.registerComponent(new Xi.wA("storage-compat",D0,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(n0.Z);const iS=new d.OlP("angularfire2.storageBucket"),Pf=new d.OlP("angularfire2.storage.maxUploadRetryTime"),sS=new d.OlP("angularfire2.storage.maxOperationRetryTime"),hx=new d.OlP("angularfire2.storage.use-emulator");let qF=(()=>{class n{constructor(t,r,i,o,l,h,m,y,b,S){const R=(0,di.on)(t,l,r);this.storage=(0,di.cc)(`${R.name}.storage.${i}`,"AngularFireStorage",R.name,()=>{const k=l.runOutsideAngular(()=>R.storage(i||void 0)),B=b;return B&&k.useEmulator(...B),m&&k.setMaxUploadRetryTime(m),y&&k.setMaxOperationRetryTime(y),k},[m,y])}ref(t){return tv(this.storage.ref(t))}refFromURL(t){return tv(this.storage.refFromURL(t))}upload(t,r,i){return tv(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(di.Dh),d.LFG(di.xv,8),d.LFG(iS,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(wn.HU),d.LFG(Pf,8),d.LFG(sS,8),d.LFG(hx,8),d.LFG(Fd,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),S0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),fx=(()=>{class n{constructor(){Ly.Z.registerVersion("angularfire",wn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[qF],imports:[S0]}),n})();function nv(){return(0,Yr.e)((n,e)=>{let t,r=!1;n.subscribe((0,ar.x)(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}var st,A0=F(1884),aS=(F(2644),typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{}),yo={},rv=rv||{},zt=aS||self;function Wg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Zg(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var N0="closure_uid_"+(1e9*Math.random()>>>0),gx=0;function uS(n,e,t){return n.call.apply(n.bind,arguments)}function ZF(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Hi(n,e,t){return(Hi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?uS:ZF).apply(null,arguments)}function iv(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ei(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,o){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function Bd(){this.s=this.s,this.o=this.o}Bd.prototype.s=!1,Bd.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function px(n){Object.prototype.hasOwnProperty.call(n,N0)&&n[N0]||(n[N0]=++gx)}(this)},Bd.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lS=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function M0(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function R0(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Wg(r)){const i=n.length||0,o=r.length||0;n.length=i+o;for(let l=0;l<o;l++)n[i+l]=r[l]}else n.push(r)}}function ns(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ns.prototype.h=function(){this.defaultPrevented=!0};var _x=function(){if(!zt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{zt.addEventListener("test",()=>{},e),zt.removeEventListener("test",()=>{},e)}catch{}return n}();function Kg(n){return/^[\s\xa0]*$/.test(n)}function sv(){var n=zt.navigator;return n&&(n=n.userAgent)?n:""}function cu(n){return-1!=sv().indexOf(n)}function x0(n){return x0[" "](n),n}x0[" "]=function(){};var av,n,vx=cu("Opera"),du=cu("Trident")||cu("MSIE"),P0=cu("Edge"),ov=P0||du,O0=cu("Gecko")&&!(-1!=sv().toLowerCase().indexOf("webkit")&&!cu("Edge"))&&!(cu("Trident")||cu("MSIE"))&&!cu("Edge"),cS=-1!=sv().toLowerCase().indexOf("webkit")&&!cu("Edge");function k0(){var n=zt.document;return n?n.documentMode:void 0}e:{var F0="",dS=(n=sv(),O0?/rv:([^\);]+)(\)|;)/.exec(n):P0?/Edge\/([\d\.]+)/.exec(n):du?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):cS?/WebKit\/(\S+)/.exec(n):vx?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(dS&&(F0=dS?dS[1]:""),du){var L0=k0();if(null!=L0&&L0>parseFloat(F0)){av=String(L0);break e}}av=F0}var wx=zt.document&&du&&(k0()||parseInt(av,10))||void 0;function Yg(n,e){if(ns.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(O0){e:{try{x0(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Qg[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Yg.$.h.call(this)}}Ei(Yg,ns);var Qg={2:"touch",3:"pen",4:"mouse"};Yg.prototype.h=function(){Yg.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Jg="closure_listenable_"+(1e6*Math.random()|0),V0=0;function hu(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++V0,this.fa=this.ia=!1}function lv(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Xg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function fS(n){const e={};for(const t in n)e[t]=n[t];return e}const pS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gS(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<pS.length;o++)t=pS[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Hd(n){this.src=n,this.g={},this.h=0}function cv(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=lS(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(lv(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function U0(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.fa&&o.listener==e&&o.capture==!!t&&o.la==r)return i}return-1}Hd.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var l=U0(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new hu(e,this.src,o,!!r,i)).ia=t,n.push(e)),e};var B0="closure_lm_"+(1e6*Math.random()|0),tm={};function mS(n,e,t,r,i){if(r&&r.once)return vS(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)mS(n,e[o],t,r,i);return null}return t=fv(t),n&&n[Jg]?n.O(e,t,Zg(r)?!!r.capture:!!r,i):_S(n,e,t,!1,r,i)}function _S(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var l=Zg(i)?!!i.capture:!!i,h=H0(n);if(h||(n[B0]=h=new Hd(n)),(t=h.add(e,t,r,l,o)).proxy)return t;if(r=function yS(){const e=Ex;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)_x||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(nm(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function vS(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)vS(n,e[o],t,r,i);return null}return t=fv(t),n&&n[Jg]?n.P(e,t,Zg(r)?!!r.capture:!!r,i):_S(n,e,t,!0,r,i)}function wS(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)wS(n,e[o],t,r,i);else r=Zg(r)?!!r.capture:!!r,t=fv(t),n&&n[Jg]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=U0(o=n.g[e],t,r,i))&&(lv(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=H0(n))&&(e=n.g[e.toString()],n=-1,e&&(n=U0(e,t,r,i)),(t=-1<n?e[n]:null)&&dv(t))}function dv(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Jg])cv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(nm(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=H0(e))?(cv(t,n),0==t.h&&(t.src=null,e[B0]=null)):lv(n)}}}function nm(n){return n in tm?tm[n]:tm[n]="on"+n}function Ex(n,e){if(n.fa)n=!0;else{e=new Yg(e,this);var t=n.listener,r=n.la||n.src;n.ia&&dv(n),n=t.call(r,e)}return n}function H0(n){return(n=n[B0])instanceof Hd?n:null}var hv="__closure_events_fn_"+(1e9*Math.random()>>>0);function fv(n){return"function"==typeof n?n:(n[hv]||(n[hv]=function(e){return n.handleEvent(e)}),n[hv])}function ti(){Bd.call(this),this.i=new Hd(this),this.S=this,this.J=null}function Ii(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new ns(e,n);else if(e instanceof ns)e.target=e.target||n;else{var i=e;gS(e=new ns(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var l=e.g=t[o];i=pv(l,r,!0,e)&&i}if(i=pv(l=e.g=n,r,!0,e)&&i,i=pv(l,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=pv(l=e.g=t[o],r,!1,e)&&i}function pv(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var l=e[o];if(l&&!l.fa&&l.capture==t){var h=l.listener,m=l.la||l.src;l.ia&&cv(n.i,l),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}Ei(ti,Bd),ti.prototype[Jg]=!0,ti.prototype.removeEventListener=function(n,e,t,r){wS(this,n,e,t,r)},ti.prototype.N=function(){if(ti.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)lv(t[r]);delete n.g[e],n.h--}}this.J=null},ti.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ti.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var gv=zt.JSON.stringify;function Ix(){var n=G0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var mv=new class ES{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new j0,n=>n.reset());class j0{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function IS(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function $0(n){zt.setTimeout(()=>{throw n},0)}let jd,rm=!1,G0=new class Cx{constructor(){this.h=this.g=null}add(e,t){const r=mv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},CS=()=>{const n=zt.Promise.resolve(void 0);jd=()=>{n.then(bx)}};var bx=()=>{for(var n;n=Ix();){try{n.h.call(n.g)}catch(t){$0(t)}var e=mv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}rm=!1};function im(n,e){ti.call(this),this.h=n||1,this.g=e||zt,this.j=Hi(this.qb,this),this.l=Date.now()}function sm(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function _v(n,e,t){if("function"==typeof n)t&&(n=Hi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Hi(n.handleEvent,n)}return 2147483647<Number(e)?-1:zt.setTimeout(n,e||0)}function bS(n){n.g=_v(()=>{n.g=null,n.i&&(n.i=!1,bS(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ei(im,ti),(st=im.prototype).ga=!1,st.T=null,st.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ii(this,"tick"),this.ga&&(sm(this),this.start()))}},st.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},st.N=function(){im.$.N.call(this),sm(this),delete this.g};class TS extends Bd{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:bS(this)}N(){super.N(),this.g&&(zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Of(n){Bd.call(this),this.h=n,this.g={}}Ei(Of,Bd);var DS=[];function z0(n,e,t,r){Array.isArray(t)||(t&&(DS[0]=t.toString()),t=DS);for(var i=0;i<t.length;i++){var o=mS(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function q0(n){Xg(n.g,function(e,t){this.g.hasOwnProperty(t)&&dv(e)},n),n.g={}}function yv(){this.g=!0}function ni(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Dx(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var l=1;l<i.length;l++)i[l]=""}}}return gv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Of.prototype.N=function(){Of.$.N.call(this),q0(this)},Of.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yv.prototype.Ea=function(){this.g=!1},yv.prototype.info=function(){};var $d={},Sx=null;function W0(){return Sx=Sx||new ti}function Z0(n){ns.call(this,$d.Ta,n)}function Gd(n){const e=W0();Ii(e,new Z0(e))}function Ff(n,e){ns.call(this,$d.STAT_EVENT,n),this.stat=e}function Cs(n){const e=W0();Ii(e,new Ff(e,n))}function vv(n,e){ns.call(this,$d.Ua,n),this.size=e}function om(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return zt.setTimeout(function(){n()},e)}$d.Ta="serverreachability",Ei(Z0,ns),$d.STAT_EVENT="statevent",Ei(Ff,ns),$d.Ua="timingevent",Ei(vv,ns);var am={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},AS={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function K0(){}function wv(){}K0.prototype.h=null;var um,Lf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Y0(){ns.call(this,"d")}function Vf(){ns.call(this,"c")}function Q0(){}function Uf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Of(this),this.P=RS,this.V=new im(n=ov?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new MS}function MS(){this.i=null,this.g="",this.h=!1}Ei(Y0,ns),Ei(Vf,ns),Ei(Q0,K0),Q0.prototype.g=function(){return new XMLHttpRequest},Q0.prototype.i=function(){return{}},um=new Q0;var RS=45e3,bc={},Ev={};function Iv(n,e,t){n.L=1,n.v=Tv(fu(e)),n.s=t,n.S=!0,Cv(n,null)}function Cv(n,e){n.G=Date.now(),lm(n),n.A=fu(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),Av(t.i,"t",r),n.C=0,t=n.l.J,n.h=new MS,n.g=gI(n.l,t?e:null,!n.s),0<n.O&&(n.M=new TS(Hi(n.Pa,n,n.g),n.O)),z0(n.U,n.g,"readystatechange",n.nb),e=n.I?fS(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Gd(),function SS(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var l="",h=o.split("&"),m=0;m<h.length;m++){var y=h[m].split("=");if(1<y.length){var b=y[0];y=y[1];var S=b.split("_");l=2<=S.length&&"type"==S[1]?l+(b+"=")+y+"&":l+(b+"=redacted&")}}else l=null;else l=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Ax(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function xS(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=KF(n,t),i==Ev){4==e&&(n.o=4,Cs(14),r=!1),ni(n.j,n.m,null,"[Incomplete Response]");break}if(i==bc){n.o=4,Cs(15),ni(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ni(n.j,n.m,i,null),J0(n,i)}Ax(n)&&i!=Ev&&i!=bc&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Cs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Lv(e),e.M=!0,Cs(11))):(ni(n.j,n.m,t,"[Invalid Chunked Response]"),Tc(n),Bf(n))}function KF(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ev:(t=Number(e.substring(t,r)),isNaN(t)?bc:(r+=1)+t>e.length?Ev:(e=e.slice(r,r+t),n.C=r+t,e))}function lm(n){n.Y=Date.now()+n.P,PS(n,n.P)}function PS(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=om(Hi(n.lb,n),e)}function bv(n){n.B&&(zt.clearTimeout(n.B),n.B=null)}function Bf(n){0==n.l.H||n.J||WS(n.l,n)}function Tc(n){bv(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,sm(n.V),q0(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function J0(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Mv(t.i,n)))if(!n.K&&Mv(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;mm(t),jf(t)}hI(t),Cs(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=om(Hi(t.ib,t),6e3));if(1>=Px(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else $f(t,11)}else if((n.K||t.g==n)&&mm(t),!Kg(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.V=y[0],y=y[1],2==t.H)if("c"==y[0]){t.K=y[1],t.pa=y[2];const b=y[3];null!=b&&(t.ra=b,t.l.info("VER="+t.ra));const S=y[4];null!=S&&(t.Ga=S,t.l.info("SVER="+t.Ga));const R=y[5];null!=R&&"number"==typeof R&&0<R&&(t.L=r=1.5*R,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const k=n.g;if(k){const B=k.g?k.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var o=r.i;o.g||-1==B.indexOf("spdy")&&-1==B.indexOf("quic")&&-1==B.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(tI(o,o.h),o.h=null))}if(r.F){const K=k.g?k.g.getResponseHeader("X-HTTP-Session-Id"):null;K&&(r.Da=K,er(r.I,r.F,K))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=pI(r,r.J?r.pa:null,r.Y),l.K){BS(r.i,l);var h=l,m=r.L;m&&h.setTimeout(m),h.B&&(bv(h),lm(h)),r.g=l}else qS(r);0<t.j.length&&Fv(t)}else"stop"!=y[0]&&"close"!=y[0]||$f(t,7);else 3==t.H&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?$f(t,7):Ov(t):"noop"!=y[0]&&t.h&&t.h.Aa(y),t.A=0)}Gd()}catch{}}function FS(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Wg(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function kS(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Wg(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function OS(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Wg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}(st=Uf.prototype).setTimeout=function(n){this.P=n},st.nb=function(n){n=n.target;const e=this.M;e&&3==va(n)?e.l():this.Pa(n)},st.Pa=function(n){try{if(n==this.g)e:{const b=va(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||ov||this.g&&(this.h.h||this.g.ja()||uI(this.g)))){this.J||4!=b||7==e||Gd(),bv(this);var t=this.g.da();this.ca=t;t:if(Ax(this)){var r=uI(this.g);n="";var i=r.length,o=4==va(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Tc(this),Bf(this);var l="";break t}this.h.i=new zt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function Tx(n,e,t,r,i,o,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+l})}(this.j,this.u,this.A,this.m,this.W,b,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Kg(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Cs(12),Tc(this),Bf(this);break e}ni(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,J0(this,t)}this.S?(xS(this,b,l),ov&&this.i&&3==b&&(z0(this.U,this.V,"tick",this.mb),this.V.start())):(ni(this.j,this.m,l,null),J0(this,l)),4==b&&Tc(this),this.i&&!this.J&&(4==b?WS(this.l,this):(this.i=!1,lm(this)))}else(function Lx(n){const e={};n=(n.g&&2<=va(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Kg(n[r]))continue;var t=IS(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const o=e[i]||[];e[i]=o,o.push(t)}!function em(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Cs(12)):(this.o=0,Cs(13)),Tc(this),Bf(this)}}}catch{}},st.mb=function(){if(this.g){var n=va(this.g),e=this.g.ja();this.C<e.length&&(bv(this),xS(this,n,e),this.i&&4!=n&&lm(this))}},st.cancel=function(){this.J=!0,Tc(this)},st.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function kf(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Gd(),Cs(17)),Tc(this),this.o=2,Bf(this)):PS(this,this.Y-n)};var LS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zd(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof zd){this.h=n.h,cm(this,n.j),this.s=n.s,this.g=n.g,dm(this,n.m),this.l=n.l;var e=n.i,t=new Sv;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),X0(this,t),this.o=n.o}else n&&(e=String(n).match(LS))?(this.h=!1,cm(this,e[1]||"",!0),this.s=Dv(e[2]||""),this.g=Dv(e[3]||"",!0),dm(this,e[4]),this.l=Dv(e[5]||"",!0),X0(this,e[6]||"",!0),this.o=Dv(e[7]||"")):(this.h=!1,this.i=new Sv(null,this.h))}function fu(n){return new zd(n)}function cm(n,e,t){n.j=t?Dv(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function dm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function X0(n,e,t){e instanceof Sv?(n.i=e,function Rx(n,e){e&&!n.j&&(qd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Mx(this,r),Av(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Hf(e,XF)),n.i=new Sv(e,n.h))}function er(n,e,t){n.i.set(e,t)}function Tv(n){return er(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Dv(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Hf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,YF),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function YF(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}zd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Hf(e,Nx,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Hf(e,Nx,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Hf(t,"/"==t.charAt(0)?JF:QF,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Hf(t,eL)),n.join("")};var Nx=/[#\/\?@]/g,QF=/[#\?:]/g,JF=/[#\?]/g,XF=/[#\?@]/g,eL=/#/g;function Sv(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function qd(n){n.g||(n.g=new Map,n.h=0,n.i&&function VS(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Mx(n,e){qd(n),e=Wd(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function eI(n,e){return qd(n),e=Wd(n,e),n.g.has(e)}function Av(n,e,t){Mx(n,e),0<t.length&&(n.i=null,n.g.set(Wd(n,e),M0(t)),n.h+=t.length)}function Wd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function US(n){this.l=n||tL,n=zt.PerformanceNavigationTiming?0<(n=zt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(zt.g&&zt.g.Ka&&zt.g.Ka()&&zt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(st=Sv.prototype).add=function(n,e){qd(this),this.i=null,n=Wd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},st.forEach=function(n,e){qd(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},st.ta=function(){qd(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let o=0;o<i.length;o++)t.push(e[r])}return t},st.Z=function(n){qd(this);let e=[];if("string"==typeof n)eI(this,n)&&(e=e.concat(this.g.get(Wd(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},st.set=function(n,e){return qd(this),this.i=null,eI(this,n=Wd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},st.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},st.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=o;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var tL=10;function xx(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Px(n){return n.h?1:n.g?n.g.size:0}function Mv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function tI(n,e){n.g?n.g.add(e):n.h=e}function BS(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function HS(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return M0(n.i)}US.prototype.cancel=function(){if(this.i=HS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var nL=class{stringify(n){return zt.JSON.stringify(n,void 0)}parse(n){return zt.JSON.parse(n,void 0)}};function Ox(){this.g=new nL}function jS(n,e,t){const r=t||"";try{FS(n,function(i,o){let l=i;Zg(i)&&(l=gv(i)),e.push(r+o+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function nI(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function bs(n){this.l=n.fc||null,this.j=n.ob||!1}function Rv(n,e){ti.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=hm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ei(bs,K0),bs.prototype.g=function(){return new Rv(this.l,this.j)},bs.prototype.i=function(n){return function(){return n}}({}),Ei(Rv,ti);var hm=0;function rI(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function fm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,xv(n)}function xv(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(st=Rv.prototype).open=function(n,e){if(this.readyState!=hm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,xv(this)},st.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||zt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},st.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fm(this)),this.readyState=hm},st.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,xv(this)),this.g&&(this.readyState=3,xv(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof zt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;rI(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},st.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?fm(this):xv(this),3==this.readyState&&rI(this)}},st.Za=function(n){this.g&&(this.response=this.responseText=n,fm(this))},st.Ya=function(n){this.g&&(this.response=n,fm(this))},st.ka=function(){this.g&&fm(this)},st.setRequestHeader=function(n,e){this.v.append(n,e)},st.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},st.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Rv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Ts=zt.JSON.parse;function Dr(n){ti.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Pv,this.L=this.M=!1}Ei(Dr,ti);var Pv="",kx=/^https?$/i,Fx=["POST","PUT"];function sI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,oI(n),pm(n)}function oI(n){n.F||(n.F=!0,Ii(n,"complete"),Ii(n,"error"))}function GS(n){if(n.h&&typeof rv<"u"&&(!n.C[1]||4!=va(n)||2!=n.da()))if(n.v&&4==va(n))_v(n.La,0,n);else if(Ii(n,"readystatechange"),4==va(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var i=String(n.I).match(LS)[1]||null;!i&&zt.self&&zt.self.location&&(i=zt.self.location.protocol.slice(0,-1)),r=!kx.test(i?i.toLowerCase():"")}t=r}if(t)Ii(n,"complete"),Ii(n,"success");else{n.m=6;try{var o=2<va(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.da()+"]",oI(n)}}finally{pm(n)}}}function pm(n,e){if(n.g){aI(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Ii(n,"ready");try{t.onreadystatechange=r}catch{}}}function aI(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(zt.clearTimeout(n.A),n.A=null)}function va(n){return n.g?n.g.readyState:0}function uI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Pv:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function lI(n){let e="";return Xg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function cI(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=lI(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):er(n,e,t))}function Zd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function fl(n){this.Ga=0,this.j=[],this.l=new yv,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Zd("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Zd("baseRetryDelayMs",5e3,n),this.hb=Zd("retryDelaySeedMs",1e4,n),this.eb=Zd("forwardChannelMaxRetries",2,n),this.xa=Zd("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new US(n&&n.concurrentRequestLimit),this.Ja=new Ox,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ov(n){if(kv(n),3==n.H){var e=n.W++,t=fu(n.I);if(er(t,"SID",n.K),er(t,"RID",e),er(t,"TYPE","terminate"),gm(n,t),(e=new Uf(n,n.l,e)).L=2,e.v=Tv(fu(t)),t=!1,zt.navigator&&zt.navigator.sendBeacon)try{t=zt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&zt.Image&&((new Image).src=e.v,t=!0),t||(e.g=gI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),lm(e)}Vv(n)}function jf(n){n.g&&(Lv(n),n.g.cancel(),n.g=null)}function kv(n){jf(n),n.u&&(zt.clearTimeout(n.u),n.u=null),mm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&zt.clearTimeout(n.m),n.m=null)}function Fv(n){if(!xx(n.i)&&!n.m){n.m=!0;var e=n.Na;jd||CS(),rm||(jd(),rm=!0),G0.add(e,n),n.C=0}}function dI(n,e){var t;t=e?e.m:n.W++;const r=fu(n.I);er(r,"SID",n.K),er(r,"RID",t),er(r,"AID",n.V),gm(n,r),n.o&&n.s&&cI(r,n.o,n.s),t=new Uf(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=zS(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),tI(n.i,t),Iv(t,r,e)}function gm(n,e){n.na&&Xg(n.na,function(t,r){er(e,r,t)}),n.h&&FS({},function(t,r){er(e,r,t)})}function zS(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Hi(n.h.Va,n.h,n):null;e:{var i=n.j;let o=-1;for(;;){const l=["count="+t];-1==o?0<t?(o=i[0].g,l.push("ofs="+o)):o=0:l.push("ofs="+o);let h=!0;for(let m=0;m<t;m++){let y=i[m].g;const b=i[m].map;if(y-=o,0>y)o=Math.max(0,i[m].g-100),h=!1;else try{jS(b,l,"req"+y+"_")}catch{r&&r(b)}}if(h){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function qS(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;jd||CS(),rm||(jd(),rm=!0),G0.add(e,n),n.A=0}}function hI(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=om(Hi(n.Ma,n),fI(n,n.A)),n.A++,0))}function Lv(n){null!=n.B&&(zt.clearTimeout(n.B),n.B=null)}function Vx(n){n.g=new Uf(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=fu(n.wa);er(e,"RID","rpc"),er(e,"SID",n.K),er(e,"AID",n.V),er(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&er(e,"TO",n.qa),er(e,"TYPE","xmlhttp"),gm(n,e),n.o&&n.s&&cI(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Tv(fu(e)),t.s=null,t.S=!0,Cv(t,n)}function mm(n){null!=n.v&&(zt.clearTimeout(n.v),n.v=null)}function WS(n,e){var t=null;if(n.g==e){mm(n),Lv(n),n.g=null;var r=2}else{if(!Mv(n.i,e))return;t=e.F,BS(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Ii(r=W0(),new vv(r,t)),Fv(n)}else qS(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function rL(n,e){return!(Px(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=om(Hi(n.Na,n,e),fI(n,n.C)),n.C++,0)))}(n,e)||2==r&&hI(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:$f(n,5);break;case 4:$f(n,10);break;case 3:$f(n,6);break;default:$f(n,2)}}function fI(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function $f(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Hi(n.pb,n);t||(t=new zd("//www.google.com/images/cleardot.gif"),zt.location&&"http"==zt.location.protocol||cm(t,"https"),Tv(t)),function $S(n,e){const t=new yv;if(zt.Image){const r=new Image;r.onload=iv(nI,t,r,"TestLoadImage: loaded",!0,e),r.onerror=iv(nI,t,r,"TestLoadImage: error",!1,e),r.onabort=iv(nI,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=iv(nI,t,r,"TestLoadImage: timeout",!1,e),zt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Cs(2);n.H=0,n.h&&n.h.za(e),Vv(n),kv(n)}function Vv(n){if(n.H=0,n.ma=[],n.h){const e=HS(n.i);(0!=e.length||0!=n.j.length)&&(R0(n.ma,e),R0(n.ma,n.j),n.i.i.length=0,M0(n.j),n.j.length=0),n.h.ya()}}function pI(n,e,t){var r=t instanceof zd?fu(t):new zd(t);if(""!=r.g)e&&(r.g=e+"."+r.g),dm(r,r.m);else{var i=zt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new zd(null);r&&cm(o,r),e&&(o.g=e),i&&dm(o,i),t&&(o.l=t),r=o}return e=n.Da,(t=n.F)&&e&&er(r,t,e),er(r,"VER",n.ra),gm(n,r),r}function gI(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Dr(t&&n.Ha&&!n.va?new bs({ob:!0}):n.va)).Oa(n.J),e}function ZS(){}function _m(){if(du&&!(10<=Number(wx)))throw Error("Environmental error: no available transport.")}function qs(n,e){ti.call(this),this.g=new fl(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Kg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Kg(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Yd(this)}function Kd(n){Y0.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function ym(){Vf.call(this),this.status=1}function Yd(n){this.g=n}function wa(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function mI(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var o=n.g[3],l=(e=n.g[0])+(o^(t=n.g[1])&((i=n.g[2])^o))+r[0]+3614090360&4294967295;l=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=t+(l<<7&4294967295|l>>>25))+((l=o+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^o&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^t&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=o+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^o&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^t&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=o+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^o&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(o^t&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=o+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^o&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^o&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=o+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^o&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=o+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^o&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=o+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^o&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=o+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^o)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=o+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(o^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~o))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=o+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(o|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~o))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=o+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(o|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~o))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=o+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(o|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((o=(e=t+((l=e+(i^(t|~o))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=o+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=o+((l=i+(e^(o|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+o&4294967295}function Vn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var o=0|n[i];r&&o==e||(t[i]=o,r=!1)}this.g=t}(st=Dr.prototype).Oa=function(n){this.M=n},st.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():um.g(),this.C=function NS(n){return n.h||(n.h=n.i())}(this.u?this.u:um),this.g.onreadystatechange=Hi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(o){return void sI(this,o)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())t.set(o,r.get(o))}r=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),i=zt.FormData&&n instanceof zt.FormData,!(0<=lS(Fx,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,l]of t)this.g.setRequestHeader(o,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{aI(this),0<this.B&&((this.L=function iI(n){return du&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Hi(this.ua,this)):this.A=_v(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){sI(this,o)}},st.ua=function(){typeof rv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ii(this,"timeout"),this.abort(8))},st.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ii(this,"complete"),Ii(this,"abort"),pm(this))},st.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),pm(this,!0)),Dr.$.N.call(this)},st.La=function(){this.s||(this.G||this.v||this.l?GS(this):this.kb())},st.kb=function(){GS(this)},st.isActive=function(){return!!this.g},st.da=function(){try{return 2<va(this)?this.g.status:-1}catch{return-1}},st.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},st.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Ts(e)}},st.Ia=function(){return this.m},st.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(st=fl.prototype).ra=8,st.H=1,st.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Uf(this,this.l,n);let o=this.s;if(this.U&&(o?(o=fS(o),gS(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=zS(this,i,e),er(t=fu(this.I),"RID",n),er(t,"CVER",22),this.F&&er(t,"X-HTTP-Session-Id",this.F),gm(this,t),o&&(this.O?e="headers="+encodeURIComponent(String(lI(o)))+"&"+e:this.o&&cI(t,this.o,o)),tI(this.i,i),this.bb&&er(t,"TYPE","init"),this.P?(er(t,"$req",e),er(t,"SID","null"),i.aa=!0,Iv(i,t,null)):Iv(i,t,e),this.H=2}}else 3==this.H&&(n?dI(this,n):0==this.j.length||xx(this.i)||dI(this))},st.Ma=function(){if(this.u=null,Vx(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=om(Hi(this.jb,this),n)}},st.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Cs(10),jf(this),Vx(this))},st.ib=function(){null!=this.v&&(this.v=null,jf(this),hI(this),Cs(19))},st.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Cs(2)):(this.l.info("Failed to ping google.com"),Cs(1))},st.isActive=function(){return!!this.h&&this.h.isActive(this)},(st=ZS.prototype).Ba=function(){},st.Aa=function(){},st.za=function(){},st.ya=function(){},st.isActive=function(){return!0},st.Va=function(){},_m.prototype.g=function(n,e){return new qs(n,e)},Ei(qs,ti),qs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Cs(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=pI(n,null,n.Y),Fv(n)},qs.prototype.close=function(){Ov(this.g)},qs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=gv(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Fv(e)},qs.prototype.N=function(){this.g.h=null,delete this.j,Ov(this.g),delete this.g,qs.$.N.call(this)},Ei(Kd,Y0),Ei(ym,Vf),Ei(Yd,ZS),Yd.prototype.Ba=function(){Ii(this.g,"a")},Yd.prototype.Aa=function(n){Ii(this.g,new Kd(n))},Yd.prototype.za=function(n){Ii(this.g,new ym)},Yd.prototype.ya=function(){Ii(this.g,"b")},Ei(wa,function KS(){this.blockSize=-1}),wa.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},wa.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=t;)mI(this,n,o),o+=this.blockSize;if("string"==typeof n){for(;o<e;)if(r[i++]=n.charCodeAt(o++),i==this.blockSize){mI(this,r),i=0;break}}else for(;o<e;)if(r[i++]=n[o++],i==this.blockSize){mI(this,r),i=0;break}}this.h=i,this.i+=e},wa.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var YS={};function _I(n){return-128<=n&&128>n?function yx(n,e){var t=YS;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Vn([0|e],0>e?-1:0)}):new Vn([0|n],0>n?-1:0)}function pu(n){if(isNaN(n)||!isFinite(n))return vm;if(0>n)return rs(pu(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=QS;return new Vn(e,0)}var QS=4294967296,vm=_I(0),Uv=_I(1),JS=_I(16777216);function pl(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function qo(n){return-1==n.h}function rs(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Vn(t,~n.h).add(Uv)}function yI(n,e){return n.add(rs(e))}function vI(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Bv(n,e){this.g=n,this.h=e}function wI(n,e){if(pl(e))throw Error("division by zero");if(pl(n))return new Bv(vm,vm);if(qo(n))return e=wI(rs(n),e),new Bv(rs(e.g),rs(e.h));if(qo(e))return e=wI(n,rs(e)),new Bv(rs(e.g),e.h);if(30<n.g.length){if(qo(n)||qo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Uv,r=e;0>=r.X(n);)t=XS(t),r=XS(r);var i=gl(t,1),o=gl(r,1);for(r=gl(r,2),t=gl(t,2);!pl(r);){var l=o.add(r);0>=l.X(n)&&(i=i.add(t),o=l),r=gl(r,1),t=gl(t,1)}return e=yI(n,i.R(e)),new Bv(i,e)}for(i=vm;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(o=pu(t)).R(e);qo(l)||0<l.X(n);)l=(o=pu(t-=r)).R(e);pl(o)&&(o=Uv),i=i.add(o),n=yI(n,l)}return new Bv(i,n)}function XS(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Vn(t,n.h)}function gl(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],o=0;o<r;o++)i[o]=0<e?n.D(o+t)>>>e|n.D(o+t+1)<<32-e:n.D(o+t);return new Vn(i,n.h)}(st=Vn.prototype).ea=function(){if(qo(this))return-rs(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:QS+r)*e,e*=QS}return n},st.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(pl(this))return"0";if(qo(this))return"-"+rs(this).toString(n);for(var e=pu(Math.pow(n,6)),t=this,r="";;){var i=wI(t,e).g,o=((0<(t=yI(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(pl(t=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},st.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},st.X=function(n){return qo(n=yI(this,n))?-1:pl(n)?0:1},st.abs=function(){return qo(this)?rs(this):this},st.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&n.D(i)),l=(o>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(o&=65535)}return new Vn(t,-2147483648&t[t.length-1]?-1:0)},st.R=function(n){if(pl(this)||pl(n))return vm;if(qo(this))return qo(n)?rs(this).R(rs(n)):rs(rs(this).R(n));if(qo(n))return rs(this.R(rs(n)));if(0>this.X(JS)&&0>n.X(JS))return pu(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var o=this.D(r)>>>16,l=65535&this.D(r),h=n.D(i)>>>16,m=65535&n.D(i);t[2*r+2*i]+=l*m,vI(t,2*r+2*i),t[2*r+2*i+1]+=o*m,vI(t,2*r+2*i+1),t[2*r+2*i+1]+=l*h,vI(t,2*r+2*i+1),t[2*r+2*i+2]+=o*h,vI(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Vn(t,0)},st.gb=function(n){return wI(this,n).h},st.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Vn(t,this.h&n.h)},st.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Vn(t,this.h|n.h)},st.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Vn(t,this.h^n.h)},_m.prototype.createWebChannel=_m.prototype.g,qs.prototype.send=qs.prototype.u,qs.prototype.open=qs.prototype.m,qs.prototype.close=qs.prototype.close,am.NO_ERROR=0,am.TIMEOUT=8,am.HTTP_ERROR=6,AS.COMPLETE="complete",wv.EventType=Lf,Lf.OPEN="a",Lf.CLOSE="b",Lf.ERROR="c",Lf.MESSAGE="d",ti.prototype.listen=ti.prototype.O,Dr.prototype.listenOnce=Dr.prototype.P,Dr.prototype.getLastError=Dr.prototype.Sa,Dr.prototype.getLastErrorCode=Dr.prototype.Ia,Dr.prototype.getStatus=Dr.prototype.da,Dr.prototype.getResponseJson=Dr.prototype.Wa,Dr.prototype.getResponseText=Dr.prototype.ja,Dr.prototype.send=Dr.prototype.ha,Dr.prototype.setWithCredentials=Dr.prototype.Oa,wa.prototype.digest=wa.prototype.l,wa.prototype.reset=wa.prototype.reset,wa.prototype.update=wa.prototype.j,Vn.prototype.add=Vn.prototype.add,Vn.prototype.multiply=Vn.prototype.R,Vn.prototype.modulo=Vn.prototype.gb,Vn.prototype.compare=Vn.prototype.X,Vn.prototype.toNumber=Vn.prototype.ea,Vn.prototype.toString=Vn.prototype.toString,Vn.prototype.getBits=Vn.prototype.D,Vn.fromNumber=pu,Vn.fromString=function Ux(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return rs(Ux(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=pu(Math.pow(e,8)),r=vm,i=0;i<n.length;i+=8){var o=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+o),e);8>o?(o=pu(Math.pow(e,o)),r=r.R(o).add(pu(l))):r=(r=r.R(t)).add(pu(l))}return r};var Bx=yo.createWebChannelTransport=function(){return new _m},Hx=yo.getStatEventTarget=function(){return W0()},Hv=yo.ErrorCode=am,Qd=yo.EventType=AS,eA=yo.Event=$d,jv=yo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},EI=yo.FetchXmlHttpFactory=bs,$v=yo.WebChannel=wv,II=yo.XhrIo=Dr,CI=yo.Md5=wa,ml=yo.Integer=Vn;const jx="@firebase/firestore";class ji{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ji.UNAUTHENTICATED=new ji(null),ji.GOOGLE_CREDENTIALS=new ji("google-credentials-uid"),ji.FIRST_PARTY=new ji("first-party-uid"),ji.MOCK_USER=new ji("mock-user");let wm="9.22.2";const _l=new es.Yd("@firebase/firestore");function bI(){return _l.logLevel}function Ve(n,...e){if(_l.logLevel<=es.in.DEBUG){const t=e.map(Gv);_l.debug(`Firestore (${wm}): ${n}`,...t)}}function Ur(n,...e){if(_l.logLevel<=es.in.ERROR){const t=e.map(Gv);_l.error(`Firestore (${wm}): ${n}`,...t)}}function vo(n,...e){if(_l.logLevel<=es.in.WARN){const t=e.map(Gv);_l.warn(`Firestore (${wm}): ${n}`,...t)}}function Gv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ct(n="Unexpected state"){const e=`FIRESTORE (${wm}) INTERNAL ASSERTION FAILED: `+n;throw Ur(e),new Error(e)}function Et(n,e){n||ct()}function rt(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends O.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ri{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class zv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ji.UNAUTHENTICATED))}shutdown(){}}class qx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class iL{constructor(e){this.t=e,this.currentUser=ji.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ri,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const y=l;e.enqueueRetryable((0,ge.Z)(function*(){yield y.promise,yield o(r.currentUser)}))},m=y=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ri)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et("string"==typeof r.accessToken),new zv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Et(null===e||"string"==typeof e),new ji(e)}}class sL{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=ji.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Wx{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new sL(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ji.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zx{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=o=>{null!=o.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.T;return this.T=o.token,Ve("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?i(o):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Et("string"==typeof t.token),this.T=t.token,new tA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function nA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class TI{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=nA(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function Kt(n,e){return n<e?-1:n>e?1:0}function Gf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function qv(n){return n+"\0"}class tr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tr.fromMillis(Date.now())}static fromDate(e){return tr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new tr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new tr(0,0))}static max(){return new It(new tr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Em{constructor(e,t,r){void 0===t?t=0:t>e.length&&ct(),void 0===r?r=e.length-t:r>e.length-t&&ct(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Em.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Em?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),l=t.get(i);if(o<l)return-1;if(o>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class dn extends Em{construct(e,t,r){return new dn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new dn(t)}static emptyPath(){return new dn([])}}const Kx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sr extends Em{construct(e,t,r){return new Sr(e,t,r)}static isValidIdentifier(e){return Kx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Sr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new Ae(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ae(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Ae(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(o(),i++)}if(o(),l)throw new Ae(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sr(t)}static emptyPath(){return new Sr([])}}class tt{constructor(e){this.path=e}static fromPath(e){return new tt(dn.fromString(e))}static fromName(e){return new tt(dn.fromString(e).popFirst(5))}static empty(){return new tt(dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===dn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new dn(e.slice()))}}class Im{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function rA(n){return n.fields.find(e=>2===e.kind)}function Jd(n){return n.fields.filter(e=>2!==e.kind)}Im.UNKNOWN_ID=-1;class DI{constructor(e,t){this.fieldPath=e,this.kind=t}}class Zv{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Zv(0,Wo.min())}}function Qx(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=It.fromTimestamp(1e9===r?new tr(t+1,0):new tr(t,r));return new Wo(i,tt.empty(),e)}function iA(n){return new Wo(n.readTime,n.key,-1)}class Wo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Wo(It.min(),tt.empty(),-1)}static max(){return new Wo(It.max(),tt.empty(),-1)}}function sA(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=tt.comparator(n.documentKey,e.documentKey),0!==t?t:Kt(n.largestBatchId,e.largestBatchId))}const Jx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Xx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Dc(n){return oA.apply(this,arguments)}function oA(){return oA=(0,ge.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==Jx)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),oA.apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,o=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++o,l&&o===i&&t()},m=>r(m))}),l=!0,o===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new le((r,i)=>{const o=e.length,l=new Array(o);let h=0;for(let m=0;m<o;m++){const y=m;t(e[y]).next(b=>{l[y]=b,++h,h===o&&r(l)},b=>i(b))}})}static doWhile(e,t){return new le((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class SI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new ri,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Cm(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=c(r.target.error);this.v.reject(new Cm(e,i))}}static open(e,t,r,i){try{return new SI(t,e.transaction(i,r))}catch(o){throw new Cm(t,o)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new s(t)}}class gu{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===gu.S((0,O.z$)())&&Ur("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),a(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,O.hl)())return!1;if(gu.C())return!0;const e=(0,O.z$)(),t=gu.S(e),r=0<t&&t<10,i=gu.N(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,ge.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=l=>{r(l.target.result)},o.onblocked=()=>{i(new Cm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Ae(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ae(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Cm(e,h))},o.onupgradeneeded=l=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,o.transaction,l.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,ge.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{o.db=yield o.$(e);const m=SI.open(o.db,e,l?"readonly":"readwrite",r),y=i(m).next(b=>(m.P(),b)).catch(b=>(m.abort(b),le.reject(b))).toPromise();return y.catch(()=>{}),yield m.R,y}catch(m){const y=m,b="FirebaseError"!==y.name&&h<3;if(Ve("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),o.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class aL{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return a(this.L.delete())}}class Cm extends Ae{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Xd(n){return"IndexedDbTransactionError"===n.name}class s{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),a(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),a(this.store.add(e))}get(e){return a(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),a(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),a(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.W(i,(l,h)=>{o.push(h)}).next(()=>o)}{const i=this.store.getAll(r.range);return new le((o,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{o(h.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((i,o)=>{r.onerror=l=>{o(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(o,l,h)=>h.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new le((r,i)=>{t.onerror=o=>{const l=c(o.target.error);i(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}W(e,t){const r=[];return new le((i,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const m=new aL(h),y=t(h.primaryKey,h.value,m);if(y instanceof le){const b=y.catch(S=>(m.done(),le.reject(S)));r.push(b)}m.isDone?i():null===m.K?h.continue():h.continue(m.K)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function a(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=c(r.target.error);t(i)}})}let u=!1;function c(n){const e=gu.S((0,O.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return u||(u=!0,setTimeout(()=>{throw r},0)),r}}return n}class f{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ge.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Xd(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Dc(r)}yield t.et(6e4)}))}}class g{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,o=!0;return le.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ve("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(h=>{i-=h,r.add(l)});o=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,o)).next(h=>(Ve("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,o)=>{const l=iA(o);sA(l,r)>0&&(r=l)}),new Wo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let v=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function I(n){return null==n}function T(n){return 0===n&&1/n==-1/0}function N(n){return"number"==typeof n&&Number.isInteger(n)&&!T(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function P(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=W(e)),e=U(n.get(t),e);return W(e)}function U(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function W(n){return n+"\x01\x01"}function Q(n){const e=n.length;if(Et(e>=2),2===e)return Et("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),dn.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const l=n.indexOf("\x01",o);switch((l<0||l>t)&&ct(),n.charAt(l+1)){case"\x01":const h=n.substring(o,l);let m;0===i.length?m=h:(i+=h,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(o,l),i+="\0";break;case"\x11":i+=n.substring(o,l+1);break;default:ct()}o=l+2}return new dn(r)}const Ee=["userId","batchId"];function xe(n,e){return[n,P(e)]}function Je(n,e,t){return[n,P(e),t]}const Ct={},Te=["prefixPath","collectionGroup","readTime","documentId"],Ot=["prefixPath","collectionGroup","documentId"],on=["collectionGroup","readTime","prefixPath","documentId"],Rn=["canonicalId","targetId"],Ea=["targetId","path"],aA=["path","targetId"],qj=["collectionId","parent"],Wj=["indexId","uid"],Zj=["uid","sequenceNumber"],Kj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Yj=["indexId","uid","orderedDocumentKey"],Qj=["userId","collectionPath","documentId"],Jj=["userId","collectionPath","largestBatchId"],Xj=["userId","collectionGroup","largestBatchId"],uL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],e$=[...uL,"documentOverlays"],lL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cL=lL,t$=[...cL,"indexConfiguration","indexState","indexEntries"];class eP extends Xx{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function is(n,e){const t=rt(n);return gu.M(t.ht,e)}function dL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class lr{constructor(e,t){this.comparator=e,this.root=t||Ds.EMPTY}insert(e,t){return new lr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ds.BLACK,null,null))}remove(e){return new lr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ds.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uA(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uA(this.root,e,this.comparator,!1)}getReverseIterator(){return new uA(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uA(this.root,e,this.comparator,!0)}}class uA{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ds{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Ds.RED,this.left=i??Ds.EMPTY,this.right=o??Ds.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Ds(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ds.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ds.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ds.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ds.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ct();const e=this.left.check();if(e!==this.right.check())throw ct();return e+(this.isRed()?0:1)}}Ds.EMPTY=null,Ds.RED=!0,Ds.BLACK=!1,Ds.EMPTY=new class{constructor(){this.size=0}get key(){throw ct()}get value(){throw ct()}get color(){throw ct()}get left(){throw ct()}get right(){throw ct()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ds(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _r{constructor(e){this.comparator=e,this.data=new lr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fL(this.data.getIterator())}getIteratorFrom(e){return new fL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof _r)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _r(this.comparator);return t.data=e,t}}class fL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Kv(n){return n.hasNext()?n.getNext():void 0}class Zo{constructor(e){this.fields=e,e.sort(Sr.comparator)}static empty(){return new Zo([])}unionWith(e){let t=new _r(Sr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Zo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class pL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class $i{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new pL("Invalid base64 string: "+i):i}}(e);return new $i(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new $i(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$i.EMPTY_BYTE_STRING=new $i("");const r$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qf(n){if(Et(!!n),"string"==typeof n){let e=0;const t=r$.exec(n);if(Et(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ii(n.seconds),nanos:ii(n.nanos)}}function ii(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function eh(n){return"string"==typeof n?$i.fromBase64String(n):$i.fromUint8Array(n)}function lA(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function cA(n){const e=n.mapValue.fields.__previous_value__;return lA(e)?cA(e):e}function AI(n){const e=qf(n.mapValue.fields.__local_write_time__.timestampValue);return new tr(e.seconds,e.nanos)}class i${constructor(e,t,r,i,o,l,h,m,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=y}}class Wf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Wf("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Wf&&e.projectId===this.projectId&&e.database===this.database}}const Zf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},dA={nullValue:"NULL_VALUE"};function Kf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lA(n)?4:yL(n)?9007199254740991:10:ct()}function Sc(n,e){if(n===e)return!0;const t=Kf(n);if(t!==Kf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return AI(n).isEqual(AI(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=qf(r.timestampValue),l=qf(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,eh(n.bytesValue).isEqual(eh(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return ii(r.geoPointValue.latitude)===ii(i.geoPointValue.latitude)&&ii(r.geoPointValue.longitude)===ii(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ii(r.integerValue)===ii(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=ii(r.doubleValue),l=ii(i.doubleValue);return o===l?T(o)===T(l):isNaN(o)&&isNaN(l)}return!1}(n,e);case 9:return Gf(n.arrayValue.values||[],e.arrayValue.values||[],Sc);case 10:return function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(dL(o)!==dL(l))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(void 0===l[h]||!Sc(o[h],l[h])))return!1;return!0}(n,e);default:return ct()}var i}function NI(n,e){return void 0!==(n.values||[]).find(t=>Sc(t,e))}function Yf(n,e){if(n===e)return 0;const t=Kf(n),r=Kf(e);if(t!==r)return Kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Kt(n.booleanValue,e.booleanValue);case 2:return function(i,o){const l=ii(i.integerValue||i.doubleValue),h=ii(o.integerValue||o.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return gL(n.timestampValue,e.timestampValue);case 4:return gL(AI(n),AI(e));case 5:return Kt(n.stringValue,e.stringValue);case 6:return function(i,o){const l=eh(i),h=eh(o);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),h=o.split("/");for(let m=0;m<l.length&&m<h.length;m++){const y=Kt(l[m],h[m]);if(0!==y)return y}return Kt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Kt(ii(i.latitude),ii(o.latitude));return 0!==l?l:Kt(ii(i.longitude),ii(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const l=i.values||[],h=o.values||[];for(let m=0;m<l.length&&m<h.length;++m){const y=Yf(l[m],h[m]);if(y)return y}return Kt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Zf.mapValue&&o===Zf.mapValue)return 0;if(i===Zf.mapValue)return 1;if(o===Zf.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),m=o.fields||{},y=Object.keys(m);h.sort(),y.sort();for(let b=0;b<h.length&&b<y.length;++b){const S=Kt(h[b],y[b]);if(0!==S)return S;const R=Yf(l[h[b]],m[y[b]]);if(0!==R)return R}return Kt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw ct()}}function gL(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Kt(n,e);const t=qf(n),r=qf(e),i=Kt(t.seconds,r.seconds);return 0!==i?i:Kt(t.nanos,r.nanos)}function Yv(n){return tP(n)}function tP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=qf(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?eh(n.bytesValue).toBase64():"referenceValue"in n?tt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const l of r.values||[])o?o=!1:i+=",",i+=tP(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${tP(r.fields[h])}`;return o+"}"}(n.mapValue):ct();var e}function bm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function nP(n){return!!n&&"integerValue"in n}function MI(n){return!!n&&"arrayValue"in n}function mL(n){return!!n&&"nullValue"in n}function _L(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fA(n){return!!n&&"mapValue"in n}function RI(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return zf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=RI(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=RI(n.arrayValue.values[t]);return e}return Object.assign({},n)}function yL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function s$(n){return"nullValue"in n?dA:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?bm(Wf.empty(),tt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ct()}function o$(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?bm(Wf.empty(),tt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Zf:ct()}function vL(n,e){const t=Yf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function wL(n,e){const t=Yf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ss{constructor(e){this.value=e}static empty(){return new Ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!fA(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=RI(t)}setAll(e){let t=Sr.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=RI(l):i.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());fA(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];fA(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){zf(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Ss(RI(this.value))}}function EL(n){const e=[];return zf(n.fields,(t,r)=>{const i=new Sr([t]);if(fA(r)){const o=EL(r.mapValue).fields;if(0===o.length)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new Zo(e)}class yr{constructor(e,t,r,i,o,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new yr(e,0,It.min(),It.min(),It.min(),Ss.empty(),0)}static newFoundDocument(e,t,r,i){return new yr(e,1,t,It.min(),r,i,0)}static newNoDocument(e,t){return new yr(e,2,t,It.min(),It.min(),Ss.empty(),0)}static newUnknownDocument(e,t){return new yr(e,3,t,It.min(),It.min(),Ss.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(It.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof yr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Qf{constructor(e,t){this.position=e,this.inclusive=t}}function IL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(r=o.field.isKeyField()?tt.comparator(tt.fromName(l.referenceValue),t.key):Yf(l,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function CL(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Sc(n.position[t],e.position[t]))return!1;return!0}class Qv{constructor(e,t="asc"){this.field=e,this.dir=t}}function a$(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class bL{}class gn extends bL{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new u$(e,t,r):"array-contains"===t?new d$(e,r):"in"===t?new ML(e,r):"not-in"===t?new h$(e,r):"array-contains-any"===t?new f$(e,r):new gn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new l$(e,r):new c$(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Yf(t,this.value)):null!==t&&Kf(this.value)===Kf(t)&&this.matchesComparison(Yf(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ct()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class jn extends bL{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new jn(e,t)}matches(e){return Jv(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Jv(n){return"and"===n.op}function rP(n){return"or"===n.op}function iP(n){return TL(n)&&Jv(n)}function TL(n){for(const e of n.filters)if(e instanceof jn)return!1;return!0}function sP(n){if(n instanceof gn)return n.field.canonicalString()+n.op.toString()+Yv(n.value);if(iP(n))return n.filters.map(e=>sP(e)).join(",");{const e=n.filters.map(t=>sP(t)).join(",");return`${n.op}(${e})`}}function DL(n,e){return n instanceof gn?(t=n,(r=e)instanceof gn&&t.op===r.op&&t.field.isEqual(r.field)&&Sc(t.value,r.value)):n instanceof jn?function(t,r){return r instanceof jn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,o,l)=>i&&DL(o,r.filters[l]),!0)}(n,e):void ct();var t,r}function SL(n,e){const t=n.filters.concat(e);return jn.create(t,n.op)}function AL(n){return n instanceof gn?`${(e=n).field.canonicalString()} ${e.op} ${Yv(e.value)}`:n instanceof jn?function(e){return e.op.toString()+" {"+e.getFilters().map(AL).join(" ,")+"}"}(n):"Filter";var e}class u$ extends gn{constructor(e,t,r){super(e,t,r),this.key=tt.fromName(r.referenceValue)}matches(e){const t=tt.comparator(e.key,this.key);return this.matchesComparison(t)}}class l$ extends gn{constructor(e,t){super(e,"in",t),this.keys=NL(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class c$ extends gn{constructor(e,t){super(e,"not-in",t),this.keys=NL(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function NL(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>tt.fromName(r.referenceValue))}class d$ extends gn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return MI(t)&&NI(t.arrayValue,this.value)}}class ML extends gn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&NI(this.value.arrayValue,t)}}class h$ extends gn{constructor(e,t){super(e,"not-in",t)}matches(e){if(NI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!NI(this.value.arrayValue,t)}}class f$ extends gn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!MI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>NI(this.value.arrayValue,r))}}class p${constructor(e,t=null,r=[],i=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=h,this.dt=null}}function oP(n,e=null,t=[],r=[],i=null,o=null,l=null){return new p$(n,e,t,r,i,o,l)}function Tm(n){const e=rt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>sP(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),I(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Yv(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Yv(r)).join(",")),e.dt=t}return e.dt}function xI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!a$(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!DL(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!CL(n.startAt,e.startAt)&&CL(n.endAt,e.endAt)}function pA(n){return tt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function gA(n,e){return n.filters.filter(t=>t instanceof gn&&t.field.isEqual(e))}function RL(n,e,t){let r=dA,i=!0;for(const o of gA(n,e)){let l=dA,h=!0;switch(o.op){case"<":case"<=":l=s$(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,h=!1;break;case"!=":case"not-in":l=dA}vL({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];vL({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function xL(n,e,t){let r=Zf,i=!0;for(const o of gA(n,e)){let l=Zf,h=!0;switch(o.op){case">=":case">":l=o$(o.value),h=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,h=!1;break;case"!=":case"not-in":l=Zf}wL({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];wL({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class th{constructor(e,t=null,r=[],i=[],o=null,l="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=m,this.wt=null,this._t=null}}function PL(n,e,t,r,i,o,l,h){return new th(n,e,t,r,i,o,l,h)}function Xv(n){return new th(n)}function OL(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function aP(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function mA(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function uP(n){return null!==n.collectionGroup}function Dm(n){const e=rt(n);if(null===e.wt){e.wt=[];const t=mA(e),r=aP(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Qv(t)),e.wt.push(new Qv(Sr.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.wt.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Qv(Sr.keyField(),o))}}}return e.wt}function wo(n){const e=rt(n);if(!e._t)if("F"===e.limitType)e._t=oP(e.path,e.collectionGroup,Dm(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of Dm(e))t.push(new Qv(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new Qf(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Qf(e.startAt.position,e.startAt.inclusive):null;e._t=oP(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function lP(n,e){e.getFirstInequalityField(),mA(n);const t=n.filters.concat([e]);return new th(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function _A(n,e,t){return new th(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function PI(n,e){return xI(wo(n),wo(e))&&n.limitType===e.limitType}function kL(n){return`${Tm(wo(n))}|lt:${n.limitType}`}function cP(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>AL(r)).join(", ")}]`),I(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Yv(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Yv(r)).join(",")),`Target(${t})`}(wo(n))}; limitType=${n.limitType})`}function OI(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):tt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Dm(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,l){const h=IL(i,o,l);return i.inclusive?h<=0:h<0}(t.startAt,Dm(t),r)||t.endAt&&!function(i,o,l){const h=IL(i,o,l);return i.inclusive?h>=0:h>0}(t.endAt,Dm(t),r)));var t,r}function FL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function LL(n){return(e,t)=>{let r=!1;for(const i of Dm(n)){const o=g$(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function g$(n,e,t){const r=n.field.isKeyField()?tt.comparator(e.key,t.key):function(i,o,l){const h=o.data.field(i),m=l.data.field(i);return null!==h&&null!==m?Yf(h,m):ct()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ct()}}class nh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zf(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return hL(this.inner)}size(){return this.innerSize}}const m$=new lr(tt.comparator);function Ko(){return m$}const VL=new lr(tt.comparator);function kI(...n){let e=VL;for(const t of n)e=e.insert(t.key,t);return e}function UL(n){let e=VL;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ac(){return FI()}function BL(){return FI()}function FI(){return new nh(n=>n.toString(),(n,e)=>n.isEqual(e))}const _$=new lr(tt.comparator),y$=new _r(tt.comparator);function nn(...n){let e=y$;for(const t of n)e=e.add(t);return e}const v$=new _r(Kt);function dP(){return v$}function HL(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:T(e)?"-0":e}}function jL(n){return{integerValue:""+n}}function $L(n,e){return N(e)?jL(e):HL(n,e)}class yA{constructor(){this._=void 0}}function w$(n,e,t){return n instanceof ew?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&lA(i)&&(i=cA(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof Sm?zL(n,e):n instanceof Am?qL(n,e):function(r,i){const o=GL(r,i),l=WL(o)+WL(r.gt);return nP(o)&&nP(r.gt)?jL(l):HL(r.serializer,l)}(n,e)}function E$(n,e,t){return n instanceof Sm?zL(n,e):n instanceof Am?qL(n,e):t}function GL(n,e){return n instanceof tw?nP(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ew extends yA{}class Sm extends yA{constructor(e){super(),this.elements=e}}function zL(n,e){const t=ZL(e);for(const r of n.elements)t.some(i=>Sc(i,r))||t.push(r);return{arrayValue:{values:t}}}class Am extends yA{constructor(e){super(),this.elements=e}}function qL(n,e){let t=ZL(e);for(const r of n.elements)t=t.filter(i=>!Sc(i,r));return{arrayValue:{values:t}}}class tw extends yA{constructor(e,t){super(),this.serializer=e,this.gt=t}}function WL(n){return ii(n.integerValue||n.doubleValue)}function ZL(n){return MI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class LI{constructor(e,t){this.field=e,this.transform=t}}class C${constructor(e,t){this.version=e,this.transformResults=t}}class Ar{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ar}static exists(e){return new Ar(void 0,e)}static updateTime(e){return new Ar(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vA(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class wA{}function KL(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new rw(n.key,Ar.none()):new nw(n.key,n.data,Ar.none());{const t=n.data,r=Ss.empty();let i=new _r(Sr.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);null===l&&o.length>1&&(o=o.popLast(),l=t.field(o)),null===l?r.delete(o):r.set(o,l),i=i.add(o)}return new rh(n.key,r,new Zo(i.toArray()),Ar.none())}}function b$(n,e,t){n instanceof nw?function(r,i,o){const l=r.value.clone(),h=JL(r.fieldTransforms,i,o.transformResults);l.setAll(h),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):n instanceof rh?function(r,i,o){if(!vA(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=JL(r.fieldTransforms,i,o.transformResults),h=i.data;h.setAll(QL(r)),h.setAll(l),i.convertToFoundDocument(o.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function VI(n,e,t,r){return n instanceof nw?function(i,o,l,h){if(!vA(i.precondition,o))return l;const m=i.value.clone(),y=XL(i.fieldTransforms,h,o);return m.setAll(y),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof rh?function(i,o,l,h){if(!vA(i.precondition,o))return l;const m=XL(i.fieldTransforms,h,o),y=o.data;return y.setAll(QL(i)),y.setAll(m),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(l=t,vA(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l);var o,l}function T$(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=GL(r.transform,i||null);null!=o&&(null===t&&(t=Ss.empty()),t.set(r.field,o))}return t||null}function YL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Gf(t,r,(i,o)=>function I$(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Sm&&r instanceof Sm||t instanceof Am&&r instanceof Am?Gf(t.elements,r.elements,Sc):t instanceof tw&&r instanceof tw?Sc(t.gt,r.gt):t instanceof ew&&r instanceof ew);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class nw extends wA{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class rh extends wA{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function QL(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function JL(n,e,t){const r=new Map;Et(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,h=e.data.field(o.field);r.set(o.field,E$(l,h,t[i]))}return r}function XL(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,w$(o,l,e))}return r}class rw extends wA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hP extends wA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class fP{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&b$(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=VI(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=VI(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=BL();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=t.has(i.key)?null:h;const m=KL(l,h);null!==m&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(It.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),nn())}isEqual(e){return this.batchId===e.batchId&&Gf(this.mutations,e.mutations,(t,r)=>YL(t,r))&&Gf(this.baseMutations,e.baseMutations,(t,r)=>YL(t,r))}}class pP{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Et(e.mutations.length===r.length);let i=_$;const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new pP(e,t,r,i)}}class gP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class S${constructor(e,t){this.count=e,this.unchangedNames=t}}var Ci,En;function e2(n){switch(n){default:return ct();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function t2(n){if(void 0===n)return Ur("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Ci.OK:return ce.OK;case Ci.CANCELLED:return ce.CANCELLED;case Ci.UNKNOWN:return ce.UNKNOWN;case Ci.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Ci.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Ci.INTERNAL:return ce.INTERNAL;case Ci.UNAVAILABLE:return ce.UNAVAILABLE;case Ci.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Ci.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Ci.NOT_FOUND:return ce.NOT_FOUND;case Ci.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Ci.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Ci.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Ci.ABORTED:return ce.ABORTED;case Ci.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Ci.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Ci.DATA_LOSS:return ce.DATA_LOSS;default:return ct()}}(En=Ci||(Ci={}))[En.OK=0]="OK",En[En.CANCELLED=1]="CANCELLED",En[En.UNKNOWN=2]="UNKNOWN",En[En.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",En[En.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",En[En.NOT_FOUND=5]="NOT_FOUND",En[En.ALREADY_EXISTS=6]="ALREADY_EXISTS",En[En.PERMISSION_DENIED=7]="PERMISSION_DENIED",En[En.UNAUTHENTICATED=16]="UNAUTHENTICATED",En[En.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",En[En.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",En[En.ABORTED=10]="ABORTED",En[En.OUT_OF_RANGE=11]="OUT_OF_RANGE",En[En.UNIMPLEMENTED=12]="UNIMPLEMENTED",En[En.INTERNAL=13]="INTERNAL",En[En.UNAVAILABLE=14]="UNAVAILABLE",En[En.DATA_LOSS=15]="DATA_LOSS";class mP{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return EA}static getOrCreateInstance(){return null===EA&&(EA=new mP),EA}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let EA=null;function n2(){return new TextEncoder}const A$=new ml([4294967295,4294967295],0);function r2(n){const e=n2().encode(n),t=new CI;return t.update(e),new Uint8Array(t.digest())}function i2(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ml([t,r],0),new ml([i,o],0)]}class _P{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new UI(`Invalid padding: ${t}`);if(r<0)throw new UI(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new UI(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new UI(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=ml.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(ml.fromNumber(r)));return 1===i.compare(A$)&&(i=new ml([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=r2(e),[r,i]=i2(t);for(let o=0;o<this.hashCount;o++){const l=this.Et(r,i,o);if(!this.At(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new _P(o,i,t);return r.forEach(h=>l.insert(h)),l}insert(e){if(0===this.It)return;const t=r2(e),[r,i]=i2(t);for(let o=0;o<this.hashCount;o++){const l=this.Et(r,i,o);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class UI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class BI{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,HI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new BI(It.min(),i,new lr(Kt),Ko(),nn())}}class HI{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new HI(r,t,nn(),nn(),nn())}}class IA{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class s2{constructor(e,t){this.targetId=e,this.Vt=t}}class o2{constructor(e,t,r=$i.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class a2{constructor(){this.St=0,this.Dt=l2(),this.Ct=$i.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=nn(),t=nn(),r=nn();return this.Dt.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ct()}}),new HI(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=l2()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class N${constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ko(),this.zt=u2(),this.Wt=new lr(Kt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,o=this.se(r);if(o){const l=o.target;if(pA(l))if(0===i){const h=new tt(l.path);this.Yt(r,h,yr.newNoDocument(h,It.min()))}else Et(1===i);else{const h=this.ie(r);if(h!==i){const m=this.re(e,h);0!==m&&(this.ee(r),this.Wt=this.Wt.insert(r,2===m?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=mP.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(y,b,S){var R,k,B,K,se,ke;const We={localCacheCount:b,existenceFilterCount:S.count},Be=S.unchangedNames;return Be&&(We.bloomFilter={applied:0===y,hashCount:null!==(R=Be?.hashCount)&&void 0!==R?R:0,bitmapLength:null!==(K=null===(B=null===(k=Be?.bits)||void 0===k?void 0:k.bitmap)||void 0===B?void 0:B.length)&&void 0!==K?K:0,padding:null!==(ke=null===(se=Be?.bits)||void 0===se?void 0:se.padding)&&void 0!==ke?ke:0}),We}(m,h,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:o="",padding:l=0},hashCount:h=0}=r;let m,y;try{m=eh(o).toUint8Array()}catch(b){if(b instanceof pL)return vo("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{y=new _P(m,l,h)}catch(b){return vo(b instanceof UI?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===y.It?1:i!==t-this.oe(e.targetId,y)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(o=>{const l=this.Gt.ue(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;t.vt(h)||(this.Yt(e,o,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((o,l)=>{const h=this.se(l);if(h){if(o.current&&pA(h.target)){const m=new tt(h.target.path);null!==this.jt.get(m)||this.ae(l,m)||this.Yt(l,m,yr.newNoDocument(m,e))}o.Mt&&(t.set(l,o.Ot()),o.Ft())}});let r=nn();this.zt.forEach((o,l)=>{let h=!0;l.forEachWhile(m=>{const y=this.se(m);return!y||"TargetPurposeLimboResolution"===y.purpose||(h=!1,!1)}),h&&(r=r.add(o))}),this.jt.forEach((o,l)=>l.setReadTime(e));const i=new BI(e,t,this.Wt,this.jt,r);return this.jt=Ko(),this.zt=u2(),this.Wt=new lr(Kt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new a2,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new _r(Kt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new a2),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function u2(){return new lr(tt.comparator)}function l2(){return new lr(tt.comparator)}const M$={asc:"ASCENDING",desc:"DESCENDING"},R$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},x$={and:"AND",or:"OR"};class P${constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yP(n,e){return n.useProto3Json||I(e)?e:{value:e}}function iw(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function c2(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function O$(n,e){return iw(n,e.toTimestamp())}function hi(n){return Et(!!n),It.fromTimestamp(function(e){const t=qf(e);return new tr(t.seconds,t.nanos)}(n))}function vP(n,e){return(t=n,new dn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function d2(n){const e=dn.fromString(n);return Et(w2(e)),e}function jI(n,e){return vP(n.databaseId,e.path)}function Nc(n,e){const t=d2(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new tt(f2(t))}function wP(n,e){return vP(n.databaseId,e)}function h2(n){const e=d2(n);return 4===e.length?dn.emptyPath():f2(e)}function $I(n){return new dn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function f2(n){return Et(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function p2(n,e,t){return{name:jI(n,e),fields:t.value.mapValue.fields}}function g2(n,e,t){const r=Nc(n,e.name),i=hi(e.updateTime),o=e.createTime?hi(e.createTime):It.min(),l=new Ss({mapValue:{fields:e.fields}}),h=yr.newFoundDocument(r,i,o,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function GI(n,e){let t;if(e instanceof nw)t={update:p2(n,e.key,e.value)};else if(e instanceof rw)t={delete:jI(n,e.key)};else if(e instanceof rh)t={update:p2(n,e.key,e.data),updateMask:j$(e.fieldMask)};else{if(!(e instanceof hP))return ct();t={verify:jI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof ew)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Sm)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Am)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof tw)return{fieldPath:o.field.canonicalString(),increment:l.gt};throw ct()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:O$(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ct()),t;var i}function EP(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Ar.updateTime(hi(i.updateTime)):void 0!==i.exists?Ar.exists(i.exists):Ar.none():Ar.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,l){let h=null;"setToServerValue"in l?(Et("REQUEST_TIME"===l.setToServerValue),h=new ew):"appendMissingElements"in l?h=new Sm(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new Am(l.removeAllFromArray.values||[]):"increment"in l?h=new tw(o,l.increment):ct();const m=Sr.fromServerFormat(l.fieldPath);return new LI(m,h)}(n,i)):[];var i;if(e.update){const i=Nc(n,e.update.name),o=new Ss({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Zo((e.updateMask.fieldPaths||[]).map(y=>Sr.fromServerFormat(y)));return new rh(i,o,l,t,r)}return new nw(i,o,t,r)}if(e.delete){const i=Nc(n,e.delete);return new rw(i,t)}if(e.verify){const i=Nc(n,e.verify);return new hP(i,t)}return ct()}function m2(n,e){return{documents:[wP(n,e.path)]}}function IP(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=wP(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=wP(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0!==m.length)return v2(jn.create(m,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(m){if(0!==m.length)return m.map(y=>{return{field:Jf((b=y).field),direction:U$(b.dir)};var b})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const l=yP(n,e.limit);var h,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function _2(n){let e=h2(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Et(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let o=[];t.where&&(o=function(b){const S=y2(b);return S instanceof jn&&iP(S)?S.getFilters():[S]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(b=>{return new Qv(sw((S=b).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(b){let S;return S="object"==typeof b?b.value:b,I(S)?null:S}(t.limit));let m=null;var b;t.startAt&&(m=new Qf((b=t.startAt).values||[],!!b.before));let y=null;return t.endAt&&(y=function(b){return new Qf(b.values||[],!b.before)}(t.endAt)),PL(e,i,l,o,h,"F",m,y)}function y2(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=sw(e.unaryFilter.field);return gn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=sw(e.unaryFilter.field);return gn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=sw(e.unaryFilter.field);return gn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=sw(e.unaryFilter.field);return gn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ct()}}(n):void 0!==n.fieldFilter?gn.create(sw((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ct()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return jn.create(e.compositeFilter.filters.map(t=>y2(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ct()}}(e.compositeFilter.op))}(n):ct();var e}function U$(n){return M$[n]}function B$(n){return R$[n]}function H$(n){return x$[n]}function Jf(n){return{fieldPath:n.canonicalString()}}function sw(n){return Sr.fromServerFormat(n.fieldPath)}function v2(n){return n instanceof gn?function(e){if("=="===e.op){if(_L(e.value))return{unaryFilter:{field:Jf(e.field),op:"IS_NAN"}};if(mL(e.value))return{unaryFilter:{field:Jf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(_L(e.value))return{unaryFilter:{field:Jf(e.field),op:"IS_NOT_NAN"}};if(mL(e.value))return{unaryFilter:{field:Jf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jf(e.field),op:B$(e.op),value:e.value}}}(n):n instanceof jn?function(e){const t=e.getFilters().map(r=>v2(r));return 1===t.length?t[0]:{compositeFilter:{op:H$(e.op),filters:t}}}(n):ct()}function j$(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function w2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class ih{constructor(e,t,r,i,o=It.min(),l=It.min(),h=$i.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new ih(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ih(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ih(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ih(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class E2{constructor(e){this.fe=e}}function I2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:CA(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:jI(i=n.fe,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:iw(i,o.version.toTimestamp()),createTime:iw(i,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Nm(e.version)};else{if(!e.isUnknownDocument())return ct();r.unknownDocument={path:t.path.toArray(),version:Nm(e.version)}}var i,o;return r}function CA(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Nm(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mm(n){const e=new tr(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function Rm(n,e){const t=(e.baseMutations||[]).map(o=>EP(n.fe,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>EP(n.fe,o)),i=tr.fromMillis(e.localWriteTimeMs);return new fP(e.batchId,i,t,r)}function zI(n){const e=Mm(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Mm(n.lastLimboFreeSnapshotVersion):It.min();let r;var i;return void 0!==n.query.documents?(Et(1===(i=n.query).documents.length),r=wo(Xv(h2(i.documents[0])))):r=wo(_2(n.query)),new ih(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,$i.fromBase64String(n.resumeToken))}function C2(n,e){const t=Nm(e.snapshotVersion),r=Nm(e.lastLimboFreeSnapshotVersion);let i;i=pA(e.target)?m2(n.fe,e.target):IP(n.fe,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Tm(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function CP(n){const e=_2({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?_A(e,e.limit,"L"):e}function bP(n,e){return new gP(e.largestBatchId,EP(n.fe,e.overlayMutation))}function b2(n,e){const t=e.path.lastSegment();return[n,P(e.path.popLast()),t]}function T2(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Nm(r.readTime),documentKey:P(r.documentKey.path),largestBatchId:r.largestBatchId}}class G${getBundleMetadata(e,t){return D2(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Mm(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return D2(e).put({bundleId:(r=t).id,createTime:Nm(hi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return S2(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:CP(i.bundledQuery),readTime:Mm(i.readTime)};var i})}saveNamedQuery(e,t){return S2(e).put({name:(r=t).name,readTime:Nm(hi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function D2(n){return is(n,"bundles")}function S2(n){return is(n,"namedQueries")}class bA{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new bA(e,t.uid||"")}getOverlay(e,t){return qI(e).get(b2(this.userId,t)).next(r=>r?bP(this.serializer,r):null)}getOverlays(e,t){const r=Ac();return le.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,l)=>{const h=new gP(t,l);i.push(this.we(e,h))}),le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(P(l.getCollectionPath())));const o=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);o.push(qI(e).J("collectionPathOverlayIndex",h))}),le.waitFor(o)}getOverlaysForCollection(e,t,r){const i=Ac(),o=P(t),l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return qI(e).j("collectionPathOverlayIndex",l).next(h=>{for(const m of h){const y=bP(this.serializer,m);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=Ac();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qI(e).X({index:"collectionGroupOverlayIndex",range:h},(m,y,b)=>{const S=bP(this.serializer,y);o.size()<i||S.largestBatchId===l?(o.set(S.getKey(),S),l=S.largestBatchId):b.done()}).next(()=>o)}we(e,t){return qI(e).put(function(r,i,o){const[l,h,m]=b2(i,o.mutation.key);return{userId:i,collectionPath:h,documentId:m,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:GI(r.fe,o.mutation)}}(this.serializer,this.userId,t))}}function qI(n){return is(n,"documentOverlays")}class xm{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(ii(e.integerValue));else if("doubleValue"in e){const r=ii(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),T(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(eh(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?yL(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ct()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),tt.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function z$(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function A2(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=z$(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}xm.Ve=new xm;class q${constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=A2(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=A2(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class W${constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Z${constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class WI{constructor(){this.je=new q$,this.ze=new W$(this.je),this.We=new Z$(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Pm{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Pm(this.indexId,this.documentKey,this.arrayValue,r)}}function Xf(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=N2(n.arrayValue,e.arrayValue),0!==t?t:(t=N2(n.directionalValue,e.directionalValue),0!==t?t:tt.comparator(n.documentKey,e.documentKey)))}function N2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class K${constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){Et(e.collectionGroup===this.collectionId);const t=rA(e);if(void 0!==t&&!this.en(t))return!1;const r=Jd(e);let i=new Set,o=0,l=0;for(;o<r.length&&this.en(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const h=r[o];if(!this.nn(this.Ze,h)||!this.sn(this.Ye[l++],h))return!1}++o}for(;o<r.length;++o)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[o]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function M2(n){var e,t;if(Et(n instanceof gn||n instanceof jn),n instanceof gn){if(n instanceof ML){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>gn.create(n.field,"==",o)))||[];return jn.create(i,"or")}return n}const r=n.filters.map(i=>M2(i));return jn.create(r,n.op)}function Y$(n){if(0===n.getFilters().length)return[];const e=SP(M2(n));return Et(R2(e)),TP(e)||DP(e)?[e]:e.getFilters()}function TP(n){return n instanceof gn}function DP(n){return n instanceof jn&&iP(n)}function R2(n){return TP(n)||DP(n)||function(e){if(e instanceof jn&&rP(e)){for(const t of e.getFilters())if(!TP(t)&&!DP(t))return!1;return!0}return!1}(n)}function SP(n){if(Et(n instanceof gn||n instanceof jn),n instanceof gn)return n;if(1===n.filters.length)return SP(n.filters[0]);const e=n.filters.map(r=>SP(r));let t=jn.create(e,n.op);return t=TA(t),R2(t)?t:(Et(t instanceof jn),Et(Jv(t)),Et(t.filters.length>1),t.filters.reduce((r,i)=>AP(r,i)))}function AP(n,e){let t;return Et(n instanceof gn||n instanceof jn),Et(e instanceof gn||e instanceof jn),t=n instanceof gn?e instanceof gn?jn.create([n,e],"and"):x2(n,e):e instanceof gn?x2(e,n):function(r,i){if(Et(r.filters.length>0&&i.filters.length>0),Jv(r)&&Jv(i))return SL(r,i.getFilters());const o=rP(r)?r:i,l=rP(r)?i:r,h=o.filters.map(m=>AP(m,l));return jn.create(h,"or")}(n,e),TA(t)}function x2(n,e){if(Jv(e))return SL(e,n.getFilters());{const t=e.filters.map(r=>AP(n,r));return jn.create(t,"or")}}function TA(n){if(Et(n instanceof gn||n instanceof jn),n instanceof gn)return n;const e=n.getFilters();if(1===e.length)return TA(e[0]);if(TL(n))return n;const t=e.map(i=>TA(i)),r=[];return t.forEach(i=>{i instanceof gn?r.push(i):i instanceof jn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:jn.create(r,n.op)}class Q${constructor(){this.rn=new NP}addToCollectionParentIndex(e,t){return this.rn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Wo.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(Wo.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class NP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _r(dn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _r(dn.comparator)).toArray()}}const DA=new Uint8Array(0);class J${constructor(e,t){this.user=e,this.databaseId=t,this.on=new NP,this.un=new nh(r=>Tm(r),(r,i)=>xI(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const o={collectionId:r,parent:P(i)};return P2(e).put(o)}return le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[qv(t),""],!1,!0);return P2(e).j(i).next(o=>{for(const l of o){if(l.collectionId!==t)break;r.push(Q(l.parent))}return r})}addFieldIndex(e,t){const r=SA(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const o=r.add(i);if(t.indexState){const l=KI(e);return o.next(h=>{l.put(T2(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=SA(e),i=KI(e),o=ZI(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=ZI(e);let i=!0;const o=new Map;return le.forEach(this.cn(t),l=>this.an(e,l).next(h=>{i&&(i=!!h),o.set(l,h)})).next(()=>{if(i){let l=nn();const h=[];return le.forEach(o,(m,y)=>{var b;Ve("IndexedDbIndexManager",`Using index ${b=m,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Be=>`${Be.fieldPath}:${Be.kind}`).join(",")}`} to execute ${Tm(t)}`);const S=function(Be,Ye){const At=rA(Ye);if(void 0===At)return null;for(const Ft of gA(Be,At.fieldPath))switch(Ft.op){case"array-contains-any":return Ft.value.arrayValue.values||[];case"array-contains":return[Ft.value]}return null}(y,m),R=function(Be,Ye){const At=new Map;for(const Ft of Jd(Ye))for(const _n of gA(Be,Ft.fieldPath))switch(_n.op){case"==":case"in":At.set(Ft.fieldPath.canonicalString(),_n.value);break;case"not-in":case"!=":return At.set(Ft.fieldPath.canonicalString(),_n.value),Array.from(At.values())}return null}(y,m),k=function(Be,Ye){const At=[];let Ft=!0;for(const _n of Jd(Ye)){const Hr=0===_n.kind?RL(Be,_n.fieldPath,Be.startAt):xL(Be,_n.fieldPath,Be.startAt);At.push(Hr.value),Ft&&(Ft=Hr.inclusive)}return new Qf(At,Ft)}(y,m),B=function(Be,Ye){const At=[];let Ft=!0;for(const _n of Jd(Ye)){const Hr=0===_n.kind?xL(Be,_n.fieldPath,Be.endAt):RL(Be,_n.fieldPath,Be.endAt);At.push(Hr.value),Ft&&(Ft=Hr.inclusive)}return new Qf(At,Ft)}(y,m),K=this.hn(m,y,k),se=this.hn(m,y,B),ke=this.ln(m,y,R),We=this.fn(m.indexId,S,K,k.inclusive,se,B.inclusive,ke);return le.forEach(We,Be=>r.H(Be,t.limit).next(Ye=>{Ye.forEach(At=>{const Ft=tt.fromSegments(At.documentKey);l.has(Ft)||(l=l.add(Ft),h.push(Ft))})}))}).next(()=>h)}return le.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Y$(jn.create(e.filters,"and")).map(r=>oP(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,o,l,h){const m=(null!=t?t.length:1)*Math.max(r.length,o.length),y=m/(null!=t?t.length:1),b=[];for(let S=0;S<m;++S){const R=t?this.dn(t[S/y]):DA,k=this.wn(e,R,r[S%y],i),B=this._n(e,R,o[S%y],l),K=h.map(se=>this.wn(e,R,se,!0));b.push(...this.createRange(k,B,K))}return b}wn(e,t,r,i){const o=new Pm(e,tt.empty(),t,r);return i?o:o.Je()}_n(e,t,r,i){const o=new Pm(e,tt.empty(),t,r);return i?o.Je():o}an(e,t){const r=new K$(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let l=null;for(const h of o)r.tn(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;const i=this.cn(t);return le.forEach(i,o=>this.an(e,o).next(l=>{l?0!==r&&l.fields.length<function(h){let m=new _r(Sr.comparator),y=!1;for(const b of h.filters)for(const S of b.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?y=!0:m=m.add(S.field));for(const b of h.orderBy)b.field.isKeyField()||(m=m.add(b.field));return m.size+(y?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new WI;for(const i of Jd(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const l=r.He(i.kind);xm.Ve._e(o,l)}return r.Qe()}dn(e){const t=new WI;return xm.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new WI;return xm.Ve._e(bm(this.databaseId,t),r.He(function(i){const o=Jd(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new WI);let o=0;for(const l of Jd(e)){const h=r[o++];for(const m of i)if(this.yn(t,l.fieldPath)&&MI(h))i=this.pn(i,l,h);else{const y=m.He(l.kind);xm.Ve._e(h,y)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],o=[];for(const l of r.arrayValue.values||[])for(const h of i){const m=new WI;m.seed(h.Qe()),xm.Ve._e(l,m.He(t.kind)),o.push(m)}return o}yn(e,t){return!!e.filters.find(r=>r instanceof gn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=SA(e),i=KI(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(o=>{const l=[];return le.forEach(o,h=>i.get([h.indexId,this.uid]).next(m=>{l.push(function(y,b){const S=b?new Zv(b.sequenceNumber,new Wo(Mm(b.readTime),new tt(Q(b.documentKey)),b.largestBatchId)):Zv.empty(),R=y.fields.map(([k,B])=>new DI(Sr.fromServerFormat(k),B));return new Im(y.indexId,y.collectionGroup,R,S)}(h,m))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Kt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=SA(e),o=KI(e);return this.Tn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>le.forEach(h,m=>o.put(T2(m.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(i,o)=>{const l=r.get(i.collectionGroup);return(l?le.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),le.forEach(h,m=>this.En(e,i,m).next(y=>{const b=this.An(o,m);return y.isEqual(b)?le.resolve():this.vn(e,o,m,y,b)}))))})}Rn(e,t,r,i){return ZI(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return ZI(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=ZI(e);let o=new _r(Xf);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,h)=>{o=o.add(new Pm(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>o)}An(e,t){let r=new _r(Xf);const i=this.mn(t,e);if(null==i)return r;const o=rA(t);if(null!=o){const l=e.data.field(o.fieldPath);if(MI(l))for(const h of l.arrayValue.values||[])r=r.add(new Pm(t.indexId,e.key,this.dn(h),i))}else r=r.add(new Pm(t.indexId,e.key,DA,i));return r}vn(e,t,r,i,o){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,m,y,b,S){const R=h.getIterator(),k=m.getIterator();let B=Kv(R),K=Kv(k);for(;B||K;){let se=!1,ke=!1;if(B&&K){const We=y(B,K);We<0?ke=!0:We>0&&(se=!0)}else null!=B?ke=!0:se=!0;se?(b(K),K=Kv(k)):ke?(S(B),B=Kv(R)):(B=Kv(R),K=Kv(k))}}(i,o,Xf,h=>{l.push(this.Rn(e,t,r,h))},h=>{l.push(this.Pn(e,t,r,h))}),le.waitFor(l)}Tn(e){let t=1;return KI(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>Xf(l,h)).filter((l,h,m)=>!h||0!==Xf(l,m[h-1]));const i=[];i.push(e);for(const l of r){const h=Xf(l,e),m=Xf(l,t);if(0===h)i[0]=e.Je();else if(h>0&&m<0)i.push(l),i.push(l.Je());else if(m>0)break}i.push(t);const o=[];for(let l=0;l<i.length;l+=2){if(this.bn(i[l],i[l+1]))return[];o.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,DA,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,DA,[]]))}return o}bn(e,t){return Xf(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(O2)}getMinOffset(e,t){return le.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||ct())).next(O2)}}function P2(n){return is(n,"collectionParents")}function ZI(n){return is(n,"indexEntries")}function SA(n){return is(n,"indexConfiguration")}function KI(n){return is(n,"indexState")}function O2(n){Et(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;sA(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Wo(e.readTime,e.documentKey,t)}const k2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ws{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ws(e,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function F2(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],l=IDBKeyRange.only(t.batchId);let h=0;const m=r.X({range:l},(b,S,R)=>(h++,R.delete()));o.push(m.next(()=>{Et(1===h)}));const y=[];for(const b of t.mutations){const S=Je(e,b.key.path,t.batchId);o.push(i.delete(S)),y.push(b.key)}return le.waitFor(o).next(()=>y)}function AA(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ct();e=n.noDocument}return JSON.stringify(e).length}Ws.DEFAULT_COLLECTION_PERCENTILE=10,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ws.DEFAULT=new Ws(41943040,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ws.DISABLED=new Ws(-1,0,0);class NA{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){Et(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new NA(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ep(e).X({index:"userMutationsIndex",range:r},(i,o,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=ow(e),l=ep(e);return l.add({}).next(h=>{Et("number"==typeof h);const m=new fP(h,t,r,i),y=function(R,k,B){const K=B.baseMutations.map(ke=>GI(R.fe,ke)),se=B.mutations.map(ke=>GI(R.fe,ke));return{userId:k,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:K,mutations:se}}(this.serializer,this.userId,m),b=[];let S=new _r((R,k)=>Kt(R.canonicalString(),k.canonicalString()));for(const R of i){const k=Je(this.userId,R.key.path,h);S=S.add(R.key.path.popLast()),b.push(l.put(y)),b.push(o.put(k,Ct))}return S.forEach(R=>{b.push(this.indexManager.addToCollectionParentIndex(e,R))}),e.addOnCommittedListener(()=>{this.Vn[h]=m.keys()}),le.waitFor(b).next(()=>m)})}lookupMutationBatch(e,t){return ep(e).get(t).next(r=>r?(Et(r.userId===this.userId),Rm(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?le.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return ep(e).X({index:"userMutationsIndex",range:i},(l,h,m)=>{h.userId===this.userId&&(Et(h.batchId>=r),o=Rm(this.serializer,h)),m.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ep(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,o,l)=>{r=o.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ep(e).j("userMutationsIndex",t).next(r=>r.map(i=>Rm(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=xe(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return ow(e).X({range:i},(l,h,m)=>{const[y,b,S]=l,R=Q(b);if(y===this.userId&&t.path.isEqual(R))return ep(e).get(S).next(k=>{if(!k)throw ct();Et(k.userId===this.userId),o.push(Rm(this.serializer,k))});m.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _r(Kt);const i=[];return t.forEach(o=>{const l=xe(this.userId,o.path),h=IDBKeyRange.lowerBound(l),m=ow(e).X({range:h},(y,b,S)=>{const[R,k,B]=y,K=Q(k);R===this.userId&&o.path.isEqual(K)?r=r.add(B):S.done()});i.push(m)}),le.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=xe(this.userId,r),l=IDBKeyRange.lowerBound(o);let h=new _r(Kt);return ow(e).X({range:l},(m,y,b)=>{const[S,R,k]=m,B=Q(R);S===this.userId&&r.isPrefixOf(B)?B.length===i&&(h=h.add(k)):b.done()}).next(()=>this.Dn(e,h))}Dn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(ep(e).get(o).next(l=>{if(null===l)throw ct();Et(l.userId===this.userId),r.push(Rm(this.serializer,l))}))}),le.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return F2(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),le.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return ow(e).X({range:r},(o,l,h)=>{if(o[0]===this.userId){const m=Q(o[1]);i.push(m)}else h.done()}).next(()=>{Et(0===i.length)})})}containsKey(e,t){return L2(e,this.userId,t)}xn(e){return V2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function L2(n,e,t){const r=xe(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let l=!1;return ow(n).X({range:o,Y:!0},(h,m,y)=>{const[b,S,R]=h;b===e&&S===i&&(l=!0),y.done()}).next(()=>l)}function ep(n){return is(n,"mutations")}function ow(n){return is(n,"documentMutations")}function V2(n){return is(n,"mutationQueues")}class Om{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Om(0)}static Mn(){return new Om(-1)}}class X${constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Om(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>It.fromTimestamp(new tr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>aw(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(Et(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return aw(e).X((l,h)=>{const m=zI(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,o.push(this.removeTargetData(e,m)))}).next(()=>le.waitFor(o)).next(()=>i)}forEachTarget(e,t){return aw(e).X((r,i)=>{const o=zI(i);t(o)})}$n(e){return U2(e).get("targetGlobalKey").next(t=>(Et(null!==t),t))}On(e,t){return U2(e).put("targetGlobalKey",t)}Fn(e,t){return aw(e).put(C2(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Tm(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return aw(e).X({range:i,index:"queryTargetsIndex"},(l,h,m)=>{const y=zI(h);xI(t,y.target)&&(o=y,m.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=tp(e);return t.forEach(l=>{const h=P(l.path);i.push(o.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),le.waitFor(i)}removeMatchingKeys(e,t,r){const i=tp(e);return le.forEach(t,o=>{const l=P(o.path);return le.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=tp(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=tp(e);let o=nn();return i.X({range:r,Y:!0},(l,h,m)=>{const y=Q(l[1]),b=new tt(y);o=o.add(b)}).next(()=>o)}containsKey(e,t){const r=P(t.path),i=IDBKeyRange.bound([r],[qv(r)],!1,!0);let o=0;return tp(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,h],m,y)=>{0!==l&&(o++,y.done())}).next(()=>o>0)}le(e,t){return aw(e).get(t).next(r=>r?zI(r):null)}}function aw(n){return is(n,"targets")}function U2(n){return is(n,"targetGlobal")}function tp(n){return is(n,"targetDocuments")}function B2([n,e],[t,r]){const i=Kt(n,t);return 0===i?Kt(e,r):i}class e3{constructor(e){this.Ln=e,this.buffer=new _r(B2),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();B2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class H2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ge.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Xd(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Dc(r)}yield t.Qn(3e5)}))}}class t3{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(v.ct);const r=new e3(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(k2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),k2):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,o,l,h,m,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(o=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(y=Date.now(),bI()<=es.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-b}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${o} targets in `+(m-h)+`ms\n\tRemoved ${S} documents in `+(y-m)+`ms\nTotal Duration: ${y-b}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:S})))}}class n3{constructor(e,t){this.db=e,this.garbageCollector=function j2(n,e){return new t3(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return MA(e,r)}removeReference(e,t,r){return MA(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return MA(e,t)}Xn(e,t){return function(r,i){let o=!1;return V2(r).Z(l=>L2(r,l,i).next(h=>(h&&(o=!0),le.resolve(!h)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Yn(e,(l,h)=>{if(h<=t){const m=this.Xn(e,l).next(y=>{if(!y)return o++,r.getEntry(e,l).next(()=>(r.removeEntry(l,It.min()),tp(e).delete([0,P(l.path)])))});i.push(m)}}).next(()=>le.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return MA(e,t)}Yn(e,t){const r=tp(e);let i,o=v.ct;return r.X({index:"documentTargetsIndex"},([l,h],{path:m,sequenceNumber:y})=>{0===l?(o!==v.ct&&t(new tt(Q(i)),o),o=y,i=m):o=v.ct}).next(()=>{o!==v.ct&&t(new tt(Q(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function MA(n,e){return tp(n).put((r=n.currentSequenceNumber,{targetId:0,path:P(e.path),sequenceNumber:r}));var r}class $2{constructor(){this.changes=new nh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class r3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return km(e).put(r)}removeEntry(e,t,r){return km(e).delete(function(i,o){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],CA(o),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=yr.newInvalidDocument(t);return km(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(YI(t))},(i,o)=>{r=this.ts(t,o)}).next(()=>r)}es(e,t){let r={size:0,document:yr.newInvalidDocument(t)};return km(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(YI(t))},(i,o)=>{r={document:this.ts(t,o),size:AA(o)}}).next(()=>r)}getEntries(e,t){let r=Ko();return this.ns(e,t,(i,o)=>{const l=this.ts(i,o);r=r.insert(i,l)}).next(()=>r)}ss(e,t){let r=Ko(),i=new lr(tt.comparator);return this.ns(e,t,(o,l)=>{const h=this.ts(o,l);r=r.insert(o,h),i=i.insert(o,AA(l))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return le.resolve();let i=new _r(W2);t.forEach(m=>i=i.add(m));const o=IDBKeyRange.bound(YI(i.first()),YI(i.last())),l=i.getIterator();let h=l.getNext();return km(e).X({index:"documentKeyIndex",range:o},(m,y,b)=>{const S=tt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&W2(h,S)<0;)r(h,null),h=l.getNext();h&&h.isEqual(S)&&(r(h,y),h=l.hasNext()?l.getNext():null),h?b.G(YI(h)):b.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const o=t.path,l=[o.popLast().toArray(),o.lastSegment(),CA(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return km(e).j(IDBKeyRange.bound(l,h,!0)).next(m=>{let y=Ko();for(const b of m){const S=this.ts(tt.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);S.isFoundDocument()&&(OI(t,S)||i.has(S.key))&&(y=y.insert(S.key,S))}return y})}getAllFromCollectionGroup(e,t,r,i){let o=Ko();const l=q2(t,r),h=q2(t,Wo.max());return km(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(m,y,b)=>{const S=this.ts(tt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);o=o.insert(S.key,S),o.size===i&&b.done()}).next(()=>o)}newChangeBuffer(e){return new i3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return z2(e).get("remoteDocumentGlobalKey").next(t=>(Et(!!t),t))}Zn(e,t){return z2(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function $$(n,e){let t;if(e.document)t=g2(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=tt.fromSegments(e.noDocument.path),i=Mm(e.noDocument.readTime);t=yr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ct();{const r=tt.fromSegments(e.unknownDocument.path),i=Mm(e.unknownDocument.version);t=yr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new tr(r[0],r[1]);return It.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(It.min()))return r}return yr.newInvalidDocument(e)}}function G2(n){return new r3(n)}class i3 extends $2{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new nh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new _r((o,l)=>Kt(o.canonicalString(),l.canonicalString()));return this.changes.forEach((o,l)=>{const h=this.us.get(o);if(t.push(this.os.removeEntry(e,o,h.readTime)),l.isValidDocument()){const m=I2(this.os.serializer,l);i=i.add(o.path.popLast());const y=AA(m);r+=y-h.size,t.push(this.os.addEntry(e,o,m))}else if(r-=h.size,this.trackRemovals){const m=I2(this.os.serializer,l.convertToNoDocument(It.min()));t.push(this.os.addEntry(e,o,m))}}),i.forEach(o=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.os.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((o,l)=>{this.us.set(o,{size:l,readTime:r.get(o).readTime})}),r))}}function z2(n){return is(n,"remoteDocumentGlobal")}function km(n){return is(n,"remoteDocumentsV14")}function YI(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function q2(n,e){const t=e.documentKey.path.toArray();return[n,CA(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function W2(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Kt(t[o],r[o]),i)return i;return i=Kt(t.length,r.length),i||(i=Kt(t[t.length-2],r[r.length-2]),i||Kt(t[t.length-1],r[r.length-1]))}class s3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Z2{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&VI(r.mutation,i,Zo.empty(),tr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,nn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=nn()){const i=Ac();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let l=kI();return o.forEach((h,m)=>{l=l.insert(h,m.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Ac();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,nn()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let o=Ko();const l=FI(),h=FI();return t.forEach((m,y)=>{const b=r.get(y.key);i.has(y.key)&&(void 0===b||b.mutation instanceof rh)?o=o.insert(y.key,y):void 0!==b?(l.set(y.key,b.mutation.getFieldMask()),VI(b.mutation,y,b.mutation.getFieldMask(),tr.now())):l.set(y.key,Zo.empty())}),this.recalculateAndSaveOverlays(e,o).next(m=>(m.forEach((y,b)=>l.set(y,b)),t.forEach((y,b)=>{var S;return h.set(y,new s3(b,null!==(S=l.get(y))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=FI();let i=new lr((l,h)=>l-h),o=nn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(m=>{const y=t.get(m);if(null===y)return;let b=r.get(m)||Zo.empty();b=h.applyToLocalView(y,b),r.set(m,b);const S=(i.get(h.batchId)||nn()).add(m);i=i.insert(h.batchId,S)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),y=m.key,b=m.value,S=BL();b.forEach(R=>{if(!o.has(R)){const k=KL(t.get(R),r.get(R));null!==k&&S.set(R,k),o=o.add(R)}}),l.push(this.documentOverlayCache.saveOverlays(e,y,S))}return le.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return tt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):uP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):le.resolve(Ac());let h=-1,m=o;return l.next(y=>le.forEach(y,(b,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),o.get(b)?le.resolve():this.remoteDocumentCache.getEntry(e,b).next(R=>{m=m.insert(b,R)}))).next(()=>this.populateOverlays(e,y,o)).next(()=>this.computeViews(e,m,y,nn())).next(b=>({batchId:h,changes:UL(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tt(t)).next(r=>{let i=kI();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let o=kI();return this.indexManager.getCollectionParents(e,i).next(l=>le.forEach(l,h=>{const m=(y=t,b=h.child(i),new th(b,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,b;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(y=>{y.forEach((b,S)=>{o=o.insert(b,S)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(o=>{i.forEach((h,m)=>{const y=m.getKey();null===o.get(y)&&(o=o.insert(y,yr.newInvalidDocument(y)))});let l=kI();return o.forEach((h,m)=>{const y=i.get(h);void 0!==y&&VI(y.mutation,m,Zo.empty(),tr.now()),OI(t,m)&&(l=l.insert(h,m))}),l})}}class o3{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return le.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:hi(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:CP(r.bundledQuery),readTime:hi(r.readTime)}),le.resolve();var r}}class a3{constructor(){this.overlays=new lr(tt.comparator),this.ls=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ac();return le.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.we(e,t,o)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.ls.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=Ac(),o=t.length+1,l=new tt(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const m=h.getNext().value,y=m.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===o&&m.largestBatchId>r&&i.set(m.getKey(),m)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new lr((y,b)=>y-b);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let b=o.get(y.largestBatchId);null===b&&(b=Ac(),o=o.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const h=Ac(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((y,b)=>h.set(y,b)),!(h.size()>=i)););return le.resolve(h)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new gP(t,r));let o=this.ls.get(t);void 0===o&&(o=nn(),this.ls.set(t,o)),this.ls.set(t,o.add(r.key))}}class MP{constructor(){this.fs=new _r(ss.ds),this.ws=new _r(ss._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new ss(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new ss(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new tt(new dn([])),r=new ss(t,e),i=new ss(t,e+1),o=[];return this.ws.forEachInRange([r,i],l=>{this.ys(l),o.push(l.key)}),o}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new tt(new dn([])),r=new ss(t,e),i=new ss(t,e+1);let o=nn();return this.ws.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new ss(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ss{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return tt.comparator(e.key,t.key)||Kt(e.As,t.As)}static _s(e,t){return Kt(e.As,t.As)||tt.comparator(e.key,t.key)}}class u3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new _r(ss.ds)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.vs;this.vs++;const l=new fP(o,t,r,i);this.mutationQueue.push(l);for(const h of i)this.Rs=this.Rs.add(new ss(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return le.resolve(l)}lookupMutationBatch(e,t){return le.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),o=i<0?0:i;return le.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ss(t,0),i=new ss(t,Number.POSITIVE_INFINITY),o=[];return this.Rs.forEachInRange([r,i],l=>{const h=this.Ps(l.As);o.push(h)}),le.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _r(Kt);return t.forEach(i=>{const o=new ss(i,0),l=new ss(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([o,l],h=>{r=r.add(h.As)})}),le.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;tt.isDocumentKey(o)||(o=o.child(""));const l=new ss(new tt(o),0);let h=new _r(Kt);return this.Rs.forEachWhile(m=>{const y=m.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(m.As)),!0)},l),le.resolve(this.Vs(h))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Et(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return le.forEach(t.mutations,i=>{const o=new ss(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new ss(t,0),i=this.Rs.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class l3{constructor(e){this.Ds=e,this.docs=new lr(tt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():yr.newInvalidDocument(t))}getEntries(e,t){let r=Ko();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():yr.newInvalidDocument(i))}),le.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ko();const l=t.path,h=new tt(l.child("")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:y,value:{document:b}}=m.getNext();if(!l.isPrefixOf(y.path))break;y.path.length>l.length+1||sA(iA(b),r)<=0||(i.has(b.key)||OI(t,b))&&(o=o.insert(b.key,b.mutableCopy()))}return le.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ct()}Cs(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new c3(this)}getSize(e){return le.resolve(this.size)}}class c3 extends $2{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class d3{constructor(e){this.persistence=e,this.xs=new nh(t=>Tm(t),xI),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.Ns=0,this.ks=new MP,this.targetCount=0,this.Ms=Om.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),le.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Om(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Fn(t),le.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.xs.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.xs.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),le.waitFor(o).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),le.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.ks.containsKey(t))}}class RP{constructor(e,t){this.$s={},this.overlays={},this.Os=new v(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new d3(this),this.indexManager=new Q$,this.remoteDocumentCache=new l3(r=>this.referenceDelegate.Ls(r)),this.serializer=new E2(t),this.qs=new o3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new a3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new u3(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new h3(this.Os.next());return this.referenceDelegate.Us(),r(i).next(o=>this.referenceDelegate.Ks(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gs(e,t){return le.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class h3 extends Xx{constructor(e){super(),this.currentSequenceNumber=e}}class RA{constructor(e){this.persistence=e,this.Qs=new MP,this.js=null}static zs(e){return new RA(e)}get Ws(){if(this.js)return this.js;throw ct()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),le.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Ws.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Ws,r=>{const i=tt.fromPath(r);return this.Hs(e,i).next(o=>{o||t.removeEntry(i,It.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return le.or([()=>le.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class f3{constructor(e){this.serializer=e}O(e,t,r,i){const o=new SI("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ee,{unique:!0}),h.createObjectStore("documentMutations"),K2(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=le.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),K2(e)),l=l.next(()=>function(h){const m=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",y)}(o))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,m){return m.store("mutations").j().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ee,{unique:!0});const b=m.store("mutations"),S=y.map(R=>b.put(R));return le.waitFor(S)})}(e,o))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Ys(o))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(o)))),r<7&&i>=7&&(l=l.next(()=>this.Zs(o))),r<8&&i>=8&&(l=l.next(()=>this.ti(e,o))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ei(o))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const m=h.createObjectStore("documentOverlays",{keyPath:Qj});m.createIndex("collectionPathOverlayIndex",Jj,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",Xj,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const m=h.createObjectStore("remoteDocumentsV14",{keyPath:Te});m.createIndex("documentKeyIndex",Ot),m.createIndex("collectionGroupIndex",on)}(e)).next(()=>this.ni(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.si(e,o))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:Wj}).createIndex("sequenceNumberIndex",Zj,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:Kj}).createIndex("documentKeyIndex",Yj,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=AA(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>le.forEach(i,o=>{const l=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(h=>le.forEach(h,m=>{Et(m.userId===o.userId);const y=Rm(this.serializer,m);return F2(e,o.userId,y).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.X((l,h)=>{const m=new dn(l),y=[0,P(m)];o.push(t.get(y).next(b=>b?le.resolve():t.put({targetId:0,path:P(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>le.waitFor(o))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:qj});const r=t.store("collectionParents"),i=new NP,o=l=>{if(i.add(l)){const h=l.lastSegment(),m=l.popLast();return r.put({collectionId:h,parent:P(m)})}};return t.store("remoteDocuments").X({Y:!0},(l,h)=>{const m=new dn(l);return o(m.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,h,m],y)=>{const b=Q(h);return o(b.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const o=zI(i),l=C2(this.serializer,o);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((o,l)=>{const h=t.store("remoteDocumentsV14"),m=(y=l,y.document?new tt(dn.fromString(y.document.name).popFirst(5)):y.noDocument?tt.fromSegments(y.noDocument.path):y.unknownDocument?tt.fromSegments(y.unknownDocument.path):ct()).path.toArray();var y;const b={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(b))}).next(()=>le.waitFor(i))}si(e,t){const r=t.store("mutations"),i=G2(this.serializer),o=new RP(RA.zs,this.serializer.fe);return r.j().next(l=>{const h=new Map;return l.forEach(m=>{var y;let b=null!==(y=h.get(m.userId))&&void 0!==y?y:nn();Rm(this.serializer,m).keys().forEach(S=>b=b.add(S)),h.set(m.userId,b)}),le.forEach(h,(m,y)=>{const b=new ji(y),S=bA.de(this.serializer,b),R=o.getIndexManager(b),k=NA.de(b,this.serializer,R,o.referenceDelegate);return new Z2(i,k,S,R).recalculateAndSaveOverlaysForDocumentKeys(new eP(t,v.ct),m).next()})})}}function K2(n){n.createObjectStore("targetDocuments",{keyPath:Ea}).createIndex("documentTargetsIndex",aA,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Rn,{unique:!0}),n.createObjectStore("targetGlobal")}const xP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class PP{constructor(e,t,r,i,o,l,h,m,y,b,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=o,this.window=l,this.document=h,this.ri=y,this.oi=b,this.ui=S,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=R=>Promise.resolve(),!PP.D())throw new Ae(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new n3(this,i),this.di=t+"main",this.serializer=new E2(m),this.wi=new gu(this.di,this.ui,new f3(this.serializer)),this.Bs=new X$(this.referenceDelegate,this.serializer),this.remoteDocumentCache=G2(this.serializer),this.qs=new G$,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===b&&Ur("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(ce.FAILED_PRECONDITION,xP);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new v(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,ge.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>PA(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Xd(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return QI(e).get("owner").next(t=>le.resolve(this.Ri(t)))}Pi(e){return PA(e).delete(this.clientId)}bi(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=is(r,"clientMetadata");return i.j().next(o=>{const l=e.Si(o,18e5),h=o.filter(m=>-1===l.indexOf(m));return le.forEach(h,m=>i.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?le.resolve(!0):QI(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Ae(ce.FAILED_PRECONDITION,xP);return!1}}return!(!this.networkEnabled||!this.inForeground)||PA(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new eP(t,v.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>PA(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return NA.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new J$(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return bA.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=15===(l=this.ui)?t$:14===l?cL:13===l?lL:12===l?e$:11===l?uL:void ct();var l;let h;return this.wi.runTransaction(e,i,o,m=>(h=new eP(m,this.Os?this.Os.next():v.ct),"readwrite-primary"===t?this.Ti(h).next(y=>!!y||this.Ei(h)).next(y=>{if(!y)throw Ur(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Ae(ce.FAILED_PRECONDITION,Jx);return r(h)}).next(y=>this.vi(h).next(()=>y)):this.Oi(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}Oi(e){return QI(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(ce.FAILED_PRECONDITION,xP)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return QI(e).put("owner",t)}static D(){return gu.D()}Ai(e){const t=QI(e);return t.get("owner").next(r=>this.Ri(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Ur(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,O.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ur("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Ur("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function QI(n){return is(n,"owner")}function PA(n){return is(n,"clientMetadata")}function OP(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class kP{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=nn(),i=nn();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new kP(e,t.fromCache,r,i)}}class Y2{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(o=>o||this.Gi(e,t,i,r)).next(o=>o||this.Qi(e,t))}Ki(e,t){if(OL(t))return le.resolve(null);let r=wo(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=_A(t,null,"F"),r=wo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=nn(...o);return this.Ui.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(m=>{const y=this.ji(t,h);return this.zi(t,y,l,m.readTime)?this.Ki(e,_A(t,null,"F")):this.Wi(e,y,t,m)}))})))}Gi(e,t,r,i){return OL(t)||i.isEqual(It.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(o=>{const l=this.ji(t,o);return this.zi(t,l,r,i)?this.Qi(e,t):(bI()<=es.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),cP(t)),this.Wi(e,l,t,Qx(i,-1)))})}ji(e,t){let r=new _r(LL(e));return t.forEach((i,o)=>{OI(e,o)&&(r=r.add(o))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Qi(e,t){return bI()<=es.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",cP(t)),this.Ui.getDocumentsMatchingQuery(e,t,Wo.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}class p3{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new lr(Kt),this.Yi=new nh(o=>Tm(o),xI),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Z2(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Q2(n,e,t,r){return new p3(n,e,t,r)}function J2(n,e){return FP.apply(this,arguments)}function FP(){return FP=(0,ge.Z)(function*(n,e){const t=rt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],h=[];let m=nn();for(const y of i){l.push(y.batchId);for(const b of y.mutations)m=m.add(b.key)}for(const y of o){h.push(y.batchId);for(const b of y.mutations)m=m.add(b.key)}return t.localDocuments.getDocuments(r,m).next(y=>({er:y,removedBatchIds:l,addedBatchIds:h}))})})}),FP.apply(this,arguments)}function X2(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function eV(n,e,t){let r=nn(),i=nn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=Ko();return t.forEach((h,m)=>{const y=o.get(h);m.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(h)),m.isNoDocument()&&m.version.isEqual(It.min())?(e.removeEntry(h,m.readTime),l=l.insert(h,m)):!y.isValidDocument()||m.version.compareTo(y.version)>0||0===m.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(m),l=l.insert(h,m)):Ve("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",m.version)}),{nr:l,sr:i}})}function _3(n,e){const t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function uw(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(o=>o?(i=o,le.resolve(i)):t.Bs.allocateTargetId(r).next(l=>(i=new ih(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function lw(n,e,t){return LP.apply(this,arguments)}function LP(){return LP=(0,ge.Z)(function*(n,e,t){const r=rt(n),i=r.Ji.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Xd(l))throw l;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),LP.apply(this,arguments)}function OA(n,e,t){const r=rt(n);let i=It.min(),o=nn();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,m,y){const b=rt(h),S=b.Yi.get(y);return void 0!==S?le.resolve(b.Ji.get(S)):b.Bs.getTargetData(m,y)}(r,l,wo(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,h.targetId).next(m=>{o=m})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?i:It.min(),t?o:nn())).next(h=>(rV(r,FL(e),h),{documents:h,ir:o})))}function tV(n,e){const t=rt(n),r=rt(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.le(o,e).next(l=>l?l.target:null))}function nV(n,e){const t=rt(n),r=t.Xi.get(e)||It.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,Qx(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(rV(t,e,i),i))}function rV(n,e,t){let r=n.Xi.get(e)||It.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Xi.set(e,r)}function VP(){return VP=(0,ge.Z)(function*(n,e,t,r){const i=rt(n);let o=nn(),l=Ko();for(const y of t){const b=e.rr(y.metadata.name);y.document&&(o=o.add(b));const S=e.ur(y);S.setReadTime(e.cr(y.metadata.readTime)),l=l.insert(b,S)}const h=i.Zi.newChangeBuffer({trackRemovals:!0}),m=yield uw(i,(y=r,wo(Xv(dn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>eV(y,h,l).next(b=>(h.apply(y),b)).next(b=>i.Bs.removeMatchingKeysForTargetId(y,m.targetId).next(()=>i.Bs.addMatchingKeys(y,o,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,b.nr,b.sr)).next(()=>b.nr)))}),VP.apply(this,arguments)}function v3(n,e){return UP.apply(this,arguments)}function UP(){return UP=(0,ge.Z)(function*(n,e,t=nn()){const r=yield uw(n,wo(CP(e.bundledQuery))),i=rt(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const l=hi(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.qs.saveNamedQuery(o,e);const h=r.withResumeToken($i.EMPTY_BYTE_STRING,l);return i.Ji=i.Ji.insert(h.targetId,h),i.Bs.updateTargetData(o,h).next(()=>i.Bs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Bs.addMatchingKeys(o,t,r.targetId)).next(()=>i.qs.saveNamedQuery(o,e))})}),UP.apply(this,arguments)}function iV(n,e){return`firestore_clients_${n}_${e}`}function sV(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function BP(n,e){return`firestore_targets_${n}_${e}`}class kA{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let o,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(o=new Ae(i.error.code,i.error.message))),l?new kA(e,t,i.state,o):(Ur("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class JI{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Ae(r.error.code,r.error.message))),o?new JI(e,r.state,i):(Ur("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class FA{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=dP();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=N(r.activeTargetIds[l]),o=o.add(r.activeTargetIds[l]);return i?new FA(e,o):(Ur("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class HP{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new HP(t.clientId,t.onlineState):(Ur("SharedClientState",`Failed to parse online state: ${e}`),null)}}class jP{constructor(){this.activeTargetIds=dP()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $P{constructor(e,t,r,i,o){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new lr(Kt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.pr=iV(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new jP),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const o=e.getItem(iV(e.persistenceKey,i));if(o){const l=FA.ar(i,o);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(BP(this.persistenceKey,e));if(r){const i=JI.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(BP(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Ur("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(o){let l=v.ct;if(null!=o)try{const h=JSON.parse(o);Et("number"==typeof h),l=h}catch(h){Ur("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==v.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Qr(o)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new kA(this.currentUser,e,t,r),o=sV(this.persistenceKey,this.currentUser,e);this.setItem(o,i.hr())}Cr(e){const t=sV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=BP(this.persistenceKey,e),o=new JI(e,t,r);this.setItem(i,o.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return FA.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return kA.ar(new ji(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return JI.ar(i,t)}br(e){return HP.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),o=this.Sr(r),l=[],h=[];return o.forEach(m=>{i.has(m)||l.push(m)}),i.forEach(m=>{o.has(m)||h.push(m)}),this.syncEngine.Wr(l,h).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=dP();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class oV{constructor(){this.Hr=new jP,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new jP,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class w3{Yr(e){}shutdown(){}}class aV{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let LA=null;function GP(){return null===LA?LA=268435456+Math.round(2147483648*Math.random()):LA++,"0x"+LA.toString(16)}const E3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class I3{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Zs="WebChannelConnection";class C3 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,o){const l=GP(),h=this.To(e,t);Ve("RestConnection",`Sending RPC '${e}' ${l}:`,h,r);const m={};return this.Eo(m,i,o),this.Ao(e,h,m,r).then(y=>(Ve("RestConnection",`Received RPC '${e}' ${l}: `,y),y),y=>{throw vo("RestConnection",`RPC '${e}' ${l} failed with error: `,y,"url: ",h,"request:",r),y})}vo(e,t,r,i,o,l){return this.Io(e,t,r,i,o)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+wm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}To(e,t){return`${this.mo}/v1/${t}:${E3[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const o=GP();return new Promise((l,h)=>{const m=new II;m.setWithCredentials(!0),m.listenOnce(Qd.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Hv.NO_ERROR:const b=m.getResponseJson();Ve(Zs,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(b)),l(b);break;case Hv.TIMEOUT:Ve(Zs,`RPC '${e}' ${o} timed out`),h(new Ae(ce.DEADLINE_EXCEEDED,"Request time out"));break;case Hv.HTTP_ERROR:const S=m.getStatus();if(Ve(Zs,`RPC '${e}' ${o} failed with status:`,S,"response text:",m.getResponseText()),S>0){let R=m.getResponseJson();Array.isArray(R)&&(R=R[0]);const k=R?.error;if(k&&k.status&&k.message){const B=function(K){const se=K.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(se)>=0?se:ce.UNKNOWN}(k.status);h(new Ae(B,k.message))}else h(new Ae(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Ae(ce.UNAVAILABLE,"Connection failed."));break;default:ct()}}finally{Ve(Zs,`RPC '${e}' ${o} completed.`)}});const y=JSON.stringify(i);Ve(Zs,`RPC '${e}' ${o} sending request:`,i),m.send(t,"POST",y,r,15)})}Ro(e,t,r){const i=GP(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Bx(),h=Hx(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;void 0!==y&&(m.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(m.xmlHttpFactory=new EI({})),this.Eo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const b=o.join("");Ve(Zs,`Creating RPC '${e}' stream ${i}: ${b}`,m);const S=l.createWebChannel(b,m);let R=!1,k=!1;const B=new I3({ro:se=>{k?Ve(Zs,`Not sending because RPC '${e}' stream ${i} is closed:`,se):(R||(Ve(Zs,`Opening RPC '${e}' stream ${i} transport.`),S.open(),R=!0),Ve(Zs,`RPC '${e}' stream ${i} sending:`,se),S.send(se))},oo:()=>S.close()}),K=(se,ke,We)=>{se.listen(ke,Be=>{try{We(Be)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return K(S,$v.EventType.OPEN,()=>{k||Ve(Zs,`RPC '${e}' stream ${i} transport opened.`)}),K(S,$v.EventType.CLOSE,()=>{k||(k=!0,Ve(Zs,`RPC '${e}' stream ${i} transport closed`),B.wo())}),K(S,$v.EventType.ERROR,se=>{k||(k=!0,vo(Zs,`RPC '${e}' stream ${i} transport errored:`,se),B.wo(new Ae(ce.UNAVAILABLE,"The operation could not be completed")))}),K(S,$v.EventType.MESSAGE,se=>{var ke;if(!k){const We=se.data[0];Et(!!We);const Ye=We.error||(null===(ke=We[0])||void 0===ke?void 0:ke.error);if(Ye){Ve(Zs,`RPC '${e}' stream ${i} received error:`,Ye);const At=Ye.status;let Ft=function(Hr){const Ys=Ci[Hr];if(void 0!==Ys)return t2(Ys)}(At),_n=Ye.message;void 0===Ft&&(Ft=ce.INTERNAL,_n="Unknown error status: "+At+" with message "+Ye.message),k=!0,B.wo(new Ae(Ft,_n)),S.close()}else Ve(Zs,`RPC '${e}' stream ${i} received:`,We),B._o(We)}}),K(h,eA.STAT_EVENT,se=>{se.stat===jv.PROXY?Ve(Zs,`RPC '${e}' stream ${i} detected buffering proxy`):se.stat===jv.NOPROXY&&Ve(Zs,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{B.fo()},0),B}}function uV(){return typeof window<"u"?window:null}function VA(){return typeof document<"u"?document:null}function XI(n){return new P$(n,!0)}class zP{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=o,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class lV{constructor(e,t,r,i,o,l,h,m){this.ii=e,this.$o=r,this.Oo=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new zP(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ge.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ge.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Ur(t.toString()),Ur("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Ae(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,ge.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class b3 extends lV{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function F$(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ct(),i=e.targetChange.targetIds||[],o=function(m,y){return m.useProto3Json?(Et(void 0===y||"string"==typeof y),$i.fromBase64String(y||"")):(Et(void 0===y||y instanceof Uint8Array),$i.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const y=void 0===m.code?ce.UNKNOWN:t2(m.code);return new Ae(y,m.message||"")}(l);t=new o2(r,i,o,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Nc(n,r.document.name),o=hi(r.document.updateTime),l=r.document.createTime?hi(r.document.createTime):It.min(),h=new Ss({mapValue:{fields:r.document.fields}}),m=yr.newFoundDocument(i,o,l,h);t=new IA(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=Nc(n,r.document),o=r.readTime?hi(r.readTime):It.min(),l=yr.newNoDocument(i,o);t=new IA([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Nc(n,r.document);t=new IA([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ct();{const r=e.filter,{count:i=0,unchangedNames:o}=r,l=new S$(i,o);t=new s2(r.targetId,l)}}var m;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return It.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?It.min():o.readTime?hi(o.readTime):It.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=$I(this.serializer),t.addTarget=function(i,o){let l;const h=o.target;if(l=pA(h)?{documents:m2(i,h)}:{query:IP(i,h)},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=c2(i,o.resumeToken);const m=yP(i,o.expectedCount);null!==m&&(l.expectedCount=m)}else if(o.snapshotVersion.compareTo(It.min())>0){l.readTime=iw(i,o.snapshotVersion.toTimestamp());const m=yP(i,o.expectedCount);null!==m&&(l.expectedCount=m)}return l}(this.serializer,e);const r=function V$(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ct()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=$I(this.serializer),t.removeTarget=e,this.Wo(t)}}class T3 extends lV{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function L$(n,e){return n&&n.length>0?(Et(void 0!==e),n.map(t=>function(r,i){let o=hi(r.updateTime?r.updateTime:i);return o.isEqual(It.min())&&(o=hi(i)),new C$(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=hi(e.commitTime);return this.listener.cu(r,t)}return Et(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=$I(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>GI(this.serializer,r))};this.Wo(t)}}class D3 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Ae(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Io(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ae(ce.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.vo(e,t,r,o,l,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(ce.UNKNOWN,o.toString())})}terminate(){this.lu=!0}}class A3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Ur(t),this.mu=!1):Ve("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class N3{constructor(e,t,r,i,o){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=o,this.Pu.Yr(h=>{r.enqueueAndForget((0,ge.Z)(function*(){var m;np(l)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,ge.Z)(function*(y){const b=rt(y);b.vu.add(4),yield cw(b),b.bu.set("Unknown"),b.vu.delete(4),yield eC(b)}),function(y){return m.apply(this,arguments)})(l))}))}),this.bu=new A3(r,i)}}function eC(n){return WP.apply(this,arguments)}function WP(){return WP=(0,ge.Z)(function*(n){if(np(n))for(const e of n.Ru)yield e(!0)}),WP.apply(this,arguments)}function cw(n){return ZP.apply(this,arguments)}function ZP(){return ZP=(0,ge.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),ZP.apply(this,arguments)}function UA(n,e){const t=rt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),QP(t)?YP(t):hw(t).Ko()&&KP(t,e))}function tC(n,e){const t=rt(n),r=hw(t);t.Au.delete(e),r.Ko()&&cV(t,e),0===t.Au.size&&(r.Ko()?r.jo():np(t)&&t.bu.set("Unknown"))}function KP(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(It.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hw(n).su(e)}function cV(n,e){n.Vu.qt(e),hw(n).iu(e)}function YP(n){n.Vu=new N$({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),hw(n).start(),n.bu.gu()}function QP(n){return np(n)&&!hw(n).Uo()&&n.Au.size>0}function np(n){return 0===rt(n).vu.size}function dV(n){n.Vu=void 0}function M3(n){return JP.apply(this,arguments)}function JP(){return JP=(0,ge.Z)(function*(n){n.Au.forEach((e,t)=>{KP(n,e)})}),JP.apply(this,arguments)}function R3(n,e){return XP.apply(this,arguments)}function XP(){return XP=(0,ge.Z)(function*(n,e){dV(n),QP(n)?(n.bu.Iu(e),YP(n)):n.bu.set("Unknown")}),XP.apply(this,arguments)}function x3(n,e,t){return eO.apply(this,arguments)}function eO(){return eO=(0,ge.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof o2&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(i,o){const l=o.cause;for(const h of o.targetIds)i.Au.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.Au.delete(h),i.Vu.removeTarget(h))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield BA(n,r)}else if(e instanceof IA?n.Vu.Ht(e):e instanceof s2?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(It.min()))try{const r=yield X2(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const l=i.Vu.ce(o);return l.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const y=i.Au.get(m);y&&i.Au.set(m,y.withResumeToken(h.resumeToken,o))}}),l.targetMismatches.forEach((h,m)=>{const y=i.Au.get(h);if(!y)return;i.Au.set(h,y.withResumeToken($i.EMPTY_BYTE_STRING,y.snapshotVersion)),cV(i,h);const b=new ih(y.target,h,m,y.sequenceNumber);KP(i,b)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield BA(n,r)}var r}),eO.apply(this,arguments)}function BA(n,e,t){return tO.apply(this,arguments)}function tO(){return tO=(0,ge.Z)(function*(n,e,t){if(!Xd(e))throw e;n.vu.add(1),yield cw(n),n.bu.set("Offline"),t||(t=()=>X2(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield eC(n)}))}),tO.apply(this,arguments)}function hV(n,e){return e().catch(t=>BA(n,t,e))}function dw(n){return nO.apply(this,arguments)}function nO(){return nO=(0,ge.Z)(function*(n){const e=rt(n),t=rp(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;P3(e);)try{const i=yield _3(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,O3(e,i)}catch(i){yield BA(e,i)}fV(e)&&pV(e)}),nO.apply(this,arguments)}function P3(n){return np(n)&&n.Eu.length<10}function O3(n,e){n.Eu.push(e);const t=rp(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function fV(n){return np(n)&&!rp(n).Uo()&&n.Eu.length>0}function pV(n){rp(n).start()}function k3(n){return rO.apply(this,arguments)}function rO(){return rO=(0,ge.Z)(function*(n){rp(n).hu()}),rO.apply(this,arguments)}function F3(n){return iO.apply(this,arguments)}function iO(){return iO=(0,ge.Z)(function*(n){const e=rp(n);for(const t of n.Eu)e.uu(t.mutations)}),iO.apply(this,arguments)}function L3(n,e,t){return sO.apply(this,arguments)}function sO(){return sO=(0,ge.Z)(function*(n,e,t){const r=n.Eu.shift(),i=pP.from(r,e,t);yield hV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield dw(n)}),sO.apply(this,arguments)}function V3(n,e){return oO.apply(this,arguments)}function oO(){return oO=(0,ge.Z)(function*(n,e){var t;e&&rp(n).ou&&(yield(t=(0,ge.Z)(function*(r,i){if(e2(o=i.code)&&o!==ce.ABORTED){const l=r.Eu.shift();rp(r).Qo(),yield hV(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield dw(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),fV(n)&&pV(n)}),oO.apply(this,arguments)}function gV(n,e){return aO.apply(this,arguments)}function aO(){return aO=(0,ge.Z)(function*(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=np(t);t.vu.add(3),yield cw(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield eC(t)}),aO.apply(this,arguments)}function uO(n,e){return lO.apply(this,arguments)}function lO(){return lO=(0,ge.Z)(function*(n,e){const t=rt(n);e?(t.vu.delete(2),yield eC(t)):e||(t.vu.add(2),yield cw(t),t.bu.set("Unknown"))}),lO.apply(this,arguments)}function hw(n){return n.Su||(n.Su=function(e,t,r){const i=rt(e);return i.fu(),new b3(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:M3.bind(null,n),ao:R3.bind(null,n),nu:x3.bind(null,n)}),n.Ru.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Su.Qo(),QP(n)?YP(n):n.bu.set("Unknown")):(yield n.Su.stop(),dV(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function rp(n){return n.Du||(n.Du=function(e,t,r){const i=rt(e);return i.fu(),new T3(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:k3.bind(null,n),ao:V3.bind(null,n),au:F3.bind(null,n),cu:L3.bind(null,n)}),n.Ru.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Du.Qo(),yield dw(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class cO{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,h=new cO(e,t,l,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fw(n,e){if(Ur("AsyncQueue",`${e}: ${n}`),Xd(n))return new Ae(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class pw{constructor(e){this.comparator=e?(t,r)=>e(t,r)||tt.comparator(t.key,r.key):(t,r)=>tt.comparator(t.key,r.key),this.keyedMap=kI(),this.sortedSet=new lr(this.comparator)}static emptySet(e){return new pw(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof pw)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new pw;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class mV{constructor(){this.Cu=new lr(tt.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ct():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class gw{constructor(e,t,r,i,o,l,h,m,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new gw(e,t,pw.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&PI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class U3{constructor(){this.Nu=void 0,this.listeners=[]}}class B3{constructor(){this.queries=new nh(e=>kL(e),PI),this.onlineState="Unknown",this.ku=new Set}}function dO(n,e){return hO.apply(this,arguments)}function hO(){return hO=(0,ge.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new U3),i)try{o.Nu=yield t.onListen(r)}catch(l){const h=fw(l,`Initialization of query '${cP(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,o),o.listeners.push(e),e.Mu(t.onlineState),o.Nu&&e.$u(o.Nu)&&gO(t)}),hO.apply(this,arguments)}function fO(n,e){return pO.apply(this,arguments)}function pO(){return pO=(0,ge.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const l=o.listeners.indexOf(e);l>=0&&(o.listeners.splice(l,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),pO.apply(this,arguments)}function H3(n,e){const t=rt(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.$u(i)&&(r=!0);l.Nu=i}}r&&gO(t)}function j3(n,e,t){const r=rt(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function gO(n){n.ku.forEach(e=>{e.next()})}class mO{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new gw(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=gw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class $3{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class _V{constructor(e){this.serializer=e}rr(e){return Nc(this.serializer,e)}ur(e){return e.metadata.exists?g2(this.serializer,e.document,!1):yr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return hi(e)}}class G3{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=yV(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=dn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new _V(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.rr(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||nn()).add(o);t.set(l,h)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function y3(n,e,t,r){return VP.apply(this,arguments)}(e.localStore,new _V(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield v3(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function yV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class vV{constructor(e){this.key=e}}class wV{constructor(e){this.key=e}}class EV{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=nn(),this.mutatedKeys=nn(),this.tc=LL(e),this.ec=new pw(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new mV,i=t?t.ec:this.ec;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,S)=>{const R=i.get(b),k=OI(this.query,S)?S:null,B=!!R&&this.mutatedKeys.has(R.key),K=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let se=!1;R&&k?R.data.isEqual(k.data)?B!==K&&(r.track({type:3,doc:k}),se=!0):this.rc(R,k)||(r.track({type:2,doc:k}),se=!0,(m&&this.tc(k,m)>0||y&&this.tc(k,y)<0)&&(h=!0)):!R&&k?(r.track({type:0,doc:k}),se=!0):R&&!k&&(r.track({type:1,doc:R}),se=!0,(m||y)&&(h=!0)),se&&(k?(l=l.add(k),o=K?o.add(b):o.delete(b)):(l=l.delete(b),o=o.delete(b)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const b="F"===this.query.limitType?l.last():l.first();l=l.delete(b.key),o=o.delete(b.key),r.track({type:1,doc:b})}return{ec:l,ic:r,zi:h,mutatedKeys:o}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const o=e.ic.xu();o.sort((y,b)=>function(S,R){const k=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct()}};return k(S)-k(R)}(y.type,b.type)||this.tc(y.doc,b.doc)),this.oc(r);const l=t?this.uc():[],h=0===this.Zu.size&&this.current?1:0,m=h!==this.Xu;return this.Xu=h,0!==o.length||m?{snapshot:new gw(this.query,e.ec,i,o,e.mutatedKeys,0===h,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new mV,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=nn(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new wV(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new vV(r))}),t}hc(e){this.Yu=e.ir,this.Zu=nn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return gw.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class z3{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class q3{constructor(e){this.key=e,this.fc=!1}}class W3{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new nh(h=>kL(h),PI),this._c=new Map,this.mc=new Set,this.gc=new lr(tt.comparator),this.yc=new Map,this.Ic=new MP,this.Tc={},this.Ec=new Map,this.Ac=Om.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function Z3(n,e){return _O.apply(this,arguments)}function _O(){return _O=(0,ge.Z)(function*(n,e){const t=BO(n);let r,i;const o=t.wc.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.lc();else{const l=yield uw(t.localStore,wo(e)),h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield yO(t,e,r,"current"===h,l.resumeToken),t.isPrimaryClient&&UA(t.remoteStore,l)}return i}),_O.apply(this,arguments)}function yO(n,e,t,r,i){return vO.apply(this,arguments)}function vO(){return vO=(0,ge.Z)(function*(n,e,t,r,i){n.Rc=(S,R,k)=>{return(B=(0,ge.Z)(function*(K,se,ke,We){let Be=se.view.sc(ke);Be.zi&&(Be=yield OA(K.localStore,se.query,!1).then(({documents:Ft})=>se.view.sc(Ft,Be)));const Ye=We&&We.targetChanges.get(se.targetId),At=se.view.applyChanges(Be,K.isPrimaryClient,Ye);return NO(K,se.targetId,At.cc),At.snapshot}),function(K,se,ke,We){return B.apply(this,arguments)})(n,S,R,k);var B};const o=yield OA(n.localStore,e,!0),l=new EV(e,o.ir),h=l.sc(o.documents),m=HI.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=l.applyChanges(h,n.isPrimaryClient,m);NO(n,t,y.cc);const b=new z3(e,t,l);return n.wc.set(e,b),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),y.snapshot}),vO.apply(this,arguments)}function K3(n,e){return wO.apply(this,arguments)}function wO(){return wO=(0,ge.Z)(function*(n,e){const t=rt(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(o=>!PI(o,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield lw(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),tC(t.remoteStore,r.targetId),mw(t,r.targetId)}).catch(Dc))):(mw(t,r.targetId),yield lw(t.localStore,r.targetId,!0))}),wO.apply(this,arguments)}function EO(){return EO=(0,ge.Z)(function*(n,e,t){const r=HO(n);try{const i=yield function(o,l){const h=rt(o),m=tr.now(),y=l.reduce((R,k)=>R.add(k.key),nn());let b,S;return h.persistence.runTransaction("Locally write mutations","readwrite",R=>{let k=Ko(),B=nn();return h.Zi.getEntries(R,y).next(K=>{k=K,k.forEach((se,ke)=>{ke.isValidDocument()||(B=B.add(se))})}).next(()=>h.localDocuments.getOverlayedDocuments(R,k)).next(K=>{b=K;const se=[];for(const ke of l){const We=T$(ke,b.get(ke.key).overlayedDocument);null!=We&&se.push(new rh(ke.key,We,EL(We.value.mapValue),Ar.exists(!0)))}return h.mutationQueue.addMutationBatch(R,m,se,l)}).next(K=>{S=K;const se=K.applyToLocalDocumentSet(b,B);return h.documentOverlayCache.saveOverlays(R,K.batchId,se)})}).then(()=>({batchId:S.batchId,changes:UL(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,h){let m=o.Tc[o.currentUser.toKey()];m||(m=new lr(Kt)),m=m.insert(l,h),o.Tc[o.currentUser.toKey()]=m}(r,i.batchId,t),yield sh(r,i.changes),yield dw(r.remoteStore)}catch(i){const o=fw(i,"Failed to persist write");t.reject(o)}}),EO.apply(this,arguments)}function IV(n,e){return IO.apply(this,arguments)}function IO(){return IO=(0,ge.Z)(function*(n,e){const t=rt(n);try{const r=yield function m3(n,e){const t=rt(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const h=[];e.targetChanges.forEach((b,S)=>{const R=i.get(S);if(!R)return;h.push(t.Bs.removeMatchingKeys(o,b.removedDocuments,S).next(()=>t.Bs.addMatchingKeys(o,b.addedDocuments,S)));let k=R.withSequenceNumber(o.currentSequenceNumber);var B,K,se;null!==e.targetMismatches.get(S)?k=k.withResumeToken($i.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):b.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(b.resumeToken,r)),i=i.insert(S,k),K=k,se=b,(0===(B=R).resumeToken.approximateByteSize()||K.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0)&&h.push(t.Bs.updateTargetData(o,k))});let m=Ko(),y=nn();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,b))}),h.push(eV(o,l,e.documentUpdates).next(b=>{m=b.nr,y=b.sr})),!r.isEqual(It.min())){const b=t.Bs.getLastRemoteSnapshotVersion(o).next(S=>t.Bs.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(b)}return le.waitFor(h).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,m,y)).next(()=>m)}).then(o=>(t.Ji=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const l=t.yc.get(o);l&&(Et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.fc=!0:i.modifiedDocuments.size>0?Et(l.fc):i.removedDocuments.size>0&&(Et(l.fc),l.fc=!1))}),yield sh(t,r,e)}catch(r){yield Dc(r)}}),IO.apply(this,arguments)}function CV(n,e,t){const r=rt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((o,l)=>{const h=l.view.Mu(e);h.snapshot&&i.push(h.snapshot)}),function(o,l){const h=rt(o);h.onlineState=l;let m=!1;h.queries.forEach((y,b)=>{for(const S of b.listeners)S.Mu(l)&&(m=!0)}),m&&gO(h)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Q3(n,e,t){return CO.apply(this,arguments)}function CO(){return CO=(0,ge.Z)(function*(n,e,t){const r=rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),o=i&&i.key;if(o){let l=new lr(tt.comparator);l=l.insert(o,yr.newNoDocument(o,It.min()));const h=nn().add(o),m=new BI(It.min(),new Map,new lr(Kt),l,h);yield IV(r,m),r.gc=r.gc.remove(o),r.yc.delete(e),MO(r)}else yield lw(r.localStore,e,!1).then(()=>mw(r,e,t)).catch(Dc)}),CO.apply(this,arguments)}function J3(n,e){return bO.apply(this,arguments)}function bO(){return bO=(0,ge.Z)(function*(n,e){const t=rt(n),r=e.batch.batchId;try{const i=yield function g3(n,e){const t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,h,m,y){const b=m.batch,S=b.keys();let R=le.resolve();return S.forEach(k=>{R=R.next(()=>y.getEntry(h,k)).next(B=>{const K=m.docVersions.get(k);Et(null!==K),B.version.compareTo(K)<0&&(b.applyToRemoteDocument(B,m),B.isValidDocument()&&(B.setReadTime(m.commitVersion),y.addEntry(B)))})}),R.next(()=>l.mutationQueue.removeMutationBatch(h,b))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=nn();for(let m=0;m<l.mutationResults.length;++m)l.mutationResults[m].transformResults.length>0&&(h=h.add(l.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);AO(t,r,null),SO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield sh(t,i)}catch(i){yield Dc(i)}}),bO.apply(this,arguments)}function X3(n,e,t){return TO.apply(this,arguments)}function TO(){return TO=(0,ge.Z)(function*(n,e,t){const r=rt(n);try{const i=yield function(o,l){const h=rt(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return h.mutationQueue.lookupMutationBatch(m,l).next(b=>(Et(null!==b),y=b.keys(),h.mutationQueue.removeMutationBatch(m,b))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,y,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>h.localDocuments.getDocuments(m,y))})}(r.localStore,e);AO(r,e,t),SO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield sh(r,i)}catch(i){yield Dc(i)}}),TO.apply(this,arguments)}function DO(){return DO=(0,ge.Z)(function*(n,e){const t=rt(n);np(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const l=rt(o);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=fw(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),DO.apply(this,arguments)}function SO(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function AO(n,e,t){const r=rt(n);let i=r.Tc[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function mw(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||bV(n,r)})}function bV(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(tC(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),MO(n))}function NO(n,e,t){for(const r of t)r instanceof vV?(n.Ic.addReference(r.key,e),tG(n,r)):r instanceof wV?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||bV(n,r.key)):ct()}function tG(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.mc.add(r),MO(n))}function MO(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new tt(dn.fromString(e)),r=n.Ac.next();n.yc.set(r,new q3(t)),n.gc=n.gc.insert(t,r),UA(n.remoteStore,new ih(wo(Xv(t.path)),r,"TargetPurposeLimboResolution",v.ct))}}function sh(n,e,t){return RO.apply(this,arguments)}function RO(){return RO=(0,ge.Z)(function*(n,e,t){const r=rt(n),i=[],o=[],l=[];var h;r.wc.isEmpty()||(r.wc.forEach((h,m)=>{l.push(r.Rc(m,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const b=kP.Li(m.targetId,y);o.push(b)}}))}),yield Promise.all(l),r.dc.nu(i),yield(h=(0,ge.Z)(function*(m,y){const b=rt(m);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>le.forEach(y,R=>le.forEach(R.Fi,k=>b.persistence.referenceDelegate.addReference(S,R.targetId,k)).next(()=>le.forEach(R.Bi,k=>b.persistence.referenceDelegate.removeReference(S,R.targetId,k)))))}catch(S){if(!Xd(S))throw S;Ve("LocalStore","Failed to update sequence numbers: "+S)}for(const S of y){const R=S.targetId;if(!S.fromCache){const k=b.Ji.get(R),K=k.withLastLimboFreeSnapshotVersion(k.snapshotVersion);b.Ji=b.Ji.insert(R,K)}}}),function(m,y){return h.apply(this,arguments)})(r.localStore,o))}),RO.apply(this,arguments)}function nG(n,e){return xO.apply(this,arguments)}function xO(){return xO=(0,ge.Z)(function*(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield J2(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(l=>{l.forEach(h=>{h.reject(new Ae(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield sh(t,r.er)}var i}),xO.apply(this,arguments)}function rG(n,e){const t=rt(n),r=t.yc.get(e);if(r&&r.fc)return nn().add(r.key);{let i=nn();const o=t._c.get(e);if(!o)return i;for(const l of o){const h=t.wc.get(l);i=i.unionWith(h.view.nc)}return i}}function iG(n,e){return PO.apply(this,arguments)}function PO(){return PO=(0,ge.Z)(function*(n,e){const t=rt(n),r=yield OA(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&NO(t,e.targetId,i.cc),i}),PO.apply(this,arguments)}function sG(n,e){return OO.apply(this,arguments)}function OO(){return OO=(0,ge.Z)(function*(n,e){const t=rt(n);return nV(t.localStore,e).then(r=>sh(t,r))}),OO.apply(this,arguments)}function oG(n,e,t,r){return kO.apply(this,arguments)}function kO(){return kO=(0,ge.Z)(function*(n,e,t,r){const i=rt(n),o=yield function(l,h){const m=rt(l),y=rt(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",b=>y.Sn(b,h).next(S=>S?m.localDocuments.getDocuments(b,S):le.resolve(null)))}(i.localStore,e);var h;null!==o?("pending"===t?yield dw(i.remoteStore):"acknowledged"===t||"rejected"===t?(AO(i,e,r||null),SO(i,e),h=e,rt(rt(i.localStore).mutationQueue).Cn(h)):ct(),yield sh(i,o)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),kO.apply(this,arguments)}function FO(){return FO=(0,ge.Z)(function*(n,e){const t=rt(n);if(BO(t),HO(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield TV(t,r.toArray());t.vc=!0,yield uO(t.remoteStore,!0);for(const o of i)UA(t.remoteStore,o)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((o,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(mw(t,l),lw(t.localStore,l,!0))),tC(t.remoteStore,l)}),yield i,yield TV(t,r),function(o){const l=rt(o);l.yc.forEach((h,m)=>{tC(l.remoteStore,m)}),l.Ic.Ts(),l.yc=new Map,l.gc=new lr(tt.comparator)}(t),t.vc=!1,yield uO(t.remoteStore,!1)}}),FO.apply(this,arguments)}function TV(n,e,t){return LO.apply(this,arguments)}function LO(){return LO=(0,ge.Z)(function*(n,e,t){const r=rt(n),i=[],o=[];for(const l of e){let h;const m=r._c.get(l);if(m&&0!==m.length){h=yield uw(r.localStore,wo(m[0]));for(const y of m){const b=r.wc.get(y),S=yield iG(r,b);S.snapshot&&o.push(S.snapshot)}}else{const y=yield tV(r.localStore,l);h=yield uw(r.localStore,y),yield yO(r,DV(y),l,!1,h.resumeToken)}i.push(h)}return r.dc.nu(o),i}),LO.apply(this,arguments)}function DV(n){return PL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function uG(n){const e=rt(n);return rt(rt(e.localStore).persistence).$i()}function lG(n,e,t,r){return VO.apply(this,arguments)}function VO(){return VO=(0,ge.Z)(function*(n,e,t,r){const i=rt(n);if(i.vc)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const o=i._c.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const l=yield nV(i.localStore,FL(o[0])),h=BI.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,$i.EMPTY_BYTE_STRING);yield sh(i,l,h);break}case"rejected":yield lw(i.localStore,e,!0),mw(i,e,r);break;default:ct()}}),VO.apply(this,arguments)}function cG(n,e,t){return UO.apply(this,arguments)}function UO(){return UO=(0,ge.Z)(function*(n,e,t){const r=BO(n);if(r.vc){for(const i of e){if(r._c.has(i)){Ve("SyncEngine","Adding an already active target "+i);continue}const o=yield tV(r.localStore,i),l=yield uw(r.localStore,o);yield yO(r,DV(o),l.targetId,!1,l.resumeToken),UA(r.remoteStore,l)}for(const i of t)r._c.has(i)&&(yield lw(r.localStore,i,!1).then(()=>{tC(r.remoteStore,i),mw(r,i)}).catch(Dc))}}),UO.apply(this,arguments)}function BO(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=IV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Q3.bind(null,e),e.dc.nu=H3.bind(null,e.eventManager),e.dc.Pc=j3.bind(null,e.eventManager),e}function HO(n){const e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=J3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=X3.bind(null,e),e}class nC{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.serializer=XI(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Q2(this.persistence,new Y2,e.initialUser,this.serializer)}createPersistence(e){return new RP(RA.zs,this.serializer)}createSharedClientState(e){return new oV}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class jO extends nC{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield HO(r.Vc.syncEngine),yield dw(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Q2(this.persistence,new Y2,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new H2(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new g(t,this.persistence);return new f(e.asyncQueue,r)}createPersistence(e){const t=OP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ws.withCacheSize(this.cacheSizeBytes):Ws.DEFAULT;return new PP(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,uV(),VA(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new oV}}class SV extends jO{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof $P&&(r.sharedClientState.syncEngine={jr:oG.bind(null,i),zr:lG.bind(null,i),Wr:cG.bind(null,i),$i:uG.bind(null,i),Qr:sG.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var o=(0,ge.Z)(function*(l){yield function aG(n,e){return FO.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const t=uV();if(!$P.D(t))throw new Ae(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=OP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $P(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class _w{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>CV(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=nG.bind(null,r.syncEngine),yield uO(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new B3}createDatastore(e){const t=XI(e.databaseInfo.databaseId),r=new C3(e.databaseInfo);return new D3(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=h=>CV(this.syncEngine,h,0),l=aV.D()?new aV:new w3,new N3(t,r,i,o,l);var t,r,i,o,l}createSyncEngine(e,t){return function(r,i,o,l,h,m,y){const b=new W3(r,i,o,l,h,m);return y&&(b.vc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=rt(t);Ve("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield cw(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function AV(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class HA{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ur("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class fG{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new ri,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const o=yield e.$c(i);return new $3(JSON.parse(o),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ge.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class pG{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ge.Z)(function*(o,l){const h=rt(o),m=$I(h.serializer)+"/documents",y={documents:l.map(k=>jI(h.serializer,k))},b=yield h.vo("BatchGetDocuments",m,y,l.length),S=new Map;b.forEach(k=>{const B=function k$(n,e){return"found"in e?function(t,r){Et(!!r.found);const i=Nc(t,r.found.name),o=hi(r.found.updateTime),l=r.found.createTime?hi(r.found.createTime):It.min(),h=new Ss({mapValue:{fields:r.found.fields}});return yr.newFoundDocument(i,o,l,h)}(n,e):"missing"in e?function(t,r){Et(!!r.missing),Et(!!r.readTime);const i=Nc(t,r.missing),o=hi(r.readTime);return yr.newNoDocument(i,o)}(n,e):ct()}(h.serializer,k);S.set(B.key.toString(),B)});const R=[];return l.forEach(k=>{const B=S.get(k.toString());Et(!!B),R.push(B)}),R}),function(o,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new rw(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=tt.fromPath(i);e.mutations.push(new hP(o,e.precondition(o)))}),yield(r=(0,ge.Z)(function*(i,o){const l=rt(i),h=$I(l.serializer)+"/documents",m={writes:o.map(y=>GI(l.serializer,y))};yield l.Io("Commit",h,m)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ct();t=It.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(It.min())?Ar.exists(!1):Ar.updateTime(t):Ar.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new Ae(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ar.updateTime(t)}return Ar.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class gG{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Bc=r.maxAttempts,this.qo=new zP(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ge.Z)(function*(){const t=new pG(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.Uc(o)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!I(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!e2(t)}return!1}}class mG{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ji.UNAUTHENTICATED,this.clientId=TI.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ge.Z)(function*(h){Ve("FirestoreClient","Received user=",h.uid),yield o.authCredentialListener(h),o.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ve("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=fw(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function jA(n,e){return $O.apply(this,arguments)}function $O(){return $O=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ge.Z)(function*(o){r.isEqual(o)||(yield J2(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),$O.apply(this,arguments)}function GO(n,e){return zO.apply(this,arguments)}function zO(){return zO=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield qO(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>gV(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>gV(e.remoteStore,o)),n._onlineComponents=e}),zO.apply(this,arguments)}function NV(n){return"FirebaseError"===n.name?n.code===ce.FAILED_PRECONDITION||n.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function qO(n){return WO.apply(this,arguments)}function WO(){return WO=(0,ge.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ve("FirestoreClient","Using user provided OfflineComponentProvider");try{yield jA(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!NV(t))throw t;vo("Error using user provided cache. Falling back to memory cache: "+t),yield jA(n,new nC)}}else Ve("FirestoreClient","Using default OfflineComponentProvider"),yield jA(n,new nC);return n._offlineComponents}),WO.apply(this,arguments)}function $A(n){return ZO.apply(this,arguments)}function ZO(){return ZO=(0,ge.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ve("FirestoreClient","Using user provided OnlineComponentProvider"),yield GO(n,n._uninitializedComponentsProvider._online)):(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield GO(n,new _w))),n._onlineComponents}),ZO.apply(this,arguments)}function MV(n){return qO(n).then(e=>e.persistence)}function GA(n){return qO(n).then(e=>e.localStore)}function RV(n){return $A(n).then(e=>e.remoteStore)}function KO(n){return $A(n).then(e=>e.syncEngine)}function yw(n){return YO.apply(this,arguments)}function YO(){return YO=(0,ge.Z)(function*(n){const e=yield $A(n),t=e.eventManager;return t.onListen=Z3.bind(null,e.syncEngine),t.onUnlisten=K3.bind(null,e.syncEngine),t}),YO.apply(this,arguments)}function PV(n,e,t={}){const r=new ri;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(i,o,l,h,m){const y=new HA({next:S=>{o.enqueueAndForget(()=>fO(i,b));const R=S.docs.has(l);!R&&S.fromCache?m.reject(new Ae(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&S.fromCache&&h&&"server"===h.source?m.reject(new Ae(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),b=new mO(Xv(l.path),y,{includeMetadataChanges:!0,Ku:!0});return dO(i,b)}(yield yw(n),n.asyncQueue,e,t,r)})),r.promise}function OV(n,e,t={}){const r=new ri;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(i,o,l,h,m){const y=new HA({next:S=>{o.enqueueAndForget(()=>fO(i,b)),S.fromCache&&"server"===h.source?m.reject(new Ae(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),b=new mO(l,y,{includeMetadataChanges:!0,Ku:!0});return dO(i,b)}(yield yw(n),n.asyncQueue,e,t,r)})),r.promise}function kV(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const FV=new Map;function QO(n,e,t){if(!t)throw new Ae(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function LV(n,e,t,r){if(!0===e&&!0===r)throw new Ae(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function VV(n){if(!tt.isDocumentKey(n))throw new Ae(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function UV(n){if(tt.isDocumentKey(n))throw new Ae(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function zA(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ct()}function mn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zA(n);throw new Ae(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function BV(n,e){if(e<=0)throw new Ae(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class HV{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=kV(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Ae(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ae(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ae(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rC{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new HV({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ae(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new HV(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new zx;switch(t.type){case"firstParty":return new Wx(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ae(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=FV.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),FV.delete(e),t.terminate())}(this),Promise.resolve()}}class vr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vr(this.firestore,e,this._key)}}class As{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new As(this.firestore,e,this._query)}}class Mc extends As{constructor(e,t,r){super(e,t,Xv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vr(this.firestore,null,new tt(e))}withConverter(e){return new Mc(this.firestore,e,this._path)}}function $V(n,e,...t){if(n=(0,O.m9)(n),QO("collection","path",e),n instanceof rC){const r=dn.fromString(e,...t);return UV(r),new Mc(n,null,r)}{if(!(n instanceof vr||n instanceof Mc))throw new Ae(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return UV(r),new Mc(n.firestore,null,r)}}function qA(n,e,...t){if(n=(0,O.m9)(n),1===arguments.length&&(e=TI.A()),QO("doc","path",e),n instanceof rC){const r=dn.fromString(e,...t);return VV(r),new vr(n,null,new tt(r))}{if(!(n instanceof vr||n instanceof Mc))throw new Ae(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return VV(r),new vr(n.firestore,n instanceof Mc?n.converter:null,new tt(r))}}function GV(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),(n instanceof vr||n instanceof Mc)&&(e instanceof vr||e instanceof Mc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function JO(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),n instanceof As&&e instanceof As&&n.firestore===e.firestore&&PI(n._query,e._query)&&n.converter===e.converter}class DG{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new zP(this,"async_queue_retry"),this.Xc=()=>{const t=VA();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=VA();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=VA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ri;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ge.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Xd(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Ur("INTERNAL UNHANDLED ERROR: ",function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=cO.createAndSchedule(this,e,t,r,o=>this.na(o));return this.zc.push(i),i}Zc(){this.Wc&&ct()}verifyOperationInProgress(){}sa(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function XO(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class SG{constructor(){this._progressObserver={},this._taskCompletionResolver=new ri,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class wr extends rC{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new DG,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||zV(this),this._firestoreClient.terminate()}}function fi(n){return n._firestoreClient||zV(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function zV(n){var e,t,r;const i=n._freezeSettings(),o=(h=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new i$(n._databaseId,h,n._persistenceKey,(y=i).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,kV(y.experimentalLongPollingOptions),y.useFetchStreams));var h,y;n._firestoreClient=new mG(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function qV(n,e,t){const r=new ri;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield jA(n,t),yield GO(n,e),r.resolve()}catch(i){const o=i;if(!NV(o))throw o;vo("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function WV(n){if(n._initialized||n._terminated)throw new Ae(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Rc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rc($i.fromBase64String(e))}catch(t){throw new Ae(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rc($i.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class oh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fm{constructor(e){this._methodName=e}}class WA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}}const VG=/^__.*__$/;class UG{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new rh(e,this.data,this.fieldMask,t,this.fieldTransforms):new nw(e,this.data,t,this.fieldTransforms)}}class ZV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new rh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function KV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct()}}class ZA{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.ua(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new ZA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return QA(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(KV(this.ca)&&VG.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class BG{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||XI(e)}ya(e,t,r,i=!1){return new ZA({ca:e,methodName:t,ga:r,path:Sr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lm(n){const e=n._freezeSettings(),t=XI(n._databaseId);return new BG(n._databaseId,!!e.ignoreUndefinedProperties,t)}function KA(n,e,t,r,i,o={}){const l=n.ya(o.merge||o.mergeFields?2:0,e,t,i);rk("Data must be an object, but it was:",l,r);const h=JV(r,l);let m,y;if(o.merge)m=new Zo(l.fieldMask),y=l.fieldTransforms;else if(o.mergeFields){const b=[];for(const S of o.mergeFields){const R=oC(e,S,t);if(!l.contains(R))throw new Ae(ce.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);eU(b,R)||b.push(R)}m=new Zo(b),y=l.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,y=l.fieldTransforms;return new UG(new Ss(h),m,y)}class sC extends Fm{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sC}}function YV(n,e,t){return new ZA({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ek extends Fm{_toFieldTransform(e){return new LI(e.path,new ew)}isEqual(e){return e instanceof ek}}class HG extends Fm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=YV(this,e,!0),r=this.pa.map(o=>Vm(o,t)),i=new Sm(r);return new LI(e.path,i)}isEqual(e){return this===e}}class jG extends Fm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=YV(this,e,!0),r=this.pa.map(o=>Vm(o,t)),i=new Am(r);return new LI(e.path,i)}isEqual(e){return this===e}}class $G extends Fm{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new tw(e.serializer,$L(e.serializer,this.Ia));return new LI(e.path,t)}isEqual(e){return this===e}}function tk(n,e,t,r){const i=n.ya(1,e,t);rk("Data must be an object, but it was:",i,r);const o=[],l=Ss.empty();zf(r,(m,y)=>{const b=YA(e,m,t);y=(0,O.m9)(y);const S=i.da(b);if(y instanceof sC)o.push(b);else{const R=Vm(y,S);null!=R&&(o.push(b),l.set(b,R))}});const h=new Zo(o);return new ZV(l,h,i.fieldTransforms)}function nk(n,e,t,r,i,o){const l=n.ya(1,e,t),h=[oC(e,r,t)],m=[i];if(o.length%2!=0)throw new Ae(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<o.length;R+=2)h.push(oC(e,o[R])),m.push(o[R+1]);const y=[],b=Ss.empty();for(let R=h.length-1;R>=0;--R)if(!eU(y,h[R])){const k=h[R];let B=m[R];B=(0,O.m9)(B);const K=l.da(k);if(B instanceof sC)y.push(k);else{const se=Vm(B,K);null!=se&&(y.push(k),b.set(k,se))}}const S=new Zo(y);return new ZV(b,S,l.fieldTransforms)}function QV(n,e,t,r=!1){return Vm(t,n.ya(r?4:3,e))}function Vm(n,e){if(XV(n=(0,O.m9)(n)))return rk("Unsupported field value:",e,n),JV(n,e);if(n instanceof Fm)return function(t,r){if(!KV(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const l of t){let h=Vm(l,r.wa(o));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,O.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return $L(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=tr.fromDate(t);return{timestampValue:iw(r.serializer,i)}}if(t instanceof tr){const i=new tr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:iw(r.serializer,i)}}if(t instanceof WA)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Rc)return{bytesValue:c2(r.serializer,t._byteString)};if(t instanceof vr){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r._a(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:vP(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${zA(t)}`)}(n,e)}function JV(n,e){const t={};return hL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zf(n,(r,i)=>{const o=Vm(i,e.ha(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function XV(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof tr||n instanceof WA||n instanceof Rc||n instanceof vr||n instanceof Fm)}function rk(n,e,t){if(!XV(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=zA(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function oC(n,e,t){if((e=(0,O.m9)(e))instanceof oh)return e._internalPath;if("string"==typeof e)return YA(n,e);throw QA("Field path arguments must be of type string or ",n,!1,void 0,t)}const GG=new RegExp("[~\\*/\\[\\]]");function YA(n,e,t){if(e.search(GG)>=0)throw QA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new oh(...e.split("."))._internalPath}catch{throw QA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function QA(n,e,t,r,i){const o=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(o||l)&&(m+=" (found",o&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new Ae(ce.INVALID_ARGUMENT,h+n+m)}function eU(n,e){return n.some(t=>t.isEqual(e))}class aC{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new vr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new zG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(JA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class zG extends aC{data(){return super.data()}}function JA(n,e){return"string"==typeof e?YA(n,e):e instanceof oh?e._internalPath:e._delegate._internalPath}function tU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ae(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ik{}class uC extends ik{}function ip(n,e,...t){let r=[];e instanceof ik&&r.push(e),r=r.concat(t),function(i){const o=i.filter(h=>h instanceof vw).length,l=i.filter(h=>h instanceof lC).length;if(o>1||o>0&&l>0)throw new Ae(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class lC extends uC{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new lC(e,t,r)}_apply(e){const t=this._parse(e);return sU(e._query,t),new As(e.firestore,e.converter,lP(e._query,t))}_parse(e){const t=Lm(e.firestore);return function(i,o,l,h,m,y,b){let S;if(m.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Ae(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){iU(b,y);const R=[];for(const k of b)R.push(rU(h,i,k));S={arrayValue:{values:R}}}else S=rU(h,i,b)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||iU(b,y),S=QV(l,"where",b,"in"===y||"not-in"===y);return gn.create(m,y,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class vw extends ik{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vw(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:jn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let o=r;const l=i.getFlattenedFilters();for(const h of l)sU(o,h),o=lP(o,h)}(e._query,t),new As(e.firestore,e.converter,lP(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class sk extends uC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new sk(e,t)}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new Ae(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ae(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Qv(i,o);return function(h,m){if(null===aP(h)){const y=mA(h);null!==y&&oU(0,y,m.field)}}(r,l),l}(e._query,this._field,this._direction);return new As(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new th(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class XA extends uC{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new XA(e,t,r)}_apply(e){return new As(e.firestore,e.converter,_A(e._query,this._limit,this._limitType))}}class eN extends uC{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new eN(e,t,r)}_apply(e){const t=nU(e,this.type,this._docOrFields,this._inclusive);return new As(e.firestore,e.converter,(i=t,new th((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class tN extends uC{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new tN(e,t,r)}_apply(e){const t=nU(e,this.type,this._docOrFields,this._inclusive);return new As(e.firestore,e.converter,(i=t,new th((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function nU(n,e,t,r){if(t[0]=(0,O.m9)(t[0]),t[0]instanceof aC)return function(i,o,l,h,m){if(!h)throw new Ae(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const b of Dm(i))if(b.field.isKeyField())y.push(bm(o,h.key));else{const S=h.data.field(b.field);if(lA(S))throw new Ae(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const R=b.field.canonicalString();throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}y.push(S)}return new Qf(y,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Lm(n.firestore);return function(o,l,h,m,y,b){const S=o.explicitOrderBy;if(y.length>S.length)throw new Ae(ce.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let k=0;k<y.length;k++){const B=y[k];if(S[k].field.isKeyField()){if("string"!=typeof B)throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof B}`);if(!uP(o)&&-1!==B.indexOf("/"))throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${B}' contains a slash.`);const K=o.path.child(dn.fromString(B));if(!tt.isDocumentKey(K))throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${K}' is not because it contains an odd number of segments.`);const se=new tt(K);R.push(bm(l,se))}else{const K=QV(h,m,B);R.push(K)}}return new Qf(R,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function rU(n,e,t){if("string"==typeof(t=(0,O.m9)(t))){if(""===t)throw new Ae(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uP(e)&&-1!==t.indexOf("/"))throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(dn.fromString(t));if(!tt.isDocumentKey(r))throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bm(n,new tt(r))}if(t instanceof vr)return bm(n,t._key);throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zA(t)}.`)}function iU(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sU(n,e){if(e.isInequality()){const r=mA(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const o=aP(n);null!==o&&oU(0,i,o)}const t=function(r,i){for(const o of r)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ae(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function oU(n,e,t){if(!t.isEqual(e))throw new Ae(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class ok{convertValue(e,t="none"){switch(Kf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ii(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(eh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ct()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return zf(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new WA(ii(e.latitude),ii(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=cA(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(AI(e));default:return null}}convertTimestamp(e){const t=qf(e);return new tr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dn.fromString(e);Et(w2(r));const i=new Wf(r.get(1),r.get(3)),o=new tt(r.popFirst(5));return i.isEqual(t)||Ur(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function nN(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class ez extends ok{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vr(this.firestore,null,t)}}class Um{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ah extends aC{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(JA("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class cC extends ah{data(e={}){return super.data(e)}}class sp{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Um(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new cC(this._firestore,this._userDataWriter,r.key,r,new Um(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new cC(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Um(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new cC(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Um(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,y=-1;return 0!==l.type&&(m=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),1!==l.type&&(o=o.add(l.doc),y=o.indexOf(l.doc.key)),{type:nz(l.type),doc:h,oldIndex:m,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function nz(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct()}}function uU(n,e){return n instanceof ah&&e instanceof ah?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof sp&&e instanceof sp&&n._firestore===e._firestore&&JO(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class op extends ok{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vr(this.firestore,null,t)}}function lU(n,e,t){n=mn(n,vr);const r=mn(n.firestore,wr),i=nN(n.converter,e,t);return ww(r,[KA(Lm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Ar.none())])}function cU(n,e,t,...r){n=mn(n,vr);const i=mn(n.firestore,wr),o=Lm(i);let l;return l="string"==typeof(e=(0,O.m9)(e))||e instanceof oh?nk(o,"updateDoc",n._key,e,t,r):tk(o,"updateDoc",n._key,e),ww(i,[l.toMutation(n._key,Ar.exists(!0))])}function dU(n,...e){var t,r,i;n=(0,O.m9)(n);let o={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||XO(e[l])||(o=e[l],l++);const h={includeMetadataChanges:o.includeMetadataChanges};if(XO(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,y,b;if(n instanceof vr)y=mn(n.firestore,wr),b=Xv(n._key.path),m={next:S=>{e[l]&&e[l](ak(y,n,S))},error:e[l+1],complete:e[l+2]};else{const S=mn(n,As);y=mn(S.firestore,wr),b=S._query;const R=new op(y);m={next:k=>{e[l]&&e[l](new sp(y,R,S,k))},error:e[l+1],complete:e[l+2]},tU(n._query)}return function(S,R,k,B){const K=new HA(B),se=new mO(R,K,k);return S.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return dO(yield yw(S),se)})),()=>{K.Dc(),S.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return fO(yield yw(S),se)}))}}(fi(y),b,h,m)}function ww(n,e){return function(t,r){const i=new ri;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function Y3(n,e,t){return EO.apply(this,arguments)}(yield KO(t),r,i)})),i.promise}(fi(n),e)}function ak(n,e,t){const r=t.docs.get(e._key),i=new op(n);return new ah(n,i,e._key,r,new Um(t.hasPendingWrites,t.fromCache),e.converter)}const wz={maxAttempts:5};class hU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Lm(e)}set(e,t,r){this._verifyNotCommitted();const i=ap(e,this._firestore),o=nN(i.converter,t,r),l=KA(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Ar.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=ap(e,this._firestore);let l;return l="string"==typeof(t=(0,O.m9)(t))||t instanceof oh?nk(this._dataReader,"WriteBatch.update",o._key,t,r,i):tk(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(l.toMutation(o._key,Ar.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ap(e,this._firestore);return this._mutations=this._mutations.concat(new rw(t._key,Ar.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ap(n,e){if((n=(0,O.m9)(n)).firestore!==e)throw new Ae(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ez extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Lm(e)}get(e){const t=ap(e,this._firestore),r=new ez(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ct();const o=i[0];if(o.isFoundDocument())return new aC(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new aC(this._firestore,r,t._key,null,t.converter);throw ct()})}set(e,t,r){const i=ap(e,this._firestore),o=nN(i.converter,t,r),l=KA(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const o=ap(e,this._firestore);let l;return l="string"==typeof(t=(0,O.m9)(t))||t instanceof oh?nk(this._dataReader,"Transaction.update",o._key,t,r,i):tk(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,l),this}delete(e){const t=ap(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ap(e,this._firestore),r=new op(this._firestore);return super.get(e).then(i=>new ah(this._firestore,r,t._key,i._document,new Um(!1,!1),t.converter))}}function uk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function pU(){if(typeof Uint8Array>"u")throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function gU(){if(!function n$(){return typeof atob<"u"}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){wm=ei.SDK_VERSION,(0,ei._registerComponent)(new Xi.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const o=t.getProvider("app").getImmediate(),l=new wr(new iL(t.getProvider("auth-internal")),new Zx(t.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ae(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wf(h.options.projectId,m)}(o,r),o);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,ei.registerVersion)(jx,"3.12.2",n),(0,ei.registerVersion)(jx,"3.12.2","esm2017")}();class dC{constructor(e){this._delegate=e}static fromBase64String(e){return gU(),new dC(Rc.fromBase64String(e))}static fromUint8Array(e){return pU(),new dC(Rc.fromUint8Array(e))}toBase64(){return gU(),this._delegate.toBase64()}toUint8Array(){return pU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function lk(n){return function Mz(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Rz{enableIndexedDbPersistence(e,t){return function NG(n,e){WV(n=mn(n,wr));const t=fi(n);if(t._uninitializedComponentsProvider)throw new Ae(ce.FAILED_PRECONDITION,"SDK cache is already specified.");vo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new _w;return qV(t,i,new jO(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function MG(n){WV(n=mn(n,wr));const e=fi(n);if(e._uninitializedComponentsProvider)throw new Ae(ce.FAILED_PRECONDITION,"SDK cache is already specified.");vo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new _w;return qV(e,r,new SV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function RG(n){if(n._initialized&&!n._terminated)throw new Ae(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ri;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!gu.D())return Promise.resolve();const i=r+"main";yield gu.delete(i)}),function(r){return t.apply(this,arguments)})(OP(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class mU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Wf||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&vo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function jV(n,e,t,r={}){var i;const o=(n=mn(n,rC))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==l&&vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),r.mockUserToken){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=ji.MOCK_USER;else{h=(0,O.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Ae(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ji(y)}n._authCredentials=new qx(new zv(h,m))}}(this._delegate,e,t,r)}enableNetwork(){return function PG(n){return function _G(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield MV(n),t=yield RV(n);return e.setNetworkEnabled(!0),function(r){const i=rt(r);return i.vu.delete(0),eC(i)}(t)}))}(fi(n=mn(n,wr)))}(this._delegate)}disableNetwork(){return function OG(n){return function yG(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield MV(n),t=yield RV(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(i){const o=rt(i);o.vu.add(0),yield cw(o),o.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(fi(n=mn(n,wr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,LV("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function xG(n){return function(e){const t=new ri;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function eG(n,e){return DO.apply(this,arguments)}(yield KO(e),t)})),t.promise}(fi(n=mn(n,wr)))}(this._delegate)}onSnapshotsInSync(e){return function dz(n,e){return function EG(n,e){const t=new HA(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield yw(n),i=t,rt(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield yw(n),i=t,void rt(r).ku.delete(i);var r,i}))}}(fi(n=mn(n,wr)),XO(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ew(this,$V(this._delegate,e))}catch(t){throw Eo(t,"collection()","Firestore.collection()")}}doc(e){try{return new mu(this,qA(this._delegate,e))}catch(t){throw Eo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Io(this,function TG(n,e){if(n=mn(n,rC),QO("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new As(n,null,(t=e,new th(dn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Eo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Iz(n,e,t){n=mn(n,wr);const r=Object.assign(Object.assign({},wz),t);return function(i){if(i.maxAttempts<1)throw new Ae(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,l){const h=new ri;return i.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const m=yield function xV(n){return $A(n).then(e=>e.datastore)}(i);new gG(i.asyncQueue,m,l,o,h).run()})),h.promise}(fi(n),i=>e(new Ez(n,i)),r)}(this._delegate,t=>e(new _U(this,t)))}batch(){return fi(this._delegate),new yU(new hU(this._delegate,e=>ww(this._delegate,e)))}loadBundle(e){return function kG(n,e){const t=fi(n=mn(n,wr)),r=new SG;return function IG(n,e,t,r){const i=function(o,l){let h;return h="string"==typeof o?n2().encode(o):o,m=function(m,y){if(m instanceof Uint8Array)return AV(m,y);if(m instanceof ArrayBuffer)return AV(new Uint8Array(m),y);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new fG(m,l);var m}(t,XI(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function dG(n,e,t){const r=rt(n);var i;(i=(0,ge.Z)(function*(o,l,h){try{const m=yield l.getMetadata();if(yield function(R,k){const B=rt(R),K=hi(k.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",se=>B.qs.getBundleMetadata(se,k.id)).then(se=>!!se&&se.createTime.compareTo(K)>=0)}(o.localStore,m))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(R=m).totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}),Promise.resolve(new Set);h._updateProgress(yV(m));const y=new G3(m,o.localStore,l.serializer);let b=yield l.bc();for(;b;){const R=yield y.zu(b);R&&h._updateProgress(R),b=yield l.bc()}const S=yield y.complete();return yield sh(o,S.Ju,void 0),yield function(R,k){const B=rt(R);return B.persistence.runTransaction("Save bundle","readwrite",K=>B.qs.saveBundleMetadata(K,k))}(o.localStore,m),h._completeWith(S.progress),Promise.resolve(S.Hu)}catch(m){return vo("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}var R}),function(o,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield KO(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function FG(n,e){return function CG(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const i=rt(t);return i.persistence.runTransaction("Get named query","readonly",o=>i.qs.getNamedQuery(o,r))}(yield GA(n),e)}))}(fi(n=mn(n,wr)),e).then(t=>t?new As(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Io(this,t):null)}}class rN extends ok{constructor(e){super(),this.firestore=e}convertBytes(e){return new dC(new Rc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return mu.forKey(t,this.firestore,null)}}class _U{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new rN(e)}get(e){const t=Hm(e);return this._delegate.get(t).then(r=>new hC(this._firestore,new ah(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Hm(e);return r?(uk("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Hm(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Hm(e);return this._delegate.delete(t),this}}class yU{constructor(e){this._delegate=e}set(e,t,r){const i=Hm(e);return r?(uk("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Hm(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Hm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Bm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new cC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new fC(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Bm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new Bm(e,new rN(e),t),i.set(t,o)),o}}Bm.INSTANCES=new WeakMap;class mu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new rN(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new mu(t,new vr(t._delegate,r,new tt(e)))}static forKey(e,t,r){return new mu(t,new vr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ew(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ew(this.firestore,$V(this._delegate,e))}catch(t){throw Eo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,O.m9)(e))instanceof vr&&GV(this._delegate,e)}set(e,t){t=uk("DocumentReference.set",t);try{return t?lU(this._delegate,e,t):lU(this._delegate,e)}catch(r){throw Eo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?cU(this._delegate,e):cU(this._delegate,e,t,...r)}catch(i){throw Eo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function lz(n){return ww(mn(n.firestore,wr),[new rw(n._key,Ar.none())])}(this._delegate)}onSnapshot(...e){const t=vU(e),r=wU(e,i=>new hC(this.firestore,new ah(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return dU(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function iz(n){n=mn(n,vr);const e=mn(n.firestore,wr),t=fi(e),r=new op(e);return function vG(n,e){const t=new ri;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(i,o,l){try{const h=yield function(m,y){const b=rt(m);return b.persistence.runTransaction("read document","readonly",S=>b.localDocuments.getDocument(S,y))}(i,o);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Ae(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=fw(h,`Failed to get document '${o} from cache`);l.reject(m)}}),function(i,o,l){return r.apply(this,arguments)})(yield GA(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ah(e,r,n._key,i,new Um(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function sz(n){n=mn(n,vr);const e=mn(n.firestore,wr);return PV(fi(e),n._key,{source:"server"}).then(t=>ak(e,n,t))}(this._delegate):function rz(n){n=mn(n,vr);const e=mn(n.firestore,wr);return PV(fi(e),n._key).then(t=>ak(e,n,t))}(this._delegate),t.then(r=>new hC(this.firestore,new ah(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new mu(this.firestore,this._delegate.withConverter(e?Bm.getInstance(this.firestore,e):null))}}function Eo(n,e,t){return n.message=n.message.replace(e,t),n}function vU(n){for(const e of n)if("object"==typeof e&&!lk(e))return e;return{}}function wU(n,e){var t,r;let i;return i=lk(n[0])?n[0]:lk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class hC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new mu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return uU(this._delegate,e._delegate)}}class fC extends hC{data(e){const t=this._delegate.data(e);return function Gx(n,e){n||ct()}(void 0!==t),t}}class Io{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new rN(e)}where(e,t,r){try{return new Io(this.firestore,ip(this._delegate,function qG(n,e,t){const r=e,i=JA("where",n);return lC._create(i,r,t)}(e,t,r)))}catch(i){throw Eo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Io(this.firestore,ip(this._delegate,function WG(n,e="asc"){const t=e,r=JA("orderBy",n);return sk._create(r,t)}(e,t)))}catch(r){throw Eo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Io(this.firestore,ip(this._delegate,function ZG(n){return BV("limit",n),XA._create("limit",n,"F")}(e)))}catch(t){throw Eo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Io(this.firestore,ip(this._delegate,function KG(n){return BV("limitToLast",n),XA._create("limitToLast",n,"L")}(e)))}catch(t){throw Eo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Io(this.firestore,ip(this._delegate,function YG(...n){return eN._create("startAt",n,!0)}(...e)))}catch(t){throw Eo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Io(this.firestore,ip(this._delegate,function QG(...n){return eN._create("startAfter",n,!1)}(...e)))}catch(t){throw Eo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Io(this.firestore,ip(this._delegate,function JG(...n){return tN._create("endBefore",n,!1)}(...e)))}catch(t){throw Eo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Io(this.firestore,ip(this._delegate,function XG(...n){return tN._create("endAt",n,!0)}(...e)))}catch(t){throw Eo(t,"endAt()","Query.endAt()")}}isEqual(e){return JO(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function az(n){n=mn(n,As);const e=mn(n.firestore,wr),t=fi(e),r=new op(e);return function wG(n,e){const t=new ri;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(i,o,l){try{const h=yield OA(i,o,!0),m=new EV(o,h.ir),y=m.sc(h.documents),b=m.applyChanges(y,!1);l.resolve(b.snapshot)}catch(h){const m=fw(h,`Failed to execute query '${o} against cache`);l.reject(m)}}),function(i,o,l){return r.apply(this,arguments)})(yield GA(n),e,t);var r})),t.promise}(t,n._query).then(i=>new sp(e,r,n,i))}(this._delegate):"server"===e?.source?function uz(n){n=mn(n,As);const e=mn(n.firestore,wr),t=fi(e),r=new op(e);return OV(t,n._query,{source:"server"}).then(i=>new sp(e,r,n,i))}(this._delegate):function oz(n){n=mn(n,As);const e=mn(n.firestore,wr),t=fi(e),r=new op(e);return tU(n._query),OV(t,n._query).then(i=>new sp(e,r,n,i))}(this._delegate),t.then(r=>new ck(this.firestore,new sp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=vU(e),r=wU(e,i=>new ck(this.firestore,new sp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return dU(this._delegate,t,r)}withConverter(e){return new Io(this.firestore,this._delegate.withConverter(e?Bm.getInstance(this.firestore,e):null))}}class Pz{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new fC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ck{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Io(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new fC(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Pz(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new fC(this._firestore,r))})}isEqual(e){return uU(this._delegate,e._delegate)}}class Ew extends Io{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new mu(this.firestore,e):null}doc(e){try{return new mu(this.firestore,void 0===e?qA(this._delegate):qA(this._delegate,e))}catch(t){throw Eo(t,"doc()","CollectionReference.doc()")}}add(e){return function cz(n,e){const t=mn(n.firestore,wr),r=qA(n),i=nN(n.converter,e);return ww(t,[KA(Lm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Ar.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new mu(this.firestore,t))}isEqual(e){return GV(this._delegate,e._delegate)}withConverter(e){return new Ew(this.firestore,this._delegate.withConverter(e?Bm.getInstance(this.firestore,e):null))}}function Hm(n){return mn(n,vr)}class dk{constructor(...e){this._delegate=new oh(...e)}static documentId(){return new dk(Sr.keyField().canonicalString())}isEqual(e){return(e=(0,O.m9)(e))instanceof oh&&this._delegate._internalPath.isEqual(e._internalPath)}}class jm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function bz(){return new ek("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new jm(e)}static delete(){const e=function Cz(){return new sC("deleteField")}();return e._methodName="FieldValue.delete",new jm(e)}static arrayUnion(...e){const t=function Tz(...n){return new HG("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new jm(t)}static arrayRemove(...e){const t=function Dz(...n){return new jG("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new jm(t)}static increment(e){const t=function Sz(n){return new $G("increment",n)}(e);return t._methodName="FieldValue.increment",new jm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Oz={Firestore:mU,GeoPoint:WA,Timestamp:tr,Blob:dC,Transaction:_U,WriteBatch:yU,DocumentReference:mu,DocumentSnapshot:hC,Query:Io,QueryDocumentSnapshot:fC,QuerySnapshot:ck,CollectionReference:Ew,FieldPath:dk,FieldValue:jm,setLogLevel:function xz(n){!function $x(n){_l.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function EU(n,e){return function Lz(n,e=Fg.z){return new Zr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function hk(n,e){return EU(n,e).pipe((0,Mt.U)(t=>({payload:t,type:"query"})))}function iN(n,e){return hk(n,e).pipe(Za(void 0),nv(),(0,Mt.U)(([t,r])=>{const i=r.payload.docChanges(),o=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const m=i.find(b=>b.doc.ref.isEqual(l.ref)),y=t?.payload.docs.find(b=>b.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||o.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),o}))}function IU(n,e,t){return iN(n,t).pipe(Vo((r,i)=>function Uz(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Bz(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return fk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return fk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return fk(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),(0,A0.x)(),(0,Mt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function fk(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function CU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Fz(n){(function kz(n,e){n.INTERNAL.registerComponent(new Xi.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Oz)))})(n,(e,t)=>new mU(e,t,new Rz)),n.registerVersion("@firebase/firestore-compat","0.3.11")}(n0.Z);class bU{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=iN(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Mt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Za(void 0),nv(),Fi(([r,i])=>i.length>0||!r),(0,Mt.U)(([r,i])=>i),wn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Vo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=CU(e);return IU(this.query,t,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(e={}){return hk(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),wn.iC)}get(e){return(0,vn.D)(this.query.get(e)).pipe(wn.iC)}add(e){return this.ref.add(e)}doc(e){return new TU(this.ref.doc(e),this.afs)}}class TU{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=AU(r,t);return new bU(i,o,this.afs)}snapshotChanges(){return function Vz(n,e){return EU(n,e).pipe(Za(void 0),nv(),(0,Mt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Mt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,vn.D)(this.ref.get(e)).pipe(wn.iC)}}class Hz{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?iN(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Fi(t=>t.length>0),wn.iC):iN(this.query,this.afs.schedulers.outsideAngular).pipe(wn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Vo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=CU(e);return IU(this.query,t,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(e={}){return hk(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),wn.iC)}get(e){return(0,vn.D)(this.query.get(e)).pipe(wn.iC)}}const DU=new d.OlP("angularfire2.enableFirestorePersistence"),SU=new d.OlP("angularfire2.firestore.persistenceSettings"),jz=new d.OlP("angularfire2.firestore.settings"),$z=new d.OlP("angularfire2.firestore.use-emulator");function AU(n,e=(t=>t)){return{query:e(n),ref:n}}let Gz=(()=>{class n{constructor(t,r,i,o,l,h,m,y,b,S,R,k,B,K,se,ke,We){this.schedulers=m;const Be=(0,di.on)(t,h,r),Ye=b;S&&By(Be,h,R,B,K,se,k,ke),[this.firestore,this.persistenceEnabled$]=(0,di.cc)(`${Be.name}.firestore`,"AngularFirestore",Be.name,()=>{const At=h.runOutsideAngular(()=>Be.firestore());if(o&&At.settings(o),Ye&&At.useEmulator(...Ye),i&&!na(l)){const Ft=()=>{try{return(0,vn.D)(At.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(_n){return typeof console<"u"&&console.warn(_n),(0,gt.of)(!1)}};return[At,h.runOutsideAngular(Ft)]}return[At,(0,gt.of)(!1)]},[o,Ye,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:l}=AU(i,r),h=this.schedulers.ngZone.run(()=>o);return new bU(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),o=this.firestore.collectionGroup(t);return new Hz(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new TU(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(di.Dh),d.LFG(di.xv,8),d.LFG(DU,8),d.LFG(jz,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(wn.HU),d.LFG(SU,8),d.LFG($z,8),d.LFG(e0,8),d.LFG(Vy,8),d.LFG(wc,8),d.LFG(QE,8),d.LFG(JE,8),d.LFG(Uy,8),d.LFG(XE,8),d.LFG(Fd,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),zz=(()=>{class n{constructor(){Ly.Z.registerVersion("angularfire",wn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:DU,useValue:!0},{provide:SU,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Gz]}),n})();var qz=F(5032);const NU="@firebase/database";let pk="";function RU(n){pk=n}class Kz{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,O.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,O.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Yz{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,O.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const xU=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Kz(e)}}catch{}return new Yz},$m=xU("localStorage"),gk=xU("sessionStorage"),Iw=new es.Yd("@firebase/database"),PU=function(){let n=1;return function(){return n++}}(),OU=function(n){const e=(0,O.dS)(n),t=new O.gQ;t.update(e);const r=t.digest();return O.US.encodeByteArray(r)},pC=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=pC.apply(null,r):e+="object"==typeof r?(0,O.Wl)(r):r,e+=" "}return e};let Gm=null,kU=!0;const FU=function(n,e){(0,O.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Iw.logLevel=es.in.VERBOSE,Gm=Iw.log.bind(Iw),e&&gk.set("logging_enabled",!0)):"function"==typeof n?Gm=n:(Gm=null,gk.remove("logging_enabled"))},os=function(...n){if(!0===kU&&(kU=!1,null===Gm&&!0===gk.get("logging_enabled")&&FU(!0)),Gm){const e=pC.apply(null,n);Gm(e)}},gC=function(n){return function(...e){os(n,...e)}},mk=function(...n){const e="FIREBASE INTERNAL ERROR: "+pC(...n);Iw.error(e)},xc=function(...n){const e=`FIREBASE FATAL ERROR: ${pC(...n)}`;throw Iw.error(e),new Error(e)},Ks=function(...n){const e="FIREBASE WARNING: "+pC(...n);Iw.warn(e)},sN=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},up="[MIN_NAME]",uh="[MAX_NAME]",zm=function(n,e){if(n===e)return 0;if(n===up||e===uh)return-1;if(e===up||n===uh)return 1;{const t=UU(n),r=UU(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Xz=function(n,e){return n===e?0:n<e?-1:1},mC=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,O.Wl)(e))},_k=function(n){if("object"!=typeof n||null===n)return(0,O.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,O.Wl)(e[r]),t+=":",t+=_k(n[e[r]]);return t+="}",t},LU=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function as(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const VU=function(n){(0,O.hu)(!sN(n),"Invalid JSON number");const r=1023;let i,o,l,h,m;0===n?(o=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(o=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(m=52;m;m-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)y.push(o%2?1:0),o=Math.floor(o/2);y.push(i?1:0),y.reverse();const b=y.join("");let S="";for(m=0;m<64;m+=8){let R=parseInt(b.substr(m,8),2).toString(16);1===R.length&&(R="0"+R),S+=R}return S.toLowerCase()},r4=new RegExp("^-?(0*)\\d{1,10}$"),UU=function(n){if(r4.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Cw=function(n){try{n()}catch(e){setTimeout(()=>{throw Ks("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},_C=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class a4{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ks(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class u4{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(os("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ks(e)}}let yC=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const GU=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,WU="websocket",ZU="long_polling";class vk{constructor(e,t,r,i,o=!1,l="",h=!1,m=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=$m.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&$m.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function KU(n,e,t){let r;if((0,O.hu)("string"==typeof e,"typeof type must == string"),(0,O.hu)("object"==typeof t,"typeof params must == object"),e===WU)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==ZU)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function l4(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return as(t,(o,l)=>{i.push(o+"="+l)}),r+i.join("&")}class c4{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,O.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,O.p$)(this.counters_)}}const wk={},Ek={};function Ik(n){const e=n.toString();return wk[e]||(wk[e]=new c4),wk[e]}class h4{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Cw(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class lp{constructor(e,t,r,i,o,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=gC(e),this.stats_=Ik(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),KU(t,ZU,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new h4(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,O.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ck((...o)=>{const[l,h,m,y,b]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[l,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&GU.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){lp.forceAllow_=!0}static forceDisallow(){lp.forceDisallow_=!0}static isAvailable(){return!((0,O.Yr)()||!lp.forceAllow_&&(lp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,O.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,O.h$)(t),i=LU(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,O.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,O.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Ck{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,O.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=PU(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Ck.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){os("frame writing exception"),h.stack&&os(h.stack),os(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||os("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,O.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{os("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let aN=null;typeof MozWebSocket<"u"?aN=MozWebSocket:typeof WebSocket<"u"&&(aN=WebSocket);let bw=(()=>{class n{constructor(t,r,i,o,l,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=gC(this.connId),this.stats_=Ik(r),this.connURL=n.connectionURL_(r,h,m,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,l){const h={v:"5"};return!(0,O.Yr)()&&typeof location<"u"&&location.hostname&&GU.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),o&&(h.ac=o),l&&(h.p=l),KU(t,WU,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,$m.set("previous_websocket_failure",!0);try{let i;if((0,O.Yr)()){i={headers:{"User-Agent":`Firebase/5/${pk}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new aN(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==aN&&!n.forceDisallow_}static previouslyFailed(){return $m.isInMemoryStorage||!0===$m.get("previous_websocket_failure")}markConnectionHealthy(){$m.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,O.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,O.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,O.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=LU(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),nB=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[lp,bw]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=bw&&bw.isAvailable();let i=r&&!bw.previouslyFailed();if(t.webSocketOnly&&(r||Ks("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[bw];else{const o=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class lB{constructor(e,t,r,i,o,l,h,m,y,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=m,this.onKill_=y,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=gC("c:"+this.id+":"),this.transportManager_=new nB(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=_C(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=mC("t",e),r=mC("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=mC("t",e),r=mC("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=mC("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?mk("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):mk("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ks("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),_C(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):_C(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&($m.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class cB{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class dB{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,O.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,O.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class uN extends dB{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,O.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new uN}getInitialEvent(e){return(0,O.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Un{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function xn(){return new Un("")}function ln(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function cp(n){return n.pieces_.length-n.pieceNum_}function nr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Un(n.pieces_,e)}function Tk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function vC(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function pB(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Un(e,0)}function Nr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Un)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Un(t,0)}function cn(n){return n.pieceNum_>=n.pieces_.length}function Co(n,e){const t=ln(n),r=ln(e);if(null===t)return e;if(t===r)return Co(nr(n),nr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function O4(n,e){const t=vC(n,0),r=vC(e,0);for(let i=0;i<t.length&&i<r.length;i++){const o=zm(t[i],r[i]);if(0!==o)return o}return t.length===r.length?0:t.length<r.length?-1:1}function Dk(n,e){if(cp(n)!==cp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function _u(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(cp(n)>cp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class k4{constructor(e,t){this.errorPrefix_=t,this.parts_=vC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,O.ug)(this.parts_[r]);gB(this)}}function gB(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+qm(n))}function qm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Sk extends dB{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Sk}getInitialEvent(e){return(0,O.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const wC=1e3;let cN,Wm=(()=>{class n extends cB{constructor(t,r,i,o,l,h,m,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=gC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=wC,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,O.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Sk.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&uN.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,l={r:o,a:t,b:r};this.log_((0,O.Wl)(l)),(0,O.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new O.BH,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const m=h.d;"ok"===h.s?r.resolve(m):r.reject(m)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,O.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const m={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const y=m.d,b=m.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",m),"ok"!==b&&this.removeListen_(i,o),t.onComplete&&t.onComplete(b,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,O.r3)(t,"w")){const i=(0,O.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Ks(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,O.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,O.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const l=o.s,h=o.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const l={p:t};o&&(l.q=i,l.t=o),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,O.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):mk("Unrecognized action received from server: "+(0,O.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,O.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=wC,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=wC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=wC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ge.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,y=null;const b=function(){y?y.close():(m=!0,o())};t.realtime_={close:b,sendRequest:function(k){(0,O.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(k)}};const R=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[k,B]=yield Promise.all([t.authTokenProvider_.getToken(R),t.appCheckTokenProvider_.getToken(R)]);m?os("getToken() completed but was canceled"):(os("getToken() completed. Creating connection."),t.authToken_=k&&k.accessToken,t.appCheckToken_=B&&B.token,y=new lB(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,K=>{Ks(K+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(k){t.log_("Failed to get token: "+k),m||(t.repoInfo_.nodeAdmin&&Ks(k),b())}}})()}interrupt(t){os("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){os("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,O.xb)(this.interruptReasons_)&&(this.reconnectDelay_=wC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>_k(l)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new Un(t).toString();let o;if(this.listens.has(i)){const l=this.listens.get(i);o=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){os("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){os("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,O.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+pk.replace(/\./g,"-")]=1,(0,O.uI)()?t["framework.cordova"]=1:(0,O.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=uN.getInstance().currentlyOnline();return(0,O.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class hn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new hn(e,t)}}class lN{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new hn(up,e),i=new hn(up,t);return 0!==this.compare(r,i)}minPost(){return hn.MIN}}class yB extends lN{static get __EMPTY_NODE(){return cN}static set __EMPTY_NODE(e){cN=e}compare(e,t){return zm(e.name,t.name)}isDefinedOn(e){throw(0,O.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return hn.MIN}maxPost(){return new hn(uh,cN)}makePost(e,t){return(0,O.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new hn(e,cN)}toString(){return".key"}}const Pc=new yB;class dN{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Nk,yl=(()=>{class n{constructor(t,r,i,o,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??Yo.EMPTY_NODE,this.right=l??Yo.EMPTY_NODE}copy(t,r,i,o,l){return new n(t??this.key,r??this.value,i??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const l=i(t,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===l?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Yo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Yo.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Yo{constructor(e,t=Yo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Yo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,yl.BLACK,null,null))}remove(e){return new Yo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,yl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new dN(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new dN(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new dN(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new dN(this.root_,null,this.comparator_,!0,e)}}function $4(n,e){return zm(n.name,e.name)}function Ak(n,e){return zm(n,e)}Yo.EMPTY_NODE=new class j4{copy(e,t,r,i,o){return this}insert(e,t,r){return new yl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const vB=function(n){return"number"==typeof n?"number:"+VU(n):"string:"+n},wB=function(n){if(n.isLeafNode()){const e=n.val();(0,O.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,O.r3)(e,".sv"),"Priority must be a string or number.")}else(0,O.hu)(n===Nk||n.isEmpty(),"priority of unexpected type.");(0,O.hu)(n===Nk||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let EB,IB,CB,Tw=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,O.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),wB(this.priorityNode_)}static set __childrenNodeConstructor(t){EB=t}static get __childrenNodeConstructor(){return EB}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return cn(t)?this:".priority"===ln(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=ln(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,O.hu)(".priority"!==i||1===cp(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(nr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+vB(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?VU(this.value_):this.value_,this.lazyHash_=OU(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,O.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,O.hu)(o>=0,"Unknown leaf type: "+r),(0,O.hu)(l>=0,"Unknown leaf type: "+i),o===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const cr=new class W4 extends lN{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?zm(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return hn.MIN}maxPost(){return new hn(uh,new Tw("[PRIORITY-POST]",CB))}makePost(e,t){const r=IB(e);return new hn(t,new Tw("[PRIORITY-POST]",r))}toString(){return".priority"}},Z4=Math.log(2);class K4{constructor(e){this.count=parseInt(Math.log(e+1)/Z4,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const hN=function(n,e,t,r){n.sort(e);const i=function(m,y){const b=y-m;let S,R;if(0===b)return null;if(1===b)return S=n[m],R=t?t(S):S,new yl(R,S.node,yl.BLACK,null,null);{const k=parseInt(b/2,10)+m,B=i(m,k),K=i(k+1,y);return S=n[k],R=t?t(S):S,new yl(R,S.node,yl.BLACK,B,K)}},h=function(m){let y=null,b=null,S=n.length;const R=function(B,K){const se=S-B,ke=S;S-=B;const We=i(se+1,ke),Be=n[se],Ye=t?t(Be):Be;k(new yl(Ye,Be.node,K,null,We))},k=function(B){y?(y.left=B,y=B):(b=B,y=B)};for(let B=0;B<m.count;++B){const K=m.nextBitIsOne(),se=Math.pow(2,m.count-(B+1));K?R(se,yl.BLACK):(R(se,yl.BLACK),R(se,yl.RED))}return b}(new K4(n.length));return new Yo(r||e,h)};let Mk;const Dw={};class lh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,O.hu)(Dw&&cr,"ChildrenNode.ts has not been loaded"),Mk=Mk||new lh({".priority":Dw},{".priority":cr}),Mk}get(e){const t=(0,O.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Yo?t:null}hasIndex(e){return(0,O.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,O.hu)(e!==Pc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(hn.Wrap);let h,l=o.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=o.getNext();h=i?hN(r,e.getCompare()):Dw;const m=e.toString(),y=Object.assign({},this.indexSet_);y[m]=e;const b=Object.assign({},this.indexes_);return b[m]=h,new lh(b,y)}addToIndexes(e,t){const r=(0,O.UI)(this.indexes_,(i,o)=>{const l=(0,O.DV)(this.indexSet_,o);if((0,O.hu)(l,"Missing index implementation for "+o),i===Dw){if(l.isDefinedOn(e.node)){const h=[],m=t.getIterator(hn.Wrap);let y=m.getNext();for(;y;)y.name!==e.name&&h.push(y),y=m.getNext();return h.push(e),hN(h,l.getCompare())}return Dw}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new hn(e.name,h))),m.insert(e,e.node)}});return new lh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,O.UI)(this.indexes_,i=>{if(i===Dw)return i;{const o=t.get(e.name);return o?i.remove(new hn(e.name,o)):i}});return new lh(r,this.indexSet_)}}let EC,Xt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&wB(this.priorityNode_),this.children_.isEmpty()&&(0,O.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return EC||(EC=new n(new Yo(Ak),null,lh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||EC}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?EC:r}}getChild(t){const r=ln(t);return null===r?this:this.getImmediateChild(r).getChild(nr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,O.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new hn(t,r);let o,l;r.isEmpty()?(o=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=o.isEmpty()?EC:this.priorityNode_;return new n(o,h,l)}}updateChild(t,r){const i=ln(t);if(null===i)return r;{(0,O.hu)(".priority"!==ln(t)||1===cp(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(nr(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,l=!0;if(this.forEachChild(cr,(h,m)=>{r[h]=m.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):l=!1}),!t&&l&&o<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+vB(this.getPriority().val())+":"),this.forEachChild(cr,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":OU(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const l=o.getPredecessorKey(new hn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new hn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new hn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,hn.Wrap);let l=o.peek();for(;null!=l&&r.compare(l,t)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,hn.Wrap);let l=o.peek();for(;null!=l&&r.compare(l,t)>0;)o.getNext(),l=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===IC?-1:0}withIndex(t){if(t===Pc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Pc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(cr),o=r.getIterator(cr);let l=i.getNext(),h=o.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=o.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===Pc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const IC=new class Y4 extends Xt{constructor(){super(new Yo(Ak),Xt.EMPTY_NODE,lh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Xt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(hn,{MIN:{value:new hn(up,Xt.EMPTY_NODE)},MAX:{value:new hn(uh,IC)}}),yB.__EMPTY_NODE=Xt.EMPTY_NODE,Tw.__childrenNodeConstructor=Xt,function G4(n){Nk=n}(IC),function q4(n){CB=n}(IC);const Q4=!0;function Br(n,e=null){if(null===n)return Xt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,O.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Tw(n,Br(e));if(n instanceof Array||!Q4){let t=Xt.EMPTY_NODE;return as(n,(r,i)=>{if((0,O.r3)(n,r)&&"."!==r.substring(0,1)){const o=Br(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(Br(e))}{const t=[];let r=!1;if(as(n,(l,h)=>{if("."!==l.substring(0,1)){const m=Br(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new hn(l,m)))}}),0===t.length)return Xt.EMPTY_NODE;const o=hN(t,$4,l=>l.name,Ak);if(r){const l=hN(t,cr.getCompare());return new Xt(o,Br(e),new lh({".priority":l},{".priority":cr}))}return new Xt(o,Br(e),lh.Default)}}!function z4(n){IB=n}(Br);class Rk extends lN{constructor(e){super(),this.indexPath_=e,(0,O.hu)(!cn(e)&&".priority"!==ln(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?zm(e.name,t.name):o}makePost(e,t){const r=Br(e),i=Xt.EMPTY_NODE.updateChild(this.indexPath_,r);return new hn(t,i)}maxPost(){const e=Xt.EMPTY_NODE.updateChild(this.indexPath_,IC);return new hn(uh,e)}toString(){return vC(this.indexPath_,0).join("/")}}const xk=new class J4 extends lN{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?zm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return hn.MIN}maxPost(){return hn.MAX}makePost(e,t){const r=Br(e);return new hn(t,r)}toString(){return".value"}};function bB(n){return{type:"value",snapshotNode:n}}function Sw(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function CC(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function bC(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Pk{constructor(e){this.index_=e}updateChild(e,t,r,i,o,l){(0,O.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(CC(t,h)):(0,O.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(Sw(t,r)):l.trackChildChange(bC(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(cr,(i,o)=>{t.hasChild(i)||r.trackChildChange(CC(i,o))}),t.isLeafNode()||t.forEachChild(cr,(i,o)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(o)||r.trackChildChange(bC(i,o,l))}else r.trackChildChange(Sw(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Xt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class TC{constructor(e){this.indexedFilter_=new Pk(e.getIndex()),this.index_=e.getIndex(),this.startPost_=TC.getStartPost_(e),this.endPost_=TC.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,o,l){return this.matches(new hn(t,r))||(r=Xt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Xt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Xt.EMPTY_NODE);const o=this;return t.forEachChild(cr,(l,h)=>{o.matches(new hn(l,h))||(i=i.updateImmediateChild(l,Xt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class e6{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new TC(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,o,l){return this.rangedFilter_.matches(new hn(t,r))||(r=Xt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,l):this.fullLimitUpdateChild_(e,t,r,o,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Xt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;i=Xt.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const h=o.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;i=i.updateImmediateChild(h.name,h.node),l++}}}else{let o;i=t.withIndex(this.index_),i=i.updatePriority(Xt.EMPTY_NODE),o=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;o.hasNext();){const h=o.getNext();l<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?l++:i=i.updateImmediateChild(h.name,Xt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let l;if(this.reverse_){const S=this.index_.getCompare();l=(R,k)=>S(k,R)}else l=this.index_.getCompare();const h=e;(0,O.hu)(h.numChildren()===this.limit_,"");const m=new hn(t,r),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),b=this.rangedFilter_.matches(m);if(h.hasChild(t)){const S=h.getImmediateChild(t);let R=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=R&&(R.name===t||h.hasChild(R.name));)R=i.getChildAfterChild(this.index_,R,this.reverse_);const k=null==R?1:l(R,m);if(b&&!r.isEmpty()&&k>=0)return o?.trackChildChange(bC(t,r,S)),h.updateImmediateChild(t,r);{o?.trackChildChange(CC(t,S));const K=h.updateImmediateChild(t,Xt.EMPTY_NODE);return null!=R&&this.rangedFilter_.matches(R)?(o?.trackChildChange(Sw(R.name,R.node)),K.updateImmediateChild(R.name,R.node)):K}}return r.isEmpty()?e:b&&l(y,m)>=0?(null!=o&&(o.trackChildChange(CC(y.name,y.node)),o.trackChildChange(Sw(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(y.name,Xt.EMPTY_NODE)):e}}class fN{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=cr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:up}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:uh}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,O.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===cr}copy(){const e=new fN;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ok(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function kk(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function pN(n,e){const t=n.copy();return t.index_=e,t}function TB(n){const e={};if(n.isDefault())return e;let t;if(n.index_===cr?t="$priority":n.index_===xk?t="$value":n.index_===Pc?t="$key":((0,O.hu)(n.index_ instanceof Rk,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,O.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,O.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,O.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,O.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,O.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function DB(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==cr&&(e.i=n.index_.toString()),e}class gN extends cB{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=gC("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,O.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=gN.getListenId_(e,r),h={};this.listens_[l]=h;const m=TB(e._queryParams);this.restRequest_(o+".json",m,(y,b)=>{let S=b;if(404===y&&(S=null,y=null),null===y&&this.onDataUpdate_(o,S,!1,r),(0,O.DV)(this.listens_,l)===h){let R;R=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(R,null)}})}unlisten(e,t){const r=gN.getListenId_(e,t);delete this.listens_[r]}get(e){const t=TB(e._queryParams),r=e._path.toString(),i=new O.BH;return this.restRequest_(r+".json",t,(o,l)=>{let h=l;404===o&&(h=null,o=null),null===o?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,O.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,O.cI)(h.responseText)}catch{Ks("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&Ks("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class o6{constructor(){this.rootNode_=Xt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function mN(){return{value:null,children:new Map}}function Aw(n,e,t){if(cn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=ln(e);n.children.has(r)||n.children.set(r,mN()),Aw(n.children.get(r),e=nr(e),t)}}function Fk(n,e){if(cn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(cr,(r,i)=>{Aw(n,new Un(r),i)}),Fk(n,e)}}if(n.children.size>0){const t=ln(e);return e=nr(e),n.children.has(t)&&Fk(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Lk(n,e,t){null!==n.value?t(e,n.value):function a6(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Lk(i,new Un(e.toString()+"/"+r),t)})}class u6{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&as(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class d6{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new u6(e);const r=1e4+2e4*Math.random();_C(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;as(e,(i,o)=>{o>0&&(0,O.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),_C(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var bi=(()=>((bi=bi||{})[bi.OVERWRITE=0]="OVERWRITE",bi[bi.MERGE=1]="MERGE",bi[bi.ACK_USER_WRITE=2]="ACK_USER_WRITE",bi[bi.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",bi))();function Bk(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class _N{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=bi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(cn(this.path)){if(null!=this.affectedTree.value)return(0,O.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Un(e));return new _N(xn(),t,this.revert)}}return(0,O.hu)(ln(this.path)===e,"operationForChild called for unrelated child."),new _N(nr(this.path),this.affectedTree,this.revert)}}class DC{constructor(e,t){this.source=e,this.path=t,this.type=bi.LISTEN_COMPLETE}operationForChild(e){return cn(this.path)?new DC(this.source,xn()):new DC(this.source,nr(this.path))}}class Zm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=bi.OVERWRITE}operationForChild(e){return cn(this.path)?new Zm(this.source,xn(),this.snap.getImmediateChild(e)):new Zm(this.source,nr(this.path),this.snap)}}class Nw{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=bi.MERGE}operationForChild(e){if(cn(this.path)){const t=this.children.subtree(new Un(e));return t.isEmpty()?null:t.value?new Zm(this.source,xn(),t.value):new Nw(this.source,xn(),t)}return(0,O.hu)(ln(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Nw(this.source,nr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class dp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(cn(e))return this.isFullyInitialized()&&!this.filtered_;const t=ln(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class h6{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function SC(n,e,t,r,i,o){const l=r.filter(h=>h.type===t);l.sort((h,m)=>function g6(n,e,t){if(null==e.childName||null==t.childName)throw(0,O.g5)("Should only compare child_ events.");const r=new hn(e.childName,e.snapshotNode),i=new hn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),l.forEach(h=>{const m=function p6(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,o);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(m,n.query_))})})}function yN(n,e){return{eventCache:n,serverCache:e}}function AC(n,e,t,r){return yN(new dp(e,t,r),n.serverCache)}function AB(n,e,t,r){return yN(n.eventCache,new dp(e,t,r))}function vN(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Km(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Hk;class dr{constructor(e,t=(()=>(Hk||(Hk=new Yo(Xz)),Hk))()){this.value=e,this.children=t}static fromObject(e){let t=new dr(null);return as(e,(r,i)=>{t=t.set(new Un(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:xn(),value:this.value};if(cn(e))return null;{const r=ln(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(nr(e),t);return null!=o?{path:Nr(new Un(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(cn(e))return this;{const t=ln(e),r=this.children.get(t);return null!==r?r.subtree(nr(e)):new dr(null)}}set(e,t){if(cn(e))return new dr(t,this.children);{const r=ln(e),o=(this.children.get(r)||new dr(null)).set(nr(e),t),l=this.children.insert(r,o);return new dr(this.value,l)}}remove(e){if(cn(e))return this.children.isEmpty()?new dr(null):new dr(null,this.children);{const t=ln(e),r=this.children.get(t);if(r){const i=r.remove(nr(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new dr(null):new dr(this.value,o)}return this}}get(e){if(cn(e))return this.value;{const t=ln(e),r=this.children.get(t);return r?r.get(nr(e)):null}}setTree(e,t){if(cn(e))return t;{const r=ln(e),o=(this.children.get(r)||new dr(null)).setTree(nr(e),t);let l;return l=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new dr(this.value,l)}}fold(e){return this.fold_(xn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Nr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,xn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(cn(e))return null;{const o=ln(e),l=this.children.get(o);return l?l.findOnPath_(nr(e),Nr(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,xn(),t)}foreachOnPath_(e,t,r){if(cn(e))return this;{this.value&&r(t,this.value);const i=ln(e),o=this.children.get(i);return o?o.foreachOnPath_(nr(e),Nr(t,i),r):new dr(null)}}foreach(e){this.foreach_(xn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Nr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class vl{constructor(e){this.writeTree_=e}static empty(){return new vl(new dr(null))}}function NC(n,e,t){if(cn(e))return new vl(new dr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const l=Co(i,e);return o=o.updateChild(l,t),new vl(n.writeTree_.set(i,o))}{const i=new dr(t),o=n.writeTree_.setTree(e,i);return new vl(o)}}}function jk(n,e,t){let r=n;return as(t,(i,o)=>{r=NC(r,Nr(e,i),o)}),r}function NB(n,e){if(cn(e))return vl.empty();{const t=n.writeTree_.setTree(e,new dr(null));return new vl(t)}}function $k(n,e){return null!=Ym(n,e)}function Ym(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Co(t.path,e)):null}function MB(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(cr,(r,i)=>{e.push(new hn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new hn(r,i.value))}),e}function hp(n,e){if(cn(e))return n;{const t=Ym(n,e);return new vl(null!=t?new dr(t):n.writeTree_.subtree(e))}}function Gk(n){return n.writeTree_.isEmpty()}function Mw(n,e){return RB(xn(),n.writeTree_,e)}function RB(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,O.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=RB(Nr(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Nr(n,".priority"),r)),t}}function wN(n,e){return FB(e,n)}function E6(n,e){if(n.snap)return _u(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&_u(Nr(n.path,t),e))return!0;return!1}function C6(n){return n.visible}function xB(n,e,t){let r=vl.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const l=o.path;let h;if(o.snap)_u(t,l)?(h=Co(t,l),r=NC(r,h,o.snap)):_u(l,t)&&(h=Co(l,t),r=NC(r,xn(),o.snap.getChild(h)));else{if(!o.children)throw(0,O.g5)("WriteRecord should have .snap or .children");if(_u(t,l))h=Co(t,l),r=jk(r,h,o.children);else if(_u(l,t))if(h=Co(l,t),cn(h))r=jk(r,xn(),o.children);else{const m=(0,O.DV)(o.children,ln(h));if(m){const y=m.getChild(nr(h));r=NC(r,xn(),y)}}}}}return r}function PB(n,e,t,r,i){if(r||i){const o=hp(n.visibleWrites,e);return!i&&Gk(o)?t:i||null!=t||$k(o,xn())?Mw(xB(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(_u(y.path,e)||_u(e,y.path))},e),t||Xt.EMPTY_NODE):null}{const o=Ym(n.visibleWrites,e);if(null!=o)return o;{const l=hp(n.visibleWrites,e);return Gk(l)?t:null!=t||$k(l,xn())?Mw(l,t||Xt.EMPTY_NODE):null}}}function EN(n,e,t,r){return PB(n.writeTree,n.treePath,e,t,r)}function zk(n,e){return function b6(n,e,t){let r=Xt.EMPTY_NODE;const i=Ym(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(cr,(o,l)=>{r=r.updateImmediateChild(o,l)}),r;if(t){const o=hp(n.visibleWrites,e);return t.forEachChild(cr,(l,h)=>{const m=Mw(hp(o,new Un(l)),h);r=r.updateImmediateChild(l,m)}),MB(o).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return MB(hp(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function OB(n,e,t,r){return function T6(n,e,t,r,i){(0,O.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Nr(e,t);if($k(n.visibleWrites,o))return null;{const l=hp(n.visibleWrites,o);return Gk(l)?i.getChild(t):Mw(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function IN(n,e){return function S6(n,e){return Ym(n.visibleWrites,e)}(n.writeTree,Nr(n.treePath,e))}function qk(n,e,t){return function D6(n,e,t,r){const i=Nr(e,t),o=Ym(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?Mw(hp(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function kB(n,e){return FB(Nr(n.treePath,e),n.writeTree)}function FB(n,e){return{treePath:n,writeTree:e}}class R6{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,O.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,O.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,bC(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,CC(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,Sw(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,O.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,bC(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const LB=new class x6{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Wk{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new dp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return qk(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Km(this.viewCache_),o=function M6(n,e,t,r,i,o){return function A6(n,e,t,r,i,o,l){let h;const m=hp(n.visibleWrites,e),y=Ym(m,xn());if(null!=y)h=y;else{if(null==t)return[];h=Mw(m,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const b=[],S=l.getCompare(),R=o?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let k=R.getNext();for(;k&&b.length<i;)0!==S(k,r)&&b.push(k),k=R.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function VB(n,e,t,r,i,o){const l=e.eventCache;if(null!=IN(r,t))return e;{let h,m;if(cn(t))if((0,O.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Km(e),S=zk(r,y instanceof Xt?y:Xt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,o)}else{const y=EN(r,Km(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,o)}else{const y=ln(t);if(".priority"===y){(0,O.hu)(1===cp(t),"Can't have a priority with additional path components");const b=l.getNode();m=e.serverCache.getNode();const S=OB(r,t,b,m);h=null!=S?n.filter.updatePriority(b,S):l.getNode()}else{const b=nr(t);let S;if(l.isCompleteForChild(y)){m=e.serverCache.getNode();const R=OB(r,t,l.getNode(),m);S=null!=R?l.getNode().getImmediateChild(y).updateChild(b,R):l.getNode().getImmediateChild(y)}else S=qk(r,y,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),y,S,b,i,o):l.getNode()}}return AC(e,h,l.isFullyInitialized()||cn(t),n.filter.filtersNodes())}}function CN(n,e,t,r,i,o,l,h){const m=e.serverCache;let y;const b=l?n.filter:n.filter.getIndexedFilter();if(cn(t))y=b.updateFullNode(m.getNode(),r,null);else if(b.filtersNodes()&&!m.isFiltered()){const k=m.getNode().updateChild(t,r);y=b.updateFullNode(m.getNode(),k,null)}else{const k=ln(t);if(!m.isCompleteForPath(t)&&cp(t)>1)return e;const B=nr(t),se=m.getNode().getImmediateChild(k).updateChild(B,r);y=".priority"===k?b.updatePriority(m.getNode(),se):b.updateChild(m.getNode(),k,se,B,LB,null)}const S=AB(e,y,m.isFullyInitialized()||cn(t),b.filtersNodes());return VB(n,S,t,i,new Wk(i,S,o),h)}function Zk(n,e,t,r,i,o,l){const h=e.eventCache;let m,y;const b=new Wk(i,e,o);if(cn(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,l),m=AC(e,y,!0,n.filter.filtersNodes());else{const S=ln(t);if(".priority"===S)y=n.filter.updatePriority(e.eventCache.getNode(),r),m=AC(e,y,h.isFullyInitialized(),h.isFiltered());else{const R=nr(t),k=h.getNode().getImmediateChild(S);let B;if(cn(R))B=r;else{const K=b.getCompleteChild(S);B=null!=K?".priority"===Tk(R)&&K.getChild(pB(R)).isEmpty()?K:K.updateChild(R,r):Xt.EMPTY_NODE}m=k.equals(B)?e:AC(e,n.filter.updateChild(h.getNode(),S,B,R,b,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function UB(n,e){return n.eventCache.isCompleteForChild(e)}function BB(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Kk(n,e,t,r,i,o,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,m=e;y=cn(t)?r:new dr(null).setTree(t,r);const b=e.serverCache.getNode();return y.children.inorderTraversal((S,R)=>{if(b.hasChild(S)){const B=BB(0,e.serverCache.getNode().getImmediateChild(S),R);m=CN(n,m,new Un(S),B,i,o,l,h)}}),y.children.inorderTraversal((S,R)=>{const k=!e.serverCache.isCompleteForChild(S)&&null===R.value;if(!b.hasChild(S)&&!k){const K=BB(0,e.serverCache.getNode().getImmediateChild(S),R);m=CN(n,m,new Un(S),K,i,o,l,h)}}),m}class H6{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Pk(r.getIndex()),o=function t6(n){return n.loadsAllData()?new Pk(n.getIndex()):n.hasLimit()?new e6(n):new TC(n)}(r);this.processor_=function P6(n){return{filter:n}}(o);const l=t.serverCache,h=t.eventCache,m=i.updateFullNode(Xt.EMPTY_NODE,l.getNode(),null),y=o.updateFullNode(Xt.EMPTY_NODE,h.getNode(),null),b=new dp(m,l.isFullyInitialized(),i.filtersNodes()),S=new dp(y,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=yN(S,b),this.eventGenerator_=new h6(this.query_)}get query(){return this.query_}}function G6(n,e){const t=Km(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!cn(e)&&!t.getImmediateChild(ln(e)).isEmpty())?t.getChild(e):null}function HB(n){return 0===n.eventRegistrations_.length}function jB(n,e,t){const r=[];if(t){(0,O.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const l=n.eventRegistrations_[o];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function $B(n,e,t,r){e.type===bi.MERGE&&null!==e.source.queryId&&((0,O.hu)(Km(n.viewCache_),"We should always have a full cache before handling merges"),(0,O.hu)(vN(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function k6(n,e,t,r,i){const o=new R6;let l,h;if(t.type===bi.OVERWRITE){const y=t;y.source.fromUser?l=Zk(n,e,y.path,y.snap,r,i,o):((0,O.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!cn(y.path),l=CN(n,e,y.path,y.snap,r,i,h,o))}else if(t.type===bi.MERGE){const y=t;y.source.fromUser?l=function L6(n,e,t,r,i,o,l){let h=e;return r.foreach((m,y)=>{const b=Nr(t,m);UB(e,ln(b))&&(h=Zk(n,h,b,y,i,o,l))}),r.foreach((m,y)=>{const b=Nr(t,m);UB(e,ln(b))||(h=Zk(n,h,b,y,i,o,l))}),h}(n,e,y.path,y.children,r,i,o):((0,O.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),l=Kk(n,e,y.path,y.children,r,i,h,o))}else if(t.type===bi.ACK_USER_WRITE){const y=t;l=y.revert?function B6(n,e,t,r,i,o){let l;if(null!=IN(r,t))return e;{const h=new Wk(r,e,i),m=e.eventCache.getNode();let y;if(cn(t)||".priority"===ln(t)){let b;if(e.serverCache.isFullyInitialized())b=EN(r,Km(e));else{const S=e.serverCache.getNode();(0,O.hu)(S instanceof Xt,"serverChildren would be complete if leaf node"),b=zk(r,S)}y=n.filter.updateFullNode(m,b,o)}else{const b=ln(t);let S=qk(r,b,e.serverCache);null==S&&e.serverCache.isCompleteForChild(b)&&(S=m.getImmediateChild(b)),y=null!=S?n.filter.updateChild(m,b,S,nr(t),h,o):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(m,b,Xt.EMPTY_NODE,nr(t),h,o):m,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=EN(r,Km(e)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,o)))}return l=e.serverCache.isFullyInitialized()||null!=IN(r,xn()),AC(e,y,l,n.filter.filtersNodes())}}(n,e,y.path,r,i,o):function V6(n,e,t,r,i,o,l){if(null!=IN(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(cn(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return CN(n,e,t,m.getNode().getChild(t),i,o,h,l);if(cn(t)){let y=new dr(null);return m.getNode().forEachChild(Pc,(b,S)=>{y=y.set(new Un(b),S)}),Kk(n,e,t,y,i,o,h,l)}return e}{let y=new dr(null);return r.foreach((b,S)=>{const R=Nr(t,b);m.isCompleteForPath(R)&&(y=y.set(b,m.getNode().getChild(R)))}),Kk(n,e,t,y,i,o,h,l)}}(n,e,y.path,y.affectedTree,r,i,o)}else{if(t.type!==bi.LISTEN_COMPLETE)throw(0,O.g5)("Unknown operation type: "+t.type);l=function U6(n,e,t,r,i){const o=e.serverCache;return VB(n,AB(e,o.getNode(),o.isFullyInitialized()||cn(t),o.isFiltered()),t,r,LB,i)}(n,e,t.path,r,o)}const m=o.getChanges();return function F6(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=vN(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(bB(vN(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,i,e,t,r);return function O6(n,e){(0,O.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,O.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,O.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,GB(n,o.changes,o.viewCache.eventCache.getNode(),null)}function GB(n,e,t,r){return function f6(n,e,t,r){const i=[],o=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(function X4(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),SC(n,i,"child_removed",e,r,t),SC(n,i,"child_added",e,r,t),SC(n,i,"child_moved",o,r,t),SC(n,i,"child_changed",e,r,t),SC(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let bN,DN;class zB{constructor(){this.views=new Map}}function Yk(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,O.hu)(null!=o,"SyncTree gave us an op for an invalid query."),$B(o,e,t,r)}{let o=[];for(const l of n.views.values())o=o.concat($B(l,e,t,r));return o}}function qB(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=EN(t,i?r:null),m=!1;h?m=!0:r instanceof Xt?(h=zk(t,r),m=!1):(h=Xt.EMPTY_NODE,m=!1);const y=yN(new dp(h,m,!1),new dp(r,i,!1));return new H6(e,y)}return l}function WB(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function fp(n,e){let t=null;for(const r of n.views.values())t=t||G6(r,e);return t}function ZB(n,e){return e._queryParams.loadsAllData()?TN(n):n.views.get(e._queryIdentifier)}function KB(n,e){return null!=ZB(n,e)}function pp(n){return null!=TN(n)}function TN(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let eq=1;class YB{constructor(e){this.listenProvider_=e,this.syncPointTree_=new dr(null),this.pendingWriteTree_=function N6(){return{visibleWrites:vl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Qk(n,e,t,r,i){return function _6(n,e,t,r,i){(0,O.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=NC(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Rw(n,new Zm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function gp(n,e,t=!1){const r=function v6(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function w6(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,O.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&E6(h,r.path)?i=!1:_u(r.path,h.path)&&(o=!0)),l--}return!!i&&(o?(function I6(n){n.visibleWrites=xB(n.allWrites,C6,xn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=NB(n.visibleWrites,r.path):as(r.children,m=>{n.visibleWrites=NB(n.visibleWrites,Nr(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let o=new dr(null);return null!=r.snap?o=o.set(xn(),!0):as(r.children,l=>{o=o.set(new Un(l),!0)}),Rw(n,new _N(r.path,o,t))}return[]}function MC(n,e,t){return Rw(n,new Zm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function SN(n,e,t,r,i=!1){const o=e._path,l=n.syncPointTree_.get(o);let h=[];if(l&&("default"===e._queryIdentifier||KB(l,e))){const m=function Q6(n,e,t,r){const i=e._queryIdentifier,o=[];let l=[];const h=pp(n);if("default"===i)for(const[m,y]of n.views.entries())l=l.concat(jB(y,t,r)),HB(y)&&(n.views.delete(m),y.query._queryParams.loadsAllData()||o.push(y.query));else{const m=n.views.get(i);m&&(l=l.concat(jB(m,t,r)),HB(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||o.push(m.query)))}return h&&!pp(n)&&o.push(new(function Z6(){return(0,O.hu)(bN,"Reference.ts has not been loaded"),bN}())(e._repo,e._path)),{removed:o,events:l}}(l,e,t,r);(function K6(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=m.removed;if(h=m.events,!i){const b=-1!==y.findIndex(R=>R._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(o,(R,k)=>pp(k));if(b&&!S){const R=n.syncPointTree_.subtree(o);if(!R.isEmpty()){const k=function aq(n){return n.fold((e,t,r)=>{if(t&&pp(t))return[TN(t)];{let i=[];return t&&(i=WB(t)),as(r,(o,l)=>{i=i.concat(l)}),i}})}(R);for(let B=0;B<k.length;++B){const K=k[B],se=K.query,ke=eH(n,K);n.listenProvider_.startListening(xC(se),RC(n,se),ke.hashFn,ke.onComplete)}}}!S&&y.length>0&&!r&&(b?n.listenProvider_.stopListening(xC(e),null):y.forEach(R=>{const k=n.queryToTagMap.get(NN(R));n.listenProvider_.stopListening(xC(R),k)}))}!function uq(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=NN(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,y)}return h}function QB(n,e,t,r){const i=Xk(n,r);if(null!=i){const o=e1(i),l=o.path,h=o.queryId,m=Co(l,e);return t1(n,l,new Zm(Bk(h),m,t))}return[]}function Jk(n,e,t,r=!1){const i=e._path;let o=null,l=!1;n.syncPointTree_.foreachOnPath(i,(R,k)=>{const B=Co(R,i);o=o||fp(k,B),l=l||pp(k)});let m,h=n.syncPointTree_.get(i);h?(l=l||pp(h),o=o||fp(h,xn())):(h=new zB,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=o?m=!0:(m=!1,o=Xt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((k,B)=>{const K=fp(B,xn());K&&(o=o.updateImmediateChild(k,K))}));const y=KB(h,e);if(!y&&!e._queryParams.loadsAllData()){const R=NN(e);(0,O.hu)(!n.queryToTagMap.has(R),"View does not exist, but we have a tag");const k=function lq(){return eq++}();n.queryToTagMap.set(R,k),n.tagToQueryMap.set(k,R)}let S=function Y6(n,e,t,r,i,o){const l=qB(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function z6(n,e){n.eventRegistrations_.push(e)}(l,t),function q6(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(cr,(o,l)=>{r.push(Sw(o,l))}),t.isFullyInitialized()&&r.push(bB(t.getNode())),GB(n,r,t.getNode(),e)}(l,t)}(h,e,t,wN(n.pendingWriteTree_,i),o,m);if(!y&&!l&&!r){const R=ZB(h,e);S=S.concat(function cq(n,e,t){const r=e._path,i=RC(n,e),o=eH(n,t),l=n.listenProvider_.startListening(xC(e),i,o.hashFn,o.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,O.hu)(!pp(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((y,b,S)=>{if(!cn(y)&&b&&pp(b))return[TN(b).query];{let R=[];return b&&(R=R.concat(WB(b).map(k=>k.query))),as(S,(k,B)=>{R=R.concat(B)}),R}});for(let y=0;y<m.length;++y){const b=m[y];n.listenProvider_.stopListening(xC(b),RC(n,b))}}return l}(n,e,R))}return S}function AN(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(l,h)=>{const y=fp(h,Co(l,e));if(y)return y});return PB(i,e,o,t,!0)}function Rw(n,e){return JB(e,n.syncPointTree_,null,wN(n.pendingWriteTree_,xn()))}function JB(n,e,t,r){if(cn(n.path))return XB(n,e,t,r);{const i=e.get(xn());null==t&&null!=i&&(t=fp(i,xn()));let o=[];const l=ln(n.path),h=n.operationForChild(l),m=e.children.get(l);if(m&&h){const y=t?t.getImmediateChild(l):null,b=kB(r,l);o=o.concat(JB(h,m,y,b))}return i&&(o=o.concat(Yk(i,n,r,t))),o}}function XB(n,e,t,r){const i=e.get(xn());null==t&&null!=i&&(t=fp(i,xn()));let o=[];return e.children.inorderTraversal((l,h)=>{const m=t?t.getImmediateChild(l):null,y=kB(r,l),b=n.operationForChild(l);b&&(o=o.concat(XB(b,h,m,y)))}),i&&(o=o.concat(Yk(i,n,r,t))),o}function eH(n,e){const t=e.query,r=RC(n,t);return{hashFn:()=>(function j6(n){return n.viewCache_.serverCache.getNode()}(e)||Xt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function iq(n,e,t){const r=Xk(n,t);if(r){const i=e1(r),o=i.path,l=i.queryId,h=Co(o,e);return t1(n,o,new DC(Bk(l),h))}return[]}(n,t._path,r):function rq(n,e){return Rw(n,new DC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function n4(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return SN(n,t,null,o)}}}}function RC(n,e){const t=NN(e);return n.queryToTagMap.get(t)}function NN(n){return n._path.toString()+"$"+n._queryIdentifier}function Xk(n,e){return n.tagToQueryMap.get(e)}function e1(n){const e=n.indexOf("$");return(0,O.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Un(n.substr(0,e))}}function t1(n,e,t){const r=n.syncPointTree_.get(e);return(0,O.hu)(r,"Missing sync point for query tag that we're tracking"),Yk(r,t,wN(n.pendingWriteTree_,e),null)}function xC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function X6(){return(0,O.hu)(DN,"Reference.ts has not been loaded"),DN}())(n._repo,n._path):n}class n1{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new n1(t)}node(){return this.node_}}class r1{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Nr(this.path_,e);return new r1(this.syncTree_,t)}node(){return AN(this.syncTree_,this.path_)}}const dq=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},tH=function(n,e,t){return n&&"object"==typeof n?((0,O.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?hq(n[".sv"],e,t):"object"==typeof n[".sv"]?fq(n[".sv"],e):void(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},hq=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,O.hu)(!1,"Unexpected server value: "+n)},fq=function(n,e,t){n.hasOwnProperty("increment")||(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,O.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,O.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},nH=function(n,e,t,r){return s1(e,new r1(t,n),r)},i1=function(n,e,t){return s1(n,new n1(e),t)};function s1(n,e,t){const r=n.getPriority().val(),i=tH(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const l=n,h=tH(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new Tw(h,Br(i)):n}{const l=n;return o=l,i!==l.getPriority().val()&&(o=o.updatePriority(new Tw(i))),l.forEachChild(cr,(h,m)=>{const y=s1(m,e.getImmediateChild(h),t);y!==m&&(o=o.updateImmediateChild(h,y))}),o}}class o1{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function MN(n,e){let t=e instanceof Un?e:new Un(e),r=n,i=ln(t);for(;null!==i;){const o=(0,O.DV)(r.node.children,i)||{children:{},childCount:0};r=new o1(i,r,o),t=nr(t),i=ln(t)}return r}function Qm(n){return n.node.value}function a1(n,e){n.node.value=e,u1(n)}function rH(n){return n.node.childCount>0}function RN(n,e){as(n.node.children,(t,r)=>{e(new o1(t,n,r))})}function iH(n,e,t,r){t&&!r&&e(n),RN(n,i=>{iH(i,e,!0,r)}),t&&r&&e(n)}function PC(n){return new Un(null===n.parent?n.name:PC(n.parent)+"/"+n.name)}function u1(n){null!==n.parent&&function mq(n,e,t){const r=function pq(n){return void 0===Qm(n)&&!rH(n)}(t),i=(0,O.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,u1(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,u1(n))}(n.parent,n.name,n)}const _q=/[\[\].#$\/\u0000-\u001F\u007F]/,yq=/[\[\].#$\u0000-\u001F\u007F]/,l1=10485760,xN=function(n){return"string"==typeof n&&0!==n.length&&!_q.test(n)},sH=function(n){return"string"==typeof n&&0!==n.length&&!yq.test(n)},OC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!sN(n)||n&&"object"==typeof n&&(0,O.r3)(n,".sv")},Oc=function(n,e,t,r){r&&void 0===e||kC((0,O.gK)(n,"value"),e,t)},kC=function(n,e,t){const r=t instanceof Un?new k4(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+qm(r));if("function"==typeof e)throw new Error(n+"contains a function "+qm(r)+" with contents = "+e.toString());if(sN(e))throw new Error(n+"contains "+e.toString()+" "+qm(r));if("string"==typeof e&&e.length>l1/3&&(0,O.ug)(e)>l1)throw new Error(n+"contains a string greater than "+l1+" utf8 bytes "+qm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(as(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(o=!0,!xN(l)))throw new Error(n+" contains an invalid key ("+l+") "+qm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function F4(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,O.ug)(e),gB(n)})(r,l),kC(n,h,r),function L4(n){const e=n.parts_.pop();n.byteLength_-=(0,O.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+qm(r)+" in addition to actual children.")}},oH=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,O.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];as(e,(l,h)=>{const m=new Un(l);if(kC(i,h,Nr(t,m)),".priority"===Tk(m)&&!OC(h))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=vC(r);for(let l=0;l<o.length;l++)if((".priority"!==o[l]||l!==o.length-1)&&!xN(o[l]))throw new Error(n+"contains an invalid key ("+o[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(O4);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&_u(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},c1=function(n,e,t){if(!t||void 0!==e){if(sN(e))throw new Error((0,O.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!OC(e))throw new Error((0,O.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},FC=function(n,e,t,r){if(!(r&&void 0===t||xN(t)))throw new Error((0,O.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},LC=function(n,e,t,r){if(!(r&&void 0===t||sH(t)))throw new Error((0,O.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Eq=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),LC(n,e,t,r)},yu=function(n,e){if(".info"===ln(e))throw new Error(n+" failed = Can't modify data under /.info/")},aH=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!xN(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),sH(n)}(t))throw new Error((0,O.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Iq{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function PN(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!Dk(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function uH(n,e,t){PN(n,t),lH(n,r=>Dk(r,e))}function Ia(n,e,t){PN(n,t),lH(n,r=>_u(r,e)||_u(e,r))}function lH(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Cq(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Cq(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Gm&&os("event: "+t.toString()),Cw(r)}}}const cH="repo_interrupt",bq=25;class Tq{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Iq,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=mN(),this.transactionQueueTree_=new o1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dH(n){const t=n.infoData_.getNode(new Un(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function VC(n){return dq({timestamp:dH(n)})}function hH(n,e,t,r,i){n.dataUpdateCount++;const o=new Un(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const m=(0,O.UI)(t,y=>Br(y));l=function sq(n,e,t,r){const i=Xk(n,r);if(i){const o=e1(i),l=o.path,h=o.queryId,m=Co(l,e),y=dr.fromObject(t);return t1(n,l,new Nw(Bk(h),m,y))}return[]}(n.serverSyncTree_,o,m,i)}else{const m=Br(t);l=QB(n.serverSyncTree_,o,m,i)}else if(r){const m=(0,O.UI)(t,y=>Br(y));l=function nq(n,e,t){const r=dr.fromObject(t);return Rw(n,new Nw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,m)}else{const m=Br(t);l=MC(n.serverSyncTree_,o,m)}let h=o;l.length>0&&(h=Pw(n,o)),Ia(n.eventQueue_,h,l)}function fH(n,e){d1(n,"connected",e),!1===e&&function Mq(n){xw(n,"onDisconnectEvents");const e=VC(n),t=mN();Lk(n.onDisconnect_,xn(),(i,o)=>{const l=nH(i,o,n.serverSyncTree_,e);Aw(t,i,l)});let r=[];Lk(t,xn(),(i,o)=>{r=r.concat(MC(n.serverSyncTree_,i,o));const l=g1(n,i);Pw(n,l)}),n.onDisconnect_=mN(),Ia(n.eventQueue_,xn(),r)}(n)}function d1(n,e,t){const r=new Un("/.info/"+e),i=Br(t);n.infoData_.updateSnapshot(r,i);const o=MC(n.infoSyncTree_,r,i);Ia(n.eventQueue_,r,o)}function ON(n){return n.nextWriteId_++}function h1(n,e,t,r,i){xw(n,"set",{path:e.toString(),value:t,priority:r});const o=VC(n),l=Br(t,r),h=AN(n.serverSyncTree_,e),m=i1(l,h,o),y=ON(n),b=Qk(n.serverSyncTree_,e,m,y,!0);PN(n.eventQueue_,b),n.server_.put(e.toString(),l.val(!0),(R,k)=>{const B="ok"===R;B||Ks("set at "+e+" failed: "+R);const K=gp(n.serverSyncTree_,y,!B);Ia(n.eventQueue_,e,K),mp(0,i,R,k)});const S=g1(n,e);Pw(n,S),Ia(n.eventQueue_,S,[])}function Rq(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Fk(n.onDisconnect_,e),mp(0,t,r,i)})}function pH(n,e,t,r){const i=Br(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,l)=>{"ok"===o&&Aw(n.onDisconnect_,e,i),mp(0,r,o,l)})}function f1(n,e,t){let r;r=".info"===ln(e._path)?SN(n.infoSyncTree_,e,t):SN(n.serverSyncTree_,e,t),uH(n.eventQueue_,e._path,r)}function gH(n){n.persistentConnection_&&n.persistentConnection_.interrupt(cH)}function xw(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),os(t,...e)}function mp(n,e,t,r){e&&Cw(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const l=new Error(o);l.code=i,e(l)}})}function p1(n,e,t){return AN(n.serverSyncTree_,e,t)||Xt.EMPTY_NODE}function kN(n,e=n.transactionQueueTree_){if(e||FN(n,e),Qm(e)){const t=_H(n,e);(0,O.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function Lq(n,e,t){const r=t.map(y=>y.currentWriteId),i=p1(n,e,r);let o=i;const l=i.hash();for(let y=0;y<t.length;y++){const b=t[y];(0,O.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const S=Co(e,b.path);o=o.updateChild(S,b.currentOutputSnapshotRaw)}const h=o.val(!0),m=e;n.server_.put(m.toString(),h,y=>{xw(n,"transaction put response",{path:m.toString(),status:y});let b=[];if("ok"===y){const S=[];for(let R=0;R<t.length;R++)t[R].status=2,b=b.concat(gp(n.serverSyncTree_,t[R].currentWriteId)),t[R].onComplete&&S.push(()=>t[R].onComplete(null,!0,t[R].currentOutputSnapshotResolved)),t[R].unwatcher();FN(n,MN(n.transactionQueueTree_,e)),kN(n,n.transactionQueueTree_),Ia(n.eventQueue_,e,b);for(let R=0;R<S.length;R++)Cw(S[R])}else{if("datastale"===y)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Ks("transaction at "+m.toString()+" failed: "+y);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=y}Pw(n,e)}},l)}(n,PC(e),t)}else rH(e)&&RN(e,t=>{kN(n,t)})}function Pw(n,e){const t=mH(n,e),r=PC(t);return function Vq(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],y=Co(t,m.path);let S,b=!1;if((0,O.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)b=!0,S=m.abortReason,i=i.concat(gp(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=bq)b=!0,S="maxretry",i=i.concat(gp(n.serverSyncTree_,m.currentWriteId,!0));else{const R=p1(n,m.path,l);m.currentInputSnapshot=R;const k=e[h].update(R.val());if(void 0!==k){kC("transaction failed: Data returned ",k,m.path);let B=Br(k);"object"==typeof k&&null!=k&&(0,O.r3)(k,".priority")||(B=B.updatePriority(R.getPriority()));const se=m.currentWriteId,ke=VC(n),We=i1(B,R,ke);m.currentOutputSnapshotRaw=B,m.currentOutputSnapshotResolved=We,m.currentWriteId=ON(n),l.splice(l.indexOf(se),1),i=i.concat(Qk(n.serverSyncTree_,m.path,We,m.currentWriteId,m.applyLocally)),i=i.concat(gp(n.serverSyncTree_,se,!0))}else b=!0,S="nodata",i=i.concat(gp(n.serverSyncTree_,m.currentWriteId,!0))}Ia(n.eventQueue_,t,i),i=[],b&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}FN(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Cw(r[h]);kN(n,n.transactionQueueTree_)}(n,_H(n,t),r),r}function mH(n,e){let t,r=n.transactionQueueTree_;for(t=ln(e);null!==t&&void 0===Qm(r);)r=MN(r,t),t=ln(e=nr(e));return r}function _H(n,e){const t=[];return yH(n,e,t),t.sort((r,i)=>r.order-i.order),t}function yH(n,e,t){const r=Qm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);RN(e,i=>{yH(n,i,t)})}function FN(n,e){const t=Qm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,a1(e,t.length>0?t:void 0)}RN(e,r=>{FN(n,r)})}function g1(n,e){const t=PC(mH(n,e)),r=MN(n.transactionQueueTree_,e);return function gq(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{m1(n,i)}),m1(n,r),iH(r,i=>{m1(n,i)}),t}function m1(n,e){const t=Qm(e);if(t){const r=[];let i=[],o=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,O.hu)(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):((0,O.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(gp(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===o?a1(e,void 0):t.length=o+1,Ia(n.eventQueue_,PC(e),i);for(let l=0;l<r.length;l++)Cw(r[l])}}const _1=function(n,e){const t=Hq(n),r=t.namespace;return"firebase.com"===t.domain&&xc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&xc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ks("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new vk(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Un(t.pathString)}},Hq=function(n){let e="",t="",r="",i="",o="",l=!0,h="https",m=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let b=n.indexOf("/");-1===b&&(b=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(b,S)),b<S&&(i=function Uq(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,S)));const R=function Bq(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ks(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));y=e.indexOf(":"),y>=0?(l="https"===h||"wss"===h,m=parseInt(e.substring(y+1),10)):y=e.length;const k=e.slice(0,y);if("localhost"===k.toLowerCase())t="localhost";else if(k.split(".").length<=2)t=k;else{const B=e.indexOf(".");r=e.substring(0,B).toLowerCase(),t=e.substring(B+1),o=r}"ns"in R&&(o=R.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:o}},vH="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",jq=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const o=new Array(8);for(i=7;i>=0;i--)o[i]=vH.charAt(t%64),t=Math.floor(t/64);(0,O.hu)(0===t,"Cannot push at time == 0");let l=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=vH.charAt(e[i]);return(0,O.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class wH{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,O.Wl)(this.snapshot.exportVal())}}class EH{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class y1{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,O.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class IH{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new O.BH;return Rq(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){yu("OnDisconnect.remove",this._path);const e=new O.BH;return pH(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){yu("OnDisconnect.set",this._path),Oc("OnDisconnect.set",e,this._path,!1);const t=new O.BH;return pH(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){yu("OnDisconnect.setWithPriority",this._path),Oc("OnDisconnect.setWithPriority",e,this._path,!1),c1("OnDisconnect.setWithPriority",t,!1);const r=new O.BH;return function xq(n,e,t,r,i){const o=Br(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(l,h)=>{"ok"===l&&Aw(n.onDisconnect_,e,o),mp(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){yu("OnDisconnect.update",this._path),oH("OnDisconnect.update",e,this._path,!1);const t=new O.BH;return function Pq(n,e,t,r){if((0,O.xb)(t))return os("onDisconnect().update() called with empty data.  Don't do anything."),void mp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{"ok"===i&&as(t,(l,h)=>{const m=Br(h);Aw(n.onDisconnect_,Nr(e,l),m)}),mp(0,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Qo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return cn(this._path)?null:Tk(this._path)}get ref(){return new vu(this._repo,this._path)}get _queryIdentifier(){const e=DB(this._queryParams),t=_k(e);return"{}"===t?"default":t}get _queryObject(){return DB(this._queryParams)}isEqual(e){if(!((e=(0,O.m9)(e))instanceof Qo))return!1;const t=this._repo===e._repo,r=Dk(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function P4(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function LN(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function _p(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Pc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==up)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==uh)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===cr){if(null!=e&&!OC(e)||null!=t&&!OC(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,O.hu)(n.getIndex()instanceof Rk||n.getIndex()===xk,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function VN(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class vu extends Qo{constructor(e,t){super(e,t,new fN,!1)}get parent(){const e=pB(this._path);return null===e?null:new vu(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Jm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Un(e),r=Xm(this.ref,e);return new Jm(this._node.getChild(t),r,cr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Jm(i,Xm(this.ref,r),cr)))}hasChild(e){const t=new Un(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function CH(n,e){return(n=(0,O.m9)(n))._checkNotDeleted("ref"),void 0!==e?Xm(n._root,e):n._root}function bH(n,e){(n=(0,O.m9)(n))._checkNotDeleted("refFromURL");const t=_1(e,n._repo.repoInfo_.nodeAdmin);aH("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&xc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),CH(n,t.path.toString())}function Xm(n,e){return null===ln((n=(0,O.m9)(n))._path)?Eq("child","path",e,!1):LC("child","path",e,!1),new vu(n._repo,Nr(n._path,e))}function v1(n,e){n=(0,O.m9)(n),yu("set",n._path),Oc("set",e,n._path,!1);const t=new O.BH;return h1(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Wq(n,e){oH("update",e,n._path,!1);const t=new O.BH;return function Nq(n,e,t,r){xw(n,"update",{path:e.toString(),value:t});let i=!0;const o=VC(n),l={};if(as(t,(h,m)=>{i=!1,l[h]=nH(Nr(e,h),Br(m),n.serverSyncTree_,o)}),i)os("update() called with empty data.  Don't do anything."),mp(0,r,"ok",void 0);else{const h=ON(n),m=function tq(n,e,t,r){!function y6(n,e,t,r){(0,O.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=jk(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=dr.fromObject(t);return Rw(n,new Nw({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);PN(n.eventQueue_,m),n.server_.merge(e.toString(),t,(y,b)=>{const S="ok"===y;S||Ks("update at "+e+" failed: "+y);const R=gp(n.serverSyncTree_,h,!S),k=R.length>0?Pw(n,e):e;Ia(n.eventQueue_,k,R),mp(0,r,y,b)}),as(t,y=>{const b=g1(n,Nr(e,y));Pw(n,b)}),Ia(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Zq(n){n=(0,O.m9)(n);const e=new y1(()=>{}),t=new UC(e);return function Aq(n,e,t){const r=function oq(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,b)=>{const S=Co(y,t);r=r||fp(b,S)});let i=n.syncPointTree_.get(t);i?r=r||fp(i,xn()):(i=new zB,n.syncPointTree_=n.syncPointTree_.set(t,i));const o=null!=r,l=o?new dp(r,!0,!1):null;return function $6(n){return vN(n.viewCache_)}(qB(i,e,wN(n.pendingWriteTree_,e._path),o?l.getNode():Xt.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const o=Br(i).withIndex(e._queryParams.getIndex());let l;if(Jk(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=MC(n.serverSyncTree_,e._path,o);else{const h=RC(n.serverSyncTree_,e);l=QB(n.serverSyncTree_,e._path,o,h)}return Ia(n.eventQueue_,e._path,l),SN(n.serverSyncTree_,e,t,null,!0),o},i=>(xw(n,"get for query "+(0,O.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Jm(r,new vu(n._repo,n._path),n._queryParams.getIndex()))}class UC{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new wH("value",this,new Jm(e.snapshotNode,new vu(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new EH(this,e,t):null}matches(e){return e instanceof UC&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class UN{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new EH(this,e,t):null}createEvent(e,t){(0,O.hu)(null!=e.childName,"Child events should have a childName.");const r=Xm(new vu(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new wH(e.type,this,new Jm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof UN&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function BC(n,e,t,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const m=t,y=(b,S)=>{f1(n._repo,n,h),m(b,S)};y.userCallback=t.userCallback,y.context=t.context,t=y}const l=new y1(t,o||void 0),h="value"===e?new UC(l):new UN(e,l);return function Oq(n,e,t){let r;r=".info"===ln(e._path)?Jk(n.infoSyncTree_,e,t):Jk(n.serverSyncTree_,e,t),uH(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>f1(n._repo,n,h)}function w1(n,e,t,r){return BC(n,"value",e,t,r)}function TH(n,e,t,r){return BC(n,"child_added",e,t,r)}function DH(n,e,t,r){return BC(n,"child_changed",e,t,r)}function SH(n,e,t,r){return BC(n,"child_moved",e,t,r)}function AH(n,e,t,r){return BC(n,"child_removed",e,t,r)}function NH(n,e,t){let r=null;const i=t?new y1(t):null;"value"===e?r=new UC(i):e&&(r=new UN(e,i)),f1(n._repo,n,r)}class wl{}class MH extends wl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Oc("endAt",this._value,e._path,!0);const t=kk(e._queryParams,this._value,this._key);if(VN(t),_p(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Qo(e._repo,e._path,t,e._orderByCalled)}}class Yq extends wl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Oc("endBefore",this._value,e._path,!1);const t=function s6(n,e,t){let r;return r=kk(n,e,n.index_===Pc||t?t:up),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(VN(t),_p(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Qo(e._repo,e._path,t,e._orderByCalled)}}class RH extends wl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Oc("startAt",this._value,e._path,!0);const t=Ok(e._queryParams,this._value,this._key);if(VN(t),_p(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Qo(e._repo,e._path,t,e._orderByCalled)}}class Xq extends wl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Oc("startAfter",this._value,e._path,!1);const t=function i6(n,e,t){let r;return r=Ok(n,e,n.index_===Pc||t?t:uh),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(VN(t),_p(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Qo(e._repo,e._path,t,e._orderByCalled)}}class tW extends wl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Qo(e._repo,e._path,function n6(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class rW extends wl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Qo(e._repo,e._path,function r6(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class sW extends wl{constructor(e){super(),this._path=e}_apply(e){LN(e,"orderByChild");const t=new Un(this._path);if(cn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Rk(t),i=pN(e._queryParams,r);return _p(i),new Qo(e._repo,e._path,i,!0)}}class aW extends wl{_apply(e){LN(e,"orderByKey");const t=pN(e._queryParams,Pc);return _p(t),new Qo(e._repo,e._path,t,!0)}}class lW extends wl{_apply(e){LN(e,"orderByPriority");const t=pN(e._queryParams,cr);return _p(t),new Qo(e._repo,e._path,t,!0)}}class dW extends wl{_apply(e){LN(e,"orderByValue");const t=pN(e._queryParams,xk);return _p(t),new Qo(e._repo,e._path,t,!0)}}class fW extends wl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Oc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new MH(this._value,this._key)._apply(new RH(this._value,this._key)._apply(e))}}function El(n,...e){let t=(0,O.m9)(n);for(const r of e)t=r._apply(t);return t}(function W6(n){(0,O.hu)(!bN,"__referenceConstructor has already been defined"),bN=n})(vu),function J6(n){(0,O.hu)(!DN,"__referenceConstructor has already been defined"),DN=n}(vu);const E1={};function PH(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||xc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),os("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,y,l=_1(o,i),h=l.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(m=!0,o=`http://${y}?ns=${h.namespace}`,l=_1(o,i),h=l.repoInfo):m=!l.repoInfo.secure;const b=i&&m?new yC(yC.OWNER):new u4(n.name,n.options,e);aH("Invalid Firebase Database URL",l),cn(l.path)||xc("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function yW(n,e,t,r){let i=E1[e.name];i||(i={},E1[e.name]=i);let o=i[n.toURLString()];return o&&xc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Tq(n,false,t,r),i[n.toURLString()]=o,o}(h,n,b,new a4(n.name,t));return new wW(S,n)}class wW{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Dq(n,e,t){if(n.stats_=Ik(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new gN(n.repoInfo_,(r,i,o,l)=>{hH(n,r,i,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>fH(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,O.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Wm(n.repoInfo_,e,(r,i,o,l)=>{hH(n,r,i,o,l)},r=>{fH(n,r)},r=>{!function Sq(n,e){as(e,(t,r)=>{d1(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function d4(n,e){const t=n.toString();return Ek[t]||(Ek[t]=e()),Ek[t]}(n.repoInfo_,()=>new d6(n.stats_,n.server_)),n.infoData_=new o6,n.infoSyncTree_=new YB({startListening:(r,i,o,l)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=MC(n.infoSyncTree_,r._path,m),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),d1(n,"connected",!1),n.serverSyncTree_=new YB({startListening:(r,i,o,l)=>(n.server_.listen(r,o,i,(h,m)=>{const y=l(h,m);Ia(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vu(this._repo,xn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function _W(n,e){const t=E1[e];(!t||t[n.key]!==n)&&xc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),gH(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&xc("Cannot call "+e+" on a deleted database.")}}function OH(){nB.IS_TRANSPORT_INITIALIZED&&Ks("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function EW(){OH(),lp.forceDisallow()}function IW(){OH(),bw.forceDisallow(),lp.forceAllow()}function TW(n,e){FU(n,e)}const SW={".sv":"timestamp"};class MW{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Wm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Wm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function DW(n){RU(ei.SDK_VERSION),(0,ei._registerComponent)(new Xi.wA("database",(e,{instanceIdentifier:t})=>PH(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ei.registerVersion)(NU,"0.14.4",n),(0,ei.registerVersion)(NU,"0.14.4","esm2017")}();const OW=new es.Yd("@firebase/database-compat"),FH=function(n){OW.warn("FIREBASE WARNING: "+n)};class LW{constructor(e){this._delegate=e}cancel(e){(0,O.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,O.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,O.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,O.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,O.Dv)("OnDisconnect.set",1,2,arguments.length),(0,O.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,O.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if((0,O.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,FH("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,O.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class VW{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,O.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class yp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,O.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,O.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,O.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,O.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,O.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),LC("DataSnapshot.child","path",e,!1),new yp(this._database,this._delegate.child(e))}hasChild(e){return(0,O.Dv)("DataSnapshot.hasChild",1,1,arguments.length),LC("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,O.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,O.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,O.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new yp(this._database,t)))}hasChildren(){return(0,O.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,O.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,O.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ca(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ns{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;(0,O.Dv)("Query.on",2,4,arguments.length),(0,O.Wj)("Query.on","callback",t,!1);const l=Ns.getCancelAndContextArgs_("Query.on",r,i),h=(y,b)=>{t.call(l.context,new yp(this.database,y),b)};h.userCallback=t,h.context=l.context;const m=null===(o=l.cancel)||void 0===o?void 0:o.bind(l.context);switch(e){case"value":return w1(this._delegate,h,m),t;case"child_added":return TH(this._delegate,h,m),t;case"child_removed":return AH(this._delegate,h,m),t;case"child_changed":return DH(this._delegate,h,m),t;case"child_moved":return SH(this._delegate,h,m),t;default:throw new Error((0,O.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,O.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,O.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,O.Wj)("Query.off","callback",t,!0),(0,O.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,NH(this._delegate,e,i)}else NH(this._delegate,e)}get(){return Zq(this._delegate).then(e=>new yp(this.database,e))}once(e,t,r,i){(0,O.Dv)("Query.once",1,4,arguments.length),(0,O.Wj)("Query.once","callback",t,!0);const o=Ns.getCancelAndContextArgs_("Query.once",r,i),l=new O.BH,h=(y,b)=>{const S=new yp(this.database,y);t&&t.call(o.context,S,b),l.resolve(S)};h.userCallback=t,h.context=o.context;const m=y=>{o.cancel&&o.cancel.call(o.context,y),l.reject(y)};switch(e){case"value":w1(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":TH(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":AH(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":DH(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":SH(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,O.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,O.Dv)("Query.limitToFirst",1,1,arguments.length),new Ns(this.database,El(this._delegate,function nW(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new tW(n)}(e)))}limitToLast(e){return(0,O.Dv)("Query.limitToLast",1,1,arguments.length),new Ns(this.database,El(this._delegate,function iW(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new rW(n)}(e)))}orderByChild(e){return(0,O.Dv)("Query.orderByChild",1,1,arguments.length),new Ns(this.database,El(this._delegate,function oW(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return LC("orderByChild","path",n,!1),new sW(n)}(e)))}orderByKey(){return(0,O.Dv)("Query.orderByKey",0,0,arguments.length),new Ns(this.database,El(this._delegate,function uW(){return new aW}()))}orderByPriority(){return(0,O.Dv)("Query.orderByPriority",0,0,arguments.length),new Ns(this.database,El(this._delegate,function cW(){return new lW}()))}orderByValue(){return(0,O.Dv)("Query.orderByValue",0,0,arguments.length),new Ns(this.database,El(this._delegate,function hW(){return new dW}()))}startAt(e=null,t){return(0,O.Dv)("Query.startAt",0,2,arguments.length),new Ns(this.database,El(this._delegate,function Jq(n=null,e){return FC("startAt","key",e,!0),new RH(n,e)}(e,t)))}startAfter(e=null,t){return(0,O.Dv)("Query.startAfter",0,2,arguments.length),new Ns(this.database,El(this._delegate,function eW(n,e){return FC("startAfter","key",e,!0),new Xq(n,e)}(e,t)))}endAt(e=null,t){return(0,O.Dv)("Query.endAt",0,2,arguments.length),new Ns(this.database,El(this._delegate,function Kq(n,e){return FC("endAt","key",e,!0),new MH(n,e)}(e,t)))}endBefore(e=null,t){return(0,O.Dv)("Query.endBefore",0,2,arguments.length),new Ns(this.database,El(this._delegate,function Qq(n,e){return FC("endBefore","key",e,!0),new Yq(n,e)}(e,t)))}equalTo(e,t){return(0,O.Dv)("Query.equalTo",1,2,arguments.length),new Ns(this.database,El(this._delegate,function pW(n,e){return FC("equalTo","key",e,!0),new fW(n,e)}(e,t)))}toString(){return(0,O.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,O.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,O.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Ns))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,O.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,O.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,O.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Ca(this.database,new vu(this._delegate._repo,this._delegate._path))}}class Ca extends Ns{constructor(e,t){super(e,new Qo(t._repo,t._path,new fN,!1)),this.database=e,this._delegate=t}getKey(){return(0,O.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,O.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ca(this.database,Xm(this._delegate,e))}getParent(){(0,O.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ca(this.database,e):null}getRoot(){return(0,O.Dv)("Reference.root",0,0,arguments.length),new Ca(this.database,this._delegate.root)}set(e,t){(0,O.Dv)("Reference.set",1,2,arguments.length),(0,O.Wj)("Reference.set","onComplete",t,!0);const r=v1(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,O.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,FH("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}yu("Reference.update",this._delegate._path),(0,O.Wj)("Reference.update","onComplete",t,!0);const r=Wq(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,O.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function qq(n,e,t){if(yu("setWithPriority",n._path),Oc("setWithPriority",e,n._path,!1),c1("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new O.BH;return h1(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,O.Dv)("Reference.remove",0,1,arguments.length),(0,O.Wj)("Reference.remove","onComplete",e,!0);const t=function Gq(n){return yu("remove",n._path),v1(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,O.Dv)("Reference.transaction",1,3,arguments.length),(0,O.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,O.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,O.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function RW(n,e,t){var r;if(n=(0,O.m9)(n),yu("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,o=new O.BH,h=w1(n,()=>{});return function Fq(n,e,t,r,i,o){xw(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:PU(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=p1(n,e,void 0);l.currentInputSnapshot=h;const m=l.update(h.val());if(void 0===m)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{kC("transaction failed: Data returned ",m,l.path),l.status=0;const y=MN(n.transactionQueueTree_,e),b=Qm(y)||[];let S;b.push(l),a1(y,b),"object"==typeof m&&null!==m&&(0,O.r3)(m,".priority")?(S=(0,O.DV)(m,".priority"),(0,O.hu)(OC(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(AN(n.serverSyncTree_,e)||Xt.EMPTY_NODE).getPriority().val();const R=VC(n),k=Br(m,S),B=i1(k,h,R);l.currentOutputSnapshotRaw=k,l.currentOutputSnapshotResolved=B,l.currentWriteId=ON(n);const K=Qk(n.serverSyncTree_,e,B,l.currentWriteId,l.applyLocally);Ia(n.eventQueue_,e,K),kN(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,y,b)=>{let S=null;m?o.reject(m):(S=new Jm(b,new vu(n._repo,n._path),cr),o.resolve(new MW(y,S)))},h,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new VW(o.committed,new yp(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){(0,O.Dv)("Reference.setPriority",1,2,arguments.length),(0,O.Wj)("Reference.setPriority","onComplete",t,!0);const r=function zq(n,e){n=(0,O.m9)(n),yu("setPriority",n._path),c1("setPriority",e,!1);const t=new O.BH;return h1(n._repo,Nr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,O.Dv)("Reference.push",0,2,arguments.length),(0,O.Wj)("Reference.push","onComplete",t,!0);const r=function $q(n,e){n=(0,O.m9)(n),yu("push",n._path),Oc("push",e,n._path,!0);const t=dH(n._repo),r=jq(t),i=Xm(n,r),o=Xm(n,r);let l;return l=null!=e?v1(o,e).then(()=>o):Promise.resolve(o),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Ca(this.database,l));t&&i.then(()=>t(null),l=>t(l));const o=new Ca(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return yu("Reference.onDisconnect",this._delegate._path),new LW(new IH(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class HC{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:EW,forceLongPolling:IW}}useEmulator(e,t,r={}){!function kH(n,e,t,r={}){(n=(0,O.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&xc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&xc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new yC(yC.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,O.Sg)(r.mockUserToken,n.app.options.projectId);o=new yC(l)}!function mW(n,e,t,r){n.repoInfo_=new vk(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(this._delegate,e,t,r)}ref(e){if((0,O.Dv)("database.ref",0,1,arguments.length),e instanceof Ca){const t=bH(this._delegate,e.toString());return new Ca(this,t)}{const t=CH(this._delegate,e);return new Ca(this,t)}}refFromURL(e){(0,O.Dv)("database.refFromURL",1,1,arguments.length);const r=bH(this._delegate,e);return new Ca(this,r)}goOffline(){return(0,O.Dv)("database.goOffline",0,0,arguments.length),function CW(n){(n=(0,O.m9)(n))._checkNotDeleted("goOffline"),gH(n._repo)}(this._delegate)}goOnline(){return(0,O.Dv)("database.goOnline",0,0,arguments.length),function bW(n){(n=(0,O.m9)(n))._checkNotDeleted("goOnline"),function kq(n){n.persistentConnection_&&n.persistentConnection_.resume(cH)}(n._repo)}(this._delegate)}}HC.ServerValue={TIMESTAMP:function AW(){return SW}(),increment:n=>function NW(n){return{".sv":{increment:n}}}(n)};var BW=Object.freeze({__proto__:null,initStandalone:function UW({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){RU(t);const l=new Xi.zt("auth-internal",new Xi.H0("database-standalone"));return l.setComponent(new Xi.wA("auth-internal",()=>r,"PRIVATE")),{instance:new HC(PH(n,l,void 0,e,o),n),namespace:i}}});const HW=HC.ServerValue;function LH(n){return null==n}function VH(n){return"function"==typeof n.set}function UH(n,e){return VH(e)?e:n.ref(e)}function BH(n,e){if(function $W(n){return"string"==typeof n}(n))return e.stringCase();if(VH(n))return e.firebaseCase();if(function GW(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function jC(n,e,t="on",r=Fg.z){return new Zr.y(i=>{let o=null;return o=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,Mt.U)(i=>{const{snapshot:o,prevKey:l}=i;let h=null;return o.exists()&&(h=o.key),{type:e,payload:o,prevKey:l,key:h}}),(0,RT.B)())}function HH(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function WW(n,e){const{payload:t,prevKey:r,key:i}=e,o=HH(n,i),l=function qW(n,e){if(LH(e))return 0;{const t=HH(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const y={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,y],!1})}return n;case"child_added":if(o>-1){const h=n[o-1];(h&&h.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(o>-1){const h=n.splice(o,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function jH(n){return(LH(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function $H(n,e,t){return function zW(n,e,t){return jC(n,"value","once",t).pipe(zn(r=>{const i=[(0,gt.of)(r)];return e.forEach(o=>i.push(jC(n,o,"on",t))),(0,RE.T)(...i).pipe(Vo(WW,[]))}),(0,A0.x)())}(n,e=jH(e),t)}function GH(n,e,t){const r=(e=jH(e)).map(i=>jC(n,i,"on",t));return(0,RE.T)(...r)}function zH(n,e){return function(r,i){return BH(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function QW(n){return function(t){return t?BH(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function qH(n,e){return function(){return jC(n,"value","on",e)}}!function jW(n){n.INTERNAL.registerComponent(new Xi.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new HC(i,r)},"PUBLIC").setServiceProps({Reference:Ca,Query:Ns,Database:HC,DataSnapshot:yp,enableLogging:TW,INTERNAL:BW,ServerValue:HW}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(n0.Z);const e5=new d.OlP("angularfire2.realtimeDatabaseURL"),t5=new d.OlP("angularfire2.database.use-emulator");let WH=(()=>{class n{constructor(t,r,i,o,l,h,m,y,b,S,R,k,B,K,se){this.schedulers=h;const ke=m,We=(0,di.on)(t,l,r);y&&By(We,l,b,R,k,B,S,K),this.database=(0,di.cc)(`${We.name}.database.${i}`,"AngularFireDatabase",We.name,()=>{const Be=l.runOutsideAngular(()=>We.database(i||void 0));return ke&&Be.useEmulator(...ke),Be},[ke])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>UH(this.database,t));let o=i;return r&&(o=r(i)),function JW(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:zH(r,"update"),set:zH(r,"set"),push:i=>r.push(i),remove:QW(r),snapshotChanges:i=>$H(n,i,t).pipe(wn.iC),stateChanges:i=>GH(n,i,t).pipe(wn.iC),auditTrail:i=>function ZW(n,e,t){return function YW(n,e,t){return function KW(n,e){return jC(n,"value","on",e).pipe((0,Mt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function Wz(...n){const e=(0,ao.jO)(n);return(0,Yr.e)((t,r)=>{const i=n.length,o=new Array(i);let l=n.map(()=>!1),h=!1;for(let m=0;m<i;m++)(0,Lo.Xf)(n[m]).subscribe((0,ar.x)(r,y=>{o[m]=y,!h&&!l[m]&&(l[m]=!0,(h=l.every(Kr.y))&&(l=null))},qz.Z));t.subscribe((0,ar.x)(r,m=>{if(h){const y=[m,...o];r.next(e?e(...y):y)}}))})}(e),(0,Mt.U)(([i,o])=>{const l=i.lastKeyToLoad,h=o.map(m=>m.key);return{actions:o,lastKeyToLoad:l,loadedKeys:h}}),function Zz(n){return(0,Yr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,ar.x)(t,o=>(r||(r=!n(o,i++)))&&t.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Mt.U)(i=>i.actions))}(n,GH(n,e).pipe(Vo((i,o)=>[...i,o],[])),t)}(n,i,t).pipe(wn.iC),valueChanges:(i,o)=>$H(n,i,t).pipe((0,Mt.U)(h=>h.map(m=>o&&o.idField?Object.assign(Object.assign({},m.payload.val()),{[o.idField]:m.key}):m.payload.val())),wn.iC)}}(o,this)}object(t){return function XW(n,e){return{query:n,snapshotChanges:()=>qH(n,e.schedulers.outsideAngular)().pipe(wn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>qH(n,e.schedulers.outsideAngular)().pipe(wn.iC,(0,Mt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>UH(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(di.Dh),d.LFG(di.xv,8),d.LFG(e5,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(wn.HU),d.LFG(t5,8),d.LFG(e0,8),d.LFG(Vy,8),d.LFG(wc,8),d.LFG(QE,8),d.LFG(JE,8),d.LFG(Uy,8),d.LFG(XE,8),d.LFG(Fd,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),n5=(()=>{class n{constructor(){Ly.Z.registerVersion("angularfire",wn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[WH]}),n})();const r5_firebaseConfig={apiKey:"AIzaSyApCyv2VND3eh5szl8xtZy5lx20MPceDxI",authDomain:"order-a2a96.firebaseapp.com",databaseURL:"https://order-a2a96-default-rtdb.firebaseio.com",projectId:"order-a2a96",storageBucket:"order-a2a96.appspot.com",messagingSenderId:"252257493437",appId:"1:252257493437:web:e7079844c57ef702b672d4",measurementId:"G-BD0NPVN7PM"};let I1=(()=>{class n{constructor(t){this.db=t}AddStudent(t){this.studentsRef.push({firstName:t.firstName,lastName:t.lastName,email:t.email,mobileNumber:t.mobileNumber})}GetStudent(t){return this.studentRef=this.db.object("students-list/"+t),this.studentRef}GetStudentsList(){return this.studentsRef=this.db.list("students-list"),this.studentsRef}UpdateStudent(t){this.studentRef.update({firstName:t.firstName,lastName:t.lastName,email:t.email,mobileNumber:t.mobileNumber})}DeleteStudent(t){this.studentRef=this.db.object("students-list/"+t),this.studentRef.remove()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(WH))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $C(n){return($C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function $e(n,e,t){return(e=function s5(n){var e=function i5(n,e){if("object"!==$C(n)||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var r=t.call(n,e||"default");if("object"!==$C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"===$C(e)?e:String(e)}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class ZH{}class o5{}const ch="*";function a5(n,e){return{type:7,name:n,definitions:e,options:{}}}function KH(n,e=null){return{type:4,styles:e,timings:n}}function YH(n,e=null){return{type:2,steps:n,options:e}}function GC(n){return{type:6,styles:n,offset:null}}function C1(n,e,t){return{type:0,name:n,styles:e,options:t}}function QH(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function JH(n){Promise.resolve().then(n)}class zC{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){JH(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class XH{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?JH(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==o&&this._onFinish()}),l.onDestroy(()=>{++r==o&&this._onDestroy()}),l.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((l,h)=>Math.max(l,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const b1="!",ej=["toast-component",""];function u5(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",5),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.remove())}),d.TgZ(1,"span",6),d._uU(2,"\xd7"),d.qZA()()}}function l5(n,e){if(1&n&&(d.ynx(0),d._uU(1),d.BQk()),2&n){const t=d.oxw(2);d.xp6(1),d.hij("[",t.duplicatesCount+1,"]")}}function c5(n,e){if(1&n&&(d.TgZ(0,"div"),d._uU(1),d.YNc(2,l5,2,1,"ng-container",4),d.qZA()),2&n){const t=d.oxw();d.Tol(t.options.titleClass),d.uIk("aria-label",t.title),d.xp6(1),d.hij(" ",t.title," "),d.xp6(1),d.Q6J("ngIf",t.duplicatesCount)}}function d5(n,e){if(1&n&&d._UZ(0,"div",7),2&n){const t=d.oxw();d.Tol(t.options.messageClass),d.Q6J("innerHTML",t.message,d.oJD)}}function h5(n,e){if(1&n&&(d.TgZ(0,"div",8),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.Tol(t.options.messageClass),d.uIk("aria-label",t.message),d.xp6(1),d.hij(" ",t.message," ")}}function f5(n,e){if(1&n&&(d.TgZ(0,"div"),d._UZ(1,"div",9),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Udp("width",t.width+"%")}}class w5{constructor(e,t){$e(this,"_attachedHost",void 0),$e(this,"component",void 0),$e(this,"viewContainerRef",void 0),$e(this,"injector",void 0),this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class E5{constructor(){$e(this,"_attachedPortal",void 0),$e(this,"_disposeFn",void 0)}attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class I5{constructor(e){$e(this,"_overlayRef",void 0),$e(this,"componentInstance",void 0),$e(this,"duplicatesCount",0),$e(this,"_afterClosed",new pr.x),$e(this,"_activate",new pr.x),$e(this,"_manualClose",new pr.x),$e(this,"_resetTimeout",new pr.x),$e(this,"_countDuplicate",new pr.x),this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class BN{constructor(e,t,r,i,o,l){$e(this,"toastId",void 0),$e(this,"config",void 0),$e(this,"message",void 0),$e(this,"title",void 0),$e(this,"toastType",void 0),$e(this,"toastRef",void 0),$e(this,"_onTap",new pr.x),$e(this,"_onAction",new pr.x),this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=o,this.toastRef=l,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const nj=new d.OlP("ToastConfig");class C5 extends E5{constructor(e,t,r){super(),$e(this,"_hostDomElement",void 0),$e(this,"_componentFactoryResolver",void 0),$e(this,"_appRef",void 0),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let b5=(()=>{class n{constructor(){$e(this,"_document",(0,d.f3M)(pe)),$e(this,"_containerElement",void 0)}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return $e(n,"\u0275fac",function(t){return new(t||n)}),$e(n,"\u0275prov",d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),n})();class T5{constructor(e){$e(this,"_portalHost",void 0),this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let D5=(()=>{class n{constructor(){$e(this,"_overlayContainer",(0,d.f3M)(b5)),$e(this,"_componentFactoryResolver",(0,d.f3M)(d._Vd)),$e(this,"_appRef",(0,d.f3M)(d.z2F)),$e(this,"_document",(0,d.f3M)(pe)),$e(this,"_paneElements",new Map)}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new C5(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new T5(this._createPortalHost(t))}}return $e(n,"\u0275fac",function(t){return new(t||n)}),$e(n,"\u0275prov",d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),n})(),qC=(()=>{class n{constructor(t,r,i,o,l){$e(this,"overlay",void 0),$e(this,"_injector",void 0),$e(this,"sanitizer",void 0),$e(this,"ngZone",void 0),$e(this,"toastrConfig",void 0),$e(this,"currentlyActive",0),$e(this,"toasts",[]),$e(this,"overlayContainer",void 0),$e(this,"previousToastMessage",void 0),$e(this,"index",0),this.overlay=r,this._injector=i,this.sanitizer=o,this.ngZone=l,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},o=""){return this._preBuildNotification(o,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,o){const{includeTitleDuplicates:l}=this.toastrConfig;for(const h of this.toasts)if((!l||l&&h.title===t)&&h.message===r)return h.toastRef.onDuplicate(i,o),h;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,o){return o.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,o)):this._buildNotification(t,r,i,o)}_buildNotification(t,r,i,o){if(!o.toastComponent)throw new Error("toastComponent required");const l=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&o.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==l)return l;this.previousToastMessage=r;let h=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(h=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const m=this.overlay.create(o.positionClass,this.overlayContainer);this.index=this.index+1;let y=r;r&&o.enableHtml&&(y=this.sanitizer.sanitize(d.q3G.HTML,r));const b=new I5(m),S=new BN(this.index,o,y,i,t,b),k=d.zs3.create({providers:[{provide:BN,useValue:S}],parent:this._injector}),B=new w5(o.toastComponent,k),K=m.attach(B,o.newestOnTop);b.componentInstance=K.instance;const se={toastId:this.index,title:i||"",message:r||"",toastRef:b,onShown:b.afterActivate(),onHidden:b.afterClosed(),onTap:S.onTap(),onAction:S.onAction(),portal:K};return h||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{se.toastRef.activate()})),this.toasts.push(se),se}}return $e(n,"\u0275fac",function(t){return new(t||n)(d.LFG(nj),d.LFG(D5),d.LFG(d.zs3),d.LFG(Wu),d.LFG(d.R0b))}),$e(n,"\u0275prov",d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),n})();const S5={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class n{get displayStyle(){if("inactive"===this.state.value)return"none"}constructor(t,r,i){$e(this,"toastrService",void 0),$e(this,"toastPackage",void 0),$e(this,"ngZone",void 0),$e(this,"message",void 0),$e(this,"title",void 0),$e(this,"options",void 0),$e(this,"duplicatesCount",void 0),$e(this,"originalTimeout",void 0),$e(this,"width",-1),$e(this,"toastClasses",""),$e(this,"state",void 0),$e(this,"timeout",void 0),$e(this,"intervalId",void 0),$e(this,"hideTime",void 0),$e(this,"sub",void 0),$e(this,"sub1",void 0),$e(this,"sub2",void 0),$e(this,"sub3",void 0),this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(o=>{this.duplicatesCount=o}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return $e(n,"\u0275fac",function(t){return new(t||n)(d.Y36(qC),d.Y36(BN),d.Y36(d.R0b))}),$e(n,"\u0275cmp",d.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(d.d8E("@flyInOut",r.state),d.Tol(r.toastClasses),d.Udp("display",r.displayStyle))},standalone:!0,features:[d.jDz],attrs:ej,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(d.YNc(0,u5,3,0,"button",0),d.YNc(1,c5,3,5,"div",1),d.YNc(2,d5,1,3,"div",2),d.YNc(3,h5,2,4,"div",3),d.YNc(4,f5,2,2,"div",4)),2&t&&(d.Q6J("ngIf",r.options.closeButton),d.xp6(1),d.Q6J("ngIf",r.title),d.xp6(1),d.Q6J("ngIf",r.message&&r.options.enableHtml),d.xp6(1),d.Q6J("ngIf",r.message&&!r.options.enableHtml),d.xp6(1),d.Q6J("ngIf",r.options.progressBar))},dependencies:[cs],encapsulation:2,data:{animation:[a5("flyInOut",[C1("inactive",GC({opacity:0})),C1("active",GC({opacity:1})),C1("removed",GC({opacity:0})),QH("inactive => active",KH("{{ easeTime }}ms {{ easing }}")),QH("active => removed",KH("{{ easeTime }}ms {{ easing }}"))])]}})),n})()},A5=(n={})=>(0,d.MR2)([{provide:nj,useValue:{default:S5,config:n}}]);let N5=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[A5(t)]}}}return $e(n,"\u0275fac",function(t){return new(t||n)}),$e(n,"\u0275mod",d.oAB({type:n})),$e(n,"\u0275inj",d.cJS({})),n})();function M5(n,e){1&n&&(d.TgZ(0,"p",13)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Please enter atleast first name "),d.qZA())}function R5(n,e){1&n&&(d.TgZ(0,"p",13)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Name shouldn't be less than 2 words "),d.qZA())}function x5(n,e){1&n&&(d.TgZ(0,"p",13)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Please provide email "),d.qZA())}function P5(n,e){1&n&&(d.TgZ(0,"p",13)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Please enter correct email "),d.qZA())}function O5(n,e){1&n&&(d.TgZ(0,"p",13)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Please provide contact number "),d.qZA())}function k5(n,e){1&n&&(d.TgZ(0,"p",13)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Use numbers only number "),d.qZA())}let F5=(()=>{class n{constructor(t,r,i){this.crudApi=t,this.fb=r,this.toastr=i}ngOnInit(){this.crudApi.GetStudentsList(),this.studenForm()}studenForm(){this.studentForm=this.fb.group({firstName:["",[_o.required,_o.minLength(2)]],lastName:[""],email:["",[_o.required,_o.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")]],mobileNumber:["",[_o.required,_o.pattern("^[0-9]+$")]]})}get firstName(){return this.studentForm.get("firstName")}get lastName(){return this.studentForm.get("lastName")}get email(){return this.studentForm.get("email")}get mobileNumber(){return this.studentForm.get("mobileNumber")}ResetForm(){this.studentForm.reset()}submitStudentData(){this.crudApi.AddStudent(this.studentForm.value),this.toastr.success(this.studentForm.controls.firstName.value+" successfully added!"),this.ResetForm()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(I1),d.Y36(NT),d.Y36(qC))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-add-student"]],decls:35,vars:8,consts:[[1,"h2"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-5","col-md-12","col-sm-12"],[1,"col-md-12","mb-3"],["type","text","formControlName","firstName","required","",1,"form-control"],["class","error",4,"ngIf"],["type","text","formControlName","lastName",1,"form-control"],["type","email","formControlName","email","required","",1,"form-control"],["type","text","formControlName","mobileNumber","required","",1,"form-control"],[1,"form-group","text-right"],["type","button",1,"btn","btn-secondary","gap-right",3,"click"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"error"]],template:function(t,r){1&t&&(d.TgZ(0,"div")(1,"h2",0),d._uU(2,"Add Student"),d.qZA()(),d.TgZ(3,"form",1),d.NdJ("ngSubmit",function(){return r.submitStudentData()}),d.TgZ(4,"div",2)(5,"div",3)(6,"div",2)(7,"div",4)(8,"label"),d._uU(9,"First name"),d.qZA(),d._UZ(10,"input",5),d.YNc(11,M5,4,0,"p",6),d.YNc(12,R5,4,0,"p",6),d.qZA(),d.TgZ(13,"div",4)(14,"label"),d._uU(15,"Last name"),d.qZA(),d._UZ(16,"input",7),d.qZA()(),d.TgZ(17,"div",2)(18,"div",4)(19,"label"),d._uU(20,"Email"),d.qZA(),d._UZ(21,"input",8),d.YNc(22,x5,4,0,"p",6),d.YNc(23,P5,4,0,"p",6),d.qZA(),d.TgZ(24,"div",4)(25,"label"),d._uU(26,"Mobile number"),d.qZA(),d._UZ(27,"input",9),d.YNc(28,O5,4,0,"p",6),d.YNc(29,k5,4,0,"p",6),d.qZA()(),d.TgZ(30,"div",10)(31,"button",11),d.NdJ("click",function(){return r.ResetForm()}),d._uU(32," Reset "),d.qZA(),d.TgZ(33,"button",12),d._uU(34," Add Student "),d.qZA()()()()()),2&t&&(d.xp6(3),d.Q6J("formGroup",r.studentForm),d.xp6(8),d.Q6J("ngIf",r.firstName.touched&&r.firstName.invalid),d.xp6(1),d.Q6J("ngIf",null==r.firstName.errors?null:r.firstName.errors.minlength),d.xp6(10),d.Q6J("ngIf",r.email.touched&&r.email.invalid),d.xp6(1),d.Q6J("ngIf",null==r.email.errors?null:r.email.errors.pattern),d.xp6(5),d.Q6J("ngIf",r.mobileNumber.touched&&r.mobileNumber.invalid),d.xp6(1),d.Q6J("ngIf",null==r.mobileNumber.errors?null:r.mobileNumber.errors.pattern),d.xp6(4),d.Q6J("disabled",!r.studentForm.valid))},dependencies:[cs,IE,hf,Rd,sy,wg,gg,_g]}),n})();function L5(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"a",12),d.NdJ("keyup.enter",function(){d.CHM(t),d.oxw(3);const i=d.MAs(1);return d.KtG(i.previous())})("click",function(){d.CHM(t),d.oxw(3);const i=d.MAs(1);return d.KtG(i.previous())}),d._uU(1),d.TgZ(2,"span",13),d._uU(3),d.qZA()()}if(2&n){const t=d.oxw(3);d.xp6(1),d.hij(" ",t.previousLabel," "),d.xp6(2),d.Oqu(t.screenReaderPageLabel)}}function V5(n,e){if(1&n&&(d.TgZ(0,"span",14),d._uU(1),d.TgZ(2,"span",13),d._uU(3),d.qZA()()),2&n){const t=d.oxw(3);d.xp6(1),d.hij(" ",t.previousLabel," "),d.xp6(2),d.Oqu(t.screenReaderPageLabel)}}function U5(n,e){if(1&n&&(d.TgZ(0,"li",9),d.YNc(1,L5,4,2,"a",10),d.YNc(2,V5,4,2,"span",11),d.qZA()),2&n){d.oxw(2);const t=d.MAs(1);d.ekj("disabled",t.isFirstPage()),d.xp6(1),d.Q6J("ngIf",1<t.getCurrent()),d.xp6(1),d.Q6J("ngIf",t.isFirstPage())}}function B5(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"a",12),d.NdJ("keyup.enter",function(){d.CHM(t);const i=d.oxw().$implicit;d.oxw(2);const o=d.MAs(1);return d.KtG(o.setCurrent(i.value))})("click",function(){d.CHM(t);const i=d.oxw().$implicit;d.oxw(2);const o=d.MAs(1);return d.KtG(o.setCurrent(i.value))}),d.TgZ(1,"span",13),d._uU(2),d.qZA(),d.TgZ(3,"span"),d._uU(4),d.ALo(5,"number"),d.qZA()()}if(2&n){const t=d.oxw().$implicit,r=d.oxw(2);d.xp6(2),d.hij("",r.screenReaderPageLabel," "),d.xp6(2),d.Oqu("..."===t.label?t.label:d.xi3(5,2,t.label,""))}}function H5(n,e){if(1&n&&(d.ynx(0),d.TgZ(1,"span",16)(2,"span",13),d._uU(3),d.qZA(),d.TgZ(4,"span"),d._uU(5),d.ALo(6,"number"),d.qZA()(),d.BQk()),2&n){const t=d.oxw().$implicit,r=d.oxw(2);d.xp6(3),d.hij("",r.screenReaderCurrentLabel," "),d.xp6(2),d.Oqu("..."===t.label?t.label:d.xi3(6,2,t.label,""))}}function j5(n,e){if(1&n&&(d.TgZ(0,"li"),d.YNc(1,B5,6,5,"a",10),d.YNc(2,H5,7,5,"ng-container",15),d.qZA()),2&n){const t=e.$implicit;d.oxw(2);const r=d.MAs(1);d.ekj("current",r.getCurrent()===t.value)("ellipsis","..."===t.label),d.xp6(1),d.Q6J("ngIf",r.getCurrent()!==t.value),d.xp6(1),d.Q6J("ngIf",r.getCurrent()===t.value)}}function $5(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"a",12),d.NdJ("keyup.enter",function(){d.CHM(t),d.oxw(3);const i=d.MAs(1);return d.KtG(i.next())})("click",function(){d.CHM(t),d.oxw(3);const i=d.MAs(1);return d.KtG(i.next())}),d._uU(1),d.TgZ(2,"span",13),d._uU(3),d.qZA()()}if(2&n){const t=d.oxw(3);d.xp6(1),d.hij(" ",t.nextLabel," "),d.xp6(2),d.Oqu(t.screenReaderPageLabel)}}function G5(n,e){if(1&n&&(d.TgZ(0,"span",14),d._uU(1),d.TgZ(2,"span",13),d._uU(3),d.qZA()()),2&n){const t=d.oxw(3);d.xp6(1),d.hij(" ",t.nextLabel," "),d.xp6(2),d.Oqu(t.screenReaderPageLabel)}}function z5(n,e){if(1&n&&(d.TgZ(0,"li",17),d.YNc(1,$5,4,2,"a",10),d.YNc(2,G5,4,2,"span",11),d.qZA()),2&n){d.oxw(2);const t=d.MAs(1);d.ekj("disabled",t.isLastPage()),d.xp6(1),d.Q6J("ngIf",!t.isLastPage()),d.xp6(1),d.Q6J("ngIf",t.isLastPage())}}function q5(n,e){if(1&n&&(d.TgZ(0,"ul",4),d.YNc(1,U5,3,4,"li",5),d.TgZ(2,"li",6),d._uU(3),d.qZA(),d.YNc(4,j5,3,6,"li",7),d.YNc(5,z5,3,4,"li",8),d.qZA()),2&n){const t=d.oxw(),r=d.MAs(1);d.ekj("responsive",t.responsive),d.xp6(1),d.Q6J("ngIf",t.directionLinks),d.xp6(2),d.AsE(" ",r.getCurrent()," / ",r.getLastPage()," "),d.xp6(1),d.Q6J("ngForOf",r.pages)("ngForTrackBy",t.trackByIndex),d.xp6(1),d.Q6J("ngIf",t.directionLinks)}}class T1{constructor(){this.change=new d.vpe,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(e){return null==e.id&&(e.id=this.DEFAULT_ID),this.instances[e.id]?this.updateInstance(e):(this.instances[e.id]=e,!0)}updateInstance(e){let t=!1;for(let r in this.instances[e.id])e[r]!==this.instances[e.id][r]&&(this.instances[e.id][r]=e[r],t=!0);return t}getCurrentPage(e){return this.instances[e]?this.instances[e].currentPage:1}setCurrentPage(e,t){if(this.instances[e]){let r=this.instances[e];t<=Math.ceil(r.totalItems/r.itemsPerPage)&&1<=t&&(this.instances[e].currentPage=t,this.change.emit(e))}}setTotalItems(e,t){this.instances[e]&&0<=t&&(this.instances[e].totalItems=t,this.change.emit(e))}setItemsPerPage(e,t){this.instances[e]&&(this.instances[e].itemsPerPage=t,this.change.emit(e))}getInstance(e=this.DEFAULT_ID){return this.instances[e]?this.clone(this.instances[e]):{}}clone(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}}const W5=Number.MAX_SAFE_INTEGER;let Z5=(()=>{class n{constructor(t){this.service=t,this.state={}}transform(t,r){if(!(t instanceof Array)){let S=r.id||this.service.defaultId();return this.state[S]?this.state[S].slice:t}let h,m,i=r.totalItems&&r.totalItems!==t.length,o=this.createInstance(t,r),l=o.id,y=o.itemsPerPage,b=this.service.register(o);if(!i&&t instanceof Array){if(y=+y||W5,h=(o.currentPage-1)*y,m=h+y,this.stateIsIdentical(l,t,h,m))return this.state[l].slice;{let R=t.slice(h,m);return this.saveState(l,t,R,h,m),this.service.change.emit(l),R}}return b&&this.service.change.emit(l),this.saveState(l,t,t,h,m),t}createInstance(t,r){return this.checkConfig(r),{id:null!=r.id?r.id:this.service.defaultId(),itemsPerPage:+r.itemsPerPage||0,currentPage:+r.currentPage||1,totalItems:+r.totalItems||t.length}}checkConfig(t){const i=["itemsPerPage","currentPage"].filter(o=>!(o in t));if(0<i.length)throw new Error(`PaginatePipe: Argument is missing the following required properties: ${i.join(", ")}`)}saveState(t,r,i,o,l){this.state[t]={collection:r,size:r.length,slice:i,start:o,end:l}}stateIsIdentical(t,r,i,o){let l=this.state[t];return!(!l||l.size!==r.length||l.start!==i||l.end!==o)&&l.slice.every((m,y)=>m===r[i+y])}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(T1,16))},n.\u0275pipe=d.Yjl({name:"paginate",type:n,pure:!1}),n})(),K5=(()=>{class n{constructor(t,r){this.service=t,this.changeDetectorRef=r,this.maxSize=7,this.pageChange=new d.vpe,this.pageBoundsCorrection=new d.vpe,this.pages=[],this.changeSub=this.service.change.subscribe(i=>{this.id===i&&(this.updatePageLinks(),this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges())})}ngOnInit(){void 0===this.id&&(this.id=this.service.defaultId()),this.updatePageLinks()}ngOnChanges(t){this.updatePageLinks()}ngOnDestroy(){this.changeSub.unsubscribe()}previous(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)}next(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)}isFirstPage(){return 1===this.getCurrent()}isLastPage(){return this.getLastPage()===this.getCurrent()}setCurrent(t){this.pageChange.emit(t)}getCurrent(){return this.service.getCurrentPage(this.id)}getLastPage(){let t=this.service.getInstance(this.id);return t.totalItems<1?1:Math.ceil(t.totalItems/t.itemsPerPage)}getTotalItems(){return this.service.getInstance(this.id).totalItems}checkValidId(){null==this.service.getInstance(this.id).id&&console.warn(`PaginationControlsDirective: the specified id "${this.id}" does not match any registered PaginationInstance`)}updatePageLinks(){let t=this.service.getInstance(this.id);const r=this.outOfBoundCorrection(t);r!==t.currentPage?setTimeout(()=>{this.pageBoundsCorrection.emit(r),this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)}):this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)}outOfBoundCorrection(t){const r=Math.ceil(t.totalItems/t.itemsPerPage);return r<t.currentPage&&0<r?r:t.currentPage<1?1:t.currentPage}createPageArray(t,r,i,o){o=+o;let l=[];const h=Math.max(Math.ceil(i/r),1),m=Math.ceil(o/2),y=t<=m,b=h-m<t,S=!y&&!b;let R=o<h,k=1;for(;k<=h&&k<=o;){let B,K=this.calculatePageNumber(k,t,o,h);B=R&&(2===k&&(S||b)||k===o-1&&(S||y))?"...":K,l.push({label:B,value:K}),k++}return l}calculatePageNumber(t,r,i,o){let l=Math.ceil(i/2);return t===i?o:1===t?t:i<o?o-l<r?o-i+t:l<r?r-l+t:t:t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(T1),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{id:"id",maxSize:"maxSize"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],features:[d.TTD]}),n})();function D1(n){return!!n&&"false"!==n}let Y5=(()=>{class n{constructor(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new d.vpe,this.pageBoundsCorrection=new d.vpe,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}get directionLinks(){return this._directionLinks}set directionLinks(t){this._directionLinks=D1(t)}get autoHide(){return this._autoHide}set autoHide(t){this._autoHide=D1(t)}get responsive(){return this._responsive}set responsive(t){this._responsive=D1(t)}trackByIndex(t){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["pagination-controls"]],inputs:{id:"id",maxSize:"maxSize",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},decls:4,vars:4,consts:[[3,"id","maxSize","pageChange","pageBoundsCorrection"],["p","paginationApi"],["role","navigation"],["class","ngx-pagination",3,"responsive",4,"ngIf"],[1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],["aria-disabled","true",4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],["aria-disabled","true"],[4,"ngIf"],["aria-live","polite"],[1,"pagination-next"]],template:function(t,r){if(1&t&&(d.TgZ(0,"pagination-template",0,1),d.NdJ("pageChange",function(o){return r.pageChange.emit(o)})("pageBoundsCorrection",function(o){return r.pageBoundsCorrection.emit(o)}),d.TgZ(2,"nav",2),d.YNc(3,q5,6,8,"ul",3),d.qZA()()),2&t){const i=d.MAs(1);d.Q6J("id",r.id)("maxSize",r.maxSize),d.xp6(2),d.uIk("aria-label",r.screenReaderPaginationLabel),d.xp6(1),d.Q6J("ngIf",!(r.autoHide&&i.pages.length<=1))}},dependencies:[K5,cs,Tu,Ut],styles:['.ngx-pagination{margin-left:0;margin-bottom:1rem}.ngx-pagination:before,.ngx-pagination:after{content:" ";display:table}.ngx-pagination:after{clear:both}.ngx-pagination li{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;margin-right:.0625rem;border-radius:0}.ngx-pagination li{display:inline-block}.ngx-pagination a,.ngx-pagination button{color:#0a0a0a;display:block;padding:.1875rem .625rem;border-radius:0}.ngx-pagination a:hover,.ngx-pagination button:hover{background:#e6e6e6}.ngx-pagination .current{padding:.1875rem .625rem;background:#2199e8;color:#fefefe;cursor:default}.ngx-pagination .disabled{padding:.1875rem .625rem;color:#cacaca;cursor:default}.ngx-pagination .disabled:hover{background:transparent}.ngx-pagination a,.ngx-pagination button{cursor:pointer}.ngx-pagination .pagination-previous a:before,.ngx-pagination .pagination-previous.disabled:before{content:"\\ab";display:inline-block;margin-right:.5rem}.ngx-pagination .pagination-next a:after,.ngx-pagination .pagination-next.disabled:after{content:"\\bb";display:inline-block;margin-left:.5rem}.ngx-pagination .show-for-sr{position:absolute!important;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0)}.ngx-pagination .small-screen{display:none}@media screen and (max-width: 601px){.ngx-pagination.responsive .small-screen{display:inline-block}.ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next){display:none}}\n'],encapsulation:2,changeDetection:0}),n})(),Q5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[T1],imports:[[_i]]}),n})();function J5(n,e){1&n&&(d.TgZ(0,"a",7),d._uU(1," Add Student "),d.qZA())}function X5(n,e){1&n&&(d.TgZ(0,"div",8),d._UZ(1,"img",9),d.qZA())}function e9(n,e){1&n&&(d.TgZ(0,"div",8),d._UZ(1,"img",10),d.TgZ(2,"p",11),d._uU(3,"No student added yet!"),d.qZA(),d.TgZ(4,"a",7),d._uU(5," Add Student "),d.qZA()())}function t9(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"tr")(1,"th",17),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td"),d._uU(6),d.qZA(),d.TgZ(7,"td"),d._uU(8),d.qZA(),d.TgZ(9,"td",18)(10,"span",19),d._uU(11,"Edit"),d.qZA(),d.TgZ(12,"span",20),d.NdJ("click",function(){const o=d.CHM(t).$implicit,l=d.oxw(2);return d.KtG(l.deleteStudent(o))}),d._uU(13,"Delete"),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.$key),d.xp6(2),d.AsE("",t.firstName," ",t.lastName,""),d.xp6(2),d.Oqu(t.email),d.xp6(2),d.Oqu(t.mobileNumber),d.xp6(2),d.MGl("routerLink","/edit-student/",t.$key,"")}}const n9=function(n){return{itemsPerPage:8,currentPage:n}};function r9(n,e){if(1&n&&(d.TgZ(0,"div",12)(1,"table",13)(2,"thead")(3,"tr")(4,"th",14),d._uU(5,"Student Id"),d.qZA(),d.TgZ(6,"th",14),d._uU(7,"Student name"),d.qZA(),d.TgZ(8,"th",14),d._uU(9,"Email"),d.qZA(),d.TgZ(10,"th",14),d._uU(11,"Mobile number"),d.qZA(),d.TgZ(12,"th",15),d._uU(13,"Edit"),d.qZA()()(),d.TgZ(14,"tbody"),d.YNc(15,t9,14,6,"tr",16),d.ALo(16,"paginate"),d.qZA()()()),2&n){const t=d.oxw();d.xp6(15),d.Q6J("ngForOf",d.xi3(16,1,t.Student,d.VKq(4,n9,t.p)))}}let i9=(()=>{class n{constructor(t,r){this.crudApi=t,this.toastr=r,this.p=1,this.hideWhenNoStudent=!1,this.noData=!1,this.preLoader=!0}ngOnInit(){this.dataState(),this.crudApi.GetStudentsList().snapshotChanges().subscribe(r=>{this.Student=[],r.forEach(i=>{let o=i.payload.toJSON();o.$key=i.key,this.Student.push(o)})})}dataState(){this.crudApi.GetStudentsList().valueChanges().subscribe(t=>{this.preLoader=!1,t.length<=0?(this.hideWhenNoStudent=!1,this.noData=!0):(this.hideWhenNoStudent=!0,this.noData=!1)})}deleteStudent(t){window.confirm("Are sure you want to delete this student ?")&&(this.crudApi.DeleteStudent(t.$key),this.toastr.success(t.firstName+" successfully deleted!"))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(I1),d.Y36(qC))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-student-list"]],decls:9,vars:4,consts:[[1,"d-flex","justify-content-between","flex-wrap","flex-md-nowrap","align-items-center","pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["routerLink","/register-student","class","btn btn-success",4,"ngIf"],[1,"pricing-header","mx-auto"],["class","no-data text-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],[3,"pageChange"],["routerLink","/register-student",1,"btn","btn-success"],[1,"no-data","text-center"],["src","assets/preloader.gif","alt","No student",1,"preloader-icon"],["src","assets/no-student.svg","alt","No student",1,"nodata-msg"],[1,"nodata-msg"],[1,"table-responsive"],[1,"table","table-bordered","table-responsive-sm","table-responsive-md","table-responsive-lg"],["scope","col"],["scope","col",1,"text-center"],[4,"ngFor","ngForOf"],["scope","row"],[1,"text-center","action-block"],[1,"mr-2","btn","btn-outline-primary","btn-sm",3,"routerLink"],[1,"btn","btn-outline-danger","btn-sm",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"h2",1),d._uU(2,"Students List"),d.qZA(),d.YNc(3,J5,2,0,"a",2),d.qZA(),d.TgZ(4,"div",3),d.YNc(5,X5,2,0,"div",4),d.YNc(6,e9,6,0,"div",4),d.YNc(7,r9,17,6,"div",5),d.TgZ(8,"pagination-controls",6),d.NdJ("pageChange",function(o){return r.p=o}),d.qZA()()),2&t&&(d.xp6(3),d.Q6J("ngIf",r.hideWhenNoStudent),d.xp6(2),d.Q6J("ngIf",r.preLoader),d.xp6(1),d.Q6J("ngIf",r.noData),d.xp6(1),d.Q6J("ngIf",r.hideWhenNoStudent))},dependencies:[Tu,cs,lf,Y5,Z5]}),n})();function s9(n,e){1&n&&(d.TgZ(0,"p",18)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Please enter firstname "),d.qZA())}function o9(n,e){1&n&&(d.TgZ(0,"p",18)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Name shouldn't be less than 2 words "),d.qZA())}function a9(n,e){1&n&&(d.TgZ(0,"p",18)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Please provide email "),d.qZA())}function u9(n,e){1&n&&(d.TgZ(0,"p",18)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Please enter correct email "),d.qZA())}function l9(n,e){1&n&&(d.TgZ(0,"p",18)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Please provide contact number "),d.qZA())}function c9(n,e){1&n&&(d.TgZ(0,"p",18)(1,"sup"),d._uU(2,"*"),d.qZA(),d._uU(3,"Use numbers only number "),d.qZA())}let d9=(()=>{class n{constructor(t,r,i,o,l,h){this.crudApi=t,this.fb=r,this.location=i,this.actRoute=o,this.router=l,this.toastr=h}ngOnInit(){this.updateStudentData();const t=this.actRoute.snapshot.paramMap.get("id");this.crudApi.GetStudent(t).valueChanges().subscribe(r=>{this.editForm.setValue(r)})}get firstName(){return this.editForm.get("firstName")}get lastName(){return this.editForm.get("lastName")}get email(){return this.editForm.get("email")}get mobileNumber(){return this.editForm.get("mobileNumber")}updateStudentData(){this.editForm=this.fb.group({firstName:["",[_o.required,_o.minLength(2)]],lastName:[""],email:["",[_o.required,_o.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")]],mobileNumber:["",[_o.required,_o.pattern("^[0-9]+$")]]})}goBack(){this.location.back()}updateForm(){this.crudApi.UpdateStudent(this.editForm.value),this.toastr.success(this.editForm.controls.firstName.value+" updated successfully"),this.router.navigate(["view-students"])}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(I1),d.Y36(NT),d.Y36(Qe),d.Y36(Fr),d.Y36(mo),d.Y36(qC))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-edit-student"]],decls:40,vars:8,consts:[[1,"d-flex","justify-content-between","flex-wrap","flex-md-nowrap","align-items-center","pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],[1,"btn-toolbar","mb-2","mb-md-0"],[1,"btn-group"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"row"],[1,"col-lg-12"],[1,"pricing-header","form-block","mx-auto"],["novalidate","",3,"formGroup","ngSubmit"],[1,"col-lg-5","col-md-12","col-sm-12"],[1,"col-md-12","mb-3"],["type","text","formControlName","firstName","required","",1,"form-control"],["class","error",4,"ngIf"],["type","text","formControlName","lastName",1,"form-control"],["type","email","formControlName","email","required","",1,"form-control"],["type","text","formControlName","mobileNumber","required","",1,"form-control"],[1,"form-group","text-right"],["type","submit",1,"btn","btn-success","btn-block",3,"disabled"],[1,"error"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"h1",1),d._uU(2,"Edit Student Details"),d.qZA(),d.TgZ(3,"div",2)(4,"div",3)(5,"button",4),d.NdJ("click",function(){return r.goBack()}),d._uU(6," Go Back "),d.qZA()()()(),d.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"form",8),d.NdJ("ngSubmit",function(){return r.updateForm()}),d.TgZ(11,"div",5)(12,"div",9)(13,"div",5)(14,"div",10)(15,"label"),d._uU(16,"First name"),d.qZA(),d._UZ(17,"input",11),d.YNc(18,s9,4,0,"p",12),d.YNc(19,o9,4,0,"p",12),d.qZA(),d.TgZ(20,"div",10)(21,"label"),d._uU(22,"Last name"),d.qZA(),d._UZ(23,"input",13),d.qZA()(),d.TgZ(24,"div",5)(25,"div",10)(26,"label"),d._uU(27,"Email"),d.qZA(),d._UZ(28,"input",14),d.YNc(29,a9,4,0,"p",12),d.YNc(30,u9,4,0,"p",12),d.qZA(),d.TgZ(31,"div",10)(32,"label"),d._uU(33,"Mobile number"),d.qZA(),d._UZ(34,"input",15),d.YNc(35,l9,4,0,"p",12),d.YNc(36,c9,4,0,"p",12),d.qZA()(),d.TgZ(37,"div",16)(38,"button",17),d._uU(39," Update Student "),d.qZA()()()()()()()()),2&t&&(d.xp6(10),d.Q6J("formGroup",r.editForm),d.xp6(8),d.Q6J("ngIf",r.firstName.touched&&r.firstName.invalid),d.xp6(1),d.Q6J("ngIf",null==r.firstName.errors?null:r.firstName.errors.minlength),d.xp6(10),d.Q6J("ngIf",r.email.touched&&r.email.invalid),d.xp6(1),d.Q6J("ngIf",null==r.email.errors?null:r.email.errors.pattern),d.xp6(5),d.Q6J("ngIf",r.mobileNumber.touched&&r.mobileNumber.invalid),d.xp6(1),d.Q6J("ngIf",null==r.mobileNumber.errors?null:r.mobileNumber.errors.pattern),d.xp6(2),d.Q6J("disabled",!r.editForm.valid))},dependencies:[cs,IE,hf,Rd,sy,wg,gg,_g]}),n})();function rj(n){return new d.vHH(3e3,!1)}function vp(n){switch(n.length){case 0:return new zC;case 1:return n[0];default:return new XH(n)}}function ij(n,e,t=new Map,r=new Map){const i=[],o=[];let l=-1,h=null;if(e.forEach(m=>{const y=m.get("offset"),b=y==l,S=b&&h||new Map;m.forEach((R,k)=>{let B=k,K=R;if("offset"!==k)switch(B=n.normalizePropertyName(B,i),K){case b1:K=t.get(k);break;case ch:K=r.get(k);break;default:K=n.normalizeStyleValue(k,B,K,i)}S.set(B,K)}),b||o.push(S),h=S,l=y}),i.length)throw function O9(n){return new d.vHH(3502,!1)}();return o}function S1(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&A1(t,"start",n)));break;case"done":n.onDone(()=>r(t&&A1(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&A1(t,"destroy",n)))}}function A1(n,e,t){const o=N1(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(o._data=l),o}function N1(n,e,t,r,i="",o=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!l}}function ba(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function sj(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const q9=(()=>typeof document>"u"?null:document.documentElement)();function M1(n){const e=n.parentNode||n.host||null;return e===q9?null:e}let e_=null,oj=!1;function aj(n,e){for(;e;){if(e===n)return!0;e=M1(e)}return!1}function uj(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let lj=(()=>{class n{validateStyleProperty(t){return function Z9(n){e_||(e_=function K9(){return typeof document<"u"?document.body:null}()||{},oj=!!e_.style&&"WebkitAppearance"in e_.style);let e=!0;return e_.style&&!function W9(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in e_.style,!e&&oj&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in e_.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return aj(t,r)}getParentElement(t){return M1(t)}query(t,r,i){return uj(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,l,h=[],m){return new zC(i,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),R1=(()=>{class n{}return n.NOOP=new lj,n})();const Y9=1e3,x1="ng-enter",HN="ng-leave",jN="ng-trigger",$N=".ng-trigger",dj="ng-animating",P1=".ng-animating";function dh(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:O1(parseFloat(e[1]),e[2])}function O1(n,e){return"s"===e?n*Y9:n}function GN(n,e,t){return n.hasOwnProperty("duration")?n:function J9(n,e,t){let i,o=0,l="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(rj()),{duration:0,delay:0,easing:""};i=O1(parseFloat(h[1]),h[2]);const m=h[3];null!=m&&(o=O1(parseFloat(m),h[4]));const y=h[5];y&&(l=y)}else i=n;if(!t){let h=!1,m=e.length;i<0&&(e.push(function h9(){return new d.vHH(3100,!1)}()),h=!0),o<0&&(e.push(function f9(){return new d.vHH(3101,!1)}()),h=!0),h&&e.splice(m,0,rj())}return{duration:i,delay:o,easing:l}}(n,e,t)}function WC(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function hj(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function wp(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function kc(n,e,t){e.forEach((r,i)=>{const o=F1(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r})}function t_(n,e){e.forEach((t,r)=>{const i=F1(r);n.style[i]=""})}function ZC(n){return Array.isArray(n)?1==n.length?n[0]:YH(n):n}const k1=new RegExp("{{\\s*(.+?)\\s*}}","g");function pj(n){let e=[];if("string"==typeof n){let t;for(;t=k1.exec(n);)e.push(t[1]);k1.lastIndex=0}return e}function KC(n,e,t){const r=n.toString(),i=r.replace(k1,(o,l)=>{let h=e[l];return null==h&&(t.push(function g9(n){return new d.vHH(3003,!1)}()),h=""),h.toString()});return i==r?n:i}function zN(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const t8=/-+([a-z0-9])/g;function F1(n){return n.replace(t8,(...e)=>e[1].toUpperCase())}function Ta(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function m9(n){return new d.vHH(3004,!1)}()}}function gj(n,e){return window.getComputedStyle(n)[e]}const qN="*";function i8(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function s8(n,e,t){if(":"==n[0]){const m=function o8(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function M9(n){return new d.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof m)return void e.push(m);n=m}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function N9(n){return new d.vHH(3015,!1)}()),e;const i=r[1],o=r[2],l=r[3];e.push(mj(i,l));"<"==o[0]&&!(i==qN&&l==qN)&&e.push(mj(l,i))}(r,t,e)):t.push(n),t}const WN=new Set(["true","1"]),ZN=new Set(["false","0"]);function mj(n,e){const t=WN.has(n)||ZN.has(n),r=WN.has(e)||ZN.has(e);return(i,o)=>{let l=n==qN||n==i,h=e==qN||e==o;return!l&&t&&"boolean"==typeof i&&(l=i?WN.has(n):ZN.has(n)),!h&&r&&"boolean"==typeof o&&(h=o?WN.has(e):ZN.has(e)),l&&h}}const a8=new RegExp("s*:selfs*,?","g");function L1(n,e,t,r){return new u8(n).build(e,t,r)}class u8{constructor(e){this._driver=e}build(e,t,r){const i=new d8(t);return this._resetContextStyleTimingState(i),Ta(this,ZC(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function y9(){return new d.vHH(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const m=h,y=m.name;y.toString().split(/\s*,\s*/).forEach(b=>{m.name=b,o.push(this.visitState(m,t))}),m.name=y}else if(1==h.type){const m=this.visitTransition(h,t);r+=m.queryCount,i+=m.depCount,l.push(m)}else t.errors.push(function v9(){return new d.vHH(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,l=i||{};r.styles.forEach(h=>{h instanceof Map&&h.forEach(m=>{pj(m).forEach(y=>{l.hasOwnProperty(y)||o.add(y)})})}),o.size&&(zN(o.values()),t.errors.push(function w9(n,e){return new d.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Ta(this,ZC(e.animation),t);return{type:1,matchers:i8(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:n_(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Ta(this,r,t)),options:n_(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(l=>{t.currentTime=r;const h=Ta(this,l,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:o,options:n_(e.options)}}visitAnimate(e,t){const r=function f8(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return V1(GN(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=V1(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=GN(t,e);return V1(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:GC({});if(5==o.type)i=this.visitKeyframes(o,t);else{let l=e.styles,h=!1;if(!l){h=!0;const y={};r.easing&&(y.easing=r.easing),l=GC(y)}t.currentTime+=r.duration+r.delay;const m=this.visitStyle(l,t);m.isEmptyStep=h,i=m}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of i)"string"==typeof h?h===ch?r.push(h):t.errors.push(new d.vHH(3002,!1)):r.push(hj(h));let o=!1,l=null;return r.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(l=h.get("easing"),h.delete("easing")),!o))for(let m of h.values())if(m.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:l,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((h,m)=>{const y=t.collectedStyles.get(t.currentQuerySelector),b=y.get(m);let S=!0;b&&(o!=i&&o>=b.startTime&&i<=b.endTime&&(t.errors.push(function I9(n,e,t,r,i){return new d.vHH(3010,!1)}()),S=!1),o=b.startTime),S&&y.set(m,{startTime:o,endTime:i}),t.options&&function e8(n,e,t){const r=e.params||{},i=pj(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function p9(n){return new d.vHH(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function C9(){return new d.vHH(3011,!1)}()),r;let o=0;const l=[];let h=!1,m=!1,y=0;const b=e.steps.map(ke=>{const We=this._makeStyleAst(ke,t);let Be=null!=We.offset?We.offset:function h8(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(We.styles),Ye=0;return null!=Be&&(o++,Ye=We.offset=Be),m=m||Ye<0||Ye>1,h=h||Ye<y,y=Ye,l.push(Ye),We});m&&t.errors.push(function b9(){return new d.vHH(3012,!1)}()),h&&t.errors.push(function T9(){return new d.vHH(3200,!1)}());const S=e.steps.length;let R=0;o>0&&o<S?t.errors.push(function D9(){return new d.vHH(3202,!1)}()):0==o&&(R=1/(S-1));const k=S-1,B=t.currentTime,K=t.currentAnimateTimings,se=K.duration;return b.forEach((ke,We)=>{const Be=R>0?We==k?1:R*We:l[We],Ye=Be*se;t.currentTime=B+K.delay+Ye,K.duration=Ye,this._validateStyleAst(ke,t),ke.offset=Be,r.styles.push(ke)}),r}visitReference(e,t){return{type:8,animation:Ta(this,ZC(e.animation),t),options:n_(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:n_(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:n_(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,l]=function l8(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(a8,"")),n=n.replace(/@\*/g,$N).replace(/@\w+/g,t=>$N+"-"+t.slice(1)).replace(/:animating/g,P1),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,ba(t.collectedStyles,t.currentQuerySelector,new Map);const h=Ta(this,ZC(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:h,originalSelector:e.selector,options:n_(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function S9(){return new d.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:GN(e.timings,t.errors,!0);return{type:12,animation:Ta(this,ZC(e.animation),t),timings:r,options:null}}}class d8{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function n_(n){return n?(n=WC(n)).params&&(n.params=function c8(n){return n?WC(n):null}(n.params)):n={},n}function V1(n,e,t){return{duration:n,delay:e,easing:t}}function U1(n,e,t,r,i,o,l=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:l,subTimeline:h}}class KN{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const m8=new RegExp(":enter","g"),y8=new RegExp(":leave","g");function B1(n,e,t,r,i,o=new Map,l=new Map,h,m,y=[]){return(new v8).buildKeyframes(n,e,t,r,i,o,l,h,m,y)}class v8{buildKeyframes(e,t,r,i,o,l,h,m,y,b=[]){y=y||new KN;const S=new H1(e,t,y,i,o,b,[]);S.options=m;const R=m.delay?dh(m.delay):0;S.currentTimeline.delayNextStep(R),S.currentTimeline.setStyles([l],null,S.errors,m),Ta(this,r,S);const k=S.timelines.filter(B=>B.containsAnimation());if(k.length&&h.size){let B;for(let K=k.length-1;K>=0;K--){const se=k[K];if(se.element===t){B=se;break}}B&&!B.allowOnlyTimelineStyles()&&B.setStyles([h],null,S.errors,m)}return k.length?k.map(B=>B.buildKeyframes()):[U1(t,[],[],[],0,R,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);o!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const o=i?.delay;if(o){const l="number"==typeof o?o:dh(KC(o,i?.params??{},t.errors));r.delayNextStep(l)}}}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const l=null!=r.duration?dh(r.duration):null,h=null!=r.delay?dh(r.delay):null;return 0!==l&&e.forEach(m=>{const y=t.appendInstructionToTimeline(m,l,h);o=Math.max(o,y.duration+y.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Ta(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=YN);const l=dh(o.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>Ta(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?dh(e.options.delay):0;e.steps.forEach(l=>{const h=t.createSubContext(e.options);o&&h.delayNextStep(o),Ta(this,l,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return GN(t.params?KC(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(m=>{h.forwardTime((m.offset||0)*o),h.setStyles(m.styles,m.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?dh(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=YN);let l=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let m=null;h.forEach((y,b)=>{t.currentQueryIndex=b;const S=t.createSubContext(e.options,y);o&&S.delayNextStep(o),y===t.element&&(m=S.currentTimeline),Ta(this,e.animation,S),S.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,S.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),m&&(t.currentTimeline.mergeTimelineCollectedStyles(m),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,l=Math.abs(o.duration),h=l*(t.currentQueryTotal-1);let m=l*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":m=h-m;break;case"full":m=r.currentStaggerTime}const b=t.currentTimeline;m&&b.delayNextStep(m);const S=b.currentTime;Ta(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-S+(i.startTime-r.currentTimeline.startTime)}}const YN={};class H1{constructor(e,t,r,i,o,l,h,m){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=l,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=YN,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new QN(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=dh(r.duration)),null!=r.delay&&(i.delay=dh(r.delay));const o=r.params;if(o){let l=i.params;l||(l=this.options.params={}),Object.keys(o).forEach(h=>{(!t||!l.hasOwnProperty(h))&&(l[h]=KC(o[h],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new H1(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=YN,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new w8(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,l){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(m8,"."+this._enterClassName)).replace(y8,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),h.push(...y)}return!o&&0==h.length&&l.push(function A9(n){return new d.vHH(3014,!1)}()),h}}class QN{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new QN(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||ch),this._currentKeyframe.set(t,ch);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},l=function E8(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let o of r)t.set(o,ch)}else wp(i,t)}),t}(e,this._globalTimelineStyles);for(let[h,m]of l){const y=KC(m,o,r);this._pendingStyles.set(h,y),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??ch),this._updateStyle(h,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,m)=>{const y=wp(h,new Map,this._backFill);y.forEach((b,S)=>{b===b1?e.add(S):b===ch&&t.add(S)}),r||y.set("offset",m/this.duration),i.push(y)});const o=e.size?zN(e.values()):[],l=t.size?zN(t.values()):[];if(r){const h=i[0],m=new Map(h);h.set("offset",0),m.set("offset",1),i=[h,m]}return U1(this.element,i,o,l,this.duration,this.startTime,this.easing,!1)}}class w8 extends QN{constructor(e,t,r,i,o,l,h=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=h,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],l=r+t,h=t/l,m=wp(e[0]);m.set("offset",0),o.push(m);const y=wp(e[0]);y.set("offset",vj(h)),o.push(y);const b=e.length-1;for(let S=1;S<=b;S++){let R=wp(e[S]);const k=R.get("offset");R.set("offset",vj((t+k*r)/l)),o.push(R)}r=l,t=0,i="",e=o}return U1(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function vj(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class j1{}const I8=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class C8 extends j1{normalizePropertyName(e,t){return F1(e)}normalizeStyleValue(e,t,r,i){let o="";const l=r.toString().trim();if(I8.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(function _9(n,e){return new d.vHH(3005,!1)}())}return l+o}}function wj(n,e,t,r,i,o,l,h,m,y,b,S,R){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:l,timelines:h,queriedElements:m,preStyleProps:y,postStyleProps:b,totalTime:S,errors:R}}const $1={};class Ej{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function b8(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,l,h,m,y,b){const S=[],R=this.ast.options&&this.ast.options.params||$1,B=this.buildStyles(r,h&&h.params||$1,S),K=m&&m.params||$1,se=this.buildStyles(i,K,S),ke=new Set,We=new Map,Be=new Map,Ye="void"===i,At={params:T8(K,R),delay:this.ast.options?.delay},Ft=b?[]:B1(e,t,this.ast.animation,o,l,B,se,At,y,S);let _n=0;if(Ft.forEach(Ys=>{_n=Math.max(Ys.duration+Ys.delay,_n)}),S.length)return wj(t,this._triggerName,r,i,Ye,B,se,[],[],We,Be,_n,S);Ft.forEach(Ys=>{const hh=Ys.element,Fj=ba(We,hh,new Set);Ys.preStyleProps.forEach(r_=>Fj.add(r_));const QC=ba(Be,hh,new Set);Ys.postStyleProps.forEach(r_=>QC.add(r_)),hh!==t&&ke.add(hh)});const Hr=zN(ke.values());return wj(t,this._triggerName,r,i,Ye,B,se,Ft,Hr,We,Be,_n)}}function T8(n,e){const t=WC(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class D8{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=WC(this.defaultParams);return Object.keys(e).forEach(o=>{const l=e[o];null!==l&&(i[o]=l)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((l,h)=>{l&&(l=KC(l,i,t));const m=this.normalizer.normalizePropertyName(h,t);l=this.normalizer.normalizeStyleValue(h,m,l,t),r.set(h,l)})}),r}}class A8{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new D8(i.style,i.options&&i.options.params||{},r))}),Ij(this.states,"true","1"),Ij(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Ej(e,i,this.states))}),this.fallbackTransition=function N8(n,e,t){return new Ej(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Ij(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const M8=new KN;class R8{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],o=L1(this._driver,t,r,[]);if(r.length)throw function k9(n){return new d.vHH(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,r){const i=e.element,o=ij(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations.get(e);let l;const h=new Map;if(o?(l=B1(this._driver,t,o,x1,HN,new Map,new Map,r,M8,i),l.forEach(b=>{const S=ba(h,b.element,new Map);b.postStyleProps.forEach(R=>S.set(R,null))})):(i.push(function F9(){return new d.vHH(3300,!1)}()),l=[]),i.length)throw function L9(n){return new d.vHH(3504,!1)}();h.forEach((b,S)=>{b.forEach((R,k)=>{b.set(k,this._driver.computeStyle(S,k,ch))})});const y=vp(l.map(b=>{const S=h.get(b.element);return this._buildPlayer(b,new Map,S)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function V9(n){return new d.vHH(3301,!1)}();return t}listen(e,t,r,i){const o=N1(t,"","","");return S1(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Cj="ng-animate-queued",G1="ng-animate-disabled",F8=[],bj={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},L8={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},wu="__ng_removed";class z1{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function H8(n){return n??null}(r?e.value:e),r){const o=WC(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const YC="void",q1=new z1(YC);class V8{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Eu(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function U9(n,e){return new d.vHH(3302,!1)}();if(null==r||0==r.length)throw function B9(n){return new d.vHH(3303,!1)}();if(!function j8(n){return"start"==n||"done"==n}(r))throw function H9(n,e){return new d.vHH(3400,!1)}();const o=ba(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};o.push(l);const h=ba(this._engine.statesByElement,e,new Map);return h.has(t)||(Eu(e,jN),Eu(e,jN+"-"+t),h.set(t,q1)),()=>{this._engine.afterFlush(()=>{const m=o.indexOf(l);m>=0&&o.splice(m,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function j9(n){return new d.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),l=new W1(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(Eu(e,jN),Eu(e,jN+"-"+t),this._engine.statesByElement.set(e,h=new Map));let m=h.get(t);const y=new z1(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&m&&y.absorbOptions(m.options),h.set(t,y),m||(m=q1),y.value!==YC&&m.value===y.value){if(!function z8(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(m.params,y.params)){const K=[],se=o.matchStyles(m.value,m.params,K),ke=o.matchStyles(y.value,y.params,K);K.length?this._engine.reportError(K):this._engine.afterFlush(()=>{t_(e,se),kc(e,ke)})}return}const R=ba(this._engine.playersByElement,e,[]);R.forEach(K=>{K.namespaceId==this.id&&K.triggerName==t&&K.queued&&K.destroy()});let k=o.matchTransition(m.value,y.value,e,y.params),B=!1;if(!k){if(!i)return;k=o.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:k,fromState:m,toState:y,player:l,isFallbackTransition:B}),B||(Eu(e,Cj),l.onStart(()=>{Ow(e,Cj)})),l.onDone(()=>{let K=this.players.indexOf(l);K>=0&&this.players.splice(K,1);const se=this._engine.playersByElement.get(e);if(se){let ke=se.indexOf(l);ke>=0&&se.splice(ke,1)}}),this.players.push(l),R.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,$N,!0);r.forEach(i=>{if(i[wu])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(l=>l.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e),l=new Map;if(o){const h=[];if(o.forEach((m,y)=>{if(l.set(y,m.value),this._triggers.has(y)){const b=this.trigger(e,y,YC,i);b&&h.push(b)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&vp(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const l=o.name;if(i.has(l))return;i.add(l);const m=this._triggers.get(l).fallbackTransition,y=r.get(l)||q1,b=new z1(YC),S=new W1(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:m,fromState:y,toState:b,player:S,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const o=e[wu];(!o||o===bj)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Eu(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,l=this._elementListeners.get(o);l&&l.forEach(h=>{if(h.name==r.triggerName){const m=N1(o,r.triggerName,r.fromState.value,r.toState.value);m._data=e,S1(r.player,h.phase,m,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==o||0==l?o-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class U8{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new V8(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let l=!1,h=this.driver.getParentElement(t);for(;h;){const m=i.get(h);if(m){const y=r.indexOf(m);r.splice(y+1,0,e),l=!0;break}h=this.driver.getParentElement(h)}l||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(e,t,r,i){if(JN(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!JN(t))return;const o=t[wu];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Eu(e,G1)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ow(e,G1))}removeNode(e,t,r){if(JN(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[wu]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return JN(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,$N,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,P1,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return vp(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[wu];if(t&&t.setForRemoval){if(e[wu]=bj,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(G1)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Eu(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?vp(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function $9(n){return new d.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new KN,i=[],o=new Map,l=[],h=new Map,m=new Map,y=new Map,b=new Set;this.disabledNodes.forEach(bt=>{b.add(bt);const Lt=this.driver.query(bt,".ng-animate-queued",!0);for(let jt=0;jt<Lt.length;jt++)b.add(Lt[jt])});const S=this.bodyNode,R=Array.from(this.statesByElement.keys()),k=Sj(R,this.collectedEnterElements),B=new Map;let K=0;k.forEach((bt,Lt)=>{const jt=x1+K++;B.set(Lt,jt),bt.forEach(Tn=>Eu(Tn,jt))});const se=[],ke=new Set,We=new Set;for(let bt=0;bt<this.collectedLeaveElements.length;bt++){const Lt=this.collectedLeaveElements[bt],jt=Lt[wu];jt&&jt.setForRemoval&&(se.push(Lt),ke.add(Lt),jt.hasAnimation?this.driver.query(Lt,".ng-star-inserted",!0).forEach(Tn=>ke.add(Tn)):We.add(Lt))}const Be=new Map,Ye=Sj(R,Array.from(ke));Ye.forEach((bt,Lt)=>{const jt=HN+K++;Be.set(Lt,jt),bt.forEach(Tn=>Eu(Tn,jt))}),e.push(()=>{k.forEach((bt,Lt)=>{const jt=B.get(Lt);bt.forEach(Tn=>Ow(Tn,jt))}),Ye.forEach((bt,Lt)=>{const jt=Be.get(Lt);bt.forEach(Tn=>Ow(Tn,jt))}),se.forEach(bt=>{this.processLeaveNode(bt)})});const At=[],Ft=[];for(let bt=this._namespaceList.length-1;bt>=0;bt--)this._namespaceList[bt].drainQueuedTransitions(t).forEach(jt=>{const Tn=jt.player,us=jt.element;if(At.push(Tn),this.collectedEnterElements.length){const Qs=us[wu];if(Qs&&Qs.setForMove){if(Qs.previousTriggersValues&&Qs.previousTriggersValues.has(jt.triggerName)){const i_=Qs.previousTriggersValues.get(jt.triggerName),Iu=this.statesByElement.get(jt.element);if(Iu&&Iu.has(jt.triggerName)){const tM=Iu.get(jt.triggerName);tM.value=i_,Iu.set(jt.triggerName,tM)}}return void Tn.destroy()}}const Fc=!S||!this.driver.containsElement(S,us),Da=Be.get(us),Ep=B.get(us),jr=this._buildInstruction(jt,r,Ep,Da,Fc);if(jr.errors&&jr.errors.length)return void Ft.push(jr);if(Fc)return Tn.onStart(()=>t_(us,jr.fromStyles)),Tn.onDestroy(()=>kc(us,jr.toStyles)),void i.push(Tn);if(jt.isFallbackTransition)return Tn.onStart(()=>t_(us,jr.fromStyles)),Tn.onDestroy(()=>kc(us,jr.toStyles)),void i.push(Tn);const Uj=[];jr.timelines.forEach(Qs=>{Qs.stretchStartingKeyframe=!0,this.disabledNodes.has(Qs.element)||Uj.push(Qs)}),jr.timelines=Uj,r.append(us,jr.timelines),l.push({instruction:jr,player:Tn,element:us}),jr.queriedElements.forEach(Qs=>ba(h,Qs,[]).push(Tn)),jr.preStyleProps.forEach((Qs,i_)=>{if(Qs.size){let Iu=m.get(i_);Iu||m.set(i_,Iu=new Set),Qs.forEach((tM,Y1)=>Iu.add(Y1))}}),jr.postStyleProps.forEach((Qs,i_)=>{let Iu=y.get(i_);Iu||y.set(i_,Iu=new Set),Qs.forEach((tM,Y1)=>Iu.add(Y1))})});if(Ft.length){const bt=[];Ft.forEach(Lt=>{bt.push(function G9(n,e){return new d.vHH(3505,!1)}())}),At.forEach(Lt=>Lt.destroy()),this.reportError(bt)}const _n=new Map,Hr=new Map;l.forEach(bt=>{const Lt=bt.element;r.has(Lt)&&(Hr.set(Lt,Lt),this._beforeAnimationBuild(bt.player.namespaceId,bt.instruction,_n))}),i.forEach(bt=>{const Lt=bt.element;this._getPreviousPlayers(Lt,!1,bt.namespaceId,bt.triggerName,null).forEach(Tn=>{ba(_n,Lt,[]).push(Tn),Tn.destroy()})});const Ys=se.filter(bt=>Nj(bt,m,y)),hh=new Map;Dj(hh,this.driver,We,y,ch).forEach(bt=>{Nj(bt,m,y)&&Ys.push(bt)});const QC=new Map;k.forEach((bt,Lt)=>{Dj(QC,this.driver,new Set(bt),m,b1)}),Ys.forEach(bt=>{const Lt=hh.get(bt),jt=QC.get(bt);hh.set(bt,new Map([...Lt?.entries()??[],...jt?.entries()??[]]))});const r_=[],Lj=[],Vj={};l.forEach(bt=>{const{element:Lt,player:jt,instruction:Tn}=bt;if(r.has(Lt)){if(b.has(Lt))return jt.onDestroy(()=>kc(Lt,Tn.toStyles)),jt.disabled=!0,jt.overrideTotalTime(Tn.totalTime),void i.push(jt);let us=Vj;if(Hr.size>1){let Da=Lt;const Ep=[];for(;Da=Da.parentNode;){const jr=Hr.get(Da);if(jr){us=jr;break}Ep.push(Da)}Ep.forEach(jr=>Hr.set(jr,us))}const Fc=this._buildAnimation(jt.namespaceId,Tn,_n,o,QC,hh);if(jt.setRealPlayer(Fc),us===Vj)r_.push(jt);else{const Da=this.playersByElement.get(us);Da&&Da.length&&(jt.parentPlayer=vp(Da)),i.push(jt)}}else t_(Lt,Tn.fromStyles),jt.onDestroy(()=>kc(Lt,Tn.toStyles)),Lj.push(jt),b.has(Lt)&&i.push(jt)}),Lj.forEach(bt=>{const Lt=o.get(bt.element);if(Lt&&Lt.length){const jt=vp(Lt);bt.setRealPlayer(jt)}}),i.forEach(bt=>{bt.parentPlayer?bt.syncPlayerEvents(bt.parentPlayer):bt.destroy()});for(let bt=0;bt<se.length;bt++){const Lt=se[bt],jt=Lt[wu];if(Ow(Lt,HN),jt&&jt.hasAnimation)continue;let Tn=[];if(h.size){let Fc=h.get(Lt);Fc&&Fc.length&&Tn.push(...Fc);let Da=this.driver.query(Lt,P1,!0);for(let Ep=0;Ep<Da.length;Ep++){let jr=h.get(Da[Ep]);jr&&jr.length&&Tn.push(...jr)}}const us=Tn.filter(Fc=>!Fc.destroyed);us.length?$8(this,Lt,us):this.processLeaveNode(Lt)}return se.length=0,r_.forEach(bt=>{this.players.push(bt),bt.onDone(()=>{bt.destroy();const Lt=this.players.indexOf(bt);this.players.splice(Lt,1)}),bt.play()}),r_}elementContainsData(e,t){let r=!1;const i=t[wu];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let l=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(l=h)}else{const h=this.playersByElement.get(e);if(h){const m=!o||o==YC;h.forEach(y=>{y.queued||!m&&y.triggerName!=i||l.push(y)})}}return(r||i)&&(l=l.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),l}_beforeAnimationBuild(e,t,r){const o=t.element,l=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const m of t.timelines){const y=m.element,b=y!==o,S=ba(r,y,[]);this._getPreviousPlayers(y,b,l,h,t.toState).forEach(k=>{const B=k.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),k.destroy(),S.push(k)})}t_(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,l){const h=t.triggerName,m=t.element,y=[],b=new Set,S=new Set,R=t.timelines.map(B=>{const K=B.element;b.add(K);const se=K[wu];if(se&&se.removedBeforeQueried)return new zC(B.duration,B.delay);const ke=K!==m,We=function G8(n){const e=[];return Aj(n,e),e}((r.get(K)||F8).map(_n=>_n.getRealPlayer())).filter(_n=>!!_n.element&&_n.element===K),Be=o.get(K),Ye=l.get(K),At=ij(this._normalizer,B.keyframes,Be,Ye),Ft=this._buildPlayer(B,At,We);if(B.subTimeline&&i&&S.add(K),ke){const _n=new W1(e,h,K);_n.setRealPlayer(Ft),y.push(_n)}return Ft});y.forEach(B=>{ba(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function B8(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,B.element,B))}),b.forEach(B=>Eu(B,dj));const k=vp(R);return k.onDestroy(()=>{b.forEach(B=>Ow(B,dj)),kc(m,t.toStyles)}),S.forEach(B=>{ba(i,B,[]).push(k)}),k}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new zC(e.duration,e.delay)}}class W1{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new zC,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>S1(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ba(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function JN(n){return n&&1===n.nodeType}function Tj(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Dj(n,e,t,r,i){const o=[];t.forEach(m=>o.push(Tj(m)));const l=[];r.forEach((m,y)=>{const b=new Map;m.forEach(S=>{const R=e.computeStyle(y,S,i);b.set(S,R),(!R||0==R.length)&&(y[wu]=L8,l.push(y))}),n.set(y,b)});let h=0;return t.forEach(m=>Tj(m,o[h++])),l}function Sj(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const r=1,i=new Set(e),o=new Map;function l(h){if(!h)return r;let m=o.get(h);if(m)return m;const y=h.parentNode;return m=t.has(y)?y:i.has(y)?r:l(y),o.set(h,m),m}return e.forEach(h=>{const m=l(h);m!==r&&t.get(m).push(h)}),t}function Eu(n,e){n.classList?.add(e)}function Ow(n,e){n.classList?.remove(e)}function $8(n,e,t){vp(t).onDone(()=>n.processLeaveNode(e))}function Aj(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof XH?Aj(r.players,e):e.push(r)}}function Nj(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class XN{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new U8(e,t,r),this._timelineEngine=new R8(e,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const l=e+"-"+i;let h=this._triggerCache[l];if(!h){const m=[],b=L1(this._driver,o,m,[]);if(m.length)throw function P9(n,e){return new d.vHH(3404,!1)}();h=function S8(n,e,t){return new A8(n,e,t)}(i,b,this._normalizer),this._triggerCache[l]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,l]=sj(r);this._timelineEngine.command(o,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[l,h]=sj(r);return this._timelineEngine.listen(l,t,h,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let W8=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&kc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(kc(this._element,this._initialStyles),this._endStyles&&(kc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(t_(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(t_(this._element,this._endStyles),this._endStyles=null),kc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Z1(n){let e=null;return n.forEach((t,r)=>{(function Z8(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Mj{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:gj(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class K8{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return aj(e,t)}getParentElement(e){return M1(e)}query(e,t,r){return uj(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,o,l=[]){const m={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(m.easing=o);const y=new Map,b=l.filter(k=>k instanceof Mj);(function n8(n,e){return 0===n||0===e})(r,i)&&b.forEach(k=>{k.currentSnapshot.forEach((B,K)=>y.set(K,B))});let S=function X9(n){return n.length?n[0]instanceof Map?n:n.map(e=>hj(e)):[]}(t).map(k=>wp(k));S=function r8(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,l)=>{r.has(l)||i.push(l),r.set(l,o)}),i.length)for(let o=1;o<e.length;o++){let l=e[o];i.forEach(h=>l.set(h,gj(n,h)))}}return e}(e,S,y);const R=function q8(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Z1(e[0]),e.length>1&&(r=Z1(e[e.length-1]))):e instanceof Map&&(t=Z1(e)),t||r?new W8(n,t,r):null}(e,S);return new Mj(e,S,m,R)}}let Y8=(()=>{class n extends ZH{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?YH(t):t;return Rj(this._renderer,null,r,"register",[i]),new Q8(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(pe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Q8 extends o5{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new J8(this._id,e,t||{},this._renderer)}}class J8{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Rj(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Rj(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const xj="@.disabled";let X8=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,l)=>{const h=l?.parentNode(o);h&&l.removeChild(h,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let b=this._rendererCache.get(o);return b||(b=new Pj("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,b)),b}const l=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const m=b=>{Array.isArray(b)?b.forEach(m):this.engine.registerTrigger(l,h,t,b.name,b)};return r.data.animation.forEach(m),new e7(this,h,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[l,h]=o;l(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(XN),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Pj{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?o=>t.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==xj?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class e7 extends Pj{constructor(e,t,r,i,o){super(t,r,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==xj?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function t7(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),l="";return"@"!=o.charAt(0)&&([o,l]=function n7(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,l,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let r7=(()=>{class n extends XN{constructor(t,r,i,o){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe),d.LFG(R1),d.LFG(j1),d.LFG(d.z2F))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Oj=[{provide:ZH,useClass:Y8},{provide:j1,useFactory:function i7(){return new C8}},{provide:XN,useClass:r7},{provide:d.FYo,useFactory:function s7(n,e,t){return new X8(n,e,t)},deps:[kl,XN,d.R0b]}],K1=[{provide:R1,useFactory:()=>new K8},{provide:d.QbO,useValue:"BrowserAnimations"},...Oj],kj=[{provide:R1,useClass:lj},{provide:d.QbO,useValue:"NoopAnimations"},...Oj];let o7=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?kj:K1}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:K1,imports:[ko]}),n})();const a7=[{path:"register-student",component:F5},{path:"view-students",component:i9},{path:"edit-student/:id",component:d9}];let u7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[J_]}),n.\u0275inj=d.cJS({imports:[o7,N5.forRoot(),_i,Q_.forRoot(a7),ko,lF,QM,di.hO.initializeApp(r5_firebaseConfig),t0,zz,fx,n5,ME,Q5]}),n})();Oh().bootstrapModule(u7).catch(n=>console.error(n))},1135:(ft,Ce,F)=>{F.d(Ce,{X:()=>J});var d=F(7579);class J extends d.x{constructor(ne){super(),this._value=ne}get value(){return this.getValue()}_subscribe(ne){const oe=super._subscribe(ne);return!oe.closed&&ne.next(this._value),oe}getValue(){const{hasError:ne,thrownError:oe,_value:pe}=this;if(ne)throw oe;return this._throwIfClosed(),pe}next(ne){super.next(this._value=ne)}}},9751:(ft,Ce,F)=>{F.d(Ce,{y:()=>Fe});var d=F(930),J=F(727),L=F(8822),ne=F(9635),oe=F(2416),pe=F(576),ye=F(2806);let Fe=(()=>{class te{constructor(De){De&&(this._subscribe=De)}lift(De){const nt=new te;return nt.source=this,nt.operator=De,nt}subscribe(De,nt,Pe){const Qe=function z(te){return te&&te instanceof d.Lv||function j(te){return te&&(0,pe.m)(te.next)&&(0,pe.m)(te.error)&&(0,pe.m)(te.complete)}(te)&&(0,J.Nn)(te)}(De)?De:new d.Hp(De,nt,Pe);return(0,ye.x)(()=>{const{operator:Le,source:Tt}=this;Qe.add(Le?Le.call(Qe,Tt):Tt?this._subscribe(Qe):this._trySubscribe(Qe))}),Qe}_trySubscribe(De){try{return this._subscribe(De)}catch(nt){De.error(nt)}}forEach(De,nt){return new(nt=me(nt))((Pe,Qe)=>{const Le=new d.Hp({next:Tt=>{try{De(Tt)}catch(pt){Qe(pt),Le.unsubscribe()}},error:Qe,complete:Pe});this.subscribe(Le)})}_subscribe(De){var nt;return null===(nt=this.source)||void 0===nt?void 0:nt.subscribe(De)}[L.L](){return this}pipe(...De){return(0,ne.U)(De)(this)}toPromise(De){return new(De=me(De))((nt,Pe)=>{let Qe;this.subscribe(Le=>Qe=Le,Le=>Pe(Le),()=>nt(Qe))})}}return te.create=Ue=>new te(Ue),te})();function me(te){var Ue;return null!==(Ue=te??oe.config.Promise)&&void 0!==Ue?Ue:Promise}},7579:(ft,Ce,F)=>{F.d(Ce,{x:()=>ye});var d=F(9751),J=F(727);const ne=(0,F(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=F(8737),pe=F(2806);let ye=(()=>{class me extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const te=new Fe(this,this);return te.operator=z,te}_throwIfClosed(){if(this.closed)throw new ne}next(z){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(z)}})}error(z){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:te}=this;for(;te.length;)te.shift().error(z)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:te,isStopped:Ue,observers:De}=this;return te||Ue?J.Lc:(this.currentObservers=null,De.push(z),new J.w0(()=>{this.currentObservers=null,(0,oe.P)(De,z)}))}_checkFinalizedStatuses(z){const{hasError:te,thrownError:Ue,isStopped:De}=this;te?z.error(Ue):De&&z.complete()}asObservable(){const z=new d.y;return z.source=this,z}}return me.create=(j,z)=>new Fe(j,z),me})();class Fe extends ye{constructor(j,z){super(),this.destination=j,this.source=z}next(j){var z,te;null===(te=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===te||te.call(z,j)}error(j){var z,te;null===(te=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===te||te.call(z,j)}complete(){var j,z;null===(z=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===z||z.call(j)}_subscribe(j){var z,te;return null!==(te=null===(z=this.source)||void 0===z?void 0:z.subscribe(j))&&void 0!==te?te:J.Lc}}},930:(ft,Ce,F)=>{F.d(Ce,{Hp:()=>Pe,Lv:()=>te});var d=F(576),J=F(727),L=F(2416),ne=F(7849),oe=F(5032);const pe=me("C",void 0,void 0);function me(ie,ve,X){return{kind:ie,value:ve,error:X}}var j=F(3410),z=F(2806);class te extends J.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,J.Nn)(ve)&&ve.add(this)):this.destination=pt}static create(ve,X,_e){return new Pe(ve,X,_e)}next(ve){this.isStopped?Tt(function Fe(ie){return me("N",ie,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Tt(function ye(ie){return me("E",void 0,ie)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Tt(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function De(ie,ve){return Ue.call(ie,ve)}class nt{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:X}=this;if(X.next)try{X.next(ve)}catch(_e){Qe(_e)}}error(ve){const{partialObserver:X}=this;if(X.error)try{X.error(ve)}catch(_e){Qe(_e)}else Qe(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(X){Qe(X)}}}class Pe extends te{constructor(ve,X,_e){let Ne;if(super(),(0,d.m)(ve)||!ve)Ne={next:ve??void 0,error:X??void 0,complete:_e??void 0};else{let He;this&&L.config.useDeprecatedNextContext?(He=Object.create(ve),He.unsubscribe=()=>this.unsubscribe(),Ne={next:ve.next&&De(ve.next,He),error:ve.error&&De(ve.error,He),complete:ve.complete&&De(ve.complete,He)}):Ne=ve}this.destination=new nt(Ne)}}function Qe(ie){L.config.useDeprecatedSynchronousErrorHandling?(0,z.O)(ie):(0,ne.h)(ie)}function Tt(ie,ve){const{onStoppedNotification:X}=L.config;X&&j.z.setTimeout(()=>X(ie,ve))}const pt={closed:!0,next:oe.Z,error:function Le(ie){throw ie},complete:oe.Z}},727:(ft,Ce,F)=>{F.d(Ce,{Lc:()=>pe,w0:()=>oe,Nn:()=>ye});var d=F(576);const L=(0,F(3888).d)(me=>function(z){me(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((te,Ue)=>`${Ue+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var ne=F(8737);class oe{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const De of z)De.remove(this);else z.remove(this);const{initialTeardown:te}=this;if((0,d.m)(te))try{te()}catch(De){j=De instanceof L?De.errors:[De]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const De of Ue)try{Fe(De)}catch(nt){j=j??[],nt instanceof L?j=[...j,...nt.errors]:j.push(nt)}}if(j)throw new L(j)}}add(j){var z;if(j&&j!==this)if(this.closed)Fe(j);else{if(j instanceof oe){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(j)}}_hasParent(j){const{_parentage:z}=this;return z===j||Array.isArray(z)&&z.includes(j)}_addParent(j){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(j),z):z?[z,j]:j}_removeParent(j){const{_parentage:z}=this;z===j?this._parentage=null:Array.isArray(z)&&(0,ne.P)(z,j)}remove(j){const{_finalizers:z}=this;z&&(0,ne.P)(z,j),j instanceof oe&&j._removeParent(this)}}oe.EMPTY=(()=>{const me=new oe;return me.closed=!0,me})();const pe=oe.EMPTY;function ye(me){return me instanceof oe||me&&"closed"in me&&(0,d.m)(me.remove)&&(0,d.m)(me.add)&&(0,d.m)(me.unsubscribe)}function Fe(me){(0,d.m)(me)?me():me.unsubscribe()}},2416:(ft,Ce,F)=>{F.d(Ce,{config:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ft,Ce,F)=>{F.d(Ce,{E:()=>J});const J=new(F(9751).y)(oe=>oe.complete())},8996:(ft,Ce,F)=>{F.d(Ce,{D:()=>ve});var d=F(8421),J=F(5363),L=F(9468),pe=F(9751),Fe=F(2202),me=F(576),j=F(9672);function te(X,_e){if(!X)throw new Error("Iterable cannot be null");return new pe.y(Ne=>{(0,j.f)(Ne,_e,()=>{const He=X[Symbol.asyncIterator]();(0,j.f)(Ne,_e,()=>{He.next().then(ae=>{ae.done?Ne.complete():Ne.next(ae.value)})},0,!0)})})}var Ue=F(3670),De=F(8239),nt=F(1144),Pe=F(6495),Qe=F(2206),Le=F(4532),Tt=F(3260);function ve(X,_e){return _e?function ie(X,_e){if(null!=X){if((0,Ue.c)(X))return function ne(X,_e){return(0,d.Xf)(X).pipe((0,L.R)(_e),(0,J.Q)(_e))}(X,_e);if((0,nt.z)(X))return function ye(X,_e){return new pe.y(Ne=>{let He=0;return _e.schedule(function(){He===X.length?Ne.complete():(Ne.next(X[He++]),Ne.closed||this.schedule())})})}(X,_e);if((0,De.t)(X))return function oe(X,_e){return(0,d.Xf)(X).pipe((0,L.R)(_e),(0,J.Q)(_e))}(X,_e);if((0,Qe.D)(X))return te(X,_e);if((0,Pe.T)(X))return function z(X,_e){return new pe.y(Ne=>{let He;return(0,j.f)(Ne,_e,()=>{He=X[Fe.h](),(0,j.f)(Ne,_e,()=>{let ae,ze;try{({value:ae,done:ze}=He.next())}catch(Qt){return void Ne.error(Qt)}ze?Ne.complete():Ne.next(ae)},0,!0)}),()=>(0,me.m)(He?.return)&&He.return()})}(X,_e);if((0,Tt.L)(X))return function pt(X,_e){return te((0,Tt.Q)(X),_e)}(X,_e)}throw(0,Le.z)(X)}(X,_e):(0,d.Xf)(X)}},8421:(ft,Ce,F)=>{F.d(Ce,{Xf:()=>Ue});var d=F(7582),J=F(1144),L=F(8239),ne=F(9751),oe=F(3670),pe=F(2206),ye=F(4532),Fe=F(6495),me=F(3260),j=F(576),z=F(7849),te=F(8822);function Ue(ie){if(ie instanceof ne.y)return ie;if(null!=ie){if((0,oe.c)(ie))return function De(ie){return new ne.y(ve=>{const X=ie[te.L]();if((0,j.m)(X.subscribe))return X.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ie);if((0,J.z)(ie))return function nt(ie){return new ne.y(ve=>{for(let X=0;X<ie.length&&!ve.closed;X++)ve.next(ie[X]);ve.complete()})}(ie);if((0,L.t)(ie))return function Pe(ie){return new ne.y(ve=>{ie.then(X=>{ve.closed||(ve.next(X),ve.complete())},X=>ve.error(X)).then(null,z.h)})}(ie);if((0,pe.D)(ie))return Le(ie);if((0,Fe.T)(ie))return function Qe(ie){return new ne.y(ve=>{for(const X of ie)if(ve.next(X),ve.closed)return;ve.complete()})}(ie);if((0,me.L)(ie))return function Tt(ie){return Le((0,me.Q)(ie))}(ie)}throw(0,ye.z)(ie)}function Le(ie){return new ne.y(ve=>{(function pt(ie,ve){var X,_e,Ne,He;return(0,d.mG)(this,void 0,void 0,function*(){try{for(X=(0,d.KL)(ie);!(_e=yield X.next()).done;)if(ve.next(_e.value),ve.closed)return}catch(ae){Ne={error:ae}}finally{try{_e&&!_e.done&&(He=X.return)&&(yield He.call(X))}finally{if(Ne)throw Ne.error}}ve.complete()})})(ie,ve).catch(X=>ve.error(X))})}},6451:(ft,Ce,F)=>{F.d(Ce,{T:()=>pe});var d=F(8189),J=F(8421),L=F(515),ne=F(7669),oe=F(8996);function pe(...ye){const Fe=(0,ne.yG)(ye),me=(0,ne._6)(ye,1/0),j=ye;return j.length?1===j.length?(0,J.Xf)(j[0]):(0,d.J)(me)((0,oe.D)(j,Fe)):L.E}},9646:(ft,Ce,F)=>{F.d(Ce,{of:()=>L});var d=F(7669),J=F(8996);function L(...ne){const oe=(0,d.yG)(ne);return(0,J.D)(ne,oe)}},5403:(ft,Ce,F)=>{F.d(Ce,{x:()=>J});var d=F(930);function J(ne,oe,pe,ye,Fe){return new L(ne,oe,pe,ye,Fe)}class L extends d.Lv{constructor(oe,pe,ye,Fe,me,j){super(oe),this.onFinalize=me,this.shouldUnsubscribe=j,this._next=pe?function(z){try{pe(z)}catch(te){oe.error(te)}}:super._next,this._error=Fe?function(z){try{Fe(z)}catch(te){oe.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=ye?function(){try{ye()}catch(z){oe.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},1884:(ft,Ce,F)=>{F.d(Ce,{x:()=>ne});var d=F(4671),J=F(4482),L=F(5403);function ne(pe,ye=d.y){return pe=pe??oe,(0,J.e)((Fe,me)=>{let j,z=!0;Fe.subscribe((0,L.x)(me,te=>{const Ue=ye(te);(z||!pe(j,Ue))&&(z=!1,j=Ue,me.next(te))}))})}function oe(pe,ye){return pe===ye}},4004:(ft,Ce,F)=>{F.d(Ce,{U:()=>L});var d=F(4482),J=F(5403);function L(ne,oe){return(0,d.e)((pe,ye)=>{let Fe=0;pe.subscribe((0,J.x)(ye,me=>{ye.next(ne.call(oe,me,Fe++))}))})}},8189:(ft,Ce,F)=>{F.d(Ce,{J:()=>L});var d=F(5577),J=F(4671);function L(ne=1/0){return(0,d.z)(J.y,ne)}},5577:(ft,Ce,F)=>{F.d(Ce,{z:()=>Fe});var d=F(4004),J=F(8421),L=F(4482),ne=F(9672),oe=F(5403),ye=F(576);function Fe(me,j,z=1/0){return(0,ye.m)(j)?Fe((te,Ue)=>(0,d.U)((De,nt)=>j(te,De,Ue,nt))((0,J.Xf)(me(te,Ue))),z):("number"==typeof j&&(z=j),(0,L.e)((te,Ue)=>function pe(me,j,z,te,Ue,De,nt,Pe){const Qe=[];let Le=0,Tt=0,pt=!1;const ie=()=>{pt&&!Qe.length&&!Le&&j.complete()},ve=_e=>Le<te?X(_e):Qe.push(_e),X=_e=>{De&&j.next(_e),Le++;let Ne=!1;(0,J.Xf)(z(_e,Tt++)).subscribe((0,oe.x)(j,He=>{Ue?.(He),De?ve(He):j.next(He)},()=>{Ne=!0},void 0,()=>{if(Ne)try{for(Le--;Qe.length&&Le<te;){const He=Qe.shift();nt?(0,ne.f)(j,nt,()=>X(He)):X(He)}ie()}catch(He){j.error(He)}}))};return me.subscribe((0,oe.x)(j,ve,()=>{pt=!0,ie()})),()=>{Pe?.()}}(te,Ue,me,z)))}},5363:(ft,Ce,F)=>{F.d(Ce,{Q:()=>ne});var d=F(9672),J=F(4482),L=F(5403);function ne(oe,pe=0){return(0,J.e)((ye,Fe)=>{ye.subscribe((0,L.x)(Fe,me=>(0,d.f)(Fe,oe,()=>Fe.next(me),pe),()=>(0,d.f)(Fe,oe,()=>Fe.complete(),pe),me=>(0,d.f)(Fe,oe,()=>Fe.error(me),pe)))})}},3099:(ft,Ce,F)=>{F.d(Ce,{B:()=>oe});var d=F(8421),J=F(7579),L=F(930),ne=F(4482);function oe(ye={}){const{connector:Fe=(()=>new J.x),resetOnError:me=!0,resetOnComplete:j=!0,resetOnRefCountZero:z=!0}=ye;return te=>{let Ue,De,nt,Pe=0,Qe=!1,Le=!1;const Tt=()=>{De?.unsubscribe(),De=void 0},pt=()=>{Tt(),Ue=nt=void 0,Qe=Le=!1},ie=()=>{const ve=Ue;pt(),ve?.unsubscribe()};return(0,ne.e)((ve,X)=>{Pe++,!Le&&!Qe&&Tt();const _e=nt=nt??Fe();X.add(()=>{Pe--,0===Pe&&!Le&&!Qe&&(De=pe(ie,z))}),_e.subscribe(X),!Ue&&Pe>0&&(Ue=new L.Hp({next:Ne=>_e.next(Ne),error:Ne=>{Le=!0,Tt(),De=pe(pt,me,Ne),_e.error(Ne)},complete:()=>{Qe=!0,Tt(),De=pe(pt,j),_e.complete()}}),(0,d.Xf)(ve).subscribe(Ue))})(te)}}function pe(ye,Fe,...me){if(!0===Fe)return void ye();if(!1===Fe)return;const j=new L.Hp({next:()=>{j.unsubscribe(),ye()}});return(0,d.Xf)(Fe(...me)).subscribe(j)}},9468:(ft,Ce,F)=>{F.d(Ce,{R:()=>J});var d=F(4482);function J(L,ne=0){return(0,d.e)((oe,pe)=>{pe.add(L.schedule(()=>oe.subscribe(pe),ne))})}},8505:(ft,Ce,F)=>{F.d(Ce,{b:()=>oe});var d=F(576),J=F(4482),L=F(5403),ne=F(4671);function oe(pe,ye,Fe){const me=(0,d.m)(pe)||ye||Fe?{next:pe,error:ye,complete:Fe}:pe;return me?(0,J.e)((j,z)=>{var te;null===(te=me.subscribe)||void 0===te||te.call(me);let Ue=!0;j.subscribe((0,L.x)(z,De=>{var nt;null===(nt=me.next)||void 0===nt||nt.call(me,De),z.next(De)},()=>{var De;Ue=!1,null===(De=me.complete)||void 0===De||De.call(me),z.complete()},De=>{var nt;Ue=!1,null===(nt=me.error)||void 0===nt||nt.call(me,De),z.error(De)},()=>{var De,nt;Ue&&(null===(De=me.unsubscribe)||void 0===De||De.call(me)),null===(nt=me.finalize)||void 0===nt||nt.call(me)}))}):ne.y}},4408:(ft,Ce,F)=>{F.d(Ce,{o:()=>oe});var d=F(727);class J extends d.w0{constructor(ye,Fe){super()}schedule(ye,Fe=0){return this}}const L={setInterval(pe,ye,...Fe){const{delegate:me}=L;return me?.setInterval?me.setInterval(pe,ye,...Fe):setInterval(pe,ye,...Fe)},clearInterval(pe){const{delegate:ye}=L;return(ye?.clearInterval||clearInterval)(pe)},delegate:void 0};var ne=F(8737);class oe extends J{constructor(ye,Fe){super(ye,Fe),this.scheduler=ye,this.work=Fe,this.pending=!1}schedule(ye,Fe=0){var me;if(this.closed)return this;this.state=ye;const j=this.id,z=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId(z,j,Fe)),this.pending=!0,this.delay=Fe,this.id=null!==(me=this.id)&&void 0!==me?me:this.requestAsyncId(z,this.id,Fe),this}requestAsyncId(ye,Fe,me=0){return L.setInterval(ye.flush.bind(ye,this),me)}recycleAsyncId(ye,Fe,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return Fe;null!=Fe&&L.clearInterval(Fe)}execute(ye,Fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(ye,Fe);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ye,Fe){let j,me=!1;try{this.work(ye)}catch(z){me=!0,j=z||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:ye,scheduler:Fe}=this,{actions:me}=Fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ne.P)(me,this),null!=ye&&(this.id=this.recycleAsyncId(Fe,ye,null)),this.delay=null,super.unsubscribe()}}}},7565:(ft,Ce,F)=>{F.d(Ce,{v:()=>L});var d=F(6063);class J{constructor(oe,pe=J.now){this.schedulerActionCtor=oe,this.now=pe}schedule(oe,pe=0,ye){return new this.schedulerActionCtor(this,oe).schedule(ye,pe)}}J.now=d.l.now;class L extends J{constructor(oe,pe=J.now){super(oe,pe),this.actions=[],this._active=!1}flush(oe){const{actions:pe}=this;if(this._active)return void pe.push(oe);let ye;this._active=!0;do{if(ye=oe.execute(oe.state,oe.delay))break}while(oe=pe.shift());if(this._active=!1,ye){for(;oe=pe.shift();)oe.unsubscribe();throw ye}}}},4986:(ft,Ce,F)=>{F.d(Ce,{z:()=>L});var d=F(4408);const L=new(F(7565).v)(d.o)},6063:(ft,Ce,F)=>{F.d(Ce,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(ft,Ce,F)=>{F.d(Ce,{z:()=>d});const d={setTimeout(J,L,...ne){const{delegate:oe}=d;return oe?.setTimeout?oe.setTimeout(J,L,...ne):setTimeout(J,L,...ne)},clearTimeout(J){const{delegate:L}=d;return(L?.clearTimeout||clearTimeout)(J)},delegate:void 0}},2202:(ft,Ce,F)=>{F.d(Ce,{h:()=>J});const J=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ft,Ce,F)=>{F.d(Ce,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ft,Ce,F)=>{F.d(Ce,{_6:()=>pe,jO:()=>ne,yG:()=>oe});var d=F(576);function L(ye){return ye[ye.length-1]}function ne(ye){return(0,d.m)(L(ye))?ye.pop():void 0}function oe(ye){return function J(ye){return ye&&(0,d.m)(ye.schedule)}(L(ye))?ye.pop():void 0}function pe(ye,Fe){return"number"==typeof L(ye)?ye.pop():Fe}},8737:(ft,Ce,F)=>{function d(J,L){if(J){const ne=J.indexOf(L);0<=ne&&J.splice(ne,1)}}F.d(Ce,{P:()=>d})},3888:(ft,Ce,F)=>{function d(J){const ne=J(oe=>{Error.call(oe),oe.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}F.d(Ce,{d:()=>d})},2806:(ft,Ce,F)=>{F.d(Ce,{O:()=>ne,x:()=>L});var d=F(2416);let J=null;function L(oe){if(d.config.useDeprecatedSynchronousErrorHandling){const pe=!J;if(pe&&(J={errorThrown:!1,error:null}),oe(),pe){const{errorThrown:ye,error:Fe}=J;if(J=null,ye)throw Fe}}else oe()}function ne(oe){d.config.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=oe)}},9672:(ft,Ce,F)=>{function d(J,L,ne,oe=0,pe=!1){const ye=L.schedule(function(){ne(),pe?J.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(J.add(ye),!pe)return ye}F.d(Ce,{f:()=>d})},4671:(ft,Ce,F)=>{function d(J){return J}F.d(Ce,{y:()=>d})},1144:(ft,Ce,F)=>{F.d(Ce,{z:()=>d});const d=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(ft,Ce,F)=>{F.d(Ce,{D:()=>J});var d=F(576);function J(L){return Symbol.asyncIterator&&(0,d.m)(L?.[Symbol.asyncIterator])}},576:(ft,Ce,F)=>{function d(J){return"function"==typeof J}F.d(Ce,{m:()=>d})},3670:(ft,Ce,F)=>{F.d(Ce,{c:()=>L});var d=F(8822),J=F(576);function L(ne){return(0,J.m)(ne[d.L])}},6495:(ft,Ce,F)=>{F.d(Ce,{T:()=>L});var d=F(2202),J=F(576);function L(ne){return(0,J.m)(ne?.[d.h])}},8239:(ft,Ce,F)=>{F.d(Ce,{t:()=>J});var d=F(576);function J(L){return(0,d.m)(L?.then)}},3260:(ft,Ce,F)=>{F.d(Ce,{L:()=>ne,Q:()=>L});var d=F(7582),J=F(576);function L(oe){return(0,d.FC)(this,arguments,function*(){const ye=oe.getReader();try{for(;;){const{value:Fe,done:me}=yield(0,d.qq)(ye.read());if(me)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(Fe)}}finally{ye.releaseLock()}})}function ne(oe){return(0,J.m)(oe?.getReader)}},4482:(ft,Ce,F)=>{F.d(Ce,{A:()=>J,e:()=>L});var d=F(576);function J(ne){return(0,d.m)(ne?.lift)}function L(ne){return oe=>{if(J(oe))return oe.lift(function(pe){try{return ne(pe,this)}catch(ye){this.error(ye)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ft,Ce,F)=>{function d(){}F.d(Ce,{Z:()=>d})},9635:(ft,Ce,F)=>{F.d(Ce,{U:()=>L,z:()=>J});var d=F(4671);function J(...ne){return L(ne)}function L(ne){return 0===ne.length?d.y:1===ne.length?ne[0]:function(pe){return ne.reduce((ye,Fe)=>Fe(ye),pe)}}},7849:(ft,Ce,F)=>{F.d(Ce,{h:()=>L});var d=F(2416),J=F(3410);function L(ne){J.z.setTimeout(()=>{const{onUnhandledError:oe}=d.config;if(!oe)throw ne;oe(ne)})}},4532:(ft,Ce,F)=>{function d(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ce,{z:()=>d})},2223:(ft,Ce,F)=>{F.d(Ce,{$8M:()=>Yu,$WT:()=>Ao,$Z:()=>Jb,AFp:()=>iE,ALo:()=>av,AaK:()=>te,AsE:()=>Ld,BQk:()=>Oy,CHM:()=>Fl,CRH:()=>Of,D6c:()=>iA,EJc:()=>US,EiD:()=>yb,EpF:()=>KT,F4k:()=>YT,FYo:()=>fE,FiY:()=>fo,GfV:()=>pE,Gpc:()=>nt,HDt:()=>Mv,JOm:()=>Ho,JVY:()=>lM,JZr:()=>pt,KtG:()=>rd,L6k:()=>H_,LAX:()=>dM,LFG:()=>un,Lbi:()=>xb,Lck:()=>hx,MAs:()=>Rg,MGl:()=>Pg,MMx:()=>A0,MR2:()=>Cb,NdJ:()=>Sf,Ojb:()=>oF,OlP:()=>Mn,Oqu:()=>jy,P3R:()=>lf,PXZ:()=>zS,Q6J:()=>xg,QGY:()=>qE,QbO:()=>sF,Qsj:()=>Gb,R0b:()=>Ts,RDi:()=>ob,Rgc:()=>em,SBq:()=>pc,Sil:()=>BS,Suo:()=>TS,TTD:()=>Nl,TgZ:()=>bf,Tol:()=>r0,Udp:()=>t0,VKq:()=>R0,X6Q:()=>pu,XFs:()=>Xe,Xpm:()=>ea,Xts:()=>G_,Y36:()=>Od,YKP:()=>sS,YNc:()=>Ay,Yjl:()=>Uc,Yz7:()=>rn,Z0I:()=>rr,ZZ4:()=>ce,_Bn:()=>iS,_UZ:()=>xy,_Vd:()=>pf,_c5:()=>Wx,_uU:()=>mD,aQg:()=>zv,c2e:()=>Wd,cJS:()=>Zn,cg1:()=>g0,d8E:()=>f0,dDg:()=>Lx,dqk:()=>fn,eBb:()=>cM,eFA:()=>mm,eJc:()=>Gd,ekj:()=>Fg,eoX:()=>lI,f3M:()=>en,g9A:()=>AM,h0i:()=>Pf,hGG:()=>tA,hij:()=>Ec,iGM:()=>_v,ifc:()=>An,ip1:()=>eI,jDz:()=>aS,kL8:()=>Vg,lG2:()=>Vc,lqb:()=>Md,lri:()=>va,mCW:()=>Qp,n5z:()=>ca,oAB:()=>Xs,oJD:()=>Hs,oxw:()=>eD,pB0:()=>hM,q3G:()=>Vr,q4F:()=>RM,qFp:()=>Cm,qLn:()=>mf,qOj:()=>MT,qZA:()=>Tf,qzn:()=>af,rWj:()=>uI,rg0:()=>Th,sBO:()=>JS,s_b:()=>nm,soG:()=>Nv,tb:()=>kv,tp0:()=>Li,uIk:()=>OT,vHH:()=>ie,vpe:()=>hu,wAp:()=>Pt,xi3:()=>uv,xp6:()=>vf,ynx:()=>Py,z2F:()=>Kd,z3N:()=>al,zSh:()=>Z_,zs3:()=>_c});var d=F(7579),J=F(727),L=F(1135),ne=F(9751),oe=F(6451),pe=F(9646),ye=F(3099),Fe=F(5577),me=F(1884);function j(s){for(let a in s)if(s[a]===j)return a;throw Error("Could not find renamed property on target object.")}function z(s,a){for(const u in a)a.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=a[u])}function te(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(te).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function Ue(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const De=j({__forward_ref__:j});function nt(s){return s.__forward_ref__=nt,s.toString=function(){return te(this())},s}function Pe(s){return Qe(s)?s():s}function Qe(s){return"function"==typeof s&&s.hasOwnProperty(De)&&s.__forward_ref__===nt}function Le(s){return s&&!!s.\u0275providers}const pt="https://g.co/ng/security#xss";class ie extends Error{constructor(a,u){super(function ve(s,a){return`NG0${Math.abs(s)}${a?": "+a:""}`}(a,u)),this.code=a}}function X(s){return"string"==typeof s?s:null==s?"":String(s)}function ze(s,a){throw new ie(-201,!1)}function ut(s,a){null==s&&function mt(s,a,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${a} <=Actual]`))}(a,s,null,"!=")}function rn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Zn(s){return{providers:s.providers||[],imports:s.imports||[]}}function si(s){return To(s,Di)||To(s,Do)}function rr(s){return null!==si(s)}function To(s,a){return s.hasOwnProperty(a)?s[a]:null}function Sa(s){return s&&(s.hasOwnProperty(Si)||s.hasOwnProperty(Cu))?s[Si]:null}const Di=j({\u0275prov:j}),Si=j({\u0275inj:j}),Do=j({ngInjectableDef:j}),Cu=j({ngInjectorDef:j});var Xe=(()=>((Xe=Xe||{})[Xe.Default=0]="Default",Xe[Xe.Host=1]="Host",Xe[Xe.Self=2]="Self",Xe[Xe.SkipSelf=4]="SkipSelf",Xe[Xe.Optional=8]="Optional",Xe))();let _t;function In(s){const a=_t;return _t=s,a}function Bn(s,a,u){const c=si(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&Xe.Optional?null:void 0!==a?a:void ze(te(s))}const fn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),$r={},Wt="__NG_DI_FLAG__",ls="ngTempTokenPath",Na=/\n/gm,Ms="__source";let xr;function Sn(s){const a=xr;return xr=s,a}function Rs(s,a=Xe.Default){if(void 0===xr)throw new ie(-203,!1);return null===xr?Bn(s,void 0,a):xr.get(s,a&Xe.Optional?null:void 0,a)}function un(s,a=Xe.Default){return(function yt(){return _t}()||Rs)(Pe(s),a)}function en(s,a=Xe.Default){return un(s,$(a))}function $(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function H(s){const a=[];for(let u=0;u<s.length;u++){const c=Pe(s[u]);if(Array.isArray(c)){if(0===c.length)throw new ie(900,!1);let f,g=Xe.Default;for(let v=0;v<c.length;v++){const I=c[v],T=Ie(I);"number"==typeof T?-1===T?f=I.token:g|=T:f=I}a.push(un(f,g))}else a.push(un(c))}return a}function Z(s,a){return s[Wt]=a,s.prototype[Wt]=a,s}function Ie(s){return s[Wt]}function vt(s){return{toString:s}.toString()}var Vt=(()=>((Vt=Vt||{})[Vt.OnPush=0]="OnPush",Vt[Vt.Default=1]="Default",Vt))(),An=(()=>{return(s=An||(An={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",An;var s})();const Cn={},Nt=[],Jt=j({\u0275cmp:j}),Pr=j({\u0275dir:j}),Gi=j({\u0275pipe:j}),Ps=j({\u0275mod:j}),Ni=j({\u0275fac:j}),he=j({__NG_ELEMENT_ID__:j}),re=j({__NG_ENV_ID__:j});function Oe(s,a,u){let c=s.length;for(;;){const f=s.indexOf(a,u);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const g=a.length;if(f+g===c||s.charCodeAt(f+g)<=32)return f}u=f+1}}function ht(s,a,u){let c=0;for(;c<u.length;){const f=u[c];if("number"==typeof f){if(0!==f)break;c++;const g=u[c++],v=u[c++],I=u[c++];s.setAttribute(a,v,I,g)}else{const g=f,v=u[++c];$t(g)?s.setProperty(a,g,v):s.setAttribute(a,g,v),c++}}return c}function Rt(s){return 3===s||4===s||6===s}function $t(s){return 64===s.charCodeAt(0)}function sn(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let u=-1;for(let c=0;c<a.length;c++){const f=a[c];"number"==typeof f?u=f:0===u||fr(s,u,f,null,-1===u||2===u?a[++c]:null)}}return s}function fr(s,a,u,c,f){let g=0,v=s.length;if(-1===a)v=-1;else for(;g<s.length;){const I=s[g++];if("number"==typeof I){if(I===a){v=-1;break}if(I>a){v=g-1;break}}}for(;g<s.length;){const I=s[g];if("number"==typeof I)break;if(I===u){if(null===c)return void(null!==f&&(s[g+1]=f));if(c===s[g+1])return void(s[g+2]=f)}g++,null!==c&&g++,null!==f&&g++}-1!==v&&(s.splice(v,0,a),g=v+1),s.splice(g++,0,u),null!==c&&s.splice(g++,0,c),null!==f&&s.splice(g++,0,f)}const ir="ng-template";function Js(s,a,u){let c=0,f=!0;for(;c<s.length;){let g=s[c++];if("string"==typeof g&&f){const v=s[c++];if(u&&"class"===g&&-1!==Oe(v.toLowerCase(),a,0))return!0}else{if(1===g){for(;c<s.length&&"string"==typeof(g=s[c++]);)if(g.toLowerCase()===a)return!0;return!1}"number"==typeof g&&(f=!1)}}return!1}function Xo(s){return 4===s.type&&s.value!==ir}function bu(s,a,u){return a===(4!==s.type||u?s.value:ir)}function fh(s,a,u){let c=4;const f=s.attrs||[],g=function Tu(s){for(let a=0;a<s.length;a++)if(Rt(s[a]))return a;return s.length}(f);let v=!1;for(let I=0;I<a.length;I++){const T=a[I];if("number"!=typeof T){if(!v)if(4&c){if(c=2|1&c,""!==T&&!bu(s,T,u)||""===T&&1===a.length){if(Mi(c))return!1;v=!0}}else{const N=8&c?T:a[++I];if(8&c&&null!==s.attrs){if(!Js(s.attrs,N,u)){if(Mi(c))return!1;v=!0}continue}const U=ph(8&c?"class":T,f,Xo(s),u);if(-1===U){if(Mi(c))return!1;v=!0;continue}if(""!==N){let W;W=U>g?"":f[U+1].toLowerCase();const Q=8&c?W:null;if(Q&&-1!==Oe(Q,N,0)||2&c&&N!==W){if(Mi(c))return!1;v=!0}}}}else{if(!v&&!Mi(c)&&!Mi(T))return!1;if(v&&Mi(T))continue;v=!1,c=T|1&c}}return Mi(c)||v}function Mi(s){return 0==(1&s)}function ph(s,a,u,c){if(null===a)return-1;let f=0;if(c||!u){let g=!1;for(;f<a.length;){const v=a[f];if(v===s)return f;if(3===v||6===v)g=!0;else{if(1===v||2===v){let I=a[++f];for(;"string"==typeof I;)I=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=g?1:2}return-1}return function gh(s,a){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===a)return u;u++}return-1}(a,s)}function zi(s,a,u=!1){for(let c=0;c<a.length;c++)if(fh(s,a[c],u))return!0;return!1}function cs(s,a){return s?":not("+a.trim()+")":a}function s_(s){let a=s[0],u=1,c=2,f="",g=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const I=s[++u];f+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?f+="."+v:4&c&&(f+=" "+v);else""!==f&&!Mi(v)&&(a+=cs(g,f),f=""),c=v,g=g||!Mi(c);u++}return""!==f&&(a+=cs(g,f)),a}function ea(s){return vt(()=>{const a=Cl(s),u={...a,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===Vt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||An.Emulated,styles:s.styles||Nt,_:null,schemas:s.schemas||null,tView:null,id:""};Bc(u);const c=s.dependencies;return u.directiveDefs=Ma(c,!1),u.pipeDefs=Ma(c,!0),u.id=function yh(s){let a=0;const u=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const f of u)a=Math.imul(31,a)+f.charCodeAt(0)<<0;return a+=2147483648,"c"+a}(u),u})}function _h(s){return Gt(s)||Er(s)}function o_(s){return null!==s}function Xs(s){return vt(()=>({type:s.type,bootstrap:s.bootstrap||Nt,declarations:s.declarations||Nt,imports:s.imports||Nt,exports:s.exports||Nt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Du(s,a){if(null==s)return Cn;const u={};for(const c in s)if(s.hasOwnProperty(c)){let f=s[c],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),u[f]=c,a&&(a[f]=g)}return u}function Vc(s){return vt(()=>{const a=Cl(s);return Bc(a),a})}function Uc(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Gt(s){return s[Jt]||null}function Er(s){return s[Pr]||null}function yn(s){return s[Gi]||null}function Ao(s){const a=Gt(s)||Er(s)||yn(s);return null!==a&&a.standalone}function Gr(s,a){const u=s[Ps]||null;if(!u&&!0===a)throw new Error(`Type ${te(s)} does not have '\u0275mod' property.`);return u}function Cl(s){const a={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||Nt,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Du(s.inputs,a),outputs:Du(s.outputs)}}function Bc(s){s.features?.forEach(a=>a(s))}function Ma(s,a){if(!s)return null;const u=a?yn:_h;return()=>("function"==typeof s?s():s).map(c=>u(c)).filter(o_)}const Kn=0,et=1,Bt=2,Pn=3,Ri=4,No=5,oi=6,ta=7,On=8,Or=9,eo=10,Ut=11,mi=12,vh=13,Os=14,Gn=15,Ra=16,Au=17,_i=18,xa=19,wh=20,xi=21,Yn=22,Hc=23,na=24,Yt=25,bl=1,ks=2,yi=7,qi=8,ra=9,Ir=11;function Qn(s){return Array.isArray(s)&&"object"==typeof s[bl]}function Pi(s){return Array.isArray(s)&&!0===s[bl]}function Pa(s){return 0!=(4&s.flags)}function to(s){return s.componentOffset>-1}function no(s){return 1==(1&s.flags)}function kr(s){return!!s.template}function zr(s){return 0!=(512&s[Bt])}function Mo(s,a){return s.hasOwnProperty(Ni)?s[Ni]:null}let Pu=fn.WeakRef??class Tl{constructor(a){this.ref=a}deref(){return this.ref}},h_=0,ai=null,Dl=!1;function or(s){const a=ai;return ai=s,a}class Sl{constructor(){this.id=h_++,this.ref=function bh(s){return new Pu(s)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[a,u]of this.producers){const c=u.producerNode.deref();if(void 0!==c&&u.atTrackingVersion===this.trackingVersion){if(c.producerPollStatus(u.seenValueVersion))return!0}else this.producers.delete(a),c?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const a=Dl;Dl=!0;try{for(const[u,c]of this.consumers){const f=c.consumerNode.deref();void 0!==f&&f.trackingVersion===c.atTrackingVersion?f.onConsumerDependencyMayHaveChanged():(this.consumers.delete(u),f?.producers.delete(this.id))}}finally{Dl=a}}producerAccessed(){if(Dl)throw new Error("");if(null===ai)return;let a=ai.producers.get(this.id);void 0===a?(a={consumerNode:ai.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:ai.trackingVersion},ai.producers.set(this.id,a),this.consumers.set(ai.id,a)):(a.seenValueVersion=this.valueVersion,a.atTrackingVersion=ai.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==ai?.consumerAllowSignalWrites}producerPollStatus(a){return this.valueVersion!==a||(this.onProducerUpdateValueVersion(),this.valueVersion!==a)}}let Fu=null;function Th(s){const a=or(null);try{return s()}finally{or(a)}}const Zc=()=>{};class Dh extends Sl{constructor(a,u,c){super(),this.watch=a,this.schedule=u,this.dirty=!1,this.cleanupFn=Zc,this.registerOnCleanup=f=>{this.cleanupFn=f},this.consumerAllowSignalWrites=c}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const a=or(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Zc,this.watch(this.registerOnCleanup)}finally{or(a)}}cleanup(){this.cleanupFn()}}class Kc{constructor(a,u,c){this.previousValue=a,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Nl(){return Lu}function Lu(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ml),Yc}function Yc(){const s=Rl(this),a=s?.current;if(a){const u=s.previous;if(u===Cn)s.previous=a;else for(let c in a)u[c]=a[c];s.current=null,this.ngOnChanges(a)}}function Ml(s,a,u,c){const f=this.declaredInputs[u],g=Rl(s)||function p_(s,a){return s[Qc]=a}(s,{previous:Cn,current:null}),v=g.current||(g.current={}),I=g.previous,T=I[f];v[f]=new Kc(T&&T.currentValue,a,I===Cn),s[c]=a}Nl.ngInherit=!0;const Qc="__ngSimpleChanges__";function Rl(s){return s[Qc]||null}const hs=function(s,a,u){};function kn(s){for(;Array.isArray(s);)s=s[Kn];return s}function xl(s,a){return kn(a[s])}function li(s,a){return kn(a[s.index])}function Jc(s,a){return s.data[a]}function Ro(s,a){return s[a]}function Cr(s,a){const u=a[s];return Qn(u)?u:u[Kn]}function Va(s){return 128==(128&s[Bt])}function xo(s,a){return null==a?null:s[a]}function Xc(s){s[Au]=0}function Nh(s){1024&s[Bt]||(s[Bt]|=1024,Ol(s,1))}function ed(s){1024&s[Bt]&&(s[Bt]&=-1025,Ol(s,-1))}function Ol(s,a){let u=s[Pn];if(null===u)return;u[No]+=a;let c=u;for(u=u[Pn];null!==u&&(1===a&&1===c[No]||-1===a&&0===c[No]);)u[No]+=a,c=u,u=u[Pn]}const wt={lFrame:sd(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function xh(){return wt.bindingsEnabled}function Se(){return wt.lFrame.lView}function tn(){return wt.lFrame.tView}function Fl(s){return wt.lFrame.contextLView=s,s[On]}function rd(s){return wt.lFrame.contextLView=null,s}function Hn(){let s=xp();for(;null!==s&&64===s.type;)s=s.parent;return s}function xp(){return wt.lFrame.currentTNode}function io(s,a){const u=wt.lFrame;u.currentTNode=s,u.isParent=a}function Hu(){return wt.lFrame.isParent}function ja(){wt.lFrame.isParent=!1}function qr(){const s=wt.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function Oo(){return wt.lFrame.bindingIndex++}function bn(s){const a=wt.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,u}function ju(s,a){const u=wt.lFrame;u.bindingIndex=u.bindingRootIndex=s,ko(a)}function ko(s){wt.lFrame.currentDirectiveIndex=s}function $u(s){const a=wt.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}function kh(){return wt.lFrame.currentQueryIndex}function Ul(s){wt.lFrame.currentQueryIndex=s}function Bl(s){const a=s[et];return 2===a.type?a.declTNode:1===a.type?s[oi]:null}function Gu(s,a,u){if(u&Xe.SkipSelf){let f=a,g=s;for(;!(f=f.parent,null!==f||u&Xe.Host||(f=Bl(g),null===f||(g=g[Os],10&f.type))););if(null===f)return!1;a=f,s=g}const c=wt.lFrame=fs();return c.currentTNode=a,c.lView=s,!0}function $a(s){const a=fs(),u=s[et];wt.lFrame=a,a.currentTNode=u.firstChild,a.lView=s,a.tView=u,a.contextLView=s,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function fs(){const s=wt.lFrame,a=null===s?null:s.child;return null===a?sd(s):a}function sd(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function Fh(){const s=wt.lFrame;return wt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Hl=Fh;function od(){const s=Fh();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function vi(){return wt.lFrame.selectedIndex}function ua(s){wt.lFrame.selectedIndex=s}function Ln(){const s=wt.lFrame;return Jc(s.tView,s.selectedIndex)}let Wu=!0;function jl(){return Wu}function ps(s){Wu=s}function Zu(s,a){for(let u=a.directiveStart,c=a.directiveEnd;u<c;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:T,ngAfterViewChecked:N,ngOnDestroy:P}=g;v&&(s.contentHooks??=[]).push(-u,v),I&&((s.contentHooks??=[]).push(u,I),(s.contentCheckHooks??=[]).push(u,I)),T&&(s.viewHooks??=[]).push(-u,T),N&&((s.viewHooks??=[]).push(u,N),(s.viewCheckHooks??=[]).push(u,N)),null!=P&&(s.destroyHooks??=[]).push(u,P)}}function ad(s,a,u){ud(s,a,3,u)}function Ga(s,a,u,c){(3&s[Bt])===u&&ud(s,a,u,c)}function Uh(s,a){let u=s[Bt];(3&u)===a&&(u&=4095,u+=1,s[Bt]=u)}function ud(s,a,u,c){const g=c??-1,v=a.length-1;let I=0;for(let T=void 0!==c?65535&s[Au]:0;T<v;T++)if("number"==typeof a[T+1]){if(I=a[T],null!=c&&I>=c)break}else a[T]<0&&(s[Au]+=65536),(I<g||-1==g)&&($l(s,u,a,T),s[Au]=(4294901760&s[Au])+T+2),T++}function Fp(s,a){hs(4,s,a);const u=or(null);try{a.call(s)}finally{or(u),hs(5,s,a)}}function $l(s,a,u,c){const f=u[c]<0,g=u[c+1],I=s[f?-u[c]:u[c]];f?s[Bt]>>12<s[Au]>>16&&(3&s[Bt])===a&&(s[Bt]+=4096,Fp(I,g)):Fp(I,g)}const Zr=-1;class Oi{constructor(a,u,c){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function oo(s){return s!==Zr}function Ls(s){return 32767&s}function Mt(s,a){let u=function Kr(s){return s>>16}(s),c=a;for(;u>0;)c=c[Os],u--;return c}let Gl=!0;function la(s){const a=Gl;return Gl=s,a}const ao=255,Ki=5;let ar=0;const gs={};function za(s,a){const u=ql(s,a);if(-1!==u)return u;const c=a[et];c.firstCreatePass&&(s.injectorIndex=a.length,dd(c.data,s),dd(a,null),dd(c.blueprint,null));const f=Fo(s,a),g=s.injectorIndex;if(oo(f)){const v=Ls(f),I=Mt(f,a),T=I[et].data;for(let N=0;N<8;N++)a[g+N]=I[v+N]|T[v+N]}return a[g+8]=f,g}function dd(s,a){s.push(0,0,0,0,0,0,0,0,a)}function ql(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function Fo(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,f=a;for(;null!==f;){if(c=Qr(f),null===c)return Zr;if(u++,f=f[Os],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return Zr}function uo(s,a,u){!function cd(s,a,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(he)&&(c=u[he]),null==c&&(c=u[he]=ar++);const f=c&ao;a.data[s+(f>>Ki)]|=1<<f}(s,a,u)}function hd(s,a,u){if(u&Xe.Optional||void 0!==s)return s;ze()}function Lo(s,a,u,c){if(u&Xe.Optional&&void 0===c&&(c=null),!(u&(Xe.Self|Xe.Host))){const f=s[Or],g=In(void 0);try{return f?f.get(a,c,u&Xe.Optional):Bn(a,c,u&Xe.Optional)}finally{In(g)}}return hd(c,0,u)}function Zl(s,a,u,c=Xe.Default,f){if(null!==s){if(2048&a[Bt]&&!(c&Xe.Self)){const v=function Fi(s,a,u,c,f){let g=s,v=a;for(;null!==g&&null!==v&&2048&v[Bt]&&!(512&v[Bt]);){const I=fd(g,v,u,c|Xe.Self,gs);if(I!==gs)return I;let T=g.parent;if(!T){const N=v[wh];if(N){const P=N.get(u,gs,c);if(P!==gs)return P}T=Qr(v),v=v[Os]}g=T}return f}(s,a,u,c,gs);if(v!==gs)return v}const g=fd(s,a,u,c,gs);if(g!==gs)return g}return Lo(a,u,c,f)}function fd(s,a,u,c,f){const g=function Yr(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(he)?s[he]:void 0;return"number"==typeof a?a>=0?a&ao:zn:a}(u);if("function"==typeof g){if(!Gu(a,s,c))return c&Xe.Host?hd(f,0,c):Lo(a,u,c,f);try{const v=g(c);if(null!=v||c&Xe.Optional)return v;ze()}finally{Hl()}}else if("number"==typeof g){let v=null,I=ql(s,a),T=Zr,N=c&Xe.Host?a[Gn][oi]:null;for((-1===I||c&Xe.SkipSelf)&&(T=-1===I?Fo(s,a):a[I+8],T!==Zr&&Kl(c,!1)?(v=a[et],I=Ls(T),a=Mt(T,a)):I=-1);-1!==I;){const P=a[et];if(Wa(g,I,P.data)){const U=qa(I,a,u,v,c,N);if(U!==gs)return U}T=a[I+8],T!==Zr&&Kl(c,a[et].data[I+8]===N)&&Wa(g,I,a)?(v=P,I=Ls(T),a=Mt(T,a)):I=-1}}return f}function qa(s,a,u,c,f,g){const v=a[et],I=v.data[s+8],P=Vs(I,v,u,null==c?to(I)&&Gl:c!=v&&0!=(3&I.type),f&Xe.Host&&g===I);return null!==P?Us(a,v,P,I):gs}function Vs(s,a,u,c,f){const g=s.providerIndexes,v=a.data,I=1048575&g,T=s.directiveStart,P=g>>20,W=f?I+P:s.directiveEnd;for(let Q=c?I:I+P;Q<W;Q++){const Ee=v[Q];if(Q<T&&u===Ee||Q>=T&&Ee.type===u)return Q}if(f){const Q=v[T];if(Q&&kr(Q)&&Q.type===u)return T}return null}function Us(s,a,u,c){let f=s[u];const g=a.data;if(function Lp(s){return s instanceof Oi}(f)){const v=f;v.resolving&&function Ne(s,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new ie(-200,`Circular dependency in DI detected for ${s}${u}`)}(function _e(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():X(s)}(g[u]));const I=la(v.canSeeViewProviders);v.resolving=!0;const T=v.injectImpl?In(v.injectImpl):null;Gu(s,c,Xe.Default);try{f=s[u]=v.factory(void 0,g,s,c),a.firstCreatePass&&u>=c.directiveStart&&function Vh(s,a,u){const{ngOnChanges:c,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(c){const v=Lu(a);(u.preOrderHooks??=[]).push(s,v),(u.preOrderCheckHooks??=[]).push(s,v)}f&&(u.preOrderHooks??=[]).push(0-s,f),g&&((u.preOrderHooks??=[]).push(s,g),(u.preOrderCheckHooks??=[]).push(s,g))}(u,g[u],a)}finally{null!==T&&In(T),la(I),v.resolving=!1,Hl()}}return f}function Wa(s,a,u){return!!(u[a+(s>>Ki)]&1<<s)}function Kl(s,a){return!(s&Xe.Self||s&Xe.Host&&a)}class pr{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,c){return Zl(this._tNode,this._lView,a,$(c),u)}}function zn(){return new pr(Hn(),Se())}function ca(s){return vt(()=>{const a=s.prototype.constructor,u=a[Ni]||Za(a),c=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==c;){const g=f[Ni]||Za(f);if(g&&g!==u)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function Za(s){return Qe(s)?()=>{const a=Za(Pe(s));return a&&a()}:Mo(s)}function Qr(s){const a=s[et],u=a.type;return 2===u?a.declTNode:1===u?s[oi]:null}function Yu(s){return function Wl(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const u=s.attrs;if(u){const c=u.length;let f=0;for(;f<c;){const g=u[f];if(Rt(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<c&&"string"==typeof u[f];)f++;else{if(g===a)return u[f+1];f+=2}}}return null}(Hn(),s)}const Ka="__parameters__";function ci(s,a,u){return vt(()=>{const c=function gr(s){return function(...u){if(s){const c=s(...u);for(const f in c)this[f]=c[f]}}}(a);function f(...g){if(this instanceof f)return c.apply(this,g),this;const v=new f(...g);return I.annotation=v,I;function I(T,N,P){const U=T.hasOwnProperty(Ka)?T[Ka]:Object.defineProperty(T,Ka,{value:[]})[Ka];for(;U.length<=P;)U.push(null);return(U[P]=U[P]||[]).push(v),T}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}function Uo(s,a){s.forEach(u=>Array.isArray(u)?Uo(u,a):a(u))}function ho(s,a,u){a>=s.length?s.push(u):s.splice(a,0,u)}function el(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function C(s,a,u){let c=M(s,a);return c>=0?s[1|c]=u:(c=~c,function jh(s,a,u,c){let f=s.length;if(f==a)s.push(u,c);else if(1===f)s.push(c,s[0]),s[0]=u;else{for(f--,s.push(s[f-1],s[f]);f>a;)s[f]=s[f-2],f--;s[a]=u,s[a+1]=c}}(s,c,a,u)),c}function D(s,a){const u=M(s,a);if(u>=0)return s[1|u]}function M(s,a){return function q(s,a,u){let c=0,f=s.length>>u;for(;f!==c;){const g=c+(f-c>>1),v=s[g<<u];if(a===v)return g<<u;v>a?f=g:c=g+1}return~(f<<u)}(s,a,1)}const fo=Z(ci("Optional"),8),Li=Z(ci("SkipSelf"),4);function oc(s){return 128==(128&s.flags)}var Ho=(()=>((Ho=Ho||{})[Ho.Important=1]="Important",Ho[Ho.DashCase=2]="DashCase",Ho))();const jw=/^>|^->|<!--|-->|--!>|<!-$/g,$w=/(<|>)/,N_="\u200b$1\u200b";const Hp=new Map;let Gw=0;const ac="__ngContext__";function br(s,a){Qn(a)?(s[ac]=a[xa],function vd(s){Hp.set(s[xa],s)}(a)):s[ac]=a}let Yh;function uc(s,a){return Yh(s,a)}function Ji(s){const a=s[Pn];return Pi(a)?a[Pn]:a}function Jh(s){return ol(s[mi])}function qp(s){return ol(s[Ri])}function ol(s){for(;null!==s&&!Pi(s);)s=s[Ri];return s}function Lr(s,a,u,c,f){if(null!=c){let g,v=!1;Pi(c)?g=c:Qn(c)&&(v=!0,c=c[Kn]);const I=kn(c);0===s&&null!==u?null==f?G(a,u,I):x(a,u,I,f||null,!0):1===s&&null!==u?x(a,u,I,f||null,!0):2===s?function Cd(s,a,u){const c=it(s,a);c&&function Me(s,a,u,c){s.removeChild(a,u,c)}(s,c,a,u)}(a,I,v):3===s&&a.destroyNode(I),null!=g&&function nM(s,a,u,c,f){const g=u[yi];g!==kn(u)&&Lr(a,s,c,g,f);for(let I=Ir;I<u.length;I++){const T=u[I];bd(T[et],T,s,a,c,g)}}(a,s,g,u,f)}}function Xh(s,a){return s.createComment(function M_(s){return s.replace(jw,a=>a.replace($w,N_))}(a))}function ys(s,a,u){return s.createElement(a,u)}function Ww(s,a){const u=s[ra],c=u.indexOf(a);ed(a),u.splice(c,1)}function F_(s,a){if(s.length<=Ir)return;const u=Ir+a,c=s[u];if(c){const f=c[Ra];null!==f&&f!==s&&Ww(f,c),a>0&&(s[u-1][Ri]=c[Ri]);const g=el(s,Ir+a);!function dc(s,a){bd(s,a,a[Ut],2,null,null),a[Kn]=null,a[oi]=null}(c[et],c);const v=g[_i];null!==v&&v.detachView(g[et]),c[Pn]=null,c[Ri]=null,c[Bt]&=-129}return c}function L_(s,a){if(!(256&a[Bt])){const u=a[Ut];a[Hc]?.destroy(),a[na]?.destroy(),u.destroyNode&&bd(s,a,u,3,null,null),function qw(s){let a=s[mi];if(!a)return w(s[et],s);for(;a;){let u=null;if(Qn(a))u=a[mi];else{const c=a[Ir];c&&(u=c)}if(!u){for(;a&&!a[Ri]&&a!==s;)Qn(a)&&w(a[et],a),a=a[Pn];null===a&&(a=s),Qn(a)&&w(a[et],a),u=a&&a[Ri]}a=u}}(a)}}function w(s,a){if(!(256&a[Bt])){a[Bt]&=-129,a[Bt]|=256,function _(s,a){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const f=a[u[c]];if(!(f instanceof Oi)){const g=u[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const I=f[g[v]],T=g[v+1];hs(4,I,T);try{T.call(I)}finally{hs(5,I,T)}}else{hs(4,f,g);try{g.call(f)}finally{hs(5,f,g)}}}}}(s,a),function p(s,a){const u=s.cleanup,c=a[ta];if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const v=u[g+3];v>=0?c[v]():c[-v].unsubscribe(),g+=2}else u[g].call(c[u[g+1]]);null!==c&&(a[ta]=null);const f=a[xi];if(null!==f){a[xi]=null;for(let g=0;g<f.length;g++)(0,f[g])()}}(s,a),1===a[et].type&&a[Ut].destroy();const u=a[Ra];if(null!==u&&Pi(a[Pn])){u!==a[Pn]&&Ww(u,a);const c=a[_i];null!==c&&c.detachView(s)}!function jp(s){Hp.delete(s[xa])}(a)}}function E(s,a,u){return function A(s,a,u){let c=a;for(;null!==c&&40&c.type;)c=(a=c).parent;if(null===c)return u[Kn];{const{componentOffset:f}=c;if(f>-1){const{encapsulation:g}=s.data[c.directiveStart+f];if(g===An.None||g===An.Emulated)return null}return li(c,u)}}(s,a.parent,u)}function x(s,a,u,c,f){s.insertBefore(a,u,c,f)}function G(s,a,u){s.appendChild(a,u)}function ee(s,a,u,c,f){null!==c?x(s,a,u,c,f):G(s,a,u)}function it(s,a){return s.parentNode(a)}let tu,U_,Yw,Dd,jo=function Bs(s,a,u){return 40&s.type?li(s,u):null};function Id(s,a,u,c){const f=E(s,c,a),g=a[Ut],I=function Wn(s,a,u){return jo(s,a,u)}(c.parent||a[oi],c,a);if(null!=f)if(Array.isArray(u))for(let T=0;T<u.length;T++)ee(g,f,u[T],I,!1);else ee(g,f,u,I,!1);void 0!==tu&&tu(g,c,a,u,f)}function $o(s,a){if(null!==a){const u=a.type;if(3&u)return li(a,s);if(4&u)return tf(-1,s[a.index]);if(8&u){const c=a.child;if(null!==c)return $o(s,c);{const f=s[a.index];return Pi(f)?tf(-1,f):kn(f)}}if(32&u)return uc(a,s)()||kn(s[a.index]);{const c=nu(s,a);return null!==c?Array.isArray(c)?c[0]:$o(Ji(s[Gn]),c):$o(s,a.next)}}return null}function nu(s,a){return null!==a?s[Gn][oi].projection[a.projection]:null}function tf(s,a){const u=Ir+s+1;if(u<a.length){const c=a[u],f=c[et].firstChild;if(null!==f)return $o(c,f)}return a[yi]}function rf(s,a,u,c,f,g,v){for(;null!=u;){const I=c[u.index],T=u.type;if(v&&0===a&&(I&&br(kn(I),c),u.flags|=2),32!=(32&u.flags))if(8&T)rf(s,a,u.child,c,f,g,!1),Lr(a,s,f,I,g);else if(32&T){const N=uc(u,c);let P;for(;P=N();)Lr(a,s,f,P,g);Lr(a,s,f,I,g)}else 16&T?Zw(s,a,c,u,f,g):Lr(a,s,f,I,g);u=v?u.projectionNext:u.next}}function bd(s,a,u,c,f,g){rf(u,c,s.firstChild,a,f,g,!1)}function Zw(s,a,u,c,f,g){const v=u[Gn],T=v[oi].projection[c.projection];if(Array.isArray(T))for(let N=0;N<T.length;N++)Lr(a,s,f,T[N],g);else{let N=T;const P=v[Pn];oc(c)&&(N.flags|=128),rf(s,a,N,P,f,g,!0)}}function Td(s,a,u){""===u?s.removeAttribute(a,"class"):s.setAttribute(a,"class",u)}function sb(s,a,u){const{mergedAttrs:c,classes:f,styles:g}=u;null!==c&&ht(s,a,c),null!==f&&Td(s,a,f),null!==g&&function V_(s,a,u){s.setAttribute(a,"style",u)}(s,a,g)}function sf(s){return function Kw(){if(void 0===U_&&(U_=null,fn.trustedTypes))try{U_=fn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return U_}()?.createHTML(s)||s}function ob(s){Yw=s}function Yp(){if(void 0!==Yw)return Yw;if(typeof document<"u")return document;throw new ie(210,!1)}function B_(){if(void 0===Dd&&(Dd=null,fn.trustedTypes))try{Dd=fn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Dd}function Sd(s){return B_()?.createHTML(s)||s}function ab(s){return B_()?.createScriptURL(s)||s}class Ad{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${pt})`}}class oM extends Ad{getTypeName(){return"HTML"}}class Jw extends Ad{getTypeName(){return"Style"}}class aM extends Ad{getTypeName(){return"Script"}}class Xw extends Ad{getTypeName(){return"URL"}}class ub extends Ad{getTypeName(){return"ResourceURL"}}function al(s){return s instanceof Ad?s.changingThisBreaksApplicationSecurity:s}function af(s,a){const u=function uM(s){return s instanceof Ad&&s.getTypeName()||null}(s);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see ${pt})`)}return u===a}function lM(s){return new oM(s)}function H_(s){return new Jw(s)}function cM(s){return new aM(s)}function dM(s){return new Xw(s)}function hM(s){return new ub(s)}class fM{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(sf(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch{return null}}}class pM{constructor(a){this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(a){const u=this.inertDocument.createElement("template");return u.innerHTML=sf(a),u}}const J1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Qp(s){return(s=String(s)).match(J1)?s:"unsafe:"+s}function ru(s){const a={};for(const u of s.split(","))a[u]=!0;return a}function Jp(...s){const a={};for(const u of s)for(const c in u)u.hasOwnProperty(c)&&(a[c]=!0);return a}const db=ru("area,br,col,hr,img,wbr"),hb=ru("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),fb=ru("rp,rt"),Xp=Jp(db,Jp(hb,ru("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Jp(fb,ru("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Jp(fb,hb)),hc=ru("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),eE=Jp(hc,ru("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ru("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),j_=ru("script,style,template");class gb{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,c=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?c=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,c&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!Xp.hasOwnProperty(u))return this.sanitizedSomething=!0,!j_.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const c=a.attributes;for(let f=0;f<c.length;f++){const g=c.item(f),v=g.name,I=v.toLowerCase();if(!eE.hasOwnProperty(I)){this.sanitizedSomething=!0;continue}let T=g.value;hc[I]&&(T=Qp(T)),this.buf.push(" ",v,'="',_b(T),'"')}return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();Xp.hasOwnProperty(u)&&!db.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(_b(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const mb=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,mM=/([^\#-~ |!])/g;function _b(s){return s.replace(/&/g,"&amp;").replace(mb,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(mM,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let $_;function yb(s,a){let u=null;try{$_=$_||function lb(s){const a=new pM(s);return function cb(){try{return!!(new window.DOMParser).parseFromString(sf(""),"text/html")}catch{return!1}}()?new fM(a):a}(s);let c=a?String(a):"";u=$_.getInertBodyElement(c);let f=5,g=c;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,c=g,g=u.innerHTML,u=$_.getInertBodyElement(c)}while(c!==g);return sf((new gb).sanitizeChildren(uf(u)||u))}finally{if(u){const c=uf(u)||u;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function uf(s){return"content"in s&&function _M(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Vr=(()=>((Vr=Vr||{})[Vr.NONE=0]="NONE",Vr[Vr.HTML=1]="HTML",Vr[Vr.STYLE=2]="STYLE",Vr[Vr.SCRIPT=3]="SCRIPT",Vr[Vr.URL=4]="URL",Vr[Vr.RESOURCE_URL=5]="RESOURCE_URL",Vr))();function Hs(s){const a=cf();return a?Sd(a.sanitize(Vr.HTML,s)||""):af(s,"HTML")?Sd(al(s)):yb(Yp(),X(s))}function wb(s){const a=cf();return a?a.sanitize(Vr.URL,s)||"":af(s,"URL")?al(s):Qp(X(s))}function Eb(s){const a=cf();if(a)return ab(a.sanitize(Vr.RESOURCE_URL,s)||"");if(af(s,"ResourceURL"))return ab(al(s));throw new ie(904,!1)}function lf(s,a,u){return function wM(s,a){return"src"===a&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===a&&("base"===s||"link"===s)?Eb:wb}(a,u)(s)}function cf(){const s=Se();return s&&s[eo].sanitizer}class Mn{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=rn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const G_=new Mn("ENVIRONMENT_INITIALIZER"),Ib=new Mn("INJECTOR",-1),z_=new Mn("INJECTOR_DEF_TYPES");class tE{get(a,u=$r){if(u===$r){const c=new Error(`NullInjectorError: No provider for ${te(a)}!`);throw c.name="NullInjectorError",c}return u}}function Cb(s){return{\u0275providers:s}}function bb(...s){return{\u0275providers:iu(0,s),\u0275fromNgModule:!0}}function iu(s,...a){const u=[],c=new Set;let f;return Uo(a,g=>{const v=g;Db(v,u,[],c)&&(f||=[],f.push(v))}),void 0!==f&&Tb(f,u),u}function Tb(s,a){for(let u=0;u<s.length;u++){const{providers:f}=s[u];Sb(f,g=>{a.push(g)})}}function Db(s,a,u,c){if(!(s=Pe(s)))return!1;let f=null,g=Sa(s);const v=!g&&Gt(s);if(g||v){if(v&&!v.standalone)return!1;f=s}else{const T=s.ngModule;if(g=Sa(T),!g)return!1;f=T}const I=c.has(f);if(v){if(I)return!1;if(c.add(f),v.dependencies){const T="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const N of T)Db(N,a,u,c)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let N;c.add(f);try{Uo(g.imports,P=>{Db(P,a,u,c)&&(N||=[],N.push(P))})}finally{}void 0!==N&&Tb(N,a)}if(!I){const N=Mo(f)||(()=>new f);a.push({provide:f,useFactory:N,deps:Nt},{provide:z_,useValue:f,multi:!0},{provide:G_,useValue:()=>un(f),multi:!0})}const T=g.providers;null==T||I||Sb(T,P=>{a.push(P)})}}return f!==s&&void 0!==s.providers}function Sb(s,a){for(let u of s)Le(u)&&(u=u.\u0275providers),Array.isArray(u)?Sb(u,a):a(u)}const Ab=j({provide:String,useValue:j});function q_(s){return null!==s&&"object"==typeof s&&Ab in s}function Nd(s){return"function"==typeof s}const Z_=new Mn("Set Injector scope."),K_={},iF={};let Mb;function nE(){return void 0===Mb&&(Mb=new tE),Mb}class Md{}class Rb extends Md{get destroyed(){return this._destroyed}constructor(a,u,c,f){super(),this.parent=u,this.source=c,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,rE(a,v=>this.processProvider(v)),this.records.set(Ib,df(void 0,this)),f.has("environment")&&this.records.set(Md,df(void 0,this));const g=this.records.get(Z_);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(z_.multi,Nt,Xe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of a)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(a){return this.assertNotDestroyed(),this._onDestroyHooks.push(a),()=>this.removeOnDestroy(a)}runInContext(a){this.assertNotDestroyed();const u=Sn(this),c=In(void 0);try{return a()}finally{Sn(u),In(c)}}get(a,u=$r,c=Xe.Default){if(this.assertNotDestroyed(),a.hasOwnProperty(re))return a[re](this);c=$(c);const f=Sn(this),g=In(void 0);try{if(!(c&Xe.SkipSelf)){let I=this.records.get(a);if(void 0===I){const T=function DM(s){return"function"==typeof s||"object"==typeof s&&s instanceof Mn}(a)&&si(a);I=T&&this.injectableDefInScope(T)?df(Y_(a),K_):null,this.records.set(a,I)}if(null!=I)return this.hydrate(a,I)}return(c&Xe.Self?nE():this.parent).get(a,u=c&Xe.Optional&&u===$r?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[ls]=v[ls]||[]).unshift(te(a)),f)throw v;return function ue(s,a,u,c){const f=s[ls];throw a[Ms]&&f.unshift(a[Ms]),s.message=function lt(s,a,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let f=te(a);if(Array.isArray(a))f=a.map(te).join(" -> ");else if("object"==typeof a){let g=[];for(let v in a)if(a.hasOwnProperty(v)){let I=a[v];g.push(v+":"+("string"==typeof I?JSON.stringify(I):te(I)))}f=`{${g.join(", ")}}`}return`${u}${c?"("+c+")":""}[${f}]: ${s.replace(Na,"\n  ")}`}("\n"+s.message,f,u,c),s.ngTokenPath=f,s[ls]=null,s}(v,a,"R3InjectorError",this.source)}throw v}finally{In(g),Sn(f)}}resolveInjectorInitializers(){const a=Sn(this),u=In(void 0);try{const c=this.get(G_.multi,Nt,Xe.Self);for(const f of c)f()}finally{Sn(a),In(u)}}toString(){const a=[],u=this.records;for(const c of u.keys())a.push(te(c));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ie(205,!1)}processProvider(a){let u=Nd(a=Pe(a))?a:Pe(a&&a.provide);const c=function CM(s){return q_(s)?df(void 0,s.useValue):df(Q_(s),K_)}(a);if(Nd(a)||!0!==a.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=df(void 0,K_,!0),f.factory=()=>H(f.multi),this.records.set(u,f)),u=a,f.multi.push(a)}this.records.set(u,c)}hydrate(a,u){return u.value===K_&&(u.value=iF,u.value=u.factory()),"object"==typeof u.value&&u.value&&function TM(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=Pe(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(a){const u=this._onDestroyHooks.indexOf(a);-1!==u&&this._onDestroyHooks.splice(u,1)}}function Y_(s){const a=si(s),u=null!==a?a.factory:Mo(s);if(null!==u)return u;if(s instanceof Mn)throw new ie(204,!1);if(s instanceof Function)return function IM(s){const a=s.length;if(a>0)throw function Xl(s,a){const u=[];for(let c=0;c<s;c++)u.push(a);return u}(a,"?"),new ie(204,!1);const u=function Jo(s){return s&&(s[Di]||s[Do])||null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new ie(204,!1)}function Q_(s,a,u){let c;if(Nd(s)){const f=Pe(s);return Mo(f)||Y_(f)}if(q_(s))c=()=>Pe(s.useValue);else if(function Nb(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...H(s.deps||[]));else if(function W_(s){return!(!s||!s.useExisting)}(s))c=()=>un(Pe(s.useExisting));else{const f=Pe(s&&(s.useClass||s.provide));if(!function bM(s){return!!s.deps}(s))return Mo(f)||Y_(f);c=()=>new f(...H(s.deps))}return c}function df(s,a,u=!1){return{factory:s,value:a,multi:u?[]:void 0}}function rE(s,a){for(const u of s)Array.isArray(u)?rE(u,a):u&&Le(u)?rE(u.\u0275providers,a):a(u)}const iE=new Mn("AppId",{providedIn:"root",factory:()=>SM}),SM="ng",AM=new Mn("Platform Initializer"),xb=new Mn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),sF=new Mn("AnimationModuleType"),oF=new Mn("CSP nonce",{providedIn:"root",factory:()=>Yp().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let _o=(s,a)=>null;function aE(s,a){return _o(s,a)}class Ub{}class cE{}class Hb{resolveComponentFactory(a){throw function dE(s){const a=Error(`No component factory found for ${te(s)}.`);return a.ngComponent=s,a}(a)}}let pf=(()=>{class s{}return s.NULL=new Hb,s})();function jb(){return fc(Hn(),Se())}function fc(s,a){return new pc(li(s,a))}let pc=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=jb,s})();function $b(s){return s instanceof pc?s.nativeElement:s}class fE{}let Gb=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function ws(){const s=Se(),u=Cr(Hn().index,s);return(Qn(u)?u:s)[Ut]}(),s})(),gc=(()=>{class s{}return s.\u0275prov=rn({token:s,providedIn:"root",factory:()=>null}),s})();class pE{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const RM=new pE("16.0.4"),zb={};function Rd(s){for(;s;){s[Bt]|=64;const a=Ji(s);if(zr(s)&&!a)return s;s=a}return null}function gf(s){return s.ngOriginalError}class mf{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&gf(a);for(;u&&gf(u);)u=gf(u);return u||null}}const xM=new Mn("",{providedIn:"root",factory:()=>!1});function mc(s){return s instanceof Function?s():s}class ay extends Sl{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(a){this._lView=a}onConsumerDependencyMayHaveChanged(){Rd(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(a,u,c){const f=or(this);this.trackingVersion++;try{a(u,c)}finally{or(f)}}destroy(){this.trackingVersion++}}let uy=null;function sg(){return uy??=new ay,uy}function mE(s,a){return s[a]??sg()}function _E(s,a){const u=sg();u.hasReadASignal&&(s[a]=uy,u.lView=s,uy=new ay)}const Ht={};function vf(s){OM(tn(),Se(),vi()+s,!1)}function OM(s,a,u,c){if(!c)if(3==(3&a[Bt])){const g=s.preOrderCheckHooks;null!==g&&ad(a,g,u)}else{const g=s.preOrderHooks;null!==g&&Ga(a,g,0,u)}ua(u)}function cg(s,a=null,u=null,c){const f=Qb(s,a,u,c);return f.resolveInjectorInitializers(),f}function Qb(s,a=null,u=null,c,f=new Set){const g=[u||Nt,bb(s)];return c=c||("object"==typeof s?void 0:te(s)),new Rb(g,a||nE(),c||null,f)}let _c=(()=>{class s{static create(u,c){if(Array.isArray(u))return cg({name:""},c,u,"");{const f=u.name??"";return cg({name:f},u.parent,u.providers,f)}}}return s.THROW_IF_NOT_FOUND=$r,s.NULL=new tE,s.\u0275prov=rn({token:s,providedIn:"any",factory:()=>un(Ib)}),s.__NG_ELEMENT_ID__=-1,s})();function Od(s,a=Xe.Default){const u=Se();return null===u?un(s,a):Zl(Hn(),u,Pe(s),a)}function Jb(){throw new Error("invalid")}function cy(s,a,u,c,f,g,v,I,T,N,P){const U=a.blueprint.slice();return U[Kn]=f,U[Bt]=140|c,(null!==N||s&&2048&s[Bt])&&(U[Bt]|=2048),Xc(U),U[Pn]=U[Os]=s,U[On]=u,U[eo]=v||s&&s[eo],U[Ut]=I||s&&s[Ut],U[Or]=T||s&&s[Or]||null,U[oi]=g,U[xa]=function zw(){return Gw++}(),U[Yn]=P,U[wh]=N,U[Gn]=2==a.type?s[Gn]:U,U}function dg(s,a,u,c,f){let g=s.data[a];if(null===g)g=function yE(s,a,u,c,f){const g=xp(),v=Hu(),T=s.data[a]=function pg(s,a,u,c,f,g){let v=a?a.injectorIndex:-1,I=0;return function Ba(){return null!==wt.skipHydrationRootTNode}()&&(I|=128),{type:u,index:c,insertBeforeIndex:null,injectorIndex:v,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:I,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,u,a,c,f);return null===s.firstChild&&(s.firstChild=T),null!==g&&(v?null==g.child&&null!==T.parent&&(g.child=T):null===g.next&&(g.next=T,T.prev=g)),T}(s,a,u,c,f),function Oh(){return wt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=u,g.value=c,g.attrs=f;const v=function Zi(){const s=wt.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return io(g,!0),g}function kd(s,a,u,c){if(0===u)return-1;const f=a.length;for(let g=0;g<u;g++)a.push(c),s.blueprint.push(c),s.data.push(null);return f}function LM(s,a,u,c,f){const g=mE(a,Hc),v=vi(),I=2&c;try{if(ua(-1),I&&a.length>Yt&&OM(s,a,Yt,!1),hs(I?2:0,f),I)g.runInContext(u,c,f);else{const N=or(null);try{u(c,f)}finally{or(N)}}}finally{I&&null===a[Hc]&&_E(a,Hc),ua(v),hs(I?3:1,f)}}function eT(s,a,u){if(Pa(a)){const c=or(null);try{const g=a.directiveEnd;for(let v=a.directiveStart;v<g;v++){const I=s.data[v];I.contentQueries&&I.contentQueries(1,u[v],v)}}finally{or(c)}}}function hg(s,a,u){xh()&&(function IE(s,a,u,c){const f=u.directiveStart,g=u.directiveEnd;to(u)&&function fT(s,a,u){const c=li(a,s),v=fy(s,cy(s,wE(u),null,u.onPush?64:16,c,a,null,s[eo].rendererFactory.createRenderer(c,u),null,null,null));s[a.index]=v}(a,u,s.data[f+u.componentOffset]),s.firstCreatePass||za(u,a),br(c,a);const v=u.initialInputs;for(let I=f;I<g;I++){const T=s.data[I],N=Us(a,s,I,u);br(N,a),null!==v&&pT(0,I-f,N,T,0,v),kr(T)&&(Cr(u.index,a)[On]=Us(a,s,I,u))}}(s,a,u,li(u,a)),64==(64&u.flags)&&uT(s,a,u))}function vE(s,a,u=li){const c=a.localNames;if(null!==c){let f=a.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],I=-1===v?u(a,s):s[v];s[f++]=I}}}function wE(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=fg(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):a}function fg(s,a,u,c,f,g,v,I,T,N,P){const U=Yt+c,W=U+f,Q=function VM(s,a){const u=[];for(let c=0;c<a;c++)u.push(c<s?null:Ht);return u}(U,W),Ee="function"==typeof N?N():N;return Q[et]={type:s,blueprint:Q,template:u,queries:null,viewQuery:I,declTNode:a,data:Q.slice().fill(null,U),bindingStartIndex:U,expandoStartIndex:W,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:T,consts:Ee,incompleteFirstPass:!1,ssrId:P}}let wf=s=>null;function BM(s,a,u,c){for(let f in s)if(s.hasOwnProperty(f)){u=null===u?{}:u;const g=s[f];null===c?rT(u,a,f,g):c.hasOwnProperty(f)&&rT(u,a,c[f],g)}return u}function rT(s,a,u,c){s.hasOwnProperty(u)?s[u].push(a,c):s[u]=[a,c]}function Go(s,a,u,c,f,g,v,I){const T=li(a,u);let P,N=a.inputs;!I&&null!=N&&(P=N[c])?(TE(s,u,P,c,f),to(a)&&function vF(s,a){const u=Cr(a,s);16&u[Bt]||(u[Bt]|=64)}(u,a.index)):3&a.type&&(c=function yF(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),f=null!=v?v(f,a.value||"",c):f,g.setProperty(T,c,f))}function dy(s,a,u,c){if(xh()){const f=null===c?null:{"":-1},g=function HM(s,a){const u=s.directiveRegistry;let c=null,f=null;if(u)for(let g=0;g<u.length;g++){const v=u[g];if(zi(a,v.selectors,!1))if(c||(c=[]),kr(v))if(null!==v.findHostDirectiveDefs){const I=[];f=f||new Map,v.findHostDirectiveDefs(v,I,f),c.unshift(...I,v),cT(s,a,I.length)}else c.unshift(v),cT(s,a,0);else f=f||new Map,v.findHostDirectiveDefs?.(v,c,f),c.push(v)}return null===c?null:[c,f]}(s,u);let v,I;null===g?v=I=null:[v,I]=g,null!==v&&sT(s,a,u,v,f,I),f&&function dT(s,a,u){if(a){const c=s.localNames=[];for(let f=0;f<a.length;f+=2){const g=u[a[f+1]];if(null==g)throw new ie(-301,!1);c.push(a[f],g)}}}(u,c,f)}u.mergedAttrs=sn(u.mergedAttrs,u.attrs)}function sT(s,a,u,c,f,g){for(let N=0;N<c.length;N++)uo(za(u,a),s,c[N].type);!function hT(s,a,u){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+u,s.providerIndexes=a}(u,s.data.length,c.length);for(let N=0;N<c.length;N++){const P=c[N];P.providersResolver&&P.providersResolver(P)}let v=!1,I=!1,T=kd(s,a,c.length,null);for(let N=0;N<c.length;N++){const P=c[N];u.mergedAttrs=sn(u.mergedAttrs,P.hostAttrs),$M(s,u,a,T,P),jM(T,P,f),null!==P.contentQueries&&(u.flags|=4),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(u.flags|=64);const U=P.type.prototype;!v&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((s.preOrderHooks??=[]).push(u.index),v=!0),!I&&(U.ngOnChanges||U.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(u.index),I=!0),T++}!function iT(s,a,u){const f=a.directiveEnd,g=s.data,v=a.attrs,I=[];let T=null,N=null;for(let P=a.directiveStart;P<f;P++){const U=g[P],W=u?u.get(U):null,Ee=W?W.outputs:null;T=BM(U.inputs,P,T,W?W.inputs:null),N=BM(U.outputs,P,N,Ee);const xe=null===T||null===v||Xo(a)?null:gg(T,P,v);I.push(xe)}null!==T&&(T.hasOwnProperty("class")&&(a.flags|=8),T.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=I,a.inputs=T,a.outputs=N}(s,u,g)}function uT(s,a,u){const c=u.directiveStart,f=u.directiveEnd,g=u.index,v=function Vl(){return wt.lFrame.currentDirectiveIndex}();try{ua(g);for(let I=c;I<f;I++){const T=s.data[I],N=a[I];ko(I),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&lT(T,N)}}finally{ua(-1),ko(v)}}function lT(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function cT(s,a,u){a.componentOffset=u,(s.components??=[]).push(a.index)}function jM(s,a,u){if(u){if(a.exportAs)for(let c=0;c<a.exportAs.length;c++)u[a.exportAs[c]]=s;kr(a)&&(u[""]=s)}}function $M(s,a,u,c,f){s.data[c]=f;const g=f.factory||(f.factory=Mo(f.type)),v=new Oi(g,kr(f),Od);s.blueprint[c]=v,u[c]=v,function oT(s,a,u,c,f){const g=f.hostBindings;if(g){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const I=~a.index;(function aT(s){let a=s.length;for(;a>0;){const u=s[--a];if("number"==typeof u&&u<0)return u}return 0})(v)!=I&&v.push(I),v.push(u,c,g)}}(s,a,c,kd(s,u,f.hostVars,Ht),f)}function zo(s,a,u,c,f,g){const v=li(s,a);!function CE(s,a,u,c,f,g,v){if(null==g)s.removeAttribute(a,f,u);else{const I=null==v?X(g):v(g,c||"",f);s.setAttribute(a,f,I,u)}}(a[Ut],v,g,s.value,u,c,f)}function pT(s,a,u,c,f,g){const v=g[a];if(null!==v)for(let I=0;I<v.length;)gT(c,u,v[I++],v[I++],v[I++])}function gT(s,a,u,c,f){const g=or(null);try{null!==s.setInput?s.setInput(a,f,u,c):a[c]=f}finally{or(g)}}function gg(s,a,u){let c=null,f=0;for(;f<u.length;){const g=u[f];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===c&&(c=[]);const v=s[g];for(let I=0;I<v.length;I+=2)if(v[I]===a){c.push(g,v[I+1],u[f+1]);break}}f+=2}else f+=2;else f+=4}return c}function mT(s,a,u,c){return[s,!0,!1,a,null,0,c,u,null,null,null]}function hy(s,a){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const g=u[c+1];if(-1!==g){const v=s.data[g];Ul(u[c]),v.contentQueries(2,a[g],g)}}}function fy(s,a){return s[mi]?s[vh][Ri]=a:s[mi]=a,s[vh]=a,a}function mg(s,a,u){Ul(0);const c=or(null);try{a(s,u)}finally{or(c)}}function _T(s){return s[ta]||(s[ta]=[])}function _g(s){return s.cleanup||(s.cleanup=[])}function bE(s,a){const u=s[Or],c=u?u.get(mf,null):null;c&&c.handleError(a)}function TE(s,a,u,c,f){for(let g=0;g<u.length;){const v=u[g++],I=u[g++];gT(s.data[v],a[v],c,I,f)}}function ha(s,a,u){const c=xl(a,s);!function cc(s,a,u){s.setValue(a,u)}(s[Ut],c,u)}function zM(s,a){const u=Cr(a,s),c=u[et];!function qM(s,a){for(let u=a.length;u<s.blueprint.length;u++)a.push(s.blueprint[u])}(c,u);const f=u[Kn];null!==f&&null===u[Yn]&&(u[Yn]=aE(f,u[Or])),py(c,u,u[On])}function py(s,a,u){$a(a);try{const c=s.viewQuery;null!==c&&mg(1,c,u);const f=s.template;null!==f&&LM(s,a,f,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&hy(s,a),s.staticViewQueries&&mg(2,s.viewQuery,u);const g=s.components;null!==g&&function WM(s,a){for(let u=0;u<a.length;u++)zM(s,a[u])}(a,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{a[Bt]&=-5,od()}}let SE=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(u,c,f){const g=typeof Zone>"u"?null:Zone.current,v=new Dh(u,N=>{this.all.has(N)&&this.queue.set(N,g)},f);let I;this.all.add(v),v.notify();const T=()=>{v.cleanup(),I?.(),this.all.delete(v),this.queue.delete(v)};return I=c?.onDestroy(T),{destroy:T}}flush(){if(0!==this.queue.size)for(const[u,c]of this.queue)this.queue.delete(u),c?c.run(()=>u.run()):u.run()}get isQueueEmpty(){return 0===this.queue.size}}return s.\u0275prov=rn({token:s,providedIn:"root",factory:()=>new s}),s})();function au(s,a,u){let c=u?s.styles:null,f=u?s.classes:null,g=0;if(null!==a)for(let v=0;v<a.length;v++){const I=a[v];"number"==typeof I?g=I:1==g?f=Ue(f,I):2==g&&(c=Ue(c,I+": "+a[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=f:s.classesWithoutHost=f}function yg(s,a,u,c,f=!1){for(;null!==u;){const g=a[u.index];if(null!==g&&c.push(kn(g)),Pi(g)){for(let I=Ir;I<g.length;I++){const T=g[I],N=T[et].firstChild;null!==N&&yg(T[et],T,N,c)}g[yi]!==g[Kn]&&c.push(g[yi])}const v=u.type;if(8&v)yg(s,a,u.child,c);else if(32&v){const I=uc(u,a);let T;for(;T=I();)c.push(T)}else if(16&v){const I=nu(a,u);if(Array.isArray(I))c.push(...I);else{const T=Ji(a[Gn]);yg(T[et],T,I,c,!0)}}u=f?u.projectionNext:u.next}return c}function vg(s,a,u,c=!0){const f=a[eo].rendererFactory;f.begin&&f.begin();try{gy(s,a,s.template,u)}catch(v){throw c&&bE(a,v),v}finally{f.end&&f.end(),a[eo].effectManager?.flush()}}function gy(s,a,u,c){const f=a[Bt];if(256!=(256&f)){a[eo].effectManager?.flush(),$a(a);try{Xc(a),function Ll(s){return wt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&LM(s,a,u,2,c);const v=3==(3&f);if(v){const N=s.preOrderCheckHooks;null!==N&&ad(a,N,null)}else{const N=s.preOrderHooks;null!==N&&Ga(a,N,0,null),Uh(a,0)}if(function wg(s){for(let a=Jh(s);null!==a;a=qp(a)){if(!a[ks])continue;const u=a[ra];for(let c=0;c<u.length;c++){Nh(u[c])}}}(a),function ZM(s){for(let a=Jh(s);null!==a;a=qp(a))for(let u=Ir;u<a.length;u++){const c=a[u],f=c[et];Va(c)&&gy(f,c,f.template,c[On])}}(a),null!==s.contentQueries&&hy(s,a),v){const N=s.contentCheckHooks;null!==N&&ad(a,N)}else{const N=s.contentHooks;null!==N&&Ga(a,N,1),Uh(a,1)}!function Xb(s,a){const u=s.hostBindingOpCodes;if(null===u)return;const c=mE(a,na);try{for(let f=0;f<u.length;f++){const g=u[f];if(g<0)ua(~g);else{const v=g,I=u[++f],T=u[++f];ju(I,v),c.runInContext(T,2,a[v])}}}finally{null===a[na]&&_E(a,na),ua(-1)}}(s,a);const I=s.components;null!==I&&function IT(s,a){for(let u=0;u<a.length;u++)ET(s,a[u])}(a,I);const T=s.viewQuery;if(null!==T&&mg(2,T,c),v){const N=s.viewCheckHooks;null!==N&&ad(a,N)}else{const N=s.viewHooks;null!==N&&Ga(a,N,2),Uh(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[Bt]&=-73,ed(a)}finally{od()}}}function ET(s,a){const u=Cr(a,s);if(Va(u)){const c=u[et];80&u[Bt]?gy(c,u,c.template,u[On]):u[No]>0&&AE(u)}}function AE(s){for(let c=Jh(s);null!==c;c=qp(c))for(let f=Ir;f<c.length;f++){const g=c[f];if(Va(g))if(1024&g[Bt]){const v=g[et];gy(v,g,v.template,g[On])}else g[No]>0&&AE(g)}const u=s[et].components;if(null!==u)for(let c=0;c<u.length;c++){const f=Cr(u[c],s);Va(f)&&f[No]>0&&AE(f)}}class Eg{get rootNodes(){const a=this._lView,u=a[et];return yg(u,a,u.firstChild,[])}constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[On]}set context(a){this._lView[On]=a}get destroyed(){return 256==(256&this._lView[Bt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[Pn];if(Pi(a)){const u=a[qi],c=u?u.indexOf(this):-1;c>-1&&(F_(a,c),el(u,c))}this._attachedToViewContainer=!1}L_(this._lView[et],this._lView)}onDestroy(a){!function td(s,a){if(256==(256&s[Bt]))throw new ie(911,!1);null===s[xi]&&(s[xi]=[]),s[xi].push(a)}(this._lView,a)}markForCheck(){Rd(this._cdRefInjectingView||this._lView)}detach(){this._lView[Bt]&=-129}reattach(){this._lView[Bt]|=128}detectChanges(){vg(this._lView[et],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Zp(s,a){bd(s,a,a[Ut],2,null,null)}(this._lView[et],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new ie(902,!1);this._appRef=a}}class CT extends Eg{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;vg(a[et],a,a[On],!1)}checkNoChanges(){}get context(){return null}}class bT extends pf{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=Gt(a);return new my(u,this.ngModule)}}function NE(s){const a=[];for(let u in s)s.hasOwnProperty(u)&&a.push({propName:s[u],templateName:u});return a}class TT{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,c){c=$(c);const f=this.injector.get(a,zb,c);return f!==zb||u===zb?f:this.parentInjector.get(a,u,c)}}class my extends cE{get inputs(){return NE(this.componentDef.inputs)}get outputs(){return NE(this.componentDef.outputs)}constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function Ip(s){return s.map(s_).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}create(a,u,c,f){let g=(f=f||this.ngModule)instanceof Md?f:f?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new TT(a,g):a,I=v.get(fE,null);if(null===I)throw new ie(407,!1);const P={rendererFactory:I,sanitizer:v.get(gc,null),effectManager:v.get(SE,null)},U=I.createRenderer(null,this.componentDef),W=this.componentDef.selectors[0][0]||"div",Q=c?function _F(s,a,u,c){const g=c.get(xM,!1)||u===An.ShadowDom,v=s.selectRootElement(a,g);return function UM(s){wf(s)}(v),v}(U,c,this.componentDef.encapsulation,v):ys(U,W,function KM(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(W)),Ee=this.componentDef.onPush?576:528,xe=fg(0,null,null,1,0,null,null,null,null,null,null),Je=cy(null,xe,null,Ee,null,null,P,U,v,null,null);let Ct,Te;$a(Je);try{const Ot=this.componentDef;let on,Rn=null;Ot.findHostDirectiveDefs?(on=[],Rn=new Map,Ot.findHostDirectiveDefs(Ot,on,Rn),on.push(Ot)):on=[Ot];const Ea=function DT(s,a){const u=s[et],c=Yt;return s[c]=a,dg(u,c,2,"#host",null)}(Je,Q),aA=function ST(s,a,u,c,f,g,v){const I=f[et];!function DF(s,a,u,c){for(const f of s)a.mergedAttrs=sn(a.mergedAttrs,f.hostAttrs);null!==a.mergedAttrs&&(au(a,a.mergedAttrs,!0),null!==u&&sb(c,u,a))}(c,s,a,v);let T=null;null!==a&&(T=aE(a,f[Or]));const N=g.rendererFactory.createRenderer(a,u),P=cy(f,wE(u),null,u.onPush?64:16,f[s.index],s,g,N,null,null,T);return I.firstCreatePass&&cT(I,s,c.length-1),fy(f,P),f[s.index]=P}(Ea,Q,Ot,on,Je,P,U);Te=Jc(xe,Yt),Q&&function AT(s,a,u,c){if(c)ht(s,u,["ng-version",RM.full]);else{const{attrs:f,classes:g}=function Il(s){const a=[],u=[];let c=1,f=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===f?""!==g&&a.push(g,s[++c]):8===f&&u.push(g);else{if(!Mi(f))break;f=g}c++}return{attrs:a,classes:u}}(a.selectors[0]);f&&ht(s,u,f),g&&g.length>0&&Td(s,u,g.join(" "))}}(U,Ot,Q,c),void 0!==u&&function NT(s,a,u){const c=s.projection=[];for(let f=0;f<a.length;f++){const g=u[f];c.push(null!=g?Array.from(g):null)}}(Te,this.ngContentSelectors,u),Ct=function SF(s,a,u,c,f,g){const v=Hn(),I=f[et],T=li(v,f);sT(I,f,v,u,null,c);for(let P=0;P<u.length;P++)br(Us(f,I,v.directiveStart+P,v),f);uT(I,f,v),T&&br(T,f);const N=Us(f,I,v.directiveStart+v.componentOffset,v);if(s[On]=f[On]=N,null!==g)for(const P of g)P(N,a);return eT(I,v,s),N}(aA,Ot,on,Rn,Je,[AF]),py(xe,Je,null)}finally{od()}return new TF(this.componentType,Ct,fc(Te,Je),Je,Te)}}class TF extends Ub{constructor(a,u,c,f,g){super(),this.location=c,this._rootLView=f,this._tNode=g,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new CT(f),this.componentType=a}setInput(a,u){const c=this._tNode.inputs;let f;if(null!==c&&(f=c[a])){if(this.previousInputValues??=new Map,this.previousInputValues.has(a)&&Object.is(this.previousInputValues.get(a),u))return;const g=this._rootLView;TE(g[et],g,f,a,u),this.previousInputValues.set(a,u),Rd(Cr(this._tNode.index,g))}}get injector(){return new pr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function AF(){const s=Hn();Zu(Se()[et],s)}function MT(s){let a=function YM(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;a;){let f;if(kr(s))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new ie(903,!1);f=a.\u0275dir}if(f){if(u){c.push(f);const v=s;v.inputs=ME(s.inputs),v.declaredInputs=ME(s.declaredInputs),v.outputs=ME(s.outputs);const I=f.hostBindings;I&&_y(s,I);const T=f.viewQuery,N=f.contentQueries;if(T&&di(s,T),N&&RE(s,N),z(s.inputs,f.inputs),z(s.declaredInputs,f.declaredInputs),z(s.outputs,f.outputs),kr(f)&&f.data.animation){const P=s.data;P.animation=(P.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let v=0;v<g.length;v++){const I=g[v];I&&I.ngInherit&&I(s),I===MT&&(u=!1)}}a=Object.getPrototypeOf(a)}!function QM(s){let a=0,u=null;for(let c=s.length-1;c>=0;c--){const f=s[c];f.hostVars=a+=f.hostVars,f.hostAttrs=sn(f.hostAttrs,u=sn(u,f.hostAttrs))}}(c)}function ME(s){return s===Cn?{}:s===Nt?[]:s}function di(s,a){const u=s.viewQuery;s.viewQuery=u?(c,f)=>{a(c,f),u(c,f)}:a}function RE(s,a){const u=s.contentQueries;s.contentQueries=u?(c,f,g)=>{a(c,f,g),u(c,f,g)}:a}function _y(s,a){const u=s.hostBindings;s.hostBindings=u?(c,f)=>{a(c,f),u(c,f)}:a}function PE(s){return!!PT(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function PT(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function uu(s,a,u){return s[a]=u}function Es(s,a,u){return!Object.is(s[a],u)&&(s[a]=u,!0)}function Ef(s,a,u,c){const f=Es(s,a,u);return Es(s,a+1,c)||f}function OT(s,a,u,c){const f=Se();return Es(f,Oo(),a)&&(tn(),zo(Ln(),f,s,a,u,c)),OT}function Tg(s,a,u,c){return Es(s,Oo(),u)?a+X(u)+c:Ht}function Dg(s,a,u,c,f,g){const I=Ef(s,function so(){return wt.lFrame.bindingIndex}(),u,f);return bn(2),I?a+X(u)+c+X(f)+g:Ht}function Ay(s,a,u,c,f,g,v,I){const T=Se(),N=tn(),P=s+Yt,U=N.firstCreatePass?function GE(s,a,u,c,f,g,v,I,T){const N=a.consts,P=dg(a,s,4,v||null,xo(N,I));dy(a,u,P,xo(N,T)),Zu(a,P);const U=P.tView=fg(2,P,c,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,N,null);return null!==a.queries&&(a.queries.template(a,P),U.queries=a.queries.embeddedTView(P)),P}(P,N,T,a,u,c,f,g,v):N.data[P];io(U,!1);const W=Ny(N,T,U,s);jl()&&Id(N,T,W,U),br(W,T),fy(T,T[P]=mT(W,T,W,U)),no(U)&&hg(N,T,U),null!=v&&vE(T,U,I)}let Ny=function My(s,a,u,c){return ps(!0),a[Ut].createComment("")};function Rg(s){return Ro(function kw(){return wt.lFrame.contextLView}(),Yt+s)}function xg(s,a,u){const c=Se();return Es(c,Oo(),a)&&Go(tn(),Ln(),c,s,a,c[Ut],u,!1),xg}function Ry(s,a,u,c,f){const v=f?"class":"style";TE(s,u,a.inputs[v],v,c)}function bf(s,a,u,c){const f=Se(),g=tn(),v=Yt+s,I=f[Ut],T=g.firstCreatePass?function zE(s,a,u,c,f,g){const v=a.consts,T=dg(a,s,2,c,xo(v,f));return dy(a,u,T,xo(v,g)),null!==T.attrs&&au(T,T.attrs,!1),null!==T.mergedAttrs&&au(T,T.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,T),T}(v,g,f,a,u,c):g.data[v],N=GT(g,f,T,I,a,s);f[v]=N;const P=no(T);return io(T,!0),sb(I,N,T),32!=(32&T.flags)&&jl()&&Id(g,f,N,T),0===function nd(){return wt.lFrame.elementDepthCount}()&&br(N,f),function Rp(){wt.lFrame.elementDepthCount++}(),P&&(hg(g,f,T),eT(g,T,f)),null!==c&&vE(f,T),bf}function Tf(){let s=Hn();Hu()?ja():(s=s.parent,io(s,!1));const a=s;(function Uu(s){return wt.skipHydrationRootTNode===s})(a)&&function Ph(){wt.skipHydrationRootTNode=null}(),function Rh(){wt.lFrame.elementDepthCount--}();const u=tn();return u.firstCreatePass&&(Zu(u,s),Pa(s)&&u.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Ku(s){return 0!=(8&s.flags)}(a)&&Ry(u,a,Se(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function ld(s){return 0!=(16&s.flags)}(a)&&Ry(u,a,Se(),a.stylesWithoutHost,!1),Tf}function xy(s,a,u,c){return bf(s,a,u,c),Tf(),xy}let GT=(s,a,u,c,f,g)=>(ps(!0),ys(c,f,function kp(){return wt.lFrame.currentNamespace}()));function Py(s,a,u){const c=Se(),f=tn(),g=s+Yt,v=f.firstCreatePass?function qT(s,a,u,c,f){const g=a.consts,v=xo(g,c),I=dg(a,s,8,"ng-container",v);return null!==v&&au(I,v,!0),dy(a,u,I,xo(g,f)),null!==a.queries&&a.queries.elementStart(a,I),I}(g,f,c,a,u):f.data[g];io(v,!0);const I=ZT(f,c,v,s);return c[g]=I,jl()&&Id(f,c,I,v),br(I,c),no(v)&&(hg(f,c,v),eT(f,v,c)),null!=u&&vE(c,v),Py}function Oy(){let s=Hn();const a=tn();return Hu()?ja():(s=s.parent,io(s,!1)),a.firstCreatePass&&(Zu(a,s),Pa(s)&&a.queries.elementEnd(s)),Oy}let ZT=(s,a,u,c)=>(ps(!0),Xh(a[Ut],""));function KT(){return Se()}function qE(s){return!!s&&"function"==typeof s.then}function YT(s){return!!s&&"function"==typeof s.subscribe}function Sf(s,a,u,c){const f=Se(),g=tn(),v=Hn();return function ky(s,a,u,c,f,g,v){const I=no(c),N=s.firstCreatePass&&_g(s),P=a[On],U=_T(a);let W=!0;if(3&c.type||v){const xe=li(c,a),Je=v?v(xe):xe,Ct=U.length,Te=v?on=>v(kn(on[c.index])):c.index;let Ot=null;if(!v&&I&&(Ot=function QT(s,a,u,c){const f=s.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const v=f[g];if(v===u&&f[g+1]===c){const I=a[ta],T=f[g+2];return I.length>T?I[T]:null}"string"==typeof v&&(g+=2)}return null}(s,a,f,c.index)),null!==Ot)(Ot.__ngLastListenerFn__||Ot).__ngNextListenerFn__=g,Ot.__ngLastListenerFn__=g,W=!1;else{g=XT(c,a,P,g,!1);const on=u.listen(Je,f,g);U.push(g,on),N&&N.push(f,Te,Ct,Ct+1)}}else g=XT(c,a,P,g,!1);const Q=c.outputs;let Ee;if(W&&null!==Q&&(Ee=Q[f])){const xe=Ee.length;if(xe)for(let Je=0;Je<xe;Je+=2){const Rn=a[Ee[Je]][Ee[Je+1]].subscribe(g),Ea=U.length;U.push(g,Rn),N&&N.push(f,c.index,Ea,-(Ea+1))}}}(g,f,f[Ut],v,s,a,c),Sf}function JT(s,a,u,c){try{return hs(6,a,u),!1!==u(c)}catch(f){return bE(s,f),!1}finally{hs(7,a,u)}}function XT(s,a,u,c,f){return function g(v){if(v===Function)return c;Rd(s.componentOffset>-1?Cr(s.index,a):a);let T=JT(a,u,c,v),N=g.__ngNextListenerFn__;for(;N;)T=JT(a,u,N,v)&&T,N=N.__ngNextListenerFn__;return f&&!1===T&&v.preventDefault(),T}}function eD(s=1){return function zu(s){return(wt.lFrame.contextLView=function Pp(s,a){for(;s>0;)a=a[Os],s--;return a}(s,wt.lFrame.contextLView))[On]}(s)}function Pg(s,a,u,c,f){const g=Se(),v=Tg(g,a,u,c);return v!==Ht&&Go(tn(),Ln(),g,s,v,g[Ut],f,!1),Pg}function Og(s,a){return s<<17|a<<2}function vc(s){return s>>17&32767}function Fd(s){return 2|s}function Af(s){return(131068&s)>>2}function kg(s,a){return-131069&s|a<<2}function YE(s){return 1|s}function wR(s,a,u,c,f){const g=s[u+1],v=null===a;let I=c?vc(g):Af(g),T=!1;for(;0!==I&&(!1===T||v);){const P=s[I+1];ER(s[I],a)&&(T=!0,s[I+1]=c?YE(P):Fd(P)),I=c?vc(P):Af(P)}T&&(s[u+1]=c?Fd(g):YE(g))}function ER(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&M(s,a)>=0}const wi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function IR(s){return s.substring(wi.key,wi.keyEnd)}function CR(s,a){const u=wi.textEnd;return u===a?-1:(a=wi.keyEnd=function QE(s,a,u){for(;a<u&&s.charCodeAt(a)>32;)a++;return a}(s,wi.key=a,u),wc(s,a,u))}function wc(s,a,u){for(;a<u&&s.charCodeAt(a)<=32;)a++;return a}function t0(s,a,u){return ga(s,a,u,!1),t0}function Fg(s,a){return ga(s,a,null,!0),Fg}function r0(s){!function ma(s,a,u,c){const f=tn(),g=bn(2);f.firstUpdatePass&&ur(f,null,g,c);const v=Se();if(u!==Ht&&Es(v,g,u)){const I=f.data[vi()];if(gD(I,c)&&!uD(f,g)){let T=c?I.classesWithoutHost:I.stylesWithoutHost;null!==T&&(u=Ue(T,u||"")),Ry(f,I,v,u,c)}else!function dD(s,a,u,c,f,g,v,I){f===Ht&&(f=Nt);let T=0,N=0,P=0<f.length?f[0]:null,U=0<g.length?g[0]:null;for(;null!==P||null!==U;){const W=T<f.length?f[T+1]:void 0,Q=N<g.length?g[N+1]:void 0;let xe,Ee=null;P===U?(T+=2,N+=2,W!==Q&&(Ee=U,xe=Q)):null===U||null!==P&&P<U?(T+=2,Ee=P):(N+=2,Ee=U,xe=Q),null!==Ee&&hD(s,a,u,c,Ee,xe,v,I),P=T<f.length?f[T]:null,U=N<g.length?g[N]:null}}(f,I,v,v[Ut],v[g+1],v[g+1]=function TR(s,a,u){if(null==u||""===u)return Nt;const c=[],f=al(u);if(Array.isArray(f))for(let g=0;g<f.length;g++)s(c,f[g],!0);else if("object"==typeof f)for(const g in f)f.hasOwnProperty(g)&&s(c,g,f[g]);else"string"==typeof f&&a(c,f);return c}(s,a,u),c,g)}}(cD,pa,s,!0)}function pa(s,a){for(let u=function LF(s){return function Vy(s){wi.key=0,wi.keyEnd=0,wi.value=0,wi.valueEnd=0,wi.textEnd=s.length}(s),CR(s,wc(s,0,wi.textEnd))}(a);u>=0;u=CR(a,u))C(s,IR(a),!0)}function ga(s,a,u,c){const f=Se(),g=tn(),v=bn(2);g.firstUpdatePass&&ur(g,s,v,c),a!==Ht&&Es(f,v,a)&&hD(g,g.data[vi()],f,f[Ut],s,f[v+1]=function pD(s,a){return null==s||""===s||("string"==typeof a?s+=a:"object"==typeof s&&(s=te(al(s)))),s}(a,u),c,v)}function uD(s,a){return a>=s.expandoStartIndex}function ur(s,a,u,c){const f=s.data;if(null===f[u+1]){const g=f[vi()],v=uD(s,u);gD(g,c)&&null===a&&!v&&(a=!1),a=function kt(s,a,u,c){const f=$u(s);let g=c?a.residualClasses:a.residualStyles;if(null===f)0===(c?a.classBindings:a.styleBindings)&&(u=Lg(u=a0(null,s,a,u,c),a.attrs,c),g=null);else{const v=a.directiveStylingLast;if(-1===v||s[v]!==f)if(u=a0(f,s,a,u,c),null===g){let T=function s0(s,a,u){const c=u?a.classBindings:a.styleBindings;if(0!==Af(c))return s[vc(c)]}(s,a,c);void 0!==T&&Array.isArray(T)&&(T=a0(null,s,a,T[1],c),T=Lg(T,a.attrs,c),function o0(s,a,u,c){s[vc(u?a.classBindings:a.styleBindings)]=c}(s,a,c,T))}else g=function bR(s,a,u){let c;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)c=Lg(c,s[g].hostAttrs,u);return Lg(c,a.attrs,u)}(s,a,c)}return void 0!==g&&(c?a.residualClasses=g:a.residualStyles=g),u}(f,g,a,c),function vR(s,a,u,c,f,g){let v=g?a.classBindings:a.styleBindings,I=vc(v),T=Af(v);s[c]=u;let P,N=!1;if(Array.isArray(u)?(P=u[1],(null===P||M(u,P)>0)&&(N=!0)):P=u,f)if(0!==T){const W=vc(s[I+1]);s[c+1]=Og(W,I),0!==W&&(s[W+1]=kg(s[W+1],c)),s[I+1]=function KE(s,a){return 131071&s|a<<17}(s[I+1],c)}else s[c+1]=Og(I,0),0!==I&&(s[I+1]=kg(s[I+1],c)),I=c;else s[c+1]=Og(T,0),0===I?I=c:s[T+1]=kg(s[T+1],c),T=c;N&&(s[c+1]=Fd(s[c+1])),wR(s,P,c,!0),wR(s,P,c,!1),function kF(s,a,u,c,f){const g=f?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof a&&M(g,a)>=0&&(u[c+1]=YE(u[c+1]))}(a,P,s,c,g),v=Og(I,T),g?a.classBindings=v:a.styleBindings=v}(f,g,a,u,v,c)}}function a0(s,a,u,c,f){let g=null;const v=u.directiveEnd;let I=u.directiveStylingLast;for(-1===I?I=u.directiveStart:I++;I<v&&(g=a[I],c=Lg(c,g.hostAttrs,f),g!==s);)I++;return null!==s&&(u.directiveStylingLast=I),c}function Lg(s,a,u){const c=u?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const v=a[g];"number"==typeof v?f=v:f===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),C(s,v,!!u||a[++g]))}return void 0===s?null:s}function cD(s,a,u){const c=String(a);""!==c&&!c.includes(" ")&&C(s,c,u)}function hD(s,a,u,c,f,g,v,I){if(!(3&a.type))return;const T=s.data,N=T[I+1],P=function PF(s){return 1==(1&s)}(N)?fD(T,a,u,f,Af(N),v):void 0;Hy(P)||(Hy(g)||function oD(s){return 2==(2&s)}(N)&&(g=fD(T,null,u,f,I,v)),function ib(s,a,u,c,f){if(a)f?s.addClass(u,c):s.removeClass(u,c);else{let g=-1===c.indexOf("-")?void 0:Ho.DashCase;null==f?s.removeStyle(u,c,g):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),g|=Ho.Important),s.setStyle(u,c,f,g))}}(c,v,xl(vi(),u),f,g))}function fD(s,a,u,c,f,g){const v=null===a;let I;for(;f>0;){const T=s[f],N=Array.isArray(T),P=N?T[1]:T,U=null===P;let W=u[f+1];W===Ht&&(W=U?Nt:void 0);let Q=U?D(W,c):P===c?W:void 0;if(N&&!Hy(Q)&&(Q=D(T,c)),Hy(Q)&&(I=Q,v))return I;const Ee=s[f+1];f=v?vc(Ee):Af(Ee)}if(null!==a){let T=g?a.residualClasses:a.residualStyles;null!=T&&(I=D(T,c))}return I}function Hy(s){return void 0!==s}function gD(s,a){return 0!=(s.flags&(a?8:16))}function mD(s,a=""){const u=Se(),c=tn(),f=s+Yt,g=c.firstCreatePass?dg(c,f,1,a,null):c.data[f],v=_D(c,u,g,a,s);u[f]=v,jl()&&Id(c,u,v,g),io(g,!1)}let _D=(s,a,u,c,f)=>(ps(!0),function lc(s,a){return s.createText(a)}(a[Ut],c));function jy(s){return Ec("",s,""),jy}function Ec(s,a,u){const c=Se(),f=Tg(c,s,a,u);return f!==Ht&&ha(c,vi(),f),Ec}function Ld(s,a,u,c,f){const g=Se(),v=Dg(g,s,a,u,c,f);return v!==Ht&&ha(g,vi(),v),Ld}function f0(s,a,u){const c=Se();if(Es(c,Oo(),a)){const g=tn(),v=Ln();Go(g,v,c,s,a,function yT(s,a,u){return(null===s||kr(s))&&(u=function aa(s){for(;Array.isArray(s);){if("object"==typeof s[bl])return s;s=s[Kn]}return null}(u[a.index])),u[Ut]}($u(g.data),v,c),u,!0)}return f0}const ts=void 0;var kR=["en",[["a","p"],["AM","PM"],ts],[["AM","PM"],ts,ts],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ts,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ts,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ts,"{1} 'at' {0}",ts],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function p0(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Mf={};function g0(s){const a=function LR(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=xD(a);if(u)return u;const c=a.split("-")[0];if(u=xD(c),u)return u;if("en"===c)return kR;throw new ie(701,!1)}function Vg(s){return g0(s)[Pt.PluralCase]}function xD(s){return s in Mf||(Mf[s]=fn.ng&&fn.ng.common&&fn.ng.common.locales&&fn.ng.common.locales[s]),Mf[s]}var Pt=(()=>((Pt=Pt||{})[Pt.LocaleId=0]="LocaleId",Pt[Pt.DayPeriodsFormat=1]="DayPeriodsFormat",Pt[Pt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Pt[Pt.DaysFormat=3]="DaysFormat",Pt[Pt.DaysStandalone=4]="DaysStandalone",Pt[Pt.MonthsFormat=5]="MonthsFormat",Pt[Pt.MonthsStandalone=6]="MonthsStandalone",Pt[Pt.Eras=7]="Eras",Pt[Pt.FirstDayOfWeek=8]="FirstDayOfWeek",Pt[Pt.WeekendRange=9]="WeekendRange",Pt[Pt.DateFormat=10]="DateFormat",Pt[Pt.TimeFormat=11]="TimeFormat",Pt[Pt.DateTimeFormat=12]="DateTimeFormat",Pt[Pt.NumberSymbols=13]="NumberSymbols",Pt[Pt.NumberFormats=14]="NumberFormats",Pt[Pt.CurrencyCode=15]="CurrencyCode",Pt[Pt.CurrencySymbol=16]="CurrencySymbol",Pt[Pt.CurrencyName=17]="CurrencyName",Pt[Pt.Currencies=18]="Currencies",Pt[Pt.Directionality=19]="Directionality",Pt[Pt.PluralCase=20]="PluralCase",Pt[Pt.ExtraData=21]="ExtraData",Pt))();const Ic="en-US";let _a=Ic;function b0(s,a,u,c,f){if(s=Pe(s),Array.isArray(s))for(let g=0;g<s.length;g++)b0(s[g],a,u,c,f);else{const g=tn(),v=Se();let I=Nd(s)?s:Pe(s.provide),T=Q_(s);const N=Hn(),P=1048575&N.providerIndexes,U=N.directiveStart,W=N.providerIndexes>>20;if(Nd(s)||!s.multi){const Q=new Oi(T,f,Od),Ee=D0(I,a,f?P:P+W,U);-1===Ee?(uo(za(N,v),g,I),T0(g,s,a.length),a.push(I),N.directiveStart++,N.directiveEnd++,f&&(N.providerIndexes+=1048576),u.push(Q),v.push(Q)):(u[Ee]=Q,v[Ee]=Q)}else{const Q=D0(I,a,P+W,U),Ee=D0(I,a,P,P+W),Je=Ee>=0&&u[Ee];if(f&&!Je||!f&&!(Q>=0&&u[Q])){uo(za(N,v),g,I);const Ct=function tv(s,a,u,c,f){const g=new Oi(s,u,Od);return g.multi=[],g.index=a,g.componentProviders=0,rS(g,f,c&&!u),g}(f?dx:cx,u.length,f,c,T);!f&&Je&&(u[Ee].providerFactory=Ct),T0(g,s,a.length,0),a.push(I),N.directiveStart++,N.directiveEnd++,f&&(N.providerIndexes+=1048576),u.push(Ct),v.push(Ct)}else T0(g,s,Q>-1?Q:Ee,rS(u[f?Ee:Q],T,!f&&c));!f&&c&&Je&&u[Ee].componentProviders++}}}function T0(s,a,u,c){const f=Nd(a),g=function rF(s){return!!s.useClass}(a);if(f||g){const T=(g?Pe(a.useClass):a).prototype.ngOnDestroy;if(T){const N=s.destroyHooks||(s.destroyHooks=[]);if(!f&&a.multi){const P=N.indexOf(u);-1===P?N.push(u,[c,T]):N[P+1].push(c,T)}else N.push(u,T)}}}function rS(s,a,u){return u&&s.componentProviders++,s.multi.push(a)-1}function D0(s,a,u,c){for(let f=u;f<c;f++)if(a[f]===s)return f;return-1}function cx(s,a,u,c){return ev(this.multi,[])}function dx(s,a,u,c){const f=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=Us(u,u[et],this.providerFactory.index,c);g=I.slice(0,v),ev(f,g);for(let T=v;T<I.length;T++)g.push(I[T])}else g=[],ev(f,g);return g}function ev(s,a){for(let u=0;u<s.length;u++)a.push((0,s[u])());return a}function iS(s,a=[]){return u=>{u.providersResolver=(c,f)=>function nS(s,a,u){const c=tn();if(c.firstCreatePass){const f=kr(s);b0(u,c.data,c.blueprint,f,!0),b0(a,c.data,c.blueprint,f,!1)}}(c,f?f(s):s,a)}}class Pf{}class sS{}function hx(s,a){return new oS(s,a??null,[])}class oS extends Pf{constructor(a,u,c){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new bT(this);const f=Gr(a);this._bootstrapComponents=mc(f.bootstrap),this._r3Injector=Qb(a,u,[{provide:Pf,useValue:this},{provide:pf,useValue:this.componentFactoryResolver},...c],te(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class S0 extends sS{constructor(a){super(),this.moduleType=a}create(a){return new oS(this.moduleType,a,[])}}class nv extends Pf{constructor(a){super(),this.componentFactoryResolver=new bT(this),this.instance=null;const u=new Rb([...a.providers,{provide:Pf,useValue:this},{provide:pf,useValue:this.componentFactoryResolver}],a.parent||nE(),a.debugName,new Set(["environment"]));this.injector=u,a.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function A0(s,a,u=null){return new nv({providers:s,parent:a,debugName:u,runEnvironmentInitializers:!0}).injector}let WF=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=iu(0,u.type),f=c.length>0?A0([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,f)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=rn({token:s,providedIn:"environment",factory:()=>new s(un(Md))}),s})();function aS(s){s.getStandaloneInjector=a=>a.get(WF).getOrCreateStandaloneInjector(s)}function R0(s,a,u,c){return function P0(s,a,u,c,f,g){const v=a+u;return Es(s,v,f)?uu(s,v+1,g?c.call(g,f):c(f)):du(s,v+1)}(Se(),qr(),s,a,u,c)}function du(s,a){const u=s[a];return u===Ht?void 0:u}function av(s,a){const u=tn();let c;const f=s+Yt;u.firstCreatePass?(c=function F0(s,a){if(a)for(let u=a.length-1;u>=0;u--){const c=a[u];if(s===c.name)return c}}(a,u.pipeRegistry),u.data[f]=c,c.onDestroy&&(u.destroyHooks??=[]).push(f,c.onDestroy)):c=u.data[f];const g=c.factory||(c.factory=Mo(c.type)),v=In(Od);try{const I=la(!1),T=g();return la(I),function dR(s,a,u,c){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),a[u]=c}(u,Se(),f,T),T}finally{In(v)}}function uv(s,a,u,c){const f=s+Yt,g=Se(),v=Ro(g,f);return function Qg(s,a){return s[et].data[a].pure}(g,f)?function ov(s,a,u,c,f,g,v){const I=a+u;return Ef(s,I,f,g)?uu(s,I+2,v?c.call(v,f,g):c(f,g)):du(s,I+2)}(g,qr(),a,v.transform,u,c,v):v.transform(u,c)}function V0(s){return a=>{setTimeout(s,void 0,a)}}const hu=class Jg extends d.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,c){let f=a,g=u||(()=>null),v=c;if(a&&"object"==typeof a){const T=a;f=T.next?.bind(T),g=T.error?.bind(T),v=T.complete?.bind(T)}this.__isAsync&&(g=V0(g),f&&(f=V0(f)),v&&(v=V0(v)));const I=super.subscribe({next:f,error:g,complete:v});return a instanceof J.w0&&a.add(I),I}};function lv(){return this._results[Symbol.iterator]()}class Xg{get changes(){return this._changes||(this._changes=new hu)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Xg.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=lv)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const c=this;c.dirty=!1;const f=function Fn(s){return s.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function md(s,a,u){if(s.length!==a.length)return!1;for(let c=0;c<s.length;c++){let f=s[c],g=a[c];if(u&&(f=u(f),g=u(g)),g!==f)return!1}return!0}(c._results,f,u))&&(c._results=f,c.length=f.length,c.last=f[this.length-1],c.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let em=(()=>{class s{}return s.__NG_ELEMENT_ID__=gS,s})();const fS=em,pS=class extends fS{constructor(a,u,c){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(a,u){return this.createEmbeddedViewImpl(a,u,null)}createEmbeddedViewImpl(a,u,c){const f=this._declarationTContainer.tView,g=cy(this._declarationLView,f,a,16,null,f.declTNode,null,null,null,u||null,c||null);g[Ra]=this._declarationLView[this._declarationTContainer.index];const I=this._declarationLView[_i];return null!==I&&(g[_i]=I.createEmbeddedView(f)),py(f,g,a),new Eg(g)}};function gS(){return Hd(Hn(),Se())}function Hd(s,a){return 4&s.type?new pS(a,s,fc(s,a)):null}let nm=(()=>{class s{}return s.__NG_ELEMENT_ID__=Ex,s})();function Ex(){return Ii(Hn(),Se())}const H0=nm,hv=class extends H0{constructor(a,u,c){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=c}get element(){return fc(this._hostTNode,this._hostLView)}get injector(){return new pr(this._hostTNode,this._hostLView)}get parentInjector(){const a=Fo(this._hostTNode,this._hostLView);if(oo(a)){const u=Mt(a,this._hostLView),c=Ls(a);return new pr(u[et].data[c+8],u)}return new pr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=fv(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-Ir}createEmbeddedView(a,u,c){let f,g;"number"==typeof c?f=c:null!=c&&(f=c.index,g=c.injector);const I=a.createEmbeddedViewImpl(u||{},g,null);return this.insertImpl(I,f,false),I}createComponent(a,u,c,f,g){const v=a&&!function Ya(s){return"function"==typeof s}(a);let I;if(v)I=u;else{const xe=u||{};I=xe.index,c=xe.injector,f=xe.projectableNodes,g=xe.environmentInjector||xe.ngModuleRef}const T=v?a:new my(Gt(a)),N=c||this.parentInjector;if(!g&&null==T.ngModule){const Je=(v?N:this.parentInjector).get(Md,null);Je&&(g=Je)}Gt(T.componentType??{});const Q=T.create(N,f,null,g);return this.insertImpl(Q.hostView,I,false),Q}insert(a,u){return this.insertImpl(a,u,!1)}insertImpl(a,u,c){const f=a._lView,g=f[et];if(function Ah(s){return Pi(s[Pn])}(f)){const T=this.indexOf(a);if(-1!==T)this.detach(T);else{const N=f[Pn],P=new hv(N,N[oi],N[Pn]);P.detach(P.indexOf(a))}}const v=this._adjustIndex(u),I=this._lContainer;if(function k_(s,a,u,c){const f=Ir+c,g=u.length;c>0&&(u[f-1][Ri]=a),c<g-Ir?(a[Ri]=u[f],ho(u,Ir+c,a)):(u.push(a),a[Ri]=null),a[Pn]=u;const v=a[Ra];null!==v&&u!==v&&function rb(s,a){const u=s[ra];a[Gn]!==a[Pn][Pn][Gn]&&(s[ks]=!0),null===u?s[ra]=[a]:u.push(a)}(v,a);const I=a[_i];null!==I&&I.insertView(s),a[Bt]|=128}(g,f,I,v),!c){const T=tf(v,I),N=f[Ut],P=it(N,I[yi]);null!==P&&function Wp(s,a,u,c,f,g){c[Kn]=f,c[oi]=a,bd(s,c,u,1,f,g)}(g,I[oi],N,f,P,T)}return a.attachToViewContainerRef(),ho(ti(I),v,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=fv(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),c=F_(this._lContainer,u);c&&(el(ti(this._lContainer),u),L_(c[et],c))}detach(a){const u=this._adjustIndex(a,-1),c=F_(this._lContainer,u);return c&&null!=el(ti(this._lContainer),u)?new Eg(c):null}_adjustIndex(a,u=0){return a??this.length+u}};function fv(s){return s[qi]}function ti(s){return s[qi]||(s[qi]=[])}function Ii(s,a){let u;const c=a[s.index];return Pi(c)?u=c:(u=mT(c,a,null,s),a[s.index]=u,fy(a,u)),gv(u,a,s,c),new hv(u,s,a)}let gv=function ES(s,a,u,c){if(s[yi])return;let f;f=8&u.type?kn(c):function pv(s,a){const u=s[Ut],c=u.createComment(""),f=li(a,s);return x(u,it(u,f),c,function at(s,a){return s.nextSibling(a)}(u,f),!1),c}(a,u),s[yi]=f};class mv{constructor(a){this.queryList=a,this.matches=null}clone(){return new mv(this.queryList)}setDirty(){this.queryList.setDirty()}}class j0{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const c=null!==a.contentQueries?a.contentQueries[0]:u.length,f=[];for(let g=0;g<c;g++){const v=u.getByIndex(g);f.push(this.queries[v.indexInDeclarationView].clone())}return new j0(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==SS(a,u).matches&&this.queries[u].setDirty()}}class IS{constructor(a,u,c=null){this.predicate=a,this.flags=u,this.read=c}}class $0{constructor(a=[]){this.queries=a}elementStart(a,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let c=0;c<this.length;c++){const f=null!==u?u.length:0,g=this.getByIndex(c).embeddedTView(a,f);g&&(g.indexInDeclarationView=c,null!==u?u.push(g):u=[g])}return null!==u?new $0(u):null}template(a,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class jd{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new jd(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=a.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let f=0;f<c.length;f++){const g=c[f];this.matchTNodeWithReadOption(a,u,rm(u,g)),this.matchTNodeWithReadOption(a,u,Vs(u,a,g,!1,!1))}else c===em?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,Vs(u,a,c,!1,!1))}matchTNodeWithReadOption(a,u,c){if(null!==c){const f=this.metadata.read;if(null!==f)if(f===pc||f===nm||f===em&&4&u.type)this.addMatch(u.index,-2);else{const g=Vs(u,a,f,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,c)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function rm(s,a){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===a)return u[c+1];return null}function CS(s,a,u,c){return-1===u?function G0(s,a){return 11&s.type?fc(s,a):4&s.type?Hd(s,a):null}(a,s):-2===u?function bx(s,a,u){return u===pc?fc(a,s):u===em?Hd(a,s):u===nm?Ii(a,s):void 0}(s,a,c):Us(s,s[et],u,a)}function im(s,a,u,c){const f=a[_i].queries[c];if(null===f.matches){const g=s.data,v=u.matches,I=[];for(let T=0;T<v.length;T+=2){const N=v[T];I.push(N<0?null:CS(a,g[N],v[T+1],u.metadata.read))}f.matches=I}return f.matches}function sm(s,a,u,c){const f=s.queries.getByIndex(u),g=f.matches;if(null!==g){const v=im(s,a,f,u);for(let I=0;I<g.length;I+=2){const T=g[I];if(T>0)c.push(v[I/2]);else{const N=g[I+1],P=a[-T];for(let U=Ir;U<P.length;U++){const W=P[U];W[Ra]===W[Pn]&&sm(W[et],W,N,c)}if(null!==P[ra]){const U=P[ra];for(let W=0;W<U.length;W++){const Q=U[W];sm(Q[et],Q,N,c)}}}}}return c}function _v(s){const a=Se(),u=tn(),c=kh();Ul(c+1);const f=SS(u,c);if(s.dirty&&function g_(s){return 4==(4&s[Bt])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const g=f.crossesNgTemplate?sm(u,a,c,[]):im(u,a,f,c);s.reset(g,$b),s.notifyOnChanges()}return!0}return!1}function TS(s,a,u,c){const f=tn();if(f.firstCreatePass){const g=Hn();(function q0(s,a,u){null===s.queries&&(s.queries=new $0),s.queries.track(new jd(a,u))})(f,new IS(a,u,c),g.index),function yv(s,a){const u=s.contentQueries||(s.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,a)}(f,s),2==(2&u)&&(f.staticContentQueries=!0)}!function z0(s,a,u){const c=new Xg(4==(4&u));(function nT(s,a,u,c){const f=_T(a);f.push(u),s.firstCreatePass&&_g(s).push(c,f.length-1)})(s,a,c,c.destroy),null===a[_i]&&(a[_i]=new j0),a[_i].queries.push(new mv(c))}(f,Se(),u)}function Of(){return function DS(s,a){return s[_i].queries[a].queryList}(Se(),kh())}function SS(s,a){return s.queries.getByIndex(a)}function Gd(s){return!!Gr(s)}const eI=new Mn("Application Initializer");let Av=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c}),this.appInits=en(eI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const u=[];for(const f of this.appInits){const g=f();if(qE(g))u.push(g);else if(YT(g)){const v=new Promise((I,T)=>{g.subscribe({complete:I,error:T})});u.push(v)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(u).then(()=>{c()}).catch(f=>{this.reject(f)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),Wd=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Nv=new Mn("LocaleId",{providedIn:"root",factory:()=>en(Nv,Xe.Optional|Xe.SkipSelf)||function Rx(){return typeof $localize<"u"&&$localize.locale||Ic}()}),US=new Mn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let Mv=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new L.X(!1)}add(){this.hasPendingTasks.next(!0);const u=this.taskId++;return this.pendingTasks.add(u),u}remove(u){this.pendingTasks.delete(u),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();class tI{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let BS=(()=>{class s{compileModuleSync(u){return new S0(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),g=mc(Gr(u).declarations).reduce((v,I)=>{const T=Gt(I);return T&&v.push(new my(T)),v},[]);return new tI(c,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Rv=(()=>Promise.resolve(0))();function hm(s){typeof Zone>"u"?Rv.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}function rI(...s){}class Ts{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hu(!1),this.onMicrotaskEmpty=new hu(!1),this.onStable=new hu(!1),this.onError=new hu(!1),typeof Zone>"u")throw new ie(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!c&&u,f.shouldCoalesceRunChangeDetection=c,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function fm(){let s=fn.requestAnimationFrame,a=fn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function Fx(s){const a=()=>{!function kx(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(fn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,iI(s),s.isCheckStableRunning=!0,Pv(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),iI(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,f,g,v,I)=>{try{return sI(s),u.invokeTask(f,g,v,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&a(),oI(s)}},onInvoke:(u,c,f,g,v,I,T)=>{try{return sI(s),u.invoke(f,g,v,I,T)}finally{s.shouldCoalesceRunChangeDetection&&a(),oI(s)}},onHasTask:(u,c,f,g)=>{u.hasTask(f,g),c===f&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,iI(s),Pv(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,c,f,g)=>(u.handleError(f,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ts.isInAngularZone())throw new ie(909,!1)}static assertNotInAngularZone(){if(Ts.isInAngularZone())throw new ie(909,!1)}run(a,u,c){return this._inner.run(a,u,c)}runTask(a,u,c,f){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+f,a,Dr,rI,rI);try{return g.runTask(v,u,c)}finally{g.cancelTask(v)}}runGuarded(a,u,c){return this._inner.runGuarded(a,u,c)}runOutsideAngular(a){return this._outer.run(a)}}const Dr={};function Pv(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function iI(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function sI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function oI(s){s._nesting--,Pv(s)}class GS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hu,this.onMicrotaskEmpty=new hu,this.onStable=new hu,this.onError=new hu}run(a,u,c){return a.apply(u,c)}runGuarded(a,u,c){return a.apply(u,c)}runOutsideAngular(a){return a()}runTask(a,u,c,f){return a.apply(u,c)}}const pm=new Mn("",{providedIn:"root",factory:aI});function aI(){const s=en(Ts);let a=!0;const u=new ne.y(f=>{a=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{f.next(a),f.complete()})}),c=new ne.y(f=>{let g;s.runOutsideAngular(()=>{g=s.onStable.subscribe(()=>{Ts.assertNotInAngularZone(),hm(()=>{!a&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(a=!0,f.next(!0))})})});const v=s.onUnstable.subscribe(()=>{Ts.assertInAngularZone(),a&&(a=!1,s.runOutsideAngular(()=>{f.next(!1)}))});return()=>{g.unsubscribe(),v.unsubscribe()}});return(0,oe.T)(u,c.pipe((0,ye.B)()))}const va=new Mn(""),uI=new Mn("");let Zd,Lx=(()=>{class s{constructor(u,c,f){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Zd||(function cI(s){Zd=s}(f),f.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ts.assertNotInAngularZone(),hm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hm(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,f){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:f})}whenStable(u,c,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,f){return[]}}return s.\u0275fac=function(u){return new(u||s)(un(Ts),un(lI),un(uI))},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})(),lI=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return Zd?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),fl=null;const Ov=new Mn("AllowMultipleToken"),jf=new Mn("PlatformDestroyListeners"),kv=new Mn("appBootstrapListener");class zS{constructor(a,u){this.name=a,this.token=u}}function mm(s,a,u=[]){const c=`Platform: ${a}`,f=new Mn(c);return(g=[])=>{let v=Vv();if(!v||v.injector.get(Ov,!1)){const I=[...u,...g,{provide:f,useValue:!0}];s?s(I):function qS(s){if(fl&&!fl.get(Ov,!1))throw new ie(400,!1);(function dI(){!function Al(s){Fu=s}(()=>{throw new ie(600,!1)})})(),fl=s;const a=s.get(pI);(function Lv(s){s.get(AM,null)?.forEach(u=>u())})(s)}(function fI(s=[],a){return _c.create({name:a,providers:[{provide:Z_,useValue:"platform"},{provide:jf,useValue:new Set([()=>fl=null])},...s]})}(I,c))}return function WS(s){const a=Vv();if(!a)throw new ie(401,!1);return a}()}}function Vv(){return fl?.get(pI)??null}let pI=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const f=function ZS(s="zone.js",a){return"noop"===s?new GS:"zone.js"===s?new Ts(a):s}(c?.ngZone,function gI(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return f.run(()=>{const g=function fx(s,a,u){return new oS(s,a,u)}(u.moduleType,this.injector,function YS(s){return[{provide:Ts,useFactory:s},{provide:G_,multi:!0,useFactory:()=>{const a=en(mI,{optional:!0});return()=>a.initialize()}},{provide:KS,useFactory:wa},{provide:pm,useFactory:aI}]}(()=>f)),v=g.injector.get(mf,null);return f.runOutsideAngular(()=>{const I=f.onError.subscribe({next:T=>{v.handleError(T)}});g.onDestroy(()=>{ym(this._modules,g),I.unsubscribe()})}),function _m(s,a,u){try{const c=u();return qE(c)?c.catch(f=>{throw a.runOutsideAngular(()=>s.handleError(f)),f}):c}catch(c){throw a.runOutsideAngular(()=>s.handleError(c)),c}}(v,f,()=>{const I=g.injector.get(Av);return I.runInitializers(),I.donePromise.then(()=>(function Bg(s){ut(s,"Expected localeId to be defined"),"string"==typeof s&&(_a=s.toLowerCase().replace(/_/g,"-"))}(g.injector.get(Nv,Ic)||Ic),this._moduleDoBootstrap(g),g))})})}bootstrapModule(u,c=[]){const f=qs({},c);return function Fv(s,a,u){const c=new S0(u);return Promise.resolve(c)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(u){const c=u.injector.get(Kd);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>c.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new ie(-403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ie(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(jf,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(un(_c))},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function qs(s,a){return Array.isArray(a)?a.reduce(qs,s):{...s,...a}}let Kd=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=en(KS),this.zoneIsStable=en(pm),this.componentTypes=[],this.components=[],this.isStable=en(Mv).hasPendingTasks.pipe((0,Fe.z)(u=>u?(0,pe.of)(!1):this.zoneIsStable),(0,me.x)(),(0,ye.B)()),this._injector=en(Md)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const f=u instanceof cE;if(!this._injector.get(Av).done)throw!f&&Ao(u),new ie(405,!1);let v;v=f?u:this._injector.get(pf).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const I=function gm(s){return s.isBoundToModule}(v)?void 0:this._injector.get(Pf),N=v.create(_c.NULL,[],c||v.selector,I),P=N.location.nativeElement,U=N.injector.get(va,null);return U?.registerApplication(P),N.onDestroy(()=>{this.detachView(N.hostView),ym(this.components,N),U?.unregisterApplication(P)}),this._loadComponent(N),N}tick(){if(this._runningTick)throw new ie(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;ym(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const c=this._injector.get(kv,[]);c.push(...this._bootstrapListeners),c.forEach(f=>f(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>ym(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new ie(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function ym(s,a){const u=s.indexOf(a);u>-1&&s.splice(u,1)}const KS=new Mn("",{providedIn:"root",factory:()=>en(mf).handleError.bind(void 0)});function wa(){const s=en(Ts),a=en(mf);return u=>s.runOutsideAngular(()=>a.handleError(u))}let mI=(()=>{class s{constructor(){this.zone=en(Ts),this.applicationRef=en(Kd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function pu(){return!1}let JS=(()=>{class s{}return s.__NG_ELEMENT_ID__=pl,s})();function pl(s){return function qo(s,a,u){if(to(s)&&!u){const c=Cr(s.index,a);return new Eg(c,c)}return 47&s.type?new Eg(a[Gn],a):null}(Hn(),Se(),16==(16&s))}class _l{constructor(){}supports(a){return PE(a)}create(a){return new $x(a)}}const bI=(s,a)=>a;class $x{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||bI}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,c=this._removalsHead,f=0,g=null;for(;u||c;){const v=!c||u&&u.currentIndex<Gv(c,f,g)?u:c,I=Gv(v,f,g),T=v.currentIndex;if(v===c)f--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)f++;else{g||(g=[]);const N=I-f,P=T-f;if(N!=P){for(let W=0;W<N;W++){const Q=W<g.length?g[W]:g[W]=0,Ee=Q+W;P<=Ee&&Ee<N&&(g[W]=Q+1)}g[v.previousIndex]=P-N}}I!==T&&a(v,I,T)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!PE(a))throw new ie(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,v,u=this._itHead,c=!1;if(Array.isArray(a)){this.length=a.length;for(let I=0;I<this.length;I++)g=a[I],v=this._trackByFn(I,g),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,g,v,I)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,v,I),c=!0),u=u._next}else f=0,function OE(s,a){if(Array.isArray(s))for(let u=0;u<s.length;u++)a(s[u]);else{const u=s[Symbol.iterator]();let c;for(;!(c=u.next()).done;)a(c.value)}}(a,I=>{v=this._trackByFn(f,I),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,I,v,f)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,v,f),c=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,c,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(c,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,g,f)):a=this._addAfter(new Ve(u,c),g,f),a}_verifyReinsertion(a,u,c,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,u,c),this._addToMoves(a,c),a}_moveAfter(a,u,c){return this._unlink(a),this._insertAfter(a,u,c),this._addToMoves(a,c),a}_addAfter(a,u,c){return this._insertAfter(a,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,c){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new vo),this._linkedRecords.put(a),a.currentIndex=c,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,c=a._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new vo),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Ve{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ur{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,a))return c;return null}remove(a){const u=a._prevDup,c=a._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class vo{constructor(){this.map=new Map}put(a){const u=a.trackById;let c=this.map.get(u);c||(c=new Ur,this.map.set(u,c)),c.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Gv(s,a,u){const c=s.previousIndex;if(null===c)return c;let f=0;return u&&c<u.length&&(f=u[c]),c+a+f}class ct{constructor(){}supports(a){return a instanceof Map||PT(a)}create(){return new Et}}class Et{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||PT(a)))throw new ie(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(c,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(f,c);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const c=a._prev;return u._next=a,u._prev=c,a._prev=u,c&&(c._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const g=f._prev,v=f._next;return g&&(g._next=v),v&&(v._prev=g),f._next=null,f._prev=null,f}const c=new Gx(a);return this._records.set(a,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(c=>u(a[c],c))}}class Gx{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function rt(){return new ce([new _l])}let ce=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const f=c.factories.slice();u=u.concat(f)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||rt()),deps:[[s,new Li,new fo]]}}find(u){const c=this.factories.find(f=>f.supports(u));if(null!=c)return c;throw new ie(901,!1)}}return s.\u0275prov=rn({token:s,providedIn:"root",factory:rt}),s})();function ri(){return new zv([new ct])}let zv=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const f=c.factories.slice();u=u.concat(f)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||ri()),deps:[[s,new Li,new fo]]}}find(u){const c=this.factories.find(f=>f.supports(u));if(c)return c;throw new ie(901,!1)}}return s.\u0275prov=rn({token:s,providedIn:"root",factory:ri}),s})();const Wx=mm(null,"core",[]);let tA=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(un(Kd))},s.\u0275mod=Xs({type:s}),s.\u0275inj=Zn({}),s})();function iA(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function Cm(s){const a=Gt(s);if(!a)return null;const u=new my(a);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return a.standalone}}}},3942:(ft,Ce,F)=>{F.d(Ce,{Z:()=>nt});var d=F(2090),J=F(4859),L=F(6881),ne=F(1877);class oe{constructor(Qe,Le){this._delegate=Qe,this.firebase=Le,(0,L._addComponent)(Qe,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=Qe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Qe){this._delegate.automaticDataCollectionEnabled=Qe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Qe=>{this._delegate.checkDestroyed(),Qe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(Qe,Le=L._DEFAULT_ENTRY_NAME){var Tt;this._delegate.checkDestroyed();const pt=this._delegate.container.getProvider(Qe);return!pt.isInitialized()&&"EXPLICIT"===(null===(Tt=pt.getComponent())||void 0===Tt?void 0:Tt.instantiationMode)&&pt.initialize(),pt.getImmediate({identifier:Le})}_removeServiceInstance(Qe,Le=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Qe).clearInstance(Le)}_addComponent(Qe){(0,L._addComponent)(this._delegate,Qe)}_addOrOverwriteComponent(Qe){(0,L._addOrOverwriteComponent)(this._delegate,Qe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ye=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function me(){const Pe=function Fe(Pe){const Qe={},Le={__esModule:!0,initializeApp:function ie(Ne,He={}){const ae=L.initializeApp(Ne,He);if((0,d.r3)(Qe,ae.name))return Qe[ae.name];const ze=new Pe(ae,Le);return Qe[ae.name]=ze,ze},app:pt,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function X(Ne){const He=Ne.name,ae=He.replace("-compat","");if(L._registerComponent(Ne)&&"PUBLIC"===Ne.type){const ze=(Qt=pt())=>{if("function"!=typeof Qt[ae])throw ye.create("invalid-app-argument",{appName:He});return Qt[ae]()};void 0!==Ne.serviceProps&&(0,d.ZB)(ze,Ne.serviceProps),Le[ae]=ze,Pe.prototype[ae]=function(...Qt){return this._getService.bind(this,He).apply(this,Ne.multipleInstances?Qt:[])}}return"PUBLIC"===Ne.type?Le[ae]:null},removeApp:function Tt(Ne){delete Qe[Ne]},useAsService:function _e(Ne,He){return"serverAuth"===He?null:He},modularAPIs:L}};function pt(Ne){if(!(0,d.r3)(Qe,Ne=Ne||L._DEFAULT_ENTRY_NAME))throw ye.create("no-app",{appName:Ne});return Qe[Ne]}return Le.default=Le,Object.defineProperty(Le,"apps",{get:function ve(){return Object.keys(Qe).map(Ne=>Qe[Ne])}}),pt.App=Pe,Le}(oe);return Pe.INTERNAL=Object.assign(Object.assign({},Pe.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function Qe(Le){(0,d.ZB)(Pe,Le)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),Pe}(),z=new ne.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Pe=self.firebase.SDK_VERSION;Pe&&Pe.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const nt=j;!function De(Pe){(0,L.registerVersion)("@firebase/app-compat","0.2.12",Pe)}()},6881:(ft,Ce,F)=>{F.r(Ce),F.d(Ce,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>So,_DEFAULT_ENTRY_NAME:()=>Xe,_addComponent:()=>Bn,_addOrOverwriteComponent:()=>gi,_apps:()=>yt,_clearComponents:()=>pn,_components:()=>In,_getProvider:()=>Rr,_registerComponent:()=>fn,_removeServiceInstance:()=>Aa,deleteApp:()=>xr,getApp:()=>Ai,getApps:()=>Ms,initializeApp:()=>Na,onLog:()=>Rs,registerVersion:()=>Sn,setLogLevel:()=>un});var d=F(5861),J=F(4859),L=F(1877),ne=F(2090);const oe=(he,re)=>re.some(Oe=>he instanceof Oe);let pe,ye;const j=new WeakMap,z=new WeakMap,te=new WeakMap,Ue=new WeakMap,De=new WeakMap;let Qe={get(he,re,Oe){if(he instanceof IDBTransaction){if("done"===re)return z.get(he);if("objectStoreNames"===re)return he.objectStoreNames||te.get(he);if("store"===re)return Oe.objectStoreNames[1]?void 0:Oe.objectStore(Oe.objectStoreNames[0])}return ie(he[re])},set:(he,re,Oe)=>(he[re]=Oe,!0),has:(he,re)=>he instanceof IDBTransaction&&("done"===re||"store"===re)||re in he};function pt(he){return"function"==typeof he?function Tt(he){return he!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function me(){return ye||(ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(he)?function(...re){return he.apply(ve(this),re),ie(j.get(this))}:function(...re){return ie(he.apply(ve(this),re))}:function(re,...Oe){const ht=he.call(ve(this),re,...Oe);return te.set(ht,re.sort?re.sort():[re]),ie(ht)}}(he):(he instanceof IDBTransaction&&function Pe(he){if(z.has(he))return;const re=new Promise((Oe,ht)=>{const Rt=()=>{he.removeEventListener("complete",$t),he.removeEventListener("error",sn),he.removeEventListener("abort",sn)},$t=()=>{Oe(),Rt()},sn=()=>{ht(he.error||new DOMException("AbortError","AbortError")),Rt()};he.addEventListener("complete",$t),he.addEventListener("error",sn),he.addEventListener("abort",sn)});z.set(he,re)}(he),oe(he,function Fe(){return pe||(pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(he,Qe):he)}function ie(he){if(he instanceof IDBRequest)return function nt(he){const re=new Promise((Oe,ht)=>{const Rt=()=>{he.removeEventListener("success",$t),he.removeEventListener("error",sn)},$t=()=>{Oe(ie(he.result)),Rt()},sn=()=>{ht(he.error),Rt()};he.addEventListener("success",$t),he.addEventListener("error",sn)});return re.then(Oe=>{Oe instanceof IDBCursor&&j.set(Oe,he)}).catch(()=>{}),De.set(re,he),re}(he);if(Ue.has(he))return Ue.get(he);const re=pt(he);return re!==he&&(Ue.set(he,re),De.set(re,he)),re}const ve=he=>De.get(he),Ne=["get","getKey","getAll","getAllKeys","count"],He=["put","add","delete","clear"],ae=new Map;function ze(he,re){if(!(he instanceof IDBDatabase)||re in he||"string"!=typeof re)return;if(ae.get(re))return ae.get(re);const Oe=re.replace(/FromIndex$/,""),ht=re!==Oe,Rt=He.includes(Oe);if(!(Oe in(ht?IDBIndex:IDBObjectStore).prototype)||!Rt&&!Ne.includes(Oe))return;const $t=function(){var sn=(0,d.Z)(function*(fr,...ir){const Js=this.transaction(fr,Rt?"readwrite":"readonly");let Xo=Js.store;return ht&&(Xo=Xo.index(ir.shift())),(yield Promise.all([Xo[Oe](...ir),Rt&&Js.done]))[0]});return function(ir){return sn.apply(this,arguments)}}();return ae.set(re,$t),$t}!function Le(he){Qe=he(Qe)}(he=>({...he,get:(re,Oe,ht)=>ze(re,Oe)||he.get(re,Oe,ht),has:(re,Oe)=>!!ze(re,Oe)||he.has(re,Oe)}));class Qt{constructor(re){this.container=re}getPlatformInfoString(){return this.container.getProviders().map(Oe=>{if(function Mr(he){const re=he.getComponent();return"VERSION"===re?.type}(Oe)){const ht=Oe.getImmediate();return`${ht.library}/${ht.version}`}return null}).filter(Oe=>Oe).join(" ")}}const pi="@firebase/app",de=new L.Yd("@firebase/app"),Xe="[DEFAULT]",_t={[pi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},yt=new Map,In=new Map;function Bn(he,re){try{he.container.addComponent(re)}catch(Oe){de.debug(`Component ${re.name} failed to register with FirebaseApp ${he.name}`,Oe)}}function gi(he,re){he.container.addOrOverwriteComponent(re)}function fn(he){const re=he.name;if(In.has(re))return de.debug(`There were multiple attempts to register component ${re}.`),!1;In.set(re,he);for(const Oe of yt.values())Bn(Oe,he);return!0}function Rr(he,re){const Oe=he.container.getProvider("heartbeat").getImmediate({optional:!0});return Oe&&Oe.triggerHeartbeat(),he.container.getProvider(re)}function Aa(he,re,Oe=Xe){Rr(he,re).clearInstance(Oe)}function pn(){In.clear()}const Wt=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ls{constructor(re,Oe,ht){this._isDeleted=!1,this._options=Object.assign({},re),this._config=Object.assign({},Oe),this._name=Oe.name,this._automaticDataCollectionEnabled=Oe.automaticDataCollectionEnabled,this._container=ht,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(re){this.checkDestroyed(),this._automaticDataCollectionEnabled=re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(re){this._isDeleted=re}checkDestroyed(){if(this.isDeleted)throw Wt.create("app-deleted",{appName:this._name})}}const So="9.22.2";function Na(he,re={}){let Oe=he;"object"!=typeof re&&(re={name:re});const ht=Object.assign({name:Xe,automaticDataCollectionEnabled:!1},re),Rt=ht.name;if("string"!=typeof Rt||!Rt)throw Wt.create("bad-app-name",{appName:String(Rt)});if(Oe||(Oe=(0,ne.aH)()),!Oe)throw Wt.create("no-options");const $t=yt.get(Rt);if($t){if((0,ne.vZ)(Oe,$t.options)&&(0,ne.vZ)(ht,$t.config))return $t;throw Wt.create("duplicate-app",{appName:Rt})}const sn=new J.H0(Rt);for(const ir of In.values())sn.addComponent(ir);const fr=new ls(Oe,ht,sn);return yt.set(Rt,fr),fr}function Ai(he=Xe){const re=yt.get(he);if(!re&&he===Xe&&(0,ne.aH)())return Na();if(!re)throw Wt.create("no-app",{appName:he});return re}function Ms(){return Array.from(yt.values())}function xr(he){return hr.apply(this,arguments)}function hr(){return(hr=(0,d.Z)(function*(he){const re=he.name;yt.has(re)&&(yt.delete(re),yield Promise.all(he.container.getProviders().map(Oe=>Oe.delete())),he.isDeleted=!0)})).apply(this,arguments)}function Sn(he,re,Oe){var ht;let Rt=null!==(ht=_t[he])&&void 0!==ht?ht:he;Oe&&(Rt+=`-${Oe}`);const $t=Rt.match(/\s|\//),sn=re.match(/\s|\//);if($t||sn){const fr=[`Unable to register library "${Rt}" with version "${re}":`];return $t&&fr.push(`library name "${Rt}" contains illegal characters (whitespace or "/")`),$t&&sn&&fr.push("and"),sn&&fr.push(`version name "${re}" contains illegal characters (whitespace or "/")`),void de.warn(fr.join(" "))}fn(new J.wA(`${Rt}-version`,()=>({library:Rt,version:re}),"VERSION"))}function Rs(he,re){if(null!==he&&"function"!=typeof he)throw Wt.create("invalid-log-argument");(0,L.Am)(he,re)}function un(he){(0,L.Ub)(he)}const xs="firebase-heartbeat-database",en=1,$="firebase-heartbeat-store";let H=null;function Z(){return H||(H=function X(he,re,{blocked:Oe,upgrade:ht,blocking:Rt,terminated:$t}={}){const sn=indexedDB.open(he,re),fr=ie(sn);return ht&&sn.addEventListener("upgradeneeded",ir=>{ht(ie(sn.result),ir.oldVersion,ir.newVersion,ie(sn.transaction),ir)}),Oe&&sn.addEventListener("blocked",ir=>Oe(ir.oldVersion,ir.newVersion,ir)),fr.then(ir=>{$t&&ir.addEventListener("close",()=>$t()),Rt&&ir.addEventListener("versionchange",Js=>Rt(Js.oldVersion,Js.newVersion,Js))}).catch(()=>{}),fr}(xs,en,{upgrade:(he,re)=>{0===re&&he.createObjectStore($)}}).catch(he=>{throw Wt.create("idb-open",{originalErrorMessage:he.message})})),H}function ue(){return(ue=(0,d.Z)(function*(he){try{return yield(yield Z()).transaction($).objectStore($).get(Vt(he))}catch(re){if(re instanceof ne.ZR)de.warn(re.message);else{const Oe=Wt.create("idb-get",{originalErrorMessage:re?.message});de.warn(Oe.message)}}})).apply(this,arguments)}function lt(he,re){return vt.apply(this,arguments)}function vt(){return(vt=(0,d.Z)(function*(he,re){try{const ht=(yield Z()).transaction($,"readwrite");yield ht.objectStore($).put(re,Vt(he)),yield ht.done}catch(Oe){if(Oe instanceof ne.ZR)de.warn(Oe.message);else{const ht=Wt.create("idb-set",{originalErrorMessage:Oe?.message});de.warn(ht.message)}}})).apply(this,arguments)}function Vt(he){return`${he.name}!${he.options.appId}`}class Nt{constructor(re){this.container=re,this._heartbeatsCache=null;const Oe=this.container.getProvider("app").getImmediate();this._storage=new Gi(Oe),this._heartbeatsCachePromise=this._storage.read().then(ht=>(this._heartbeatsCache=ht,ht))}triggerHeartbeat(){var re=this;return(0,d.Z)(function*(){const ht=re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Rt=Jt();if(null===re._heartbeatsCache&&(re._heartbeatsCache=yield re._heartbeatsCachePromise),re._heartbeatsCache.lastSentHeartbeatDate!==Rt&&!re._heartbeatsCache.heartbeats.some($t=>$t.date===Rt))return re._heartbeatsCache.heartbeats.push({date:Rt,agent:ht}),re._heartbeatsCache.heartbeats=re._heartbeatsCache.heartbeats.filter($t=>{const sn=new Date($t.date).valueOf();return Date.now()-sn<=2592e6}),re._storage.overwrite(re._heartbeatsCache)})()}getHeartbeatsHeader(){var re=this;return(0,d.Z)(function*(){if(null===re._heartbeatsCache&&(yield re._heartbeatsCachePromise),null===re._heartbeatsCache||0===re._heartbeatsCache.heartbeats.length)return"";const Oe=Jt(),{heartbeatsToSend:ht,unsentEntries:Rt}=function Pr(he,re=1024){const Oe=[];let ht=he.slice();for(const Rt of he){const $t=Oe.find(sn=>sn.agent===Rt.agent);if($t){if($t.dates.push(Rt.date),Ps(Oe)>re){$t.dates.pop();break}}else if(Oe.push({agent:Rt.agent,dates:[Rt.date]}),Ps(Oe)>re){Oe.pop();break}ht=ht.slice(1)}return{heartbeatsToSend:Oe,unsentEntries:ht}}(re._heartbeatsCache.heartbeats),$t=(0,ne.L)(JSON.stringify({version:2,heartbeats:ht}));return re._heartbeatsCache.lastSentHeartbeatDate=Oe,Rt.length>0?(re._heartbeatsCache.heartbeats=Rt,yield re._storage.overwrite(re._heartbeatsCache)):(re._heartbeatsCache.heartbeats=[],re._storage.overwrite(re._heartbeatsCache)),$t})()}}function Jt(){return(new Date).toISOString().substring(0,10)}class Gi{constructor(re){this.app=re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var re=this;return(0,d.Z)(function*(){return(yield re._canUseIndexedDBPromise)&&(yield function Ie(he){return ue.apply(this,arguments)}(re.app))||{heartbeats:[]}})()}overwrite(re){var Oe=this;return(0,d.Z)(function*(){var ht;if(yield Oe._canUseIndexedDBPromise){const $t=yield Oe.read();return lt(Oe.app,{lastSentHeartbeatDate:null!==(ht=re.lastSentHeartbeatDate)&&void 0!==ht?ht:$t.lastSentHeartbeatDate,heartbeats:re.heartbeats})}})()}add(re){var Oe=this;return(0,d.Z)(function*(){var ht;if(yield Oe._canUseIndexedDBPromise){const $t=yield Oe.read();return lt(Oe.app,{lastSentHeartbeatDate:null!==(ht=re.lastSentHeartbeatDate)&&void 0!==ht?ht:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...re.heartbeats]})}})()}}function Ps(he){return(0,ne.L)(JSON.stringify({version:2,heartbeats:he})).length}!function Ni(he){fn(new J.wA("platform-logger",re=>new Qt(re),"PRIVATE")),fn(new J.wA("heartbeat",re=>new Nt(re),"PRIVATE")),Sn(pi,"0.9.12",he),Sn(pi,"0.9.12","esm2017"),Sn("fire-js","")}("")},4859:(ft,Ce,F)=>{F.d(Ce,{H0:()=>Fe,wA:()=>L,zt:()=>oe});var d=F(5861),J=F(2090);class L{constructor(j,z,te){this.name=j,this.instanceFactory=z,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const ne="[DEFAULT]";class oe{constructor(j,z){this.name=j,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const z=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(z)){const te=new J.BH;if(this.instancesDeferred.set(z,te),this.isInitialized(z)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:z});Ue&&te.resolve(Ue)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(j){var z;const te=this.normalizeInstanceIdentifier(j?.identifier),Ue=null!==(z=j?.optional)&&void 0!==z&&z;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(De){if(Ue)return null;throw De}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function ye(me){return"EAGER"===me.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[z,te]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(z);try{const De=this.getOrInitializeService({instanceIdentifier:Ue});te.resolve(De)}catch{}}}}clearInstance(j=ne){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,d.Z)(function*(){const z=Array.from(j.instances.values());yield Promise.all([...z.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...z.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=ne){return this.instances.has(j)}getOptions(j=ne){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:z={}}=j,te=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:te,options:z});for(const[De,nt]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(De)&&nt.resolve(Ue);return Ue}onInit(j,z){var te;const Ue=this.normalizeInstanceIdentifier(z),De=null!==(te=this.onInitCallbacks.get(Ue))&&void 0!==te?te:new Set;De.add(j),this.onInitCallbacks.set(Ue,De);const nt=this.instances.get(Ue);return nt&&j(nt,Ue),()=>{De.delete(j)}}invokeOnInitCallbacks(j,z){const te=this.onInitCallbacks.get(z);if(te)for(const Ue of te)try{Ue(j,z)}catch{}}getOrInitializeService({instanceIdentifier:j,options:z={}}){let te=this.instances.get(j);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(me=j,me===ne?void 0:me),options:z}),this.instances.set(j,te),this.instancesOptions.set(j,z),this.invokeOnInitCallbacks(te,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,te)}catch{}var me;return te||null}normalizeInstanceIdentifier(j=ne){return this.component?this.component.multipleInstances?j:ne:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fe{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const z=this.getProvider(j.name);if(z.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);z.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const z=new oe(j,this);return this.providers.set(j,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(ft,Ce,F)=>{F.d(Ce,{Am:()=>me,Ub:()=>Fe,Yd:()=>ye,in:()=>J});const d=[];var J=(()=>((J=J||{})[J.DEBUG=0]="DEBUG",J[J.VERBOSE=1]="VERBOSE",J[J.INFO=2]="INFO",J[J.WARN=3]="WARN",J[J.ERROR=4]="ERROR",J[J.SILENT=5]="SILENT",J))();const L={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ne=J.INFO,oe={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},pe=(j,z,...te)=>{if(z<j.logLevel)return;const Ue=(new Date).toISOString(),De=oe[z];if(!De)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[De](`[${Ue}]  ${j.name}:`,...te)};class ye{constructor(z){this.name=z,this._logLevel=ne,this._logHandler=pe,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in J))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?L[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...z),this._logHandler(this,J.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...z),this._logHandler(this,J.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,J.INFO,...z),this._logHandler(this,J.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,J.WARN,...z),this._logHandler(this,J.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...z),this._logHandler(this,J.ERROR,...z)}}function Fe(j){d.forEach(z=>{z.setLogLevel(j)})}function me(j,z){for(const te of d){let Ue=null;z&&z.level&&(Ue=L[z.level]),te.userLogHandler=null===j?null:(De,nt,...Pe)=>{const Qe=Pe.map(Le=>{if(null==Le)return null;if("string"==typeof Le)return Le;if("number"==typeof Le||"boolean"==typeof Le)return Le.toString();if(Le instanceof Error)return Le.message;try{return JSON.stringify(Le)}catch{return null}}).filter(Le=>Le).join(" ");nt>=(Ue??De.logLevel)&&j({level:J[nt].toLowerCase(),message:Qe,args:Pe,type:De.name})}}}},259:(ft,Ce,F)=>{F.d(Ce,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=F(6881);(0,d.registerVersion)("firebase","9.22.2","app")},9260:(ft,Ce,F)=>{F.d(Ce,{Z:()=>d.Z});var d=F(3942);d.Z.registerVersion("firebase","9.22.2","app-compat")},2644:(ft,Ce,F)=>{F.r(Ce);var d=F(5861),J=F(3942),L=F(2090),ne=F(6881),oe=F(7582),pe=F(1877),ye=F(4859);const me={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const nt=function Ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Pe=function De(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Qe=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Tt=new pe.Yd("@firebase/auth");function ie(w,...p){Tt.logLevel<=pe.in.ERROR&&Tt.error(`Auth (${ne.SDK_VERSION}): ${w}`,...p)}function ve(w,...p){throw He(w,...p)}function X(w,...p){return He(w,...p)}function _e(w,p,_){const E=Object.assign(Object.assign({},Pe()),{[p]:_});return new L.LL("auth","Firebase",E).create(p,{appName:w.name})}function Ne(w,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&ve(w,"argument-error"),_e(w,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function He(w,...p){if("string"!=typeof w){const _=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(_,...E)}return Qe.create(w,...p)}function ae(w,p,..._){if(!w)throw He(p,..._)}function ze(w){const p="INTERNAL ASSERTION FAILED: "+w;throw ie(p),new Error(p)}function Qt(w,p){w||ze(p)}function Mr(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function pi(){return"http:"===bo()||"https:"===bo()}function bo(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class be{constructor(p,_){this.shortDelay=p,this.longDelay=_,Qt(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function de(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(pi()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Re(w,p){Qt(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class Ze{static initialize(p,_,E){this.fetchImpl=p,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ze("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ze("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ze("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const je={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Dt=new be(3e4,6e4);function ot(w,p){return w.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:w.tenantId}):p}function qt(w,p,_,E){return ut.apply(this,arguments)}function ut(){return(ut=(0,d.Z)(function*(w,p,_,E,A={}){return mt(w,A,(0,d.Z)(function*(){let x={},G={};E&&("GET"===p?G=E:x={body:JSON.stringify(E)});const ee=(0,L.xO)(Object.assign({key:w.config.apiKey},G)).slice(1),Me=yield w._getAdditionalHeaders();return Me["Content-Type"]="application/json",w.languageCode&&(Me["X-Firebase-Locale"]=w.languageCode),Ze.fetch()(rn(w,w.config.apiHost,_,ee),Object.assign({method:p,headers:Me,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function mt(w,p,_){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,d.Z)(function*(w,p,_){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},je),p);try{const A=new Ti(w),x=yield Promise.race([_(),A.promise]);A.clearNetworkTimeout();const G=yield x.json();if("needConfirmation"in G)throw Zn(w,"account-exists-with-different-credential",G);if(x.ok&&!("errorMessage"in G))return G;{const ee=x.ok?G.errorMessage:G.error.message,[Me,qe]=ee.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Me)throw Zn(w,"credential-already-in-use",G);if("EMAIL_EXISTS"===Me)throw Zn(w,"email-already-in-use",G);if("USER_DISABLED"===Me)throw Zn(w,"user-disabled",G);const it=E[Me]||Me.toLowerCase().replace(/[_\s]+/g,"-");if(qe)throw _e(w,it,qe);ve(w,it)}}catch(A){if(A instanceof L.ZR)throw A;ve(w,"network-request-failed",{message:String(A)})}})).apply(this,arguments)}function an(w,p,_,E){return $n.apply(this,arguments)}function $n(){return($n=(0,d.Z)(function*(w,p,_,E,A={}){const x=yield qt(w,p,_,E,A);return"mfaPendingCredential"in x&&ve(w,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function rn(w,p,_,E){const A=`${p}${_}?${E}`;return w.config.emulator?Re(w.config,A):`${w.config.apiScheme}://${A}`}class Ti{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(X(this.auth,"network-request-failed")),Dt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zn(w,p,_){const E={appName:w.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const A=X(w,p,E);return A.customData._tokenResponse=_,A}function rr(){return(rr=(0,d.Z)(function*(w,p){return qt(w,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Jo(){return(Jo=(0,d.Z)(function*(w,p){return qt(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Di(){return(Di=(0,d.Z)(function*(w,p){return qt(w,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Si(w){if(w)try{const p=new Date(Number(w));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Xe(){return(Xe=(0,d.Z)(function*(w,p=!1){const _=(0,L.m9)(w),E=yield _.getIdToken(p),A=yt(E);ae(A&&A.exp&&A.auth_time&&A.iat,_.auth,"internal-error");const x="object"==typeof A.firebase?A.firebase:void 0,G=x?.sign_in_provider;return{claims:A,token:E,authTime:Si(_t(A.auth_time)),issuedAtTime:Si(_t(A.iat)),expirationTime:Si(_t(A.exp)),signInProvider:G||null,signInSecondFactor:x?.sign_in_second_factor||null}})).apply(this,arguments)}function _t(w){return 1e3*Number(w)}function yt(w){const[p,_,E]=w.split(".");if(void 0===p||void 0===_||void 0===E)return ie("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,L.tV)(_);return A?JSON.parse(A):(ie("Failed to decode base64 JWT payload"),null)}catch(A){return ie("Caught error parsing JWT payload as JSON",A?.toString()),null}}function Bn(w,p){return gi.apply(this,arguments)}function gi(){return(gi=(0,d.Z)(function*(w,p,_=!1){if(_)return p;try{return yield p}catch(E){throw E instanceof L.ZR&&function fn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}class Rr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),E)}iteration(){var p=this;return(0,d.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&p.schedule(!0))}p.schedule()})()}}class Aa{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Si(this.lastLoginAt),this.creationTime=Si(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function pn(w){return $r.apply(this,arguments)}function $r(){return $r=(0,d.Z)(function*(w){var p;const _=w.auth,E=yield w.getIdToken(),A=yield Bn(w,function Sa(w,p){return Di.apply(this,arguments)}(_,{idToken:E}));ae(A?.users.length,_,"internal-error");const x=A.users[0];w._notifyReloadListener(x);const G=null!==(p=x.providerUserInfo)&&void 0!==p&&p.length?function Na(w){return w.map(p=>{var{providerId:_}=p,E=(0,oe._T)(p,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(x.providerUserInfo):[],ee=function So(w,p){return[...w.filter(E=>!p.some(A=>A.providerId===E.providerId)),...p]}(w.providerData,G),it=!!w.isAnonymous&&!(w.email&&x.passwordHash||ee?.length),at={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:ee,metadata:new Aa(x.createdAt,x.lastLoginAt),isAnonymous:it};Object.assign(w,at)}),$r.apply(this,arguments)}function ls(){return(ls=(0,d.Z)(function*(w){const p=(0,L.m9)(w);yield pn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Ms(){return(Ms=(0,d.Z)(function*(w,p){const _=yield mt(w,{},(0,d.Z)(function*(){const E=(0,L.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:A,apiKey:x}=w.config,G=rn(w,A,"/v1/token",`key=${x}`),ee=yield w._getAdditionalHeaders();return ee["Content-Type"]="application/x-www-form-urlencoded",Ze.fetch()(G,{method:"POST",headers:ee,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class xr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ae(p.idToken,"internal-error"),ae(typeof p.idToken<"u","internal-error"),ae(typeof p.refreshToken<"u","internal-error");const _="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function In(w){const p=yt(w);return ae(p,"internal-error"),ae(typeof p.exp<"u","internal-error"),ae(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var E=this;return(0,d.Z)(function*(){return ae(!E.accessToken||E.refreshToken,p,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var E=this;return(0,d.Z)(function*(){const{accessToken:A,refreshToken:x,expiresIn:G}=yield function Ai(w,p){return Ms.apply(this,arguments)}(p,_);E.updateTokensAndExpiration(A,x,Number(G))})()}updateTokensAndExpiration(p,_,E){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,_){const{refreshToken:E,accessToken:A,expirationTime:x}=_,G=new xr;return E&&(ae("string"==typeof E,"internal-error",{appName:p}),G.refreshToken=E),A&&(ae("string"==typeof A,"internal-error",{appName:p}),G.accessToken=A),x&&(ae("number"==typeof x,"internal-error",{appName:p}),G.expirationTime=x),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new xr,this.toJSON())}_performRefresh(){return ze("not implemented")}}function hr(w,p){ae("string"==typeof w||typeof w>"u","internal-error",{appName:p})}class Sn{constructor(p){var{uid:_,auth:E,stsTokenManager:A}=p,x=(0,oe._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new Aa(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,d.Z)(function*(){const E=yield Bn(_,_.stsTokenManager.getToken(_.auth,p));return ae(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(p){return function Cu(w){return Xe.apply(this,arguments)}(this,p)}reload(){return function Wt(w){return ls.apply(this,arguments)}(this)}_assign(p){this!==p&&(ae(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const _=new Sn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(p){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var E=this;return(0,d.Z)(function*(){let A=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),A=!0),_&&(yield pn(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,d.Z)(function*(){const _=yield p.getIdToken();return yield Bn(p,function si(w,p){return rr.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var E,A,x,G,ee,Me,qe,it;const at=null!==(E=_.displayName)&&void 0!==E?E:void 0,Wn=null!==(A=_.email)&&void 0!==A?A:void 0,Bs=null!==(x=_.phoneNumber)&&void 0!==x?x:void 0,jo=null!==(G=_.photoURL)&&void 0!==G?G:void 0,tu=null!==(ee=_.tenantId)&&void 0!==ee?ee:void 0,ef=null!==(Me=_._redirectEventId)&&void 0!==Me?Me:void 0,Id=null!==(qe=_.createdAt)&&void 0!==qe?qe:void 0,$o=null!==(it=_.lastLoginAt)&&void 0!==it?it:void 0,{uid:nu,emailVerified:tf,isAnonymous:Cd,providerData:nf,stsTokenManager:rf}=_;ae(nu&&rf,p,"internal-error");const bd=xr.fromJSON(this.name,rf);ae("string"==typeof nu,p,"internal-error"),hr(at,p.name),hr(Wn,p.name),ae("boolean"==typeof tf,p,"internal-error"),ae("boolean"==typeof Cd,p,"internal-error"),hr(Bs,p.name),hr(jo,p.name),hr(tu,p.name),hr(ef,p.name),hr(Id,p.name),hr($o,p.name);const Kp=new Sn({uid:nu,auth:p,email:Wn,emailVerified:tf,displayName:at,isAnonymous:Cd,photoURL:jo,phoneNumber:Bs,tenantId:tu,stsTokenManager:bd,createdAt:Id,lastLoginAt:$o});return nf&&Array.isArray(nf)&&(Kp.providerData=nf.map(Zw=>Object.assign({},Zw))),ef&&(Kp._redirectEventId=ef),Kp}static _fromIdTokenResponse(p,_,E=!1){return(0,d.Z)(function*(){const A=new xr;A.updateFromServerResponse(_);const x=new Sn({uid:_.localId,auth:p,stsTokenManager:A,isAnonymous:E});return yield pn(x),x})()}}const Rs=new Map;function un(w){Qt(w instanceof Function,"Expected a class definition");let p=Rs.get(w);return p?(Qt(p instanceof w,"Instance stored in cache mismatched with class"),p):(p=new w,Rs.set(w,p),p)}const en=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,E){var A=this;return(0,d.Z)(function*(){A.storage[_]=E})()}_get(_){var E=this;return(0,d.Z)(function*(){const A=E.storage[_];return void 0===A?null:A})()}_remove(_){var E=this;return(0,d.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return w.type="NONE",w})();function $(w,p,_){return`firebase:${w}:${p}:${_}`}class H{constructor(p,_,E){this.persistence=p,this.auth=_,this.userKey=E;const{config:A,name:x}=this.auth;this.fullUserKey=$(this.userKey,A.apiKey,x),this.fullPersistenceKey=$("persistence",A.apiKey,x),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,d.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?Sn._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,d.Z)(function*(){if(_.persistence===p)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,E="authUser"){return(0,d.Z)(function*(){if(!_.length)return new H(un(en),p,E);const A=(yield Promise.all(_.map(function(){var qe=(0,d.Z)(function*(it){if(yield it._isAvailable())return it});return function(it){return qe.apply(this,arguments)}}()))).filter(qe=>qe);let x=A[0]||un(en);const G=$(E,p.config.apiKey,p.name);let ee=null;for(const qe of _)try{const it=yield qe._get(G);if(it){const at=Sn._fromJSON(p,it);qe!==x&&(ee=at),x=qe;break}}catch{}const Me=A.filter(qe=>qe._shouldAllowMigration);return x._shouldAllowMigration&&Me.length?(x=Me[0],ee&&(yield x._set(G,ee.toJSON())),yield Promise.all(_.map(function(){var qe=(0,d.Z)(function*(it){if(it!==x)try{yield it._remove(G)}catch{}});return function(it){return qe.apply(this,arguments)}}())),new H(x,p,E)):new H(x,p,E)})()}}function Z(w){const p=w.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(vt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Ie(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(An(p))return"Blackberry";if(Cn(p))return"Webos";if(ue(p))return"Safari";if((p.includes("chrome/")||lt(p))&&!p.includes("edge/"))return"Chrome";if(Vt(p))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function Ie(w=(0,L.z$)()){return/firefox\//i.test(w)}function ue(w=(0,L.z$)()){const p=w.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function lt(w=(0,L.z$)()){return/crios\//i.test(w)}function vt(w=(0,L.z$)()){return/iemobile/i.test(w)}function Vt(w=(0,L.z$)()){return/android/i.test(w)}function An(w=(0,L.z$)()){return/blackberry/i.test(w)}function Cn(w=(0,L.z$)()){return/webos/i.test(w)}function Nt(w=(0,L.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Ps(w=(0,L.z$)()){return Nt(w)||Vt(w)||Cn(w)||An(w)||/windows phone/i.test(w)||vt(w)}function he(w,p=[]){let _;switch(w){case"Browser":_=Z((0,L.z$)());break;case"Worker":_=`${Z((0,L.z$)())}-${w}`;break;default:_=w}const E=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${ne.SDK_VERSION}/${E}`}function Oe(){return(Oe=(0,d.Z)(function*(w){return(yield qt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ht(w,p){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,d.Z)(function*(w,p){return qt(w,"GET","/v2/recaptchaConfig",ot(w,p))})).apply(this,arguments)}function $t(w){return void 0!==w&&void 0!==w.getResponse}function sn(w){return void 0!==w&&void 0!==w.enterprise}class fr{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function Js(w){return new Promise((p,_)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=p,E.onerror=A=>{const x=X("internal-error");x.customData=A,_(x)},E.type="text/javascript",E.charset="UTF-8",function ir(){var w,p;return null!==(p=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==p?p:document}().appendChild(E)})}function Xo(w){return`__${w}${Math.floor(1e6*Math.random())}`}class ph{constructor(p){this.type="recaptcha-enterprise",this.auth=sr(p)}verify(p="verify",_=!1){var E=this;return(0,d.Z)(function*(){function x(){return x=(0,d.Z)(function*(ee){if(!_){if(null==ee.tenantId&&null!=ee._agentRecaptchaConfig)return ee._agentRecaptchaConfig.siteKey;if(null!=ee.tenantId&&void 0!==ee._tenantRecaptchaConfigs[ee.tenantId])return ee._tenantRecaptchaConfigs[ee.tenantId].siteKey}return new Promise(function(){var Me=(0,d.Z)(function*(qe,it){ht(ee,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(at=>{if(void 0!==at.recaptchaKey){const Wn=new fr(at);return null==ee.tenantId?ee._agentRecaptchaConfig=Wn:ee._tenantRecaptchaConfigs[ee.tenantId]=Wn,qe(Wn.siteKey)}it(new Error("recaptcha Enterprise site key undefined"))}).catch(at=>{it(at)})});return function(qe,it){return Me.apply(this,arguments)}}())}),x.apply(this,arguments)}function G(ee,Me,qe){const it=window.grecaptcha;sn(it)?it.enterprise.ready(()=>{it.enterprise.execute(ee,{action:p}).then(at=>{Me(at)}).catch(()=>{Me("NO_RECAPTCHA")})}):qe(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ee,Me)=>{(function A(ee){return x.apply(this,arguments)})(E.auth).then(qe=>{if(!_&&sn(window.grecaptcha))G(qe,ee,Me);else{if(typeof window>"u")return void Me(new Error("RecaptchaVerifier is only supported in browser"));Js("https://www.google.com/recaptcha/enterprise.js?render="+qe).then(()=>{G(qe,ee,Me)}).catch(it=>{Me(it)})}}).catch(qe=>{Me(qe)})})})()}}function zi(w,p,_){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,d.Z)(function*(w,p,_,E=!1){const A=new ph(w);let x;try{x=yield A.verify(_)}catch{x=yield A.verify(_,!0)}const G=Object.assign({},p);return Object.assign(G,E?{captchaResp:x}:{captchaResponse:x}),Object.assign(G,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(G,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),G})).apply(this,arguments)}class Tu{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const E=x=>new Promise((G,ee)=>{try{G(p(x))}catch(Me){ee(Me)}});E.onAbort=_,this.queue.push(E);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,d.Z)(function*(){if(_.auth.currentUser===p)return;const E=[];try{for(const A of _.queue)yield A(p),A.onAbort&&E.push(A.onAbort)}catch(A){E.reverse();for(const x of E)try{x()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class gh{constructor(p,_,E,A){this.app=p,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=E,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cs(this),this.idTokenSubscription=new cs(this),this.beforeStateQueue=new Tu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(p,_){var E=this;return _&&(this._popupRedirectResolver=un(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var A,x;if(!E._deleted&&(E.persistenceManager=yield H.create(E,p),!E._deleted)){if(null!==(A=E._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(x=E.currentUser)||void 0===x?void 0:x.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,d.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,d.Z)(function*(){var E;const A=yield _.assertedPersistence.getCurrentUser();let x=A,G=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const ee=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,Me=x?._redirectEventId,qe=yield _.tryRedirectSignIn(p);(!ee||ee===Me)&&qe?.user&&(x=qe.user,G=!0)}if(!x)return _.directlySetCurrentUser(null);if(!x._redirectEventId){if(G)try{yield _.beforeStateQueue.runMiddleware(x)}catch(ee){x=A,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(ee))}return x?_.reloadAndSetCurrentUserOrClear(x):_.directlySetCurrentUser(null)}return ae(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===x._redirectEventId?_.directlySetCurrentUser(x):_.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(p){var _=this;return(0,d.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch{yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,d.Z)(function*(){try{yield pn(p)}catch(E){if("auth/network-request-failed"!==E?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function we(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var p=this;return(0,d.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,d.Z)(function*(){const E=p?(0,L.m9)(p):null;return E&&ae(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(p,_=!1){var E=this;return(0,d.Z)(function*(){if(!E._deleted)return p&&ae(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),_||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,d.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,d.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence(un(p))}))}initializeRecaptchaConfig(){var p=this;return(0,d.Z)(function*(){const _=yield ht(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new fr(_);null==p.tenantId?p._agentRecaptchaConfig=E:p._tenantRecaptchaConfigs[p.tenantId]=E,E.emailPasswordEnabled&&new ph(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new L.LL("auth","Firebase",p())}onAuthStateChanged(p,_,E){return this.registerStateListener(this.authStateSubscription,p,_,E)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,E){return this.registerStateListener(this.idTokenSubscription,p,_,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var E=this;return(0,d.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(_);return null===p?A.removeCurrentUser():A.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const E=p&&un(p)||_._popupRedirectResolver;ae(E,_,"argument-error"),_.redirectPersistenceManager=yield H.create(_,[un(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,d.Z)(function*(){var E,A;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===p?_._currentUser:(null===(A=_.redirectUser)||void 0===A?void 0:A._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,d.Z)(function*(){if(p===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,E,A){if(this._deleted)return()=>{};const x="function"==typeof _?_:_.next.bind(_),G=this._isInitialized?Promise.resolve():this._initializationPromise;return ae(G,this,"internal-error"),G.then(()=>x(this.currentUser)),"function"==typeof _?p.addObserver(_,E,A):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==p&&_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh(),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=he(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,d.Z)(function*(){var _;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const A=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();A&&(E["X-Firebase-Client"]=A);const x=yield p._getAppCheckToken();return x&&(E["X-Firebase-AppCheck"]=x),E})()}_getAppCheckToken(){var p=this;return(0,d.Z)(function*(){var _;const E=yield null===(_=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return E?.error&&function pt(w,...p){Tt.logLevel<=pe.in.WARN&&Tt.warn(`Auth (${ne.SDK_VERSION}): ${w}`,...p)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function sr(w){return(0,L.m9)(w)}class cs{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,L.ne)(_=>this.observer=_)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ea(w){const p=w.indexOf(":");return p<0?"":w.substr(0,p+1)}function _h(w){if(!w)return null;const p=Number(w);return isNaN(p)?null:p}class Xs{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return ze("not implemented")}_getIdTokenResponse(p){return ze("not implemented")}_linkToIdToken(p,_){return ze("not implemented")}_getReauthenticationResolver(p){return ze("not implemented")}}function Cp(w,p){return Du.apply(this,arguments)}function Du(){return(Du=(0,d.Z)(function*(w,p){return qt(w,"POST","/v1/accounts:resetPassword",ot(w,p))})).apply(this,arguments)}function Vc(w,p){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,d.Z)(function*(w,p){return qt(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Er(){return(Er=(0,d.Z)(function*(w,p){return qt(w,"POST","/v1/accounts:update",ot(w,p))})).apply(this,arguments)}function yn(w,p){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,d.Z)(function*(w,p){return an(w,"POST","/v1/accounts:signInWithPassword",ot(w,p))})).apply(this,arguments)}function Gr(w,p){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,d.Z)(function*(w,p){return qt(w,"POST","/v1/accounts:sendOobCode",ot(w,p))})).apply(this,arguments)}function Ma(){return(Ma=(0,d.Z)(function*(w,p){return Gr(w,p)})).apply(this,arguments)}function Su(w,p){return yh.apply(this,arguments)}function yh(){return(yh=(0,d.Z)(function*(w,p){return Gr(w,p)})).apply(this,arguments)}function Kn(w,p){return et.apply(this,arguments)}function et(){return(et=(0,d.Z)(function*(w,p){return Gr(w,p)})).apply(this,arguments)}function Pn(){return(Pn=(0,d.Z)(function*(w,p){return Gr(w,p)})).apply(this,arguments)}function No(){return(No=(0,d.Z)(function*(w,p){return an(w,"POST","/v1/accounts:signInWithEmailLink",ot(w,p))})).apply(this,arguments)}function ta(){return(ta=(0,d.Z)(function*(w,p){return an(w,"POST","/v1/accounts:signInWithEmailLink",ot(w,p))})).apply(this,arguments)}class On extends Xs{constructor(p,_,E,A=null){super("password",E),this._email=p,this._password=_,this._tenantId=A}static _fromEmailAndPassword(p,_){return new On(p,_,"password")}static _fromEmailAndCode(p,_,E=null){return new On(p,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,d.Z)(function*(){var E;switch(_.signInMethod){case"password":const A={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=p._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const x=yield zi(p,A,"signInWithPassword");return yn(p,x)}return yn(p,A).catch(function(){var x=(0,d.Z)(function*(G){if("auth/missing-recaptcha-token"===G.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ee=yield zi(p,A,"signInWithPassword");return yn(p,ee)}return Promise.reject(G)});return function(G){return x.apply(this,arguments)}}());case"emailLink":return function Ri(w,p){return No.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:ve(p,"internal-error")}})()}_linkToIdToken(p,_){var E=this;return(0,d.Z)(function*(){switch(E.signInMethod){case"password":return Vc(p,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function oi(w,p){return ta.apply(this,arguments)}(p,{idToken:_,email:E._email,oobCode:E._password});default:ve(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Or(w,p){return eo.apply(this,arguments)}function eo(){return(eo=(0,d.Z)(function*(w,p){return an(w,"POST","/v1/accounts:signInWithIdp",ot(w,p))})).apply(this,arguments)}class mi extends Xs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new mi(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):ve("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:A}=_,x=(0,oe._T)(_,["providerId","signInMethod"]);if(!E||!A)return null;const G=new mi(E,A);return G.idToken=x.idToken||void 0,G.accessToken=x.accessToken||void 0,G.secret=x.secret,G.nonce=x.nonce,G.pendingToken=x.pendingToken||null,G}_getIdTokenResponse(p){return Or(p,this.buildRequest())}_linkToIdToken(p,_){const E=this.buildRequest();return E.idToken=_,Or(p,E)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Or(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,L.xO)(_)}return p}}function Os(){return(Os=(0,d.Z)(function*(w,p){return qt(w,"POST","/v1/accounts:sendVerificationCode",ot(w,p))})).apply(this,arguments)}function Ra(){return(Ra=(0,d.Z)(function*(w,p){return an(w,"POST","/v1/accounts:signInWithPhoneNumber",ot(w,p))})).apply(this,arguments)}function _i(){return(_i=(0,d.Z)(function*(w,p){const _=yield an(w,"POST","/v1/accounts:signInWithPhoneNumber",ot(w,p));if(_.temporaryProof)throw Zn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const xa={USER_NOT_FOUND:"user-not-found"};function xi(){return(xi=(0,d.Z)(function*(w,p){return an(w,"POST","/v1/accounts:signInWithPhoneNumber",ot(w,Object.assign(Object.assign({},p),{operation:"REAUTH"})),xa)})).apply(this,arguments)}class Yn extends Xs{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Yn({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Yn({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function Gn(w,p){return Ra.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function Au(w,p){return _i.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function wh(w,p){return xi.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:E,verificationCode:A}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:E,code:A}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:E,phoneNumber:A,temporaryProof:x}=p;return E||_||A||x?new Yn({verificationId:_,verificationCode:E,phoneNumber:A,temporaryProof:x}):null}}class Yt{constructor(p){var _,E,A,x,G,ee;const Me=(0,L.zd)((0,L.pd)(p)),qe=null!==(_=Me.apiKey)&&void 0!==_?_:null,it=null!==(E=Me.oobCode)&&void 0!==E?E:null,at=function Hc(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Me.mode)&&void 0!==A?A:null);ae(qe&&it&&at,"argument-error"),this.apiKey=qe,this.operation=at,this.code=it,this.continueUrl=null!==(x=Me.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(G=Me.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(ee=Me.tenantId)&&void 0!==ee?ee:null}static parseLink(p){const _=function na(w){const p=(0,L.zd)((0,L.pd)(w)).link,_=p?(0,L.zd)((0,L.pd)(p)).deep_link_id:null,E=(0,L.zd)((0,L.pd)(w)).deep_link_id;return(E?(0,L.zd)((0,L.pd)(E)).link:null)||E||_||p||w}(p);try{return new Yt(_)}catch{return null}}}let bl=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,E){return On._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const A=Yt.parseLink(E);return ae(A,"argument-error"),On._fromEmailAndCode(_,A.code,A.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class ks{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class yi extends ks{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class qi extends yi{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return ae("providerId"in _&&"signInMethod"in _,"argument-error"),mi._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ae(p.idToken||p.accessToken,"argument-error"),mi._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return qi.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return qi.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:x,nonce:G,providerId:ee}=p;if(!E&&!A&&!_&&!x||!ee)return null;try{return new qi(ee)._credential({idToken:_,accessToken:E,nonce:G,pendingToken:x})}catch{return null}}}let ra=(()=>{class w extends yi{constructor(){super("facebook.com")}static credential(_){return mi._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),ia=(()=>{class w extends yi{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return mi._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:A}=_;if(!E&&!A)return null;try{return w.credential(E,A)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Ir=(()=>{class w extends yi{constructor(){super("github.com")}static credential(_){return mi._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Qn extends Xs{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return Or(p,this.buildRequest())}_linkToIdToken(p,_){const E=this.buildRequest();return E.idToken=_,Or(p,E)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Or(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:A,pendingToken:x}=_;return E&&A&&x&&E===A?new Qn(E,x):null}static _create(p,_){return new Qn(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Pa extends ks{constructor(p){ae(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Pa.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Pa.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=Qn.fromJSON(p);return ae(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:E}=p;if(!_||!E)return null;try{return Qn._create(E,_)}catch{return null}}}let to=(()=>{class w extends yi{constructor(){super("twitter.com")}static credential(_,E){return mi._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=_;if(!E||!A)return null;try{return w.credential(E,A)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function no(w,p){return kr.apply(this,arguments)}function kr(){return(kr=(0,d.Z)(function*(w,p){return an(w,"POST","/v1/accounts:signUp",ot(w,p))})).apply(this,arguments)}class zr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,E,A=!1){return(0,d.Z)(function*(){const x=yield Sn._fromIdTokenResponse(p,E,A),G=sa(E);return new zr({user:x,providerId:G,_tokenResponse:E,operationType:_})})()}static _forOperation(p,_,E){return(0,d.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const A=sa(E);return new zr({user:p,providerId:A,_tokenResponse:E,operationType:_})})()}}function sa(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function jc(){return(jc=(0,d.Z)(function*(w){var p;const _=sr(w);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new zr({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield no(_,{returnSecureToken:!0}),A=yield zr._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(A.user),A})).apply(this,arguments)}class Nu extends L.ZR{constructor(p,_,E,A){var x;super(_.code,_.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,Nu.prototype),this.customData={appName:p.name,tenantId:null!==(x=p.tenantId)&&void 0!==x?x:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,_,E,A){return new Nu(p,_,E,A)}}function bp(w,p,_,E){return("reauthenticate"===p?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?Nu._fromErrorAndOperation(w,x,p,E):x})}function Tp(w){return new Set(w.map(({providerId:p})=>p).filter(p=>!!p))}function Fs(){return Fs=(0,d.Z)(function*(w,p){const _=(0,L.m9)(w);yield Mu(!0,_,p);const{providerUserInfo:E}=yield function To(w,p){return Jo.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),A=Tp(E||[]);return _.providerData=_.providerData.filter(x=>A.has(x.providerId)),A.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),Fs.apply(this,arguments)}function $c(w,p){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,d.Z)(function*(w,p,_=!1){const E=yield Bn(w,p._linkToIdToken(w.auth,yield w.getIdToken()),_);return zr._forOperation(w,"link",E)})).apply(this,arguments)}function Mu(w,p,_){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,d.Z)(function*(w,p,_){yield pn(p);const A=!1===w?"provider-already-linked":"no-such-provider";ae(Tp(p.providerData).has(_)===w,p.auth,A)})).apply(this,arguments)}function Dp(w,p){return zc.apply(this,arguments)}function zc(){return(zc=(0,d.Z)(function*(w,p,_=!1){const{auth:E}=w,A="reauthenticate";try{const x=yield Bn(w,bp(E,A,p,w),_);ae(x.idToken,E,"internal-error");const G=yt(x.idToken);ae(G,E,"internal-error");const{sub:ee}=G;return ae(w.uid===ee,E,"user-mismatch"),zr._forOperation(w,A,x)}catch(x){throw"auth/user-not-found"===x?.code&&ve(E,"user-mismatch"),x}})).apply(this,arguments)}function Ih(w,p){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,d.Z)(function*(w,p,_=!1){const E="signIn",A=yield bp(w,E,p),x=yield zr._fromIdTokenResponse(w,E,A);return _||(yield w._updateCurrentUser(x.user)),x})).apply(this,arguments)}function Ru(w,p){return xu.apply(this,arguments)}function xu(){return(xu=(0,d.Z)(function*(w,p){return Ih(sr(w),p)})).apply(this,arguments)}function c_(w,p){return qc.apply(this,arguments)}function qc(){return(qc=(0,d.Z)(function*(w,p){const _=(0,L.m9)(w);return yield Mu(!1,_,p.providerId),$c(_,p)})).apply(this,arguments)}function Jn(w,p){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,d.Z)(function*(w,p){return Dp((0,L.m9)(w),p)})).apply(this,arguments)}function d_(){return(d_=(0,d.Z)(function*(w,p){return an(w,"POST","/v1/accounts:signInWithCustomToken",ot(w,p))})).apply(this,arguments)}function ds(){return ds=(0,d.Z)(function*(w,p){const _=sr(w),E=yield function Sp(w,p){return d_.apply(this,arguments)}(_,{token:p,returnSecureToken:!0}),A=yield zr._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(A.user),A}),ds.apply(this,arguments)}class Tl{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?Pu._fromServerResponse(p,_):"totpInfo"in _?bh._fromServerResponse(p,_):ve(p,"internal-error")}}class Pu extends Tl{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new Pu(_)}}class bh extends Tl{constructor(p){super("totp",p)}static _fromServerResponse(p,_){return new bh(_)}}function Ou(w,p,_){var E;ae((null===(E=_.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),ae(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ae(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(ae(_.android.packageName.length>0,w,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function ai(){return ai=(0,d.Z)(function*(w,p,_){var E;const A=sr(w),x={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=A._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const G=yield zi(A,x,"getOobCode",!0);_&&Ou(A,G,_),yield Su(A,G)}else _&&Ou(A,x,_),yield Su(A,x).catch(function(){var G=(0,d.Z)(function*(ee){if("auth/missing-recaptcha-token"!==ee.code)return Promise.reject(ee);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Me=yield zi(A,x,"getOobCode",!0);_&&Ou(A,Me,_),yield Su(A,Me)}});return function(ee){return G.apply(this,arguments)}}())}),ai.apply(this,arguments)}function or(){return(or=(0,d.Z)(function*(w,p,_){yield Cp((0,L.m9)(w),{oobCode:p,newPassword:_})})).apply(this,arguments)}function Wi(){return Wi=(0,d.Z)(function*(w,p){yield function Gt(w,p){return Er.apply(this,arguments)}((0,L.m9)(w),{oobCode:p})}),Wi.apply(this,arguments)}function ku(w,p){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,d.Z)(function*(w,p){const _=(0,L.m9)(w),E=yield Cp(_,{oobCode:p}),A=E.requestType;switch(ae(A,_,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ae(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ae(E.mfaInfo,_,"internal-error");default:ae(E.email,_,"internal-error")}let x=null;return E.mfaInfo&&(x=Tl._fromServerResponse(sr(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:x},operation:A}})).apply(this,arguments)}function Fa(){return(Fa=(0,d.Z)(function*(w,p){const{data:_}=yield ku((0,L.m9)(w),p);return _.email})).apply(this,arguments)}function Fu(){return Fu=(0,d.Z)(function*(w,p,_){var E;const A=sr(w),x={returnSecureToken:!0,email:p,password:_,clientType:"CLIENT_TYPE_WEB"};let G;if(null!==(E=A._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const qe=yield zi(A,x,"signUpPassword");G=no(A,qe)}else G=no(A,x).catch(function(){var qe=(0,d.Z)(function*(it){if("auth/missing-recaptcha-token"===it.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const at=yield zi(A,x,"signUpPassword");return no(A,at)}return Promise.reject(it)});return function(it){return qe.apply(this,arguments)}}());const ee=yield G.catch(qe=>Promise.reject(qe)),Me=yield zr._fromIdTokenResponse(A,"signIn",ee);return yield A._updateCurrentUser(Me.user),Me}),Fu.apply(this,arguments)}function oa(){return oa=(0,d.Z)(function*(w,p,_){var E;const A=sr(w),x={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function G(ee,Me){ae(Me.handleCodeInApp,A,"argument-error"),Me&&Ou(A,ee,Me)}if(null!==(E=A._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const ee=yield zi(A,x,"getOobCode",!0);G(ee,_),yield Kn(A,ee)}else G(x,_),yield Kn(A,x).catch(function(){var ee=(0,d.Z)(function*(Me){if("auth/missing-recaptcha-token"!==Me.code)return Promise.reject(Me);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const qe=yield zi(A,x,"getOobCode",!0);G(qe,_),yield Kn(A,qe)}});return function(Me){return ee.apply(this,arguments)}}())}),oa.apply(this,arguments)}function Np(){return(Np=(0,d.Z)(function*(w,p,_){const E=(0,L.m9)(w),A=bl.credentialWithLink(p,_||Mr());return ae(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Ru(E,A)})).apply(this,arguments)}function Zc(){return(Zc=(0,d.Z)(function*(w,p){return qt(w,"POST","/v1/accounts:createAuthUri",ot(w,p))})).apply(this,arguments)}function Kc(){return Kc=(0,d.Z)(function*(w,p){const E={identifier:p,continueUri:pi()?Mr():"http://localhost"},{signinMethods:A}=yield function Th(w,p){return Zc.apply(this,arguments)}((0,L.m9)(w),E);return A||[]}),Kc.apply(this,arguments)}function Lu(){return Lu=(0,d.Z)(function*(w,p){const _=(0,L.m9)(w),A={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};p&&Ou(_.auth,A,p);const{email:x}=yield function Bc(w,p){return Ma.apply(this,arguments)}(_.auth,A);x!==w.email&&(yield w.reload())}),Lu.apply(this,arguments)}function Ml(){return Ml=(0,d.Z)(function*(w,p,_){const E=(0,L.m9)(w),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:p};_&&Ou(E.auth,x,_);const{email:G}=yield function Bt(w,p){return Pn.apply(this,arguments)}(E.auth,x);G!==w.email&&(yield w.reload())}),Ml.apply(this,arguments)}function Rl(){return(Rl=(0,d.Z)(function*(w,p){return qt(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function La(){return La=(0,d.Z)(function*(w,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const E=(0,L.m9)(w),x={idToken:yield E.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},G=yield Bn(E,function Qc(w,p){return Rl.apply(this,arguments)}(E.auth,x));E.displayName=G.displayName||null,E.photoURL=G.photoUrl||null;const ee=E.providerData.find(({providerId:Me})=>"password"===Me);ee&&(ee.displayName=E.displayName,ee.photoURL=E.photoURL),yield E._updateTokensIfNecessary(G)}),La.apply(this,arguments)}function Sh(w,p,_){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,d.Z)(function*(w,p,_){const{auth:E}=w,x={idToken:yield w.getIdToken(),returnSecureToken:!0};p&&(x.email=p),_&&(x.password=_);const G=yield Bn(w,Vc(E,x));yield w._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class aa{constructor(p,_,E={}){this.isNewUser=p,this.providerId=_,this.profile=E}}class xl extends aa{constructor(p,_,E,A){super(p,_,E),this.username=A}}class li extends aa{constructor(p,_){super(p,"facebook.com",_)}}class Pl extends xl{constructor(p,_){super(p,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Jc extends aa{constructor(p,_){super(p,"google.com",_)}}class Ro extends xl{constructor(p,_,E){super(p,"twitter.com",_,E)}}function Cr(w){const{user:p,_tokenResponse:_}=w;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function kn(w){var p,_;if(!w)return null;const{providerId:E}=w,A=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},x=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&w?.idToken){const G=null===(_=null===(p=yt(w.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(G)return new aa(x,"anonymous"!==G&&"custom"!==G?G:null)}if(!E)return null;switch(E){case"facebook.com":return new li(x,A);case"github.com":return new Pl(x,A);case"google.com":return new Jc(x,A);case"twitter.com":return new Ro(x,A,w.screenName||null);case"custom":case"anonymous":return new aa(x,null);default:return new aa(x,E,A)}}(_)}class wt{constructor(p,_,E){this.type=p,this.credential=_,this.auth=E}static _fromIdtoken(p,_){return new wt("enroll",p,_)}static _fromMfaPendingCredential(p){return new wt("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,E;if(p?.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return wt._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return wt._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Po{constructor(p,_,E){this.session=p,this.hints=_,this.signInResolver=E}static _fromError(p,_){const E=sr(p),A=_.customData._serverResponse,x=(A.mfaInfo||[]).map(ee=>Tl._fromServerResponse(E,ee));ae(A.mfaPendingCredential,E,"internal-error");const G=wt._fromMfaPendingCredential(A.mfaPendingCredential);return new Po(G,x,function(){var ee=(0,d.Z)(function*(Me){const qe=yield Me._process(E,G);delete A.mfaInfo,delete A.mfaPendingCredential;const it=Object.assign(Object.assign({},A),{idToken:qe.idToken,refreshToken:qe.refreshToken});switch(_.operationType){case"signIn":const at=yield zr._fromIdTokenResponse(E,_.operationType,it);return yield E._updateCurrentUser(at.user),at;case"reauthenticate":return ae(_.user,E,"internal-error"),zr._forOperation(_.user,_.operationType,it);default:ve(E,"internal-error")}});return function(Me){return ee.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,d.Z)(function*(){return _.signInResolver(p)})()}}class Uu{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>Tl._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new Uu(p)}getSession(){var p=this;return(0,d.Z)(function*(){return wt._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,_){var E=this;return(0,d.Z)(function*(){const A=p,x=yield E.getSession(),G=yield Bn(E.user,A._process(E.user.auth,x,_));return yield E.user._updateTokensIfNecessary(G),E.user.reload()})()}unenroll(p){var _=this;return(0,d.Z)(function*(){const E="string"==typeof p?p:p.uid,A=yield _.user.getIdToken();try{const x=yield Bn(_.user,function Ba(w,p){return qt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",ot(w,p))}(_.user.auth,{idToken:A,mfaEnrollmentId:E}));_.enrolledFactors=_.enrolledFactors.filter(({uid:G})=>G!==E),yield _.user._updateTokensIfNecessary(x),yield _.user.reload()}catch(x){throw x}})()}}const Bu=new WeakMap,Ha="__sak";class Ph{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Ha,"1"),this.storage.removeItem(Ha),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Hn=(()=>{class w extends Ph{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Se(){const w=(0,L.z$)();return ue(w)||Nt(w)}()&&function Ni(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ps(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),x=this.localCache[E];A!==x&&_(E,x,A)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((ee,Me,qe)=>{this.notifyListeners(ee,qe)});const A=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ee=this.storage.getItem(A);if(_.newValue!==ee)null!==_.newValue?this.storage.setItem(A,_.newValue):this.storage.removeItem(A);else if(this.localCache[A]===_.newValue&&!E)return}const x=()=>{const ee=this.storage.getItem(A);!E&&this.localCache[A]===ee||this.notifyListeners(A,ee)},G=this.storage.getItem(A);!function Gi(){return(0,L.w1)()&&10===document.documentMode}()||G===_.newValue||_.newValue===_.oldValue?x():setTimeout(x,10)}notifyListeners(_,E){this.localCache[_]=E;const A=this.listeners[_];if(A)for(const x of Array.from(A))x(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var A=()=>super._set,x=this;return(0,d.Z)(function*(){yield A().call(x,_,E),x.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,A=this;return(0,d.Z)(function*(){const x=yield E().call(A,_);return A.localCache[_]=JSON.stringify(x),x})()}_remove(_){var E=()=>super._remove,A=this;return(0,d.Z)(function*(){yield E().call(A,_),delete A.localCache[_]})()}}return w.type="LOCAL",w})(),Zi=(()=>{class w extends Ph{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return w.type="SESSION",w})();let Hu=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(x=>x.isListeningto(_));if(E)return E;const A=new w(_);return this.receivers.push(A),A}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,d.Z)(function*(){const A=_,{eventId:x,eventType:G,data:ee}=A.data,Me=E.handlersMap[G];if(!Me?.size)return;A.ports[0].postMessage({status:"ack",eventId:x,eventType:G});const qe=Array.from(Me).map(function(){var at=(0,d.Z)(function*(Wn){return Wn(A.origin,ee)});return function(Wn){return at.apply(this,arguments)}}()),it=yield function io(w){return Promise.all(w.map(function(){var p=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return p.apply(this,arguments)}}()))}(qe);A.ports[0].postMessage({status:"done",eventId:x,eventType:G,response:it})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function ja(w="",p=10){let _="";for(let E=0;E<p;E++)_+=Math.floor(10*Math.random());return w+_}class kw{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,E=50){var A=this;return(0,d.Z)(function*(){const x=typeof MessageChannel<"u"?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let G,ee;return new Promise((Me,qe)=>{const it=ja("",20);x.port1.start();const at=setTimeout(()=>{qe(new Error("unsupported_event"))},E);ee={messageChannel:x,onMessage(Wn){const Bs=Wn;if(Bs.data.eventId===it)switch(Bs.data.status){case"ack":clearTimeout(at),G=setTimeout(()=>{qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Me(Bs.data.response);break;default:clearTimeout(at),clearTimeout(G),qe(new Error("invalid_response"))}}},A.handlers.add(ee),x.port1.addEventListener("message",ee.onMessage),A.target.postMessage({eventType:p,eventId:it,data:_},[x.port2])}).finally(()=>{ee&&A.removeMessageHandler(ee)})})()}}function Xn(){return window}function qr(){return typeof Xn().WorkerGlobalScope<"u"&&"function"==typeof Xn().importScripts}function Ll(){return(Ll=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Oh="firebaseLocalStorageDb",ju="firebaseLocalStorage",Vl="fbase_key";class ko{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function $u(w,p){return w.transaction([ju],p?"readwrite":"readonly").objectStore(ju)}function Ul(){const w=indexedDB.open(Oh,1);return new Promise((p,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(ju,{keyPath:Vl})}catch(A){_(A)}}),w.addEventListener("success",(0,d.Z)(function*(){const E=w.result;E.objectStoreNames.contains(ju)?p(E):(E.close(),yield function kh(){const w=indexedDB.deleteDatabase(Oh);return new ko(w).toPromise()}(),p(yield Ul()))}))})}function Bl(w,p,_){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,d.Z)(function*(w,p,_){const E=$u(w,!0).put({[Vl]:p,value:_});return new ko(E).toPromise()})).apply(this,arguments)}function fs(){return(fs=(0,d.Z)(function*(w,p){const _=$u(w,!1).get(p),E=yield new ko(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function sd(w,p){const _=$u(w,!0).delete(p);return new ko(_).toPromise()}const zu=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield Ul()),_.db})()}_withRetries(_){var E=this;return(0,d.Z)(function*(){let A=0;for(;;)try{const x=yield E._openDb();return yield _(x)}catch(x){if(A++>3)throw x;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return qr()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=Hu._getInstance(function bn(){return qr()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,d.Z)(function*(A,x){return{keyProcessed:(yield _._poll()).includes(x.key)}});return function(A,x){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,d.Z)(function*(A,x){return["keyChanged"]});return function(A,x){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var E,A;if(_.activeServiceWorker=yield function so(){return Ll.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new kw(_.activeServiceWorker);const x=yield _.sender._send("ping",{},800);x&&null!==(E=x[0])&&void 0!==E&&E.fulfilled&&null!==(A=x[0])&&void 0!==A&&A.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,d.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Oo(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Ul();return yield Bl(_,Ha,"1"),yield sd(_,Ha),!0}catch{}return!1})()}_withPendingWrite(_){var E=this;return(0,d.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var A=this;return(0,d.Z)(function*(){return A._withPendingWrite((0,d.Z)(function*(){return yield A._withRetries(x=>Bl(x,_,E)),A.localCache[_]=E,A.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,d.Z)(function*(){const A=yield E._withRetries(x=>function $a(w,p){return fs.apply(this,arguments)}(x,_));return E.localCache[_]=A,A})()}_remove(_){var E=this;return(0,d.Z)(function*(){return E._withPendingWrite((0,d.Z)(function*(){return yield E._withRetries(A=>sd(A,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const E=yield _._withRetries(G=>{const ee=$u(G,!1).getAll();return new ko(ee).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const A=[],x=new Set;for(const{fbase_key:G,value:ee}of E)x.add(G),JSON.stringify(_.localCache[G])!==JSON.stringify(ee)&&(_.notifyListeners(G,ee),A.push(G));for(const G of Object.keys(_.localCache))_.localCache[G]&&!x.has(G)&&(_.notifyListeners(G,null),A.push(G));return A})()}notifyListeners(_,E){this.localCache[_]=E;const A=this.listeners[_];if(A)for(const x of Array.from(A))x(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})(),qu=1e12;class Op{constructor(p){this.auth=p,this.counter=qu,this._widgets=new Map}render(p,_){const E=this.counter;return this._widgets.set(E,new Lh(p,this.auth.name,_||{})),this.counter++,E}reset(p){var _;const E=p||qu;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(p){var _;return(null===(_=this._widgets.get(p||qu))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,d.Z)(function*(){var E;return null===(E=_._widgets.get(p||qu))||void 0===E||E.execute(),""})()}}class Lh{constructor(p,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof p?document.getElementById(p):p;ae(A,"argument-error",{appName:_}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function kp(w){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<w;E++)p.push(_.charAt(Math.floor(62*Math.random())));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Wu=Xo("rcb"),jl=new be(3e4,6e4);class Vh{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Xn().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return ae(function Zu(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),p,"argument-error"),this.shouldResolveImmediately(_)&&$t(Xn().grecaptcha)?Promise.resolve(Xn().grecaptcha):new Promise((E,A)=>{const x=Xn().setTimeout(()=>{A(X(p,"network-request-failed"))},jl.get());Xn()[Wu]=()=>{Xn().clearTimeout(x),delete Xn()[Wu];const ee=Xn().grecaptcha;if(!ee||!$t(ee))return void A(X(p,"internal-error"));const Me=ee.render;ee.render=(qe,it)=>{const at=Me(qe,it);return this.counter++,at},this.hostLanguage=_,E(ee)},Js(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Wu,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(x),A(X(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=Xn().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ad{load(p){return(0,d.Z)(function*(){return new Op(p)})()}clearedOneInstance(){}}const Ga="recaptcha",Uh={theme:"light",type:"image"};class ud{constructor(p,_=Object.assign({},Uh),E){this.parameters=_,this.type=Ga,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=sr(E),this.isInvisible="invisible"===this.parameters.size,ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof p?document.getElementById(p):p;ae(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ad:new Vh,this.validateStartingState()}verify(){var p=this;return(0,d.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(_)||new Promise(x=>{const G=ee=>{ee&&(p.tokenChangeListeners.delete(G),x(ee))};p.tokenChangeListeners.add(G),p.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ae(!this.parameters.sitekey,this.auth,"argument-error"),ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof p)p(_);else if("string"==typeof p){const E=Xn()[p];"function"==typeof E&&E(_)}}}assertNotDestroyed(){ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,d.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,d.Z)(function*(){ae(pi()&&!qr(),p.auth,"internal-error"),yield function Fp(){let w=null;return new Promise(p=>{"complete"!==document.readyState?(w=()=>p(),window.addEventListener("load",w)):p()}).catch(p=>{throw w&&window.removeEventListener("load",w),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function re(w){return Oe.apply(this,arguments)}(p.auth);ae(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class $l{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Yn._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function Oi(){return(Oi=(0,d.Z)(function*(w,p,_){const E=sr(w),A=yield Ku(E,p,(0,L.m9)(_));return new $l(A,x=>Ru(E,x))})).apply(this,arguments)}function vn(){return(vn=(0,d.Z)(function*(w,p,_){const E=(0,L.m9)(w);yield Mu(!1,E,"phone");const A=yield Ku(E.auth,p,(0,L.m9)(_));return new $l(A,x=>c_(E,x))})).apply(this,arguments)}function ki(){return(ki=(0,d.Z)(function*(w,p,_){const E=(0,L.m9)(w),A=yield Ku(E.auth,p,(0,L.m9)(_));return new $l(A,x=>Jn(E,x))})).apply(this,arguments)}function Ku(w,p,_){return ld.apply(this,arguments)}function ld(){return ld=(0,d.Z)(function*(w,p,_){var E;const A=yield _.verify();try{let x;if(ae("string"==typeof A,w,"argument-error"),ae(_.type===Ga,w,"argument-error"),x="string"==typeof p?{phoneNumber:p}:p,"session"in x){const G=x.session;if("phoneNumber"in x)return ae("enroll"===G.type,w,"internal-error"),(yield function nd(w,p){return qt(w,"POST","/v2/accounts/mfaEnrollment:start",ot(w,p))}(w,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{ae("signin"===G.type,w,"internal-error");const ee=(null===(E=x.multiFactorHint)||void 0===E?void 0:E.uid)||x.multiFactorUid;return ae(ee,w,"missing-multi-factor-info"),(yield function Pp(w,p){return qt(w,"POST","/v2/accounts/mfaSignIn:start",ot(w,p))}(w,{mfaPendingCredential:G.credential,mfaEnrollmentId:ee,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield function vh(w,p){return Os.apply(this,arguments)}(w,{phoneNumber:x.phoneNumber,recaptchaToken:A});return G}}finally{_._reset()}}),ld.apply(this,arguments)}function Hh(){return(Hh=(0,d.Z)(function*(w,p){yield $c((0,L.m9)(w),p)})).apply(this,arguments)}let oo=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=sr(_)}verifyPhoneNumber(_,E){return Ku(this.auth,_,(0,L.m9)(E))}static credential(_,E){return Yn._fromVerification(_,E)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:A}=_;return E&&A?Yn._fromTokenResponse(E,A):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Ls(w,p){return p?un(p):(ae(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Kr extends Xs{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Or(p,this._buildIdpRequest())}_linkToIdToken(p,_){return Or(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return Or(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function Mt(w){return Ih(w.auth,new Kr(w),w.bypassAuthState)}function Gl(w){const{auth:p,user:_}=w;return ae(_,p,"internal-error"),Dp(_,new Kr(w),w.bypassAuthState)}function la(w){return zl.apply(this,arguments)}function zl(){return(zl=(0,d.Z)(function*(w){const{auth:p,user:_}=w;return ae(_,p,"internal-error"),$c(_,new Kr(w),w.bypassAuthState)})).apply(this,arguments)}class ao{constructor(p,_,E,A,x=!1){this.auth=p,this.resolver=E,this.user=A,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,d.Z)(function*(E,A){p.pendingPromise={resolve:E,reject:A};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(x){p.reject(x)}});return function(E,A){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,d.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:x,tenantId:G,error:ee,type:Me}=p;if(ee)return void _.reject(ee);const qe={auth:_.auth,requestUri:E,sessionId:A,tenantId:G||void 0,postBody:x||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Me)(qe))}catch(it){_.reject(it)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Mt;case"linkViaPopup":case"linkViaRedirect":return la;case"reauthViaPopup":case"reauthViaRedirect":return Gl;default:ve(this.auth,"internal-error")}}resolve(p){Qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ki=new be(2e3,1e4);function gs(){return(gs=(0,d.Z)(function*(w,p,_){const E=sr(w);Ne(w,p,ks);const A=Ls(E,_);return new Fo(E,"signInViaPopup",p,A).executeNotNull()})).apply(this,arguments)}function za(){return(za=(0,d.Z)(function*(w,p,_){const E=(0,L.m9)(w);Ne(E.auth,p,ks);const A=Ls(E.auth,_);return new Fo(E.auth,"reauthViaPopup",p,A,E).executeNotNull()})).apply(this,arguments)}function ql(){return(ql=(0,d.Z)(function*(w,p,_){const E=(0,L.m9)(w);Ne(E.auth,p,ks);const A=Ls(E.auth,_);return new Fo(E.auth,"linkViaPopup",p,A,E).executeNotNull()})).apply(this,arguments)}let Fo=(()=>{class w extends ao{constructor(_,E,A,x,G){super(_,E,x,G),this.provider=A,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const E=yield _.execute();return ae(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,d.Z)(function*(){Qt(1===_.filter.length,"Popup operations only handle one event");const E=ja();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(A=>{_.reject(A)}),_.resolver._isIframeWebStorageSupported(_.auth,A=>{A||_.reject(X(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(X(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,A;this.pollId=null!==(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(X(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,Ki.get())};_()}}return w.currentPopupAction=null,w})();const uo="pendingRedirect",Wl=new Map;class hd extends ao{constructor(p,_,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,d.Z)(function*(){let E=Wl.get(_.auth._key());if(!E){try{const x=(yield function Lo(w,p){return Zl.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;E=()=>Promise.resolve(x)}catch(A){E=()=>Promise.reject(A)}Wl.set(_.auth._key(),E)}return _.bypassAuthState||Wl.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,E=this;return(0,d.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(E,p);if("unknown"!==p.type){if(p.eventId){const A=yield E.auth._redirectUserForId(p.eventId);if(A)return E.user=A,_().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Zl(){return(Zl=(0,d.Z)(function*(w,p){const _=Wa(p),E=Yr(w);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(_));return yield E._remove(_),A})).apply(this,arguments)}function fd(w,p){return qa.apply(this,arguments)}function qa(){return(qa=(0,d.Z)(function*(w,p){return Yr(w)._set(Wa(p),"true")})).apply(this,arguments)}function Us(w,p){Wl.set(w._key(),p)}function Yr(w){return un(w._redirectPersistence)}function Wa(w){return $(uo,w.config.apiKey,w.name)}function Kl(w,p,_){return function pr(w,p,_){return zn.apply(this,arguments)}(w,p,_)}function zn(){return(zn=(0,d.Z)(function*(w,p,_){const E=sr(w);Ne(w,p,ks),yield E._initializationPromise;const A=Ls(E,_);return yield fd(A,E),A._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function ca(w,p,_){return function Za(w,p,_){return Fi.apply(this,arguments)}(w,p,_)}function Fi(){return(Fi=(0,d.Z)(function*(w,p,_){const E=(0,L.m9)(w);Ne(E.auth,p,ks),yield E.auth._initializationPromise;const A=Ls(E.auth,_);yield fd(A,E.auth);const x=yield ci(E);return A._openRedirect(E.auth,p,"reauthViaRedirect",x)})).apply(this,arguments)}function Qr(w,p,_){return function Yu(w,p,_){return lo.apply(this,arguments)}(w,p,_)}function lo(){return(lo=(0,d.Z)(function*(w,p,_){const E=(0,L.m9)(w);Ne(E.auth,p,ks),yield E.auth._initializationPromise;const A=Ls(E.auth,_);yield Mu(!1,E,p.providerId),yield fd(A,E.auth);const x=yield ci(E);return A._openRedirect(E.auth,p,"linkViaRedirect",x)})).apply(this,arguments)}function Jr(){return(Jr=(0,d.Z)(function*(w,p){return yield sr(w)._initializationPromise,co(w,p,!1)})).apply(this,arguments)}function co(w,p){return gr.apply(this,arguments)}function gr(){return(gr=(0,d.Z)(function*(w,p,_=!1){const E=sr(w),A=Ls(E,p),G=yield new hd(E,A,_).execute();return G&&!_&&(delete G.user._redirectEventId,yield E._persistUserIfCurrent(G.user),yield E._setRedirectUser(null,p)),G})).apply(this,arguments)}function ci(w){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,d.Z)(function*(w){const p=ja(`${w.uid}:::`);return w._redirectEventId=p,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),p})).apply(this,arguments)}class Qu{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(_=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Ql(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gd(w);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var E;if(p.error&&!gd(p)){const A=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(X(this.auth,A))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const E=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(pd(p))}saveEventToCache(p){this.cachedEventUids.add(pd(p)),this.lastProcessedEventTime=Date.now()}}function pd(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(p=>p).join("-")}function gd({type:w,error:p}){return"unknown"===w&&"auth/no-auth-event"===p?.code}function Zt(w){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,d.Z)(function*(w,p={}){return qt(w,"GET","/v1/projects",p)})).apply(this,arguments)}const Jl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xu=/^https?/;function Nn(){return(Nn=(0,d.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:p}=yield Zt(w);for(const _ of p)try{if(ms(_))return}catch{}ve(w,"unauthorized-domain")})).apply(this,arguments)}function ms(w){const p=Mr(),{protocol:_,hostname:E}=new URL(p);if(w.startsWith("chrome-extension://")){const G=new URL(w);return""===G.hostname&&""===E?"chrome-extension:"===_&&w.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&G.hostname===E}if(!Xu.test(_))return!1;if(Jl.test(w))return E===w;const A=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const Ya=new be(3e4,6e4);function md(){const w=Xn().___jsl;if(w?.H)for(const p of Object.keys(w.H))if(w.H[p].r=w.H[p].r||[],w.H[p].L=w.H[p].L||[],w.H[p].r=[...w.H[p].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let Uo=null;const el=new be(5e3,15e3),Xl="__/auth/iframe",_d="emulator/auth/iframe",y_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v_(w){const p=w.config;ae(p.authDomain,w,"auth-domain-config-required");const _=p.emulator?Re(p,_d):`https://${w.config.authDomain}/${Xl}`,E={apiKey:p.apiKey,appName:w.name,v:ne.SDK_VERSION},A=jh.get(w.config.apiHost);A&&(E.eid=A);const x=w._getFrameworks();return x.length&&(E.fw=x.join(",")),`${_}?${(0,L.xO)(E).slice(1)}`}function D(){return D=(0,d.Z)(function*(w){const p=yield function ho(w){return Uo=Uo||function Fn(w){return new Promise((p,_)=>{var E,A,x;function G(){md(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{md(),_(X(w,"network-request-failed"))},timeout:Ya.get()})}if(null!==(A=null===(E=Xn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==A&&A.Iframe)p(gapi.iframes.getContext());else{if(null===(x=Xn().gapi)||void 0===x||!x.load){const ee=Xo("iframefcb");return Xn()[ee]=()=>{gapi.load?G():_(X(w,"network-request-failed"))},Js(`https://apis.google.com/js/api.js?onload=${ee}`).catch(Me=>_(Me))}G()}}).catch(p=>{throw Uo=null,p})}(w),Uo}(w),_=Xn().gapi;return ae(_,w,"internal-error"),p.open({where:document.body,url:v_(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:y_,dontclear:!0},E=>new Promise(function(){var A=(0,d.Z)(function*(x,G){yield E.restyle({setHideOnLeave:!1});const ee=X(w,"network-request-failed"),Me=Xn().setTimeout(()=>{G(ee)},el.get());function qe(){Xn().clearTimeout(Me),x(E)}E.ping(qe).then(qe,()=>{G(ee)})});return function(x,G){return A.apply(this,arguments)}}()))}),D.apply(this,arguments)}const M={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ke{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const xt="__/auth/handler",St="emulator/auth/handler",Xr=encodeURIComponent("fac");function qn(w,p,_,E,A,x){return fo.apply(this,arguments)}function fo(){return(fo=(0,d.Z)(function*(w,p,_,E,A,x){ae(w.config.authDomain,w,"auth-domain-config-required"),ae(w.config.apiKey,w,"invalid-api-key");const G={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:E,v:ne.SDK_VERSION,eventId:A};if(p instanceof ks){p.setDefaultLanguage(w.languageCode),G.providerId=p.providerId||"",(0,L.xb)(p.getCustomParameters())||(G.customParameters=JSON.stringify(p.getCustomParameters()));for(const[it,at]of Object.entries(x||{}))G[it]=at}if(p instanceof yi){const it=p.getScopes().filter(at=>""!==at);it.length>0&&(G.scopes=it.join(","))}w.tenantId&&(G.tid=w.tenantId);const ee=G;for(const it of Object.keys(ee))void 0===ee[it]&&delete ee[it];const Me=yield w._getAppCheckToken(),qe=Me?`#${Xr}=${encodeURIComponent(Me)}`:"";return`${function tl({config:w}){return w.emulator?Re(w,St):`https://${w.authDomain}/${xt}`}(w)}?${(0,L.xO)(ee).slice(1)}${qe}`})).apply(this,arguments)}const Li="webStorageSupport",_s=class Yi{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zi,this._completeRedirectFn=co,this._overrideRedirectResult=Us}_openPopup(p,_,E,A){var x=this;return(0,d.Z)(function*(){var G;Qt(null===(G=x.eventManagers[p._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const ee=yield qn(p,_,E,Mr(),A);return function Ge(w,p,_,E=500,A=600){const x=Math.max((window.screen.availHeight-A)/2,0).toString(),G=Math.max((window.screen.availWidth-E)/2,0).toString();let ee="";const Me=Object.assign(Object.assign({},M),{width:E.toString(),height:A.toString(),top:x,left:G}),qe=(0,L.z$)().toLowerCase();_&&(ee=lt(qe)?"_blank":_),Ie(qe)&&(p=p||"http://localhost",Me.scrollbars="yes");const it=Object.entries(Me).reduce((Wn,[Bs,jo])=>`${Wn}${Bs}=${jo},`,"");if(function Pr(w=(0,L.z$)()){var p;return Nt(w)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(qe)&&"_self"!==ee)return function dt(w,p){const _=document.createElement("a");_.href=w,_.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(p||"",ee),new Ke(null);const at=window.open(p||"",ee,it);ae(at,w,"popup-blocked");try{at.focus()}catch{}return new Ke(at)}(p,ee,ja())})()}_openRedirect(p,_,E,A){var x=this;return(0,d.Z)(function*(){return yield x._originValidation(p),function id(w){Xn().location.href=w}(yield qn(p,_,E,Mr(),A)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:A,promise:x}=this.eventManagers[_];return A?Promise.resolve(A):(Qt(x,"If manager is not set, promise should be"),x)}const E=this.initAndGetManager(p);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(p){var _=this;return(0,d.Z)(function*(){const E=yield function C(w){return D.apply(this,arguments)}(p),A=new Qu(p);return E.register("authEvent",x=>(ae(x?.authEvent,p,"invalid-auth-event"),{status:A.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:A},_.iframes[p._key()]=E,A})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(Li,{type:Li},A=>{var x;const G=null===(x=A?.[0])||void 0===x?void 0:x[Li];void 0!==G&&_(!!G),ve(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function __(w){return Nn.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return Ps()||ue()||Nt()}};class ec{constructor(p){this.factorId=p}_process(p,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,E);case"signin":return this._finalizeSignIn(p,_.credential);default:return ze("unexpected MultiFactorSessionType")}}}class tc extends ec{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new tc(p)}_finalizeEnroll(p,_,E){return function Rp(w,p){return qt(w,"POST","/v2/accounts/mfaEnrollment:finalize",ot(w,p))}(p,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function vi(w,p){return qt(w,"POST","/v2/accounts/mfaSignIn:finalize",ot(w,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let w_=(()=>{class w{constructor(){}static assertion(_){return tc._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var I_="@firebase/auth";class C_{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(E=>{p(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);_&&(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Xa(){return window}(0,L.Pz)("authIdTokenMaxAge"),function Vw(w){(0,ne._registerComponent)(new ye.wA("auth",(p,{options:_})=>{const E=p.getProvider("app").getImmediate(),A=p.getProvider("heartbeat"),x=p.getProvider("app-check-internal"),{apiKey:G,authDomain:ee}=E.options;ae(G&&!G.includes(":"),"invalid-api-key",{appName:E.name});const Me={apiKey:G,authDomain:ee,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:he(w)},qe=new gh(E,A,x,Me);return function Ip(w,p){const _=p?.persistence||[],E=(Array.isArray(_)?_:[_]).map(un);p?.errorMap&&w._updateErrorMap(p.errorMap),w._initializeWithPersistence(E,p?.popupRedirectResolver)}(qe,_),qe},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,E)=>{p.getProvider("auth-internal").initialize()})),(0,ne._registerComponent)(new ye.wA("auth-internal",p=>{const _=sr(p.getProvider("auth").getImmediate());return new C_(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ne.registerVersion)(I_,"0.23.2",function Lw(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,ne.registerVersion)(I_,"0.23.2","esm2017")}("Browser");function nc(){return nc=(0,d.Z)(function*(w,p,_){var E;const{BuildInfo:A}=Xa();Qt(p.sessionId,"AuthEvent did not contain a session ID");const x=yield function Up(w){return Bp.apply(this,arguments)}(p.sessionId),G={};return Nt()?G.ibi=A.packageName:Vt()?G.apn=A.packageName:ve(w,"operation-not-supported-in-this-environment"),A.displayName&&(G.appDisplayName=A.displayName),G.sessionId=x,qn(w,_,p.type,void 0,null!==(E=p.eventId)&&void 0!==E?E:void 0,G)}),nc.apply(this,arguments)}function zh(){return(zh=(0,d.Z)(function*(w){const{BuildInfo:p}=Xa(),_={};Nt()?_.iosBundleId=p.packageName:Vt()?_.androidPackageName=p.packageName:ve(w,"operation-not-supported-in-this-environment"),yield Zt(w,_)})).apply(this,arguments)}function D_(){return(D_=(0,d.Z)(function*(w,p,_){const{cordova:E}=Xa();let A=()=>{};try{yield new Promise((x,G)=>{let ee=null;function Me(){var at;x();const Wn=null===(at=E.plugins.browsertab)||void 0===at?void 0:at.close;"function"==typeof Wn&&Wn(),"function"==typeof _?.close&&_.close()}function qe(){ee||(ee=window.setTimeout(()=>{G(X(w,"redirect-cancelled-by-user"))},2e3))}function it(){"visible"===document?.visibilityState&&qe()}p.addPassiveListener(Me),document.addEventListener("resume",qe,!1),Vt()&&document.addEventListener("visibilitychange",it,!1),A=()=>{p.removePassiveListener(Me),document.removeEventListener("resume",qe,!1),document.removeEventListener("visibilitychange",it,!1),ee&&window.clearTimeout(ee)}})}finally{A()}})).apply(this,arguments)}function Bp(){return(Bp=(0,d.Z)(function*(w){const p=function qh(w){if(Qt(/[0-9a-zA-Z]+/.test(w),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(w);const p=new ArrayBuffer(w.length),_=new Uint8Array(p);for(let E=0;E<w.length;E++)_[E]=w.charCodeAt(E);return _}(w),_=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(_)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class S_ extends Qu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(p)),super.onEvent(p)}initialized(){var p=this;return(0,d.Z)(function*(){yield p.initPromise})()}}function ic(w){return da.apply(this,arguments)}function da(){return(da=(0,d.Z)(function*(w){const p=yield Bo()._get(go(w));return p&&(yield Bo()._remove(go(w))),p})).apply(this,arguments)}function Wh(){const w=[];for(let _=0;_<20;_++){const E=Math.floor(62*Math.random());w.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(E))}return w.join("")}function Bo(){return un(Hn)}function go(w){return $("authEvent",w.config.apiKey,w.name)}function rl(w){if(!w?.includes("?"))return{};const[p,..._]=w.split("?");return(0,L.zd)(_.join("?"))}const $w=class jw{constructor(){this._redirectPersistence=Zi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=co,this._overrideRedirectResult=Us}_initialize(p){var _=this;return(0,d.Z)(function*(){const E=p._key();let A=_.eventManagers.get(E);return A||(A=new S_(p),_.eventManagers.set(E,A),_.attachCallbackListeners(p,A)),A})()}_openPopup(p){ve(p,"operation-not-supported-in-this-environment")}_openRedirect(p,_,E,A){var x=this;return(0,d.Z)(function*(){!function XC(w){var p,_,E,A,x,G,ee,Me,qe,it;const at=Xa();ae("function"==typeof(null===(p=at?.universalLinks)||void 0===p?void 0:p.subscribe),w,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ae(typeof(null===(_=at?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ae("function"==typeof(null===(x=null===(A=null===(E=at?.cordova)||void 0===E?void 0:E.plugins)||void 0===A?void 0:A.browsertab)||void 0===x?void 0:x.openUrl),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ae("function"==typeof(null===(Me=null===(ee=null===(G=at?.cordova)||void 0===G?void 0:G.plugins)||void 0===ee?void 0:ee.browsertab)||void 0===Me?void 0:Me.isAvailable),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ae("function"==typeof(null===(it=null===(qe=at?.cordova)||void 0===qe?void 0:qe.InAppBrowser)||void 0===it?void 0:it.open),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const G=yield x._initialize(p);yield G.initialized(),G.resetRedirect(),function Vs(){Wl.clear()}(),yield x._originValidation(p);const ee=function tb(w,p,_=null){return{type:p,eventId:_,urlResponse:null,sessionId:Wh(),postBody:null,tenantId:w.tenantId,error:X(w,"no-auth-event")}}(p,E,A);yield function A_(w,p){return Bo()._set(go(w),p)}(p,ee);const Me=yield function Gh(w,p,_){return nc.apply(this,arguments)}(p,ee,_),qe=yield function Hw(w){const{cordova:p}=Xa();return new Promise(_=>{p.plugins.browsertab.isAvailable(E=>{let A=null;E?p.plugins.browsertab.openUrl(w):A=p.InAppBrowser.open(w,function Jt(w=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}()?"_blank":"_system","location=yes"),_(A)})})}(Me);return function rc(w,p,_){return D_.apply(this,arguments)}(p,G,qe)})()}_isIframeWebStorageSupported(p,_){throw new Error("Method not implemented.")}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Bw(w){return zh.apply(this,arguments)}(p)),this.originValidationPromises[_]}attachCallbackListeners(p,_){const{universalLinks:E,handleOpenURL:A,BuildInfo:x}=Xa(),G=setTimeout((0,d.Z)(function*(){yield ic(p),_.onEvent(N_())}),500),ee=function(){var it=(0,d.Z)(function*(at){clearTimeout(G);const Wn=yield ic(p);let Bs=null;Wn&&at?.url&&(Bs=function po(w,p){var _,E;const A=function oc(w){const p=rl(w),_=p.link?decodeURIComponent(p.link):void 0,E=rl(_).link,A=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return rl(A).link||A||E||_||w}(p);if(A.includes("/__/auth/callback")){const x=rl(A),G=x.firebaseError?function sc(w){try{return JSON.parse(w)}catch{return null}}(decodeURIComponent(x.firebaseError)):null,ee=null===(E=null===(_=G?.code)||void 0===_?void 0:_.split("auth/"))||void 0===E?void 0:E[1],Me=ee?X(ee):null;return Me?{type:w.type,eventId:w.eventId,tenantId:w.tenantId,error:Me,urlResponse:null,sessionId:null,postBody:null}:{type:w.type,eventId:w.eventId,tenantId:w.tenantId,sessionId:w.sessionId,urlResponse:A,postBody:null}}return null}(Wn,at.url)),_.onEvent(Bs||N_())});return function(Wn){return it.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,ee);const Me=A,qe=`${x.packageName.toLowerCase()}://`;Xa().handleOpenURL=function(){var it=(0,d.Z)(function*(at){if(at.toLowerCase().startsWith(qe)&&ee({url:at}),"function"==typeof Me)try{Me(at)}catch(Wn){console.error(Wn)}});return function(at){return it.apply(this,arguments)}}()}};function N_(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:X("no-auth-event")}}function vd(){var w;return(null===(w=self?.location)||void 0===w?void 0:w.protocol)||null}function jp(w=(0,L.z$)()){return!("file:"!==vd()&&"ionic:"!==vd()&&"capacitor:"!==vd()||!w.toLowerCase().match(/iphone|ipad|ipod|android/))}function ac(){try{const w=self.localStorage,p=ja();if(w)return w.setItem(p,"1"),w.removeItem(p),!function $p(w=(0,L.z$)()){return function Qi(){return(0,L.w1)()&&11===document?.documentMode}()||function il(w=(0,L.z$)()){return/Edge\/\d+/.test(w)}(w)}()||(0,L.hl)()}catch{return br()&&(0,L.hl)()}return!1}function br(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vi(){return(function R_(){return"http:"===vd()||"https:"===vd()}()||(0,L.ru)()||jp())&&!function nb(){return(0,L.b$)()||(0,L.UG)()}()&&ac()&&!br()}function eu(){return jp()&&typeof document<"u"}function Zh(){return(Zh=(0,d.Z)(function*(){return!!eu()&&new Promise(w=>{const p=setTimeout(()=>{w(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),w(!0)})})})).apply(this,arguments)}const Fr={LOCAL:"local",NONE:"none",SESSION:"session"},sl=ae,P_="persistence";function Kh(w){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,d.Z)(function*(w){yield w._initializationPromise;const p=uc(),_=$(P_,w.config.apiKey,w.name);p&&p.setItem(_,w._getPersistence())})).apply(this,arguments)}function uc(){var w;try{return(null===(w=function x_(){return typeof window<"u"?window:null}())||void 0===w?void 0:w.sessionStorage)||null}catch{return null}}const zp=ae;class Ji{constructor(){this.browserResolver=un(_s),this.cordovaResolver=un($w),this.underlyingResolver=null,this._redirectPersistence=Zi,this._completeRedirectFn=co,this._overrideRedirectResult=Us}_initialize(p){var _=this;return(0,d.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,_,E,A){var x=this;return(0,d.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(p,_,E,A)})()}_openRedirect(p,_,E,A){var x=this;return(0,d.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(p,_,E,A)})()}_isIframeWebStorageSupported(p,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,_)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return eu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return zp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,d.Z)(function*(){if(p.underlyingResolver)return;const _=yield function Gp(){return Zh.apply(this,arguments)}();p.underlyingResolver=_?p.cordovaResolver:p.browserResolver})()}}function O_(w){return w.unwrap()}function Jh(w){return ol(w)}function ol(w){const{_tokenResponse:p}=w instanceof L.ZR?w.customData:w;if(!p)return null;if(!(w instanceof L.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return oo.credentialFromResult(w);const _=p.providerId;if(!_||_===me.PASSWORD)return null;let E;switch(_){case me.GOOGLE:E=ia;break;case me.FACEBOOK:E=ra;break;case me.GITHUB:E=Ir;break;case me.TWITTER:E=to;break;default:const{oauthIdToken:A,oauthAccessToken:x,oauthTokenSecret:G,pendingToken:ee,nonce:Me}=p;return x||G||A||ee?ee?_.startsWith("saml.")?Qn._create(_,ee):mi._fromParams({providerId:_,signInMethod:_,pendingToken:ee,idToken:A,accessToken:x}):new qi(_).credential({idToken:A,accessToken:x,rawNonce:Me}):null}return w instanceof L.ZR?E.credentialFromError(w):E.credentialFromResult(w)}function Lr(w,p){return p.catch(_=>{throw _ instanceof L.ZR&&function qp(w,p){var _;const E=null===(_=p.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new Xh(w,function Mh(w,p){var _;const E=(0,L.m9)(w),A=p;return ae(p.customData.operationType,E,"argument-error"),ae(null===(_=A.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),Po._fromError(E,A)}(w,p));else if(E){const A=ol(p),x=p;A&&(x.credential=A,x.tenantId=E.tenantId||void 0,x.email=E.email||void 0,x.phoneNumber=E.phoneNumber||void 0)}}(w,_),_}).then(_=>{const A=_.user;return{operationType:_.operationType,credential:Jh(_),additionalUserInfo:Cr(_),user:ys.getOrCreate(A)}})}function lc(w,p){return cc.apply(this,arguments)}function cc(){return(cc=(0,d.Z)(function*(w,p){const _=yield p;return{verificationId:_.verificationId,confirm:E=>Lr(w,_.confirm(E))}})).apply(this,arguments)}class Xh{constructor(p,_){this.resolver=_,this.auth=function Qh(w){return w.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Lr(O_(this.auth),this.resolver.resolveSignIn(p))}}class ys{constructor(p){this._delegate=p,this.multiFactor=function kl(w){const p=(0,L.m9)(w);return Bu.has(p)||Bu.set(p,Uu._fromUser(p)),Bu.get(p)}(p)}static getOrCreate(p){return ys.USER_MAP.has(p)||ys.USER_MAP.set(p,new ys(p)),ys.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var _=this;return(0,d.Z)(function*(){return Lr(_.auth,c_(_._delegate,p))})()}linkWithPhoneNumber(p,_){var E=this;return(0,d.Z)(function*(){return lc(E.auth,function Lp(w,p,_){return vn.apply(this,arguments)}(E._delegate,p,_))})()}linkWithPopup(p){var _=this;return(0,d.Z)(function*(){return Lr(_.auth,function dd(w,p,_){return ql.apply(this,arguments)}(_._delegate,p,Ji))})()}linkWithRedirect(p){var _=this;return(0,d.Z)(function*(){return yield Kh(sr(_.auth)),Qr(_._delegate,p,Ji)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var _=this;return(0,d.Z)(function*(){return Lr(_.auth,Jn(_._delegate,p))})()}reauthenticateWithPhoneNumber(p,_){return lc(this.auth,function gt(w,p,_){return ki.apply(this,arguments)}(this._delegate,p,_))}reauthenticateWithPopup(p){return Lr(this.auth,function cd(w,p,_){return za.apply(this,arguments)}(this._delegate,p,Ji))}reauthenticateWithRedirect(p){var _=this;return(0,d.Z)(function*(){return yield Kh(sr(_.auth)),ca(_._delegate,p,Ji)})()}sendEmailVerification(p){return function Nl(w,p){return Lu.apply(this,arguments)}(this._delegate,p)}unlink(p){var _=this;return(0,d.Z)(function*(){return yield function l_(w,p){return Fs.apply(this,arguments)}(_._delegate,p),_})()}updateEmail(p){return function Mp(w,p){return Sh((0,L.m9)(w),p,null)}(this._delegate,p)}updatePassword(p){return function hs(w,p){return Sh((0,L.m9)(w),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function Bh(w,p){return Hh.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function p_(w,p){return La.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,_){return function Yc(w,p,_){return Ml.apply(this,arguments)}(this._delegate,p,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ys.USER_MAP=new WeakMap;const dc=ae;let Wp=(()=>{class w{constructor(_,E){if(this.app=_,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=_.options;dc(A,"invalid-api-key",{appName:_.name}),dc(A,"invalid-api-key",{appName:_.name});const x=typeof window<"u"?Ji:void 0;this._delegate=E.initialize({options:{persistence:qw(A,_.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(nt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ys.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,E){!function Il(w,p,_){const E=sr(w);ae(E._canInitEmulator,E,"emulator-config-failed"),ae(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const A=!!_?.disableWarnings,x=ea(p),{host:G,port:ee}=function mh(w){const p=ea(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(p.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const x=A[1];return{host:x,port:_h(E.substr(x.length+1))}}{const[x,G]=E.split(":");return{host:x,port:_h(G)}}}(p);E.config.emulator={url:`${x}//${G}${null===ee?"":`:${ee}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:G,port:ee,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function o_(){function w(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}(this._delegate,_,E)}applyActionCode(_){return function Sl(w,p){return Wi.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return ku(this._delegate,_)}confirmPasswordReset(_,E){return function Dl(w,p,_){return or.apply(this,arguments)}(this._delegate,_,E)}createUserWithEmailAndPassword(_,E){var A=this;return(0,d.Z)(function*(){return Lr(A._delegate,function Ap(w,p,_){return Fu.apply(this,arguments)}(A._delegate,_,E))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Dh(w,p){return Kc.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function f_(w,p){const _=Yt.parseLink(p);return"EMAIL_SIGNIN"===_?.operation}(0,_)}getRedirectResult(){var _=this;return(0,d.Z)(function*(){dc(Vi(),_._delegate,"operation-not-supported-in-this-environment");const E=yield function Ka(w,p){return Jr.apply(this,arguments)}(_._delegate,Ji);return E?Lr(_._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function M_(w,p){sr(w)._logFramework(p)}(this._delegate,_)}onAuthStateChanged(_,E,A){const{next:x,error:G,complete:ee}=Zp(_,E,A);return this._delegate.onAuthStateChanged(x,G,ee)}onIdTokenChanged(_,E,A){const{next:x,error:G,complete:ee}=Zp(_,E,A);return this._delegate.onIdTokenChanged(x,G,ee)}sendSignInLinkToEmail(_,E){return function Al(w,p,_){return oa.apply(this,arguments)}(this._delegate,_,E)}sendPasswordResetEmail(_,E){return function h_(w,p,_){return ai.apply(this,arguments)}(this._delegate,_,E||void 0)}setPersistence(_){var E=this;return(0,d.Z)(function*(){let A;switch(function wd(w,p){sl(Object.values(Fr).includes(p),w,"invalid-persistence-type"),(0,L.b$)()?sl(p!==Fr.SESSION,w,"unsupported-persistence-type"):(0,L.UG)()?sl(p===Fr.NONE,w,"unsupported-persistence-type"):br()?sl(p===Fr.NONE||p===Fr.LOCAL&&(0,L.hl)(),w,"unsupported-persistence-type"):sl(p===Fr.NONE||ac(),w,"unsupported-persistence-type")}(E._delegate,_),_){case Fr.SESSION:A=Zi;break;case Fr.LOCAL:A=(yield un(zu)._isAvailable())?zu:Hn;break;case Fr.NONE:A=en;break;default:return ve("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Lr(this._delegate,function u_(w){return jc.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Lr(this._delegate,Ru(this._delegate,_))}signInWithCustomToken(_){return Lr(this._delegate,function ro(w,p){return ds.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,E){return Lr(this._delegate,function Wc(w,p,_){return Ru((0,L.m9)(w),bl.credential(p,_))}(this._delegate,_,E))}signInWithEmailLink(_,E){return Lr(this._delegate,function ui(w,p,_){return Np.apply(this,arguments)}(this._delegate,_,E))}signInWithPhoneNumber(_,E){return lc(this._delegate,function Zr(w,p,_){return Oi.apply(this,arguments)}(this._delegate,_,E))}signInWithPopup(_){var E=this;return(0,d.Z)(function*(){return dc(Vi(),E._delegate,"operation-not-supported-in-this-environment"),Lr(E._delegate,function ar(w,p,_){return gs.apply(this,arguments)}(E._delegate,_,Ji))})()}signInWithRedirect(_){var E=this;return(0,d.Z)(function*(){return dc(Vi(),E._delegate,"operation-not-supported-in-this-environment"),yield Kh(E._delegate),Kl(E._delegate,_,Ji)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function ka(w,p){return Fa.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return w.Persistence=Fr,w})();function Zp(w,p,_){let E=w;"function"!=typeof w&&({next:E,error:p,complete:_}=w);const A=E;return{next:G=>A(G&&ys.getOrCreate(G)),error:p,complete:_}}function qw(w,p){const _=function Yh(w,p){const _=uc();if(!_)return[];const E=$(P_,w,p);switch(_.getItem(E)){case Fr.NONE:return[en];case Fr.LOCAL:return[zu,Zi];case Fr.SESSION:return[Zi];default:return[]}}(w,p);if(typeof self<"u"&&!_.includes(zu)&&_.push(zu),typeof window<"u")for(const E of[Hn,Zi])_.includes(E)||_.push(E);return _.includes(en)||_.push(en),_}class k_{constructor(){this.providerId="phone",this._delegate=new oo(O_(J.Z.auth()))}static credential(p,_){return oo.credential(p,_)}verifyPhoneNumber(p,_){return this._delegate.verifyPhoneNumber(p,_)}unwrap(){return this._delegate}}k_.PHONE_SIGN_IN_METHOD=oo.PHONE_SIGN_IN_METHOD,k_.PROVIDER_ID=oo.PROVIDER_ID;const rb=ae;class Ww{constructor(p,_,E=J.Z.app()){var A;rb(null===(A=E.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new ud(p,_,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function L_(w){w.INTERNAL.registerComponent(new ye.wA("auth-compat",p=>{const _=p.getProvider("app-compat").getImmediate(),E=p.getProvider("auth");return new Wp(_,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:bl,FacebookAuthProvider:ra,GithubAuthProvider:Ir,GoogleAuthProvider:ia,OAuthProvider:qi,SAMLAuthProvider:Pa,PhoneAuthProvider:k_,PhoneMultiFactorGenerator:w_,RecaptchaVerifier:Ww,TwitterAuthProvider:to,Auth:Wp,AuthCredential:Xs,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),w.registerVersion("@firebase/auth-compat","0.4.2")}(J.Z)},5861:(ft,Ce,F)=>{function d(L,ne,oe,pe,ye,Fe,me){try{var j=L[Fe](me),z=j.value}catch(te){return void oe(te)}j.done?ne(z):Promise.resolve(z).then(pe,ye)}function J(L){return function(){var ne=this,oe=arguments;return new Promise(function(pe,ye){var Fe=L.apply(ne,oe);function me(z){d(Fe,pe,ye,me,j,"next",z)}function j(z){d(Fe,pe,ye,me,j,"throw",z)}me(void 0)})}}F.d(Ce,{Z:()=>J})},7582:(ft,Ce,F)=>{function ne(de,we){var be={};for(var Re in de)Object.prototype.hasOwnProperty.call(de,Re)&&we.indexOf(Re)<0&&(be[Re]=de[Re]);if(null!=de&&"function"==typeof Object.getOwnPropertySymbols){var Ze=0;for(Re=Object.getOwnPropertySymbols(de);Ze<Re.length;Ze++)we.indexOf(Re[Ze])<0&&Object.prototype.propertyIsEnumerable.call(de,Re[Ze])&&(be[Re[Ze]]=de[Re[Ze]])}return be}function te(de,we,be,Re){return new(be||(be=Promise))(function(je,Dt){function ot(mt){try{ut(Re.next(mt))}catch(Dn){Dt(Dn)}}function qt(mt){try{ut(Re.throw(mt))}catch(Dn){Dt(Dn)}}function ut(mt){mt.done?je(mt.value):function Ze(je){return je instanceof be?je:new be(function(Dt){Dt(je)})}(mt.value).then(ot,qt)}ut((Re=Re.apply(de,we||[])).next())})}function ie(de){return this instanceof ie?(this.v=de,this):new ie(de)}function ve(de,we,be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ze,Re=be.apply(de,we||[]),je=[];return Ze={},Dt("next"),Dt("throw"),Dt("return"),Ze[Symbol.asyncIterator]=function(){return this},Ze;function Dt(an){Re[an]&&(Ze[an]=function($n){return new Promise(function(rn,Ti){je.push([an,$n,rn,Ti])>1||ot(an,$n)})})}function ot(an,$n){try{!function qt(an){an.value instanceof ie?Promise.resolve(an.value.v).then(ut,mt):Dn(je[0][2],an)}(Re[an]($n))}catch(rn){Dn(je[0][3],rn)}}function ut(an){ot("next",an)}function mt(an){ot("throw",an)}function Dn(an,$n){an($n),je.shift(),je.length&&ot(je[0][0],je[0][1])}}function _e(de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var be,we=de[Symbol.asyncIterator];return we?we.call(de):(de=function Pe(de){var we="function"==typeof Symbol&&Symbol.iterator,be=we&&de[we],Re=0;if(be)return be.call(de);if(de&&"number"==typeof de.length)return{next:function(){return de&&Re>=de.length&&(de=void 0),{value:de&&de[Re++],done:!de}}};throw new TypeError(we?"Object is not iterable.":"Symbol.iterator is not defined.")}(de),be={},Re("next"),Re("throw"),Re("return"),be[Symbol.asyncIterator]=function(){return this},be);function Re(je){be[je]=de[je]&&function(Dt){return new Promise(function(ot,qt){!function Ze(je,Dt,ot,qt){Promise.resolve(qt).then(function(ut){je({value:ut,done:ot})},Dt)}(ot,qt,(Dt=de[je](Dt)).done,Dt.value)})}}}F.d(Ce,{FC:()=>ve,KL:()=>_e,_T:()=>ne,mG:()=>te,qq:()=>ie})}},ft=>{ft(ft.s=8420)}]);